"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1820],{11820:(y,u,n)=>{n.r(u),n.d(u,{FirstqModalPageModule:()=>T});var c=n(69808),g=n(34182),i=n(23349),h=n(94030),l=n(70655),t=n(29863),p=n(90849),m=n(91472);function f(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"ion-card",2),t.TgZ(2,"ion-grid"),t.TgZ(3,"ion-row",3),t.TgZ(4,"ion-col",4),t.TgZ(5,"input",5),t.NdJ("change",function(a){return t.CHM(e),t.oxw().fileChange(a)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"ion-row",6),t.TgZ(7,"ion-col",4),t.TgZ(8,"ion-button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteByStore()}),t._uU(9," Upload File "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(8),t.Q6J("disabled",!e.uploadedFiles)}}const v=[{path:"",component:(()=>{class s{constructor(e,o,a,d,Z){this.storage=e,this.loadingController=o,this.api=a,this.modalController=d,this.toast=Z,this.shortLink="",this.loading=!1,this.file=null,this.status="price",this.segment="xls",this.selectedItem={id:"",item_name:"",pay_price:"",perch_price:"",item_unit:"",item_desc:"",item_parcode:""},this.price={payval:0,perchval:0,type:"pay",status:"plus"}}ngOnInit(){this.getAppInfo()}fileChange(e){this.uploadedFiles=e.target.files[0]}getAppInfo(){this.storage.get("USER_INFO").then(e=>{e&&(this.user_info=e)}),this.storage.get("STORE_INFO").then(e=>{e&&(this.store_info=e)})}truncateItems(){this.presentLoadingWithOptions("uploading ..."),this.api.truncateItems().subscribe(e=>{"Post not delete"!=e.message?this.upload():this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0633\u064a\u0631\u0641\u0631")},e=>{this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0633\u064a\u0631\u0641\u0631")})}deleteByStore(){let o=(new Date).getFullYear().toString();this.presentLoadingWithOptions("uploading ..."),this.api.deleteFristq(this.store_info.id,o).subscribe(a=>{"Post not delete"!=a.message?this.upload():(this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0633\u064a\u0631\u0641\u0631","danger"),this.loadingController.dismiss())},a=>{this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0633\u064a\u0631\u0641\u0631","danger"),this.loadingController.dismiss()})}upload(){let e=new FormData;e.append("avatar",this.uploadedFiles),this.api.uploadFq(e).subscribe(o=>{this.loadingController.dismiss(),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success")},o=>{this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0633\u064a\u0631\u0641\u0631","danger"),this.loadingController.dismiss()})}presentLoadingWithOptions(e){return(0,l.mG)(this,void 0,void 0,function*(){const o=yield this.loadingController.create({spinner:"bubbles",mode:"ios",message:e,translucent:!0,backdropDismiss:!1});yield o.present(),yield o.onDidDismiss()})}onChange(e){this.file=e.target.files[0]}onUpload(){this.loading=!this.loading,this.api.upload2(this.file).subscribe(e=>{"object"==typeof e&&(this.shortLink=e.link,this.loading=!1)})}segmentChanged(e){}typeChange(e){}statusChange(e){}save(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss(this.selectedItem,this.status)})}updatePrice(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss(this.price,this.status)})}presentToast(e,o){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:e,duration:2e3,color:o,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}validate(){return""!=this.selectedItem.item_name&&0!=+this.selectedItem.perch_price&&0!=+this.selectedItem.pay_price||(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629","danger"),!1)}closeModal(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(p.K),t.Y36(i.HT),t.Y36(m.r),t.Y36(i.IN),t.Y36(i.yF))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-firstq-modal"]],decls:8,vars:1,consts:[["slot","start"],[4,"ngIf"],[1,"ion-margin-top"],[1,"ion-justify-content-center"],["size","6"],["type","file",3,"change"],[1,"ion-justify-content-center","ion-margin-top"],["expand","block","color","success",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"\u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0625\u0641\u062a\u062a\u0627\u062d\u064a\u0629"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"ion-content"),t.YNc(7,f,10,1,"div",1),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf","xls"==o.segment&&"price"==o.status))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.W2,c.O5,i.PM,i.jY,i.Nd,i.wI,i.YG],styles:[""]}),s})()}];let F=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[h.Bz.forChild(v)],h.Bz]}),s})(),T=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[c.ez,g.u5,i.Pc,F]]}),s})()}}]);