{"version":3,"file":"default-src_app_module_shared_shared_module_ts.js","mappings":"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","sources":["./src/app/component/action-popover/action-popover.component.ts","./src/app/component/enhanced-item-selector/enhanced-item-selector.component.ts","./src/app/component/export-buttons/export-buttons.component.ts","./src/app/component/invoice-journal-entry/invoice-journal-entry.component.ts","./src/app/component/invoice-price-config-dialog/invoice-price-config-dialog.component.ts","./src/app/component/item-selector/item-selector.component.ts","./src/app/component/item-selector/pipe.ts","./src/app/component/price-adjustment-dialog/price-adjustment-dialog.component.ts","./src/app/components/account-selector/account-selector.component.ts","./src/app/module/shared/shared.module.ts","./src/app/services/account-communication.service.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { PopoverController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-action-popover',\n  templateUrl: './action-popover.component.html',\n  styleUrls: ['./action-popover.component.scss'],\n})\nexport class ActionPopoverComponent  {\n\n constructor(private popoverController: PopoverController) { }\n\n\n\n  selectAction(action: string) {\n    this.popoverController.dismiss({\n      action: action\n    });\n  }\n\n  closePopover() {\n    this.popoverController.dismiss();\n  }\n}\n","import { Component, OnInit, OnDestroy, ViewChild, Input, Output, EventEmitter, ElementRef, HostListener, ChangeDetectorRef, Renderer2 } from '@angular/core';\nimport { ServicesService } from \"../../stockService/services.service\";\nimport { Storage } from '@ionic/storage';\nimport { AlertController, LoadingController, ToastController } from '@ionic/angular';\nimport { FilterPipe } from '../item-selector/pipe';\nimport { DatePipe } from '@angular/common';\nimport { NavigationExtras, Router } from '@angular/router';\n\n@Component({\n  selector: 'app-enhanced-item-selector',\n  templateUrl: './enhanced-item-selector.component.html',\n  styleUrls: ['./enhanced-item-selector.component.scss']\n})\nexport class EnhancedItemSelectorComponent implements OnInit, OnDestroy {\n  @ViewChild('searchInput', { static: false }) searchInput: ElementRef;\n  @ViewChild('inputWrapper', { static: false }) inputWrapper: ElementRef;\n  \n  // Input properties\n  @Input() placeholder: string = 'اختر الصنف';\n  @Input() searchLang: number = 0;\n  @Input() showQuantityDisplay: boolean = false;\n  @Input() parentPage: string = 'items-report';\n  \n  // Output events\n  @Output() itemSelected = new EventEmitter<any>();\n  @Output() refreshRequested = new EventEmitter<void>();\n  \n  // Dropdown state\n  showDropdown: boolean = false;\n  highlightedIndex: number = -1;\n  \n  // Component properties\n  searchTerm: string = \"\";\n  items: Array<any> = [];\n  loadingItems: boolean = false;\n  loadingQty: boolean = false;\n  qtyError: boolean = false;\n  qtyErrorMsg: string = \"\";\n  \n  // Store and user info\n  store_info: any;\n  user_info: any;\n  year: any;\n  \n  // Selected item\n  selectedItem: {\n    id: any,\n    pay_ref: any,\n    item_name: any,\n    pay_price: any,\n    perch_price: any,\n    item_unit: any,\n    item_desc: any,\n    parcode: any,\n    qty: any,\n    tot: any,\n    dateCreated: any,\n    availQty: any,\n    aliasEn: any,\n    tax: any,\n    imageUrl: any\n  };\n  \n  // Dropdown positioning\n  dropdownPosition = { top: '0px', left: '0px', width: '250px' };\n  \n  // Focus tracking\n  private componentHasFocus: boolean = false;\n  \n  // Portal dropdown element\n  private portalDropdownElement: HTMLElement | null = null;\n  \n  constructor(\n    private alertController: AlertController,\n    private router: Router, \n    private api: ServicesService,\n    private storage: Storage,\n    private toast: ToastController,\n    private loadingController: LoadingController,\n    private datePipe: DatePipe,\n    private cdr: ChangeDetectorRef,\n    private renderer: Renderer2\n  ) {\n    this.initializeSelectedItem();\n  }\n\n  ngOnInit() {\n    this.getAppInfo();\n    this.loadItemsFromBackend();\n  }\n\n  ngOnDestroy() {\n    // Cleanup portal dropdown\n    this.destroyPortalDropdown();\n  }\n\n  initializeSelectedItem() {\n    this.selectedItem = {\n      id: undefined,\n      dateCreated: \"\",\n      pay_ref: \"\",\n      item_desc: \"\",\n      item_name: \"\",\n      item_unit: \"\",\n      parcode: 0,\n      pay_price: 0,\n      perch_price: 0,\n      qty: 0,\n      tot: 0,\n      availQty: 0,\n      aliasEn: \"\",\n      tax: 0,\n      imageUrl: \"\"\n    };\n  }\n\n  getAppInfo() {\n    this.storage.get('USER_INFO').then((response) => {\n      if (response) {\n        this.user_info = response;\n      }\n    });\n\n    this.storage.get('STORE_INFO').then((response) => {\n      if (response) {\n        this.store_info = response;\n        this.loadItemsFromBackend();\n      }\n    });\n\n    this.storage.get('year').then((response) => {\n      if (response) {\n        this.year = response;\n        this.loadItemsFromBackend();\n      }\n    });\n  }\n\n  loadItemsFromBackend() {\n    if (!this.store_info || !this.year) {\n      return;\n    }\n\n    console.log('Loading items from backend...');\n    this.loadingItems = true;\n    \n    this.api.getAllStockItemsWithouteCounts(this.store_info.id, this.year.id).subscribe(\n      data => {\n        console.log('Items loaded successfully:', data);\n        let res = data;\n        this.items = res['data'] || [];\n        this.loadingItems = false;\n        \n        // Store items locally for offline use\n        this.storage.set('itemsLocal', this.items).then(() => {\n          console.log('Items stored locally');\n        });\n      },\n      (err) => {\n        console.error('Error loading items:', err);\n        this.loadingItems = false;\n        this.loadItemsFromStorage();\n        this.presentToast('خطأ في تحميل الأصناف، تم التحميل من البيانات المحفوظة', 'warning');\n      },\n      () => {\n        this.loadingItems = false;\n      }\n    );\n  }\n\n  loadItemsFromStorage() {\n    this.storage.get('itemsLocal').then((response) => {\n      if (response) {\n        this.items = response;\n        console.log('Items loaded from storage:', this.items.length);\n      } else {\n        this.items = [];\n        this.presentToast('لا توجد أصناف محفوظة', 'warning');\n      }\n    });\n  }\n\n  // Create portal dropdown attached to document.body\n  createPortalDropdown() {\n    if (this.portalDropdownElement) {\n      this.destroyPortalDropdown();\n    }\n\n    const elementToUse = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n    if (!elementToUse) return;\n\n    const rect = elementToUse.getBoundingClientRect();\n    \n    // Create dropdown container\n    this.portalDropdownElement = this.renderer.createElement('div');\n    this.renderer.addClass(this.portalDropdownElement, 'portal-dropdown-container');\n    \n    // Apply positioning styles\n    this.renderer.setStyle(this.portalDropdownElement, 'position', 'fixed');\n    this.renderer.setStyle(this.portalDropdownElement, 'top', `${rect.bottom + 4}px`);\n    this.renderer.setStyle(this.portalDropdownElement, 'left', `${rect.left}px`);\n    this.renderer.setStyle(this.portalDropdownElement, 'width', `${rect.width}px`);\n    this.renderer.setStyle(this.portalDropdownElement, 'z-index', '2147483647');\n    this.renderer.setStyle(this.portalDropdownElement, 'background', 'white');\n    this.renderer.setStyle(this.portalDropdownElement, 'border', '1px solid #ccc');\n    this.renderer.setStyle(this.portalDropdownElement, 'border-radius', '8px');\n    this.renderer.setStyle(this.portalDropdownElement, 'box-shadow', '0 8px 24px rgba(0, 0, 0, 0.2)');\n    this.renderer.setStyle(this.portalDropdownElement, 'max-height', '300px');\n    this.renderer.setStyle(this.portalDropdownElement, 'overflow-y', 'auto');\n    this.renderer.setStyle(this.portalDropdownElement, 'min-width', '250px');\n    \n    // Create dropdown content\n    this.createDropdownContent();\n    \n    // Append to document body\n    this.renderer.appendChild(document.body, this.portalDropdownElement);\n    \n    console.log('Portal dropdown created at:', { top: rect.bottom + 4, left: rect.left, width: rect.width });\n  }\n\n  // Create dropdown content dynamically - OPTIMIZED VERSION\n  createDropdownContent() {\n    if (!this.portalDropdownElement) return;\n\n    const filteredItems = this.getFilteredItems();\n    \n    if (filteredItems.length === 0) {\n      // No results\n      const noResultsDiv = this.renderer.createElement('div');\n      this.renderer.setStyle(noResultsDiv, 'padding', '12px');\n      this.renderer.setStyle(noResultsDiv, 'text-align', 'center');\n      this.renderer.setStyle(noResultsDiv, 'color', '#666');\n      this.renderer.setStyle(noResultsDiv, 'font-style', 'italic');\n      \n      const noResultsText = this.renderer.createText('لا توجد نتائج مطابقة');\n      this.renderer.appendChild(noResultsDiv, noResultsText);\n      this.renderer.appendChild(this.portalDropdownElement, noResultsDiv);\n      return;\n    }\n\n    // Create items list - ONLY CREATE ONCE\n    filteredItems.forEach((item, index) => {\n      const itemDiv = this.renderer.createElement('div');\n      this.renderer.addClass(itemDiv, 'portal-dropdown-item');\n      this.renderer.setAttribute(itemDiv, 'data-index', index.toString());\n      \n      // Base styles\n      this.renderer.setStyle(itemDiv, 'padding', '12px');\n      this.renderer.setStyle(itemDiv, 'border-bottom', '1px solid #eee');\n      this.renderer.setStyle(itemDiv, 'cursor', 'pointer');\n      this.renderer.setStyle(itemDiv, 'direction', 'rtl');\n      this.renderer.setStyle(itemDiv, 'text-align', 'right');\n      this.renderer.setStyle(itemDiv, 'transition', 'background-color 0.2s ease');\n      \n      // Item name\n      const nameDiv = this.renderer.createElement('div');\n      this.renderer.setStyle(nameDiv, 'font-size', '14px');\n      this.renderer.setStyle(nameDiv, 'font-weight', '500');\n      this.renderer.setStyle(nameDiv, 'color', '#333');\n      this.renderer.setStyle(nameDiv, 'margin-bottom', '4px');\n      const nameText = this.renderer.createText(item.item_name);\n      this.renderer.appendChild(nameDiv, nameText);\n      this.renderer.appendChild(itemDiv, nameDiv);\n      \n      // Prices\n      const pricesDiv = this.renderer.createElement('div');\n      this.renderer.setStyle(pricesDiv, 'display', 'flex');\n      this.renderer.setStyle(pricesDiv, 'gap', '12px');\n      this.renderer.setStyle(pricesDiv, 'font-size', '11px');\n      \n      const salePrice = this.renderer.createElement('span');\n      this.renderer.setStyle(salePrice, 'color', '#10dc60');\n      this.renderer.setStyle(salePrice, 'font-weight', '600');\n      const salePriceText = this.renderer.createText(`بيع: ${item.pay_price}`);\n      this.renderer.appendChild(salePrice, salePriceText);\n      this.renderer.appendChild(pricesDiv, salePrice);\n      \n      const purchasePrice = this.renderer.createElement('span');\n      this.renderer.setStyle(purchasePrice, 'color', '#f04141');\n      this.renderer.setStyle(purchasePrice, 'font-weight', '600');\n      const purchasePriceText = this.renderer.createText(`شراء: ${item.perch_price}`);\n      this.renderer.appendChild(purchasePrice, purchasePriceText);\n      this.renderer.appendChild(pricesDiv, purchasePrice);\n      \n      this.renderer.appendChild(itemDiv, pricesDiv);\n      \n      // OPTIMIZED EVENT LISTENERS - NO RECREATING DROPDOWN\n      this.renderer.listen(itemDiv, 'mousedown', (event) => {\n        // Prevent input blur from hiding dropdown before click is processed\n        event.preventDefault();\n      });\n      \n      this.renderer.listen(itemDiv, 'click', (event) => {\n        console.log('Item clicked:', item.item_name);\n        event.stopPropagation();\n        this.componentHasFocus = true; // Keep focus to prevent blur hiding\n        this.selectItem(item);\n      });\n      \n      this.renderer.listen(itemDiv, 'mouseenter', () => {\n        this.componentHasFocus = true; // Maintain focus when hovering over dropdown\n        this.updateHighlighting(index); // EFFICIENT highlighting update\n      });\n      \n      this.renderer.appendChild(this.portalDropdownElement, itemDiv);\n    });\n    \n    // Apply initial highlighting\n    this.updateHighlighting(this.highlightedIndex);\n  }\n\n  // OPTIMIZED: Update highlighting without recreating dropdown\n  updateHighlighting(newHighlightedIndex: number) {\n    if (!this.portalDropdownElement) return;\n    \n    this.highlightedIndex = newHighlightedIndex;\n    \n    // Get all dropdown items\n    const items = this.portalDropdownElement.querySelectorAll('.portal-dropdown-item');\n    \n    // Update highlighting efficiently - only change styles, don't recreate\n    items.forEach((item, index) => {\n      const element = item as HTMLElement;\n      if (index === this.highlightedIndex) {\n        // Highlight this item\n        this.renderer.setStyle(element, 'background-color', 'rgba(74, 144, 226, 0.1)');\n        this.renderer.setStyle(element, 'border-left', '3px solid #4A90E2');\n      } else {\n        // Remove highlight from this item\n        this.renderer.removeStyle(element, 'background-color');\n        this.renderer.removeStyle(element, 'border-left');\n      }\n    });\n  }\n\n  // LEGACY: Keep for search term changes only\n  updatePortalDropdown() {\n    if (!this.portalDropdownElement) return;\n    \n    // Only recreate when search term changes (not for highlighting)\n    while (this.portalDropdownElement.firstChild) {\n      this.renderer.removeChild(this.portalDropdownElement, this.portalDropdownElement.firstChild);\n    }\n    \n    this.createDropdownContent();\n  }\n\n  // Destroy portal dropdown\n  destroyPortalDropdown() {\n    if (this.portalDropdownElement) {\n      this.renderer.removeChild(document.body, this.portalDropdownElement);\n      this.portalDropdownElement = null;\n    }\n  }\n\n  // Calculate dropdown position - LEGACY METHOD (kept for compatibility)\n  calculateDropdownPosition() {\n    // This method is kept for compatibility but not used with portal approach\n    const elementToUse = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n    \n    if (elementToUse) {\n      const rect = elementToUse.getBoundingClientRect();\n      \n      this.dropdownPosition = {\n        top: (rect.bottom + 4) + 'px',\n        left: rect.left + 'px',\n        width: rect.width + 'px'\n      };\n    }\n  }\n\n  // Get filtered items for display\n  getFilteredItems() {\n    if (!this.items || this.items.length === 0) {\n      return [];\n    }\n\n    if (this.searchTerm && this.searchTerm.trim() !== '') {\n      const searchValue = this.searchTerm.toLowerCase();\n      return this.items.filter(item => \n        item.item_name.toLowerCase().includes(searchValue) ||\n        (item.item_desc && item.item_desc.toLowerCase().includes(searchValue)) ||\n        (item.aliasEn && item.aliasEn.toLowerCase().includes(searchValue))\n      );\n    }\n    \n    return this.items;\n  }\n\n  // Handle input focus - show dropdown\n  onInputFocus() {\n    console.log('Input focused, items:', this.items.length);\n    this.componentHasFocus = true;\n    this.highlightedIndex = -1;\n    \n    if (this.items.length > 0) {\n      setTimeout(() => {\n        this.showDropdown = true;\n        this.createPortalDropdown();\n      }, 10);\n    } else {\n      console.warn('No items available to show in dropdown');\n    }\n  }\n\n  // Handle input blur - hide dropdown with delay\n  onInputBlur() {\n    console.log('Input blur triggered');\n    this.componentHasFocus = false;\n    \n    setTimeout(() => {\n      if (!this.componentHasFocus) {\n        console.log('Hiding dropdown after blur delay');\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n        this.destroyPortalDropdown();\n      }\n    }, 300); // Increased delay to allow click events to register\n  }\n\n  // Listen for scroll events to reposition dropdown\n  @HostListener('window:scroll', ['$event'])\n  onWindowScroll() {\n    if (this.showDropdown && this.portalDropdownElement) {\n      this.createPortalDropdown(); // Recreate portal with updated position\n    }\n  }\n\n  // Listen for resize events to reposition dropdown\n  @HostListener('window:resize', ['$event'])\n  onWindowResize() {\n    if (this.showDropdown && this.portalDropdownElement) {\n      this.createPortalDropdown(); // Recreate portal with updated position\n    }\n  }\n\n  // Listen for clicks outside the component to hide dropdowns\n  @HostListener('document:click', ['$event'])\n  onDocumentClick(event: Event) {\n    const target = event.target as HTMLElement;\n    if (!target) return;\n    \n    const componentElement = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n    \n    let isClickInsideComponent = false;\n    let isClickInsidePortalDropdown = false;\n    \n    if (componentElement) {\n      isClickInsideComponent = componentElement.contains(target) || \n                              target.closest('.item-selector-wrapper') !== null;\n    }\n    \n    // Check if click is inside portal dropdown\n    if (this.portalDropdownElement) {\n      isClickInsidePortalDropdown = this.portalDropdownElement.contains(target) ||\n                                   target.closest('.portal-dropdown-container') !== null ||\n                                   target.closest('.portal-dropdown-item') !== null;\n    }\n    \n    console.log('Document click detected:', {\n      isClickInsideComponent,\n      isClickInsidePortalDropdown,\n      targetClass: target.className,\n      showDropdown: this.showDropdown\n    });\n    \n    if (!isClickInsideComponent && !isClickInsidePortalDropdown) {\n      if (this.showDropdown) {\n        console.log('Hiding dropdown due to outside click');\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n        this.componentHasFocus = false;\n        this.destroyPortalDropdown();\n      }\n    }\n  }\n\n  // Handle search input changes\n  onSearchInput(event: any) {\n    const searchValue = event.target.value || event.detail.value;\n    this.searchTerm = searchValue || '';\n    \n    console.log('Search term changed to:', this.searchTerm);\n    \n    if (this.searchTerm.length === 0) {\n      console.log('Input field cleared - resetting selection');\n      this.resetSelection();\n    }\n    \n    // Reset highlighting when search changes\n    this.highlightedIndex = -1;\n    \n    if (this.searchTerm.length > 0 || this.items.length > 0) {\n      if (!this.showDropdown) {\n        this.showDropdown = true;\n        this.createPortalDropdown();\n      } else if (this.portalDropdownElement) {\n        this.updatePortalDropdown(); // Update existing dropdown\n      }\n      console.log('Showing dropdown with', this.getFilteredItems().length, 'filtered items');\n    } else {\n      this.showDropdown = false;\n      this.destroyPortalDropdown();\n    }\n  }\n\n  // Handle clear button click\n  onInputClear(event: any) {\n    console.log('Clear button clicked');\n    this.searchTerm = '';\n    this.resetSelection();\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    this.destroyPortalDropdown();\n  }\n\n  // Handle model changes\n  onModelChange(newValue: string) {\n    console.log('Model changed to:', newValue);\n    this.searchTerm = newValue || '';\n    \n    if (!newValue || newValue.length === 0) {\n      console.log('Model change detected empty value - resetting component');\n      this.resetSelection();\n    }\n    \n    this.highlightedIndex = -1;\n    \n    if (this.searchTerm.length > 0 || this.getFilteredItems().length > 0) {\n      if (!this.showDropdown) {\n        this.showDropdown = true;\n        this.calculateDropdownPosition();\n      }\n    } else {\n      this.showDropdown = false;\n    }\n  }\n\n  // Reset selection\n  resetSelection() {\n    this.initializeSelectedItem();\n    this.searchTerm = '';\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    this.itemSelected.emit(null);\n    this.destroyPortalDropdown();\n    \n    // Clear the search input field\n    if (this.searchInput && this.searchInput.nativeElement) {\n      this.searchInput.nativeElement.value = '';\n    }\n    \n    this.cdr.detectChanges();\n  }\n\n  // Toggle dropdown visibility\n  toggleDropdown() {\n    console.log('Toggle dropdown clicked, items:', this.items.length);\n    if (this.items.length > 0) {\n      this.showDropdown = !this.showDropdown;\n      if (this.showDropdown) {\n        this.calculateDropdownPosition();\n        if (this.searchInput) {\n          setTimeout(() => {\n            this.searchInput.nativeElement.focus();\n          }, 100);\n        }\n      }\n      this.highlightedIndex = -1;\n    } else {\n      console.warn('No items loaded yet');\n    }\n  }\n\n  // Handle keyboard navigation - OPTIMIZED\n  onKeyDown(event: KeyboardEvent) {\n    if (!this.showDropdown || this.getFilteredItems().length === 0) {\n      if (event.key === 'ArrowDown' && this.getFilteredItems().length > 0) {\n        event.preventDefault();\n        this.showDropdown = true;\n        this.createPortalDropdown();\n        this.updateHighlighting(0);\n      }\n      return;\n    }\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        const newDownIndex = Math.min(this.highlightedIndex + 1, this.getFilteredItems().length - 1);\n        this.updateHighlighting(newDownIndex); // FAST highlighting update\n        this.scrollHighlightedItemIntoView();\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        const newUpIndex = Math.max(this.highlightedIndex - 1, -1);\n        this.updateHighlighting(newUpIndex); // FAST highlighting update\n        this.scrollHighlightedItemIntoView();\n        break;\n\n      case 'Enter':\n        event.preventDefault();\n        if (this.highlightedIndex >= 0 && this.highlightedIndex < this.getFilteredItems().length) {\n          this.selectItem(this.getFilteredItems()[this.highlightedIndex]);\n        }\n        break;\n\n      case 'Escape':\n        event.preventDefault();\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n        this.destroyPortalDropdown();\n        break;\n\n      case 'Tab':\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n        this.destroyPortalDropdown();\n        break;\n    }\n  }\n\n  scrollHighlightedItemIntoView() {\n    if (this.highlightedIndex >= 0 && this.portalDropdownElement) {\n      // Use direct query selector for efficiency\n      const highlightedItem = this.portalDropdownElement.querySelector(`[data-index=\"${this.highlightedIndex}\"]`) as HTMLElement;\n      \n      if (highlightedItem) {\n        const containerRect = this.portalDropdownElement.getBoundingClientRect();\n        const itemRect = highlightedItem.getBoundingClientRect();\n        \n        if (itemRect.bottom > containerRect.bottom) {\n          this.portalDropdownElement.scrollTop += (itemRect.bottom - containerRect.bottom + 10);\n        } else if (itemRect.top < containerRect.top) {\n          this.portalDropdownElement.scrollTop -= (containerRect.top - itemRect.top + 10);\n        }\n      }\n    }\n  }\n\n  // Select item\n  selectItem(item: any) {\n    console.log('✅ selectItem called with:', item.item_name);\n    \n    this.selectedItem = {\n      id: item.id,\n      dateCreated: item.dateCreated,\n      pay_ref: \"\",\n      item_desc: item.item_desc,\n      item_name: item.item_name,\n      item_unit: item.item_unit,\n      parcode: item.parcode,\n      pay_price: item.pay_price,\n      perch_price: item.perch_price,\n      qty: \"\",\n      tot: item.pay_price,\n      availQty: item.quantity || item.availQty,\n      aliasEn: item.aliasEn,\n      tax: item.tax || 0,\n      imageUrl: item.imageUrl || \"\"\n    };\n    \n    this.searchTerm = item.item_name;\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    this.componentHasFocus = false;\n    this.destroyPortalDropdown();\n    \n    console.log('✅ Item selection completed, emitting event');\n    \n    // Force change detection\n    this.cdr.detectChanges();\n    \n    // Update input value manually\n    if (this.searchInput && this.searchInput.nativeElement) {\n      setTimeout(() => {\n        const ionInput = this.searchInput.nativeElement;\n        ionInput.value = item.item_name;\n        \n        const inputEvent = new Event('input', { bubbles: true });\n        ionInput.dispatchEvent(inputEvent);\n      }, 10);\n    }\n    \n    this.itemSelected.emit(this.selectedItem);\n    console.log('✅ Item selected and emitted:', this.selectedItem.item_name);\n  }\n\n  // Refresh items\n  refreshItems() {\n    console.log('Refreshing items...');\n    this.loadItemsFromBackend();\n    this.refreshRequested.emit();\n  }\n\n  // Performance optimization\n  trackByItemId(index: number, item: any): any {\n    return item.id || index;\n  }\n\n  async presentToast(msg: string, color?: string) {\n    const toast = await this.toast.create({\n      message: msg,\n      duration: 2000,\n      color: color,\n      cssClass: 'cust_Toast',\n      mode: 'ios',\n      position: 'top'\n    });\n    toast.present();\n  }\n\n  // Additional methods to match the original item-selector functionality\n  refreshQuantity() {\n    // Placeholder for quantity refresh logic\n    console.log('Refresh quantity called');\n  }\n\n  viewSelectedItemReport() {\n    // Navigate to item report with selected item\n    if (this.selectedItem && this.selectedItem.id) {\n      const navigationExtras: NavigationExtras = {\n        queryParams: {\n          item: JSON.stringify(this.selectedItem)\n        }\n      };\n      this.router.navigate(['/items-report'], navigationExtras);\n    }\n  }\n\n  viewSelectedItemDetails() {\n    // Placeholder for viewing item details\n    console.log('View item details called for:', this.selectedItem);\n    // You can implement modal or navigation logic here\n  }\n}","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-export-buttons',\r\n  templateUrl: './export-buttons.component.html',\r\n  styleUrls: ['./export-buttons.component.scss']\r\n})\r\nexport class ExportButtonsComponent {\r\n  @Input() hasData: boolean = false;\r\n  @Input() isLoading: boolean = false;\r\n  @Input() disabled: boolean = false;\r\n  \r\n  @Output() exportPDF = new EventEmitter<void>();\r\n  @Output() exportExcel = new EventEmitter<void>();\r\n\r\n  onExportPDF(): void {\r\n    if (this.hasData && !this.isLoading && !this.disabled) {\r\n      this.exportPDF.emit();\r\n    }\r\n  }\r\n\r\n  onExportExcel(): void {\r\n    if (this.hasData && !this.isLoading && !this.disabled) {\r\n      this.exportExcel.emit();\r\n    }\r\n  }\r\n}","import { Component, Input, Output, EventEmitter, OnInit, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport { ServicesService } from \"../../stockService/services.service\";\nimport { AlertController, LoadingController, ToastController } from '@ionic/angular';\nimport { DatePipe } from '@angular/common';\nimport { Storage } from '@ionic/storage';\nimport * as momentObj from 'moment';\n\nexport interface InvoiceJournalData {\n  invoiceAmount: number;\n  customerAccount: any;\n  invoiceRef: string;\n  invoiceType: 'sales' | 'purchase';\n  store_info: any;\n  user_info: any;\n  year: any;\n  invoiceDate?: string;\n  totalAfterDiscount?: number;\n  customerBalance?: any;\n}\n\n@Component({\n  selector: 'app-invoice-journal-entry',\n  templateUrl: './invoice-journal-entry.component.html',\n  styleUrls: ['./invoice-journal-entry.component.scss']\n})\nexport class InvoiceJournalEntryComponent implements OnInit, AfterViewInit {\n  @Input() invoiceData: InvoiceJournalData;\n  @Output() journalSaved = new EventEmitter<boolean>();\n  @Output() journalCancelled = new EventEmitter<void>();\n\n  // ViewChild for focusing on amount input\n  @ViewChild('amountInput') amountInput: ElementRef;\n\n  // Component state\n  jType: string = \"2\"; // 1 = payment, 2 = receipt\n  radioVal: string = \"1\"; // 1 = cash, other = bank\n  pay: number = 0;\n  selectedBankAccount: any = null;\n  banksAccountArray: Array<any> = [];\n  \n  // Journal objects\n  journal: any = {};\n  payInvo: any = {};\n  jdetail_from: any = {};\n  jdetail_to: any = {};\n  jdetail_fromArr: Array<any> = [];\n  jdetail_toArr: Array<any> = [];\n\n  // Balance display\n  selectedAccountBalance: any = null;\n  sourceAccountBalance: any = null;\n  loadingAccountBalance = false;\n  loadingSourceBalance = false;\n\n  // Form validation\n  isFormValid(): boolean {\n    return !!(\n      this.jType && +this.jType > 0 &&\n      this.pay && +this.pay > 0 &&\n      this.isValidAmount() &&\n      this.journal.j_details && this.journal.j_details.trim() !== '' &&\n      this.journal.j_date &&\n      (this.radioVal === \"1\" || this.selectedBankAccount)\n    );\n  }\n\n  // Validate amount against invoice total\n  isValidAmount(): boolean {\n    const maxAmount = this.invoiceData?.totalAfterDiscount || this.invoiceData?.invoiceAmount || 0;\n    return this.pay <= maxAmount;\n  }\n\n  // Get validation error message\n  getAmountValidationError(): string {\n    const maxAmount = this.invoiceData?.totalAfterDiscount || this.invoiceData?.invoiceAmount || 0;\n    if (this.pay > maxAmount) {\n      return `المبلغ لا يمكن أن يتجاوز ${maxAmount.toLocaleString()}`;\n    }\n    return '';\n  }\n\n  constructor(\n    private api: ServicesService,\n    private alertController: AlertController,\n    private loadingController: LoadingController,\n    private toast: ToastController,\n    private datePipe: DatePipe,\n    private storage: Storage\n  ) {\n    this.initializeObjects();\n  }\n\n  ngOnInit() {\n    if (this.invoiceData) {\n      this.setupForInvoiceData();\n      this.getBanksAccount();\n    }\n  }\n\n  ngAfterViewInit() {\n    // Set focus on amount input after view is initialized\n    setTimeout(() => {\n      if (this.amountInput && this.amountInput.nativeElement) {\n        this.amountInput.nativeElement.setFocus();\n      }\n    }, 300);\n  }\n\n  private initializeObjects() {\n    this.selectedBankAccount = {\n      id: null, ac_id: null, sub_name: null, sub_type: null,\n      sub_code: null, sub_balance: null, store_id: null,\n      debit: null, credit: null, currentType: null\n    };\n    \n    this.payInvo = {\n      rec_id: undefined, rec_ref: 0, store_id: \"\", rec_date: \"\",\n      user_id: \"\", ac_id: 0, rec_detailes: \"\", rec_pay: 0,\n      rec_type: \"\", yearId: \"\"\n    };\n    \n    this.journal = {\n      j_id: undefined, j_ref: \"\", j_details: \"\", j_type: \"\",\n      invo_ref: \"\", j_desc: \"\", j_date: \"\", store_id: \"\",\n      user_id: \"\", j_pay: \"\", standard_details: \"\", yearId: \"\"\n    };\n  }\n\n  private setupForInvoiceData() {\n    if (!this.invoiceData) return;\n\n    // Auto-set journal type based on invoice type\n    this.jType = this.invoiceData.invoiceType === 'sales' ? \"2\" : \"1\"; // Sales = receipt, Purchase = payment\n    \n    // Auto-set amount to total after discount or invoice amount\n    this.pay = this.invoiceData.totalAfterDiscount || this.invoiceData.invoiceAmount;\n    \n    // Set up journal details with proper format\n    const actionText = this.invoiceData.invoiceType === 'sales' ? 'تحصيل' : 'دفع';\n    const invoiceTypeText = this.invoiceData.invoiceType === 'sales' ? 'مبيعات' : 'مشتريات';\n    const customerName = this.invoiceData.customerAccount?.sub_name || 'غير محدد';\n    const invoiceDate = this.invoiceData.invoiceDate || this.datePipe.transform(new Date(), 'dd-MM-yyyy');\n    const totalAmount = (this.invoiceData.totalAfterDiscount || this.invoiceData.invoiceAmount).toLocaleString();\n    \n    this.journal.j_details = `${actionText} فاتورة ${invoiceTypeText} ${customerName} بتاريخ ${invoiceDate} اجمالي ${totalAmount}`;\n    \n    // Set up basic data\n    this.payInvo.store_id = this.invoiceData.store_info.id;\n    this.payInvo.yearId = this.invoiceData.year.id;\n    this.payInvo.user_id = this.invoiceData.user_info.id;\n    \n    this.journal.store_id = this.invoiceData.store_info.id;\n    this.journal.yearId = this.invoiceData.year.id;\n    this.journal.user_id = this.invoiceData.user_info.id;\n    this.journal.invo_ref = this.invoiceData.invoiceRef;\n    \n    // Set current date\n    let d = new Date();\n    this.payInvo.rec_date = this.datePipe.transform(d, 'yyyy-MM-dd');\n    this.journal.j_date = this.datePipe.transform(d, 'yyyy-MM-dd');\n    \n    // Generate references\n    this.generateRandom();\n  }\n\n  private getBanksAccount() {\n    if (!this.invoiceData) return;\n    \n    this.api.getAllAccounts(this.invoiceData.store_info.id, this.invoiceData.year.id).subscribe(\n      data => {\n        let res = data;\n        if (res && res['data']) {\n          const allAccounts = res['data'];\n          this.banksAccountArray = allAccounts.filter(x => x.ac_id == 7); // Bank accounts\n          console.log('Banks accounts loaded:', this.banksAccountArray);\n        }\n      },\n      (err) => {\n        console.log('Error loading accounts:', err);\n      }\n    );\n  }\n\n  pickAccountBank(ev) {\n    console.log('Bank selection:', ev.target.value);\n    \n    if (ev.target.value == \"1\") {\n      // Cash selection\n      this.selectedBankAccount = {\n        id: 46, ac_id: 7, sub_name: \"الخزينة\",\n        sub_type: \"\", sub_code: \"\", store_id: this.invoiceData.store_info.id,\n        sub_balance: \"\", currentType: \"\", debit: \"\", credit: \"\"\n      };\n      this.loadSourceBalance(46);\n    } else {\n      // Bank selection\n      let fl = this.banksAccountArray.filter(x => x.id == ev.target.value);\n      if (fl.length > 0) {\n        this.selectedBankAccount = {\n          id: fl[0]['id'], ac_id: fl[0]['ac_id'],\n          sub_name: fl[0]['sub_name'], sub_type: fl[0]['sub_type'],\n          sub_code: fl[0]['sub_code'], store_id: fl[0]['store_id'],\n          sub_balance: fl[0]['sub_balance'], currentType: \"\",\n          debit: +fl[0]['debit'], credit: +fl[0]['credit']\n        };\n        this.loadSourceBalance(fl[0]['id']);\n      }\n    }\n  }\n\n  private generateRandom() {\n    let da = new Date();\n    let randomsNumber = da.getMonth().toString() + da.getDay().toString() + \n                       da.getHours().toString() + da.getMinutes().toString() + \n                       da.getSeconds().toString() + da.getMilliseconds().toString();\n                       \n    this.payInvo.rec_ref = this.invoiceData.store_info.store_ref + \"INV\" + randomsNumber;\n    this.journal.j_ref = this.invoiceData.store_info.store_ref + \"JO\" + randomsNumber;\n    this.journal.invo_ref = this.payInvo.rec_ref;\n  }\n\n  private prepare4save() {\n    this.payInvo.rec_date = this.journal.j_date;\n    let d: Date = this.payInvo.rec_date;\n    this.payInvo.rec_date = this.datePipe.transform(d, 'yyyy-MM-dd');\n    \n    let debit: any = 0;\n    let credit: any = 0;\n    \n    if (+this.jType == 1) {\n      debit = +this.pay;\n      this.journal.j_type = \"سند دفع\";\n    } else if (+this.jType == 2) {\n      credit = +this.pay;\n      this.journal.j_type = \"سند قبض\";\n    }\n\n    this.journal.j_pay = +this.pay;\n    let from: any = \"\";\n    let to: any = \"\";\n\n    // Prepare journal entries based on type\n    if (+this.jType == 1) { // Payment\n      if (+this.radioVal == 1) {\n        // Cash payment\n        this.jdetail_to = {\n          id: \"NULL\", j_id: this.journal.j_id, j_ref: this.journal.j_ref,\n          ac_id: 46, j_desc: \"\", j_type: \"سند دفع\",\n          credit: this.pay, debit: 0,\n          store_id: this.invoiceData.store_info.id,\n          yearId: this.invoiceData.year.id\n        };\n        to = 'الخزينة';\n      } else {\n        // Bank payment\n        this.jdetail_to = {\n          id: \"NULL\", j_id: this.journal.j_id, j_ref: this.journal.j_ref,\n          ac_id: this.selectedBankAccount.id, j_desc: \"\", j_type: \"سند دفع\",\n          credit: this.pay, debit: 0,\n          store_id: this.invoiceData.store_info.id,\n          yearId: this.invoiceData.year.id\n        };\n        to = this.selectedBankAccount.sub_name;\n      }\n      from = this.invoiceData.customerAccount.sub_name;\n      this.jdetail_toArr.push(this.jdetail_to);\n    } else if (+this.jType == 2) { // Receipt\n      if (+this.radioVal == 1) {\n        // Cash receipt\n        this.jdetail_from = {\n          id: \"NULL\", j_id: this.journal.j_id, j_ref: this.journal.j_ref,\n          ac_id: 46, j_desc: \"\", j_type: \"سند قبض\",\n          credit: 0, debit: this.pay,\n          store_id: this.invoiceData.store_info.id,\n          yearId: this.invoiceData.year.id\n        };\n        from = 'الخزينة';\n      } else {\n        // Bank receipt\n        this.jdetail_from = {\n          id: \"NULL\", j_id: this.journal.j_id, j_ref: this.journal.j_ref,\n          ac_id: this.selectedBankAccount.id, j_desc: \"\", j_type: \"سند قبض\",\n          credit: 0, debit: +this.pay,\n          store_id: this.invoiceData.store_info.id,\n          yearId: this.invoiceData.year.id\n        };\n        from = this.selectedBankAccount.sub_name;\n      }\n      to = this.invoiceData.customerAccount.sub_name;\n      this.jdetail_fromArr.push(this.jdetail_from);\n    }\n\n    // Add customer account entry\n    const customerEntry = {\n      id: \"NULL\", j_id: this.journal.j_id, j_ref: this.journal.j_ref,\n      ac_id: this.invoiceData.customerAccount.id,\n      j_desc: this.invoiceData.customerAccount.sub_type,\n      j_type: this.journal.j_type,\n      credit: +this.jType == 1 ? credit : 0,\n      debit: +this.jType == 1 ? 0 : debit,\n      store_id: this.invoiceData.store_info.id,\n      sub_code: this.invoiceData.customerAccount.sub_code,\n      sub_name: this.invoiceData.customerAccount.sub_name,\n      yearId: this.invoiceData.year.id\n    };\n\n    if (+this.jType == 1) {\n      this.jdetail_fromArr.push(customerEntry);\n    } else {\n      this.jdetail_toArr.push(customerEntry);\n    }\n\n    this.journal.standard_details = 'من حساب ' + from + ' الي حساب ' + to;\n  }\n\n  async save() {\n    if (!this.isFormValid()) {\n      if (!this.isValidAmount()) {\n        this.presentToast(this.getAmountValidationError(), 'danger');\n      } else {\n        this.presentToast('الرجاء إكمال جميع الحقول المطلوبة', 'danger');\n      }\n      return;\n    }\n\n    this.prepare4save();\n    await this.presentLoadingWithOptions('جاري حفظ البيانات...');\n    this.saveJournal();\n  }\n\n  private saveJournal() {\n    this.api.saveJournal(this.journal).subscribe(\n      data => {\n        if (data['message'] != 'Post Not Created') {\n          // Update journal entries with the returned ID\n          for (let i = 0; i < this.jdetail_fromArr.length; i++) {\n            this.jdetail_fromArr[i].j_id = data['message'];\n          }\n          for (let i = 0; i < this.jdetail_toArr.length; i++) {\n            this.jdetail_toArr[i].j_id = data['message'];\n          }\n          this.saveJournalDetails();\n        } else {\n          this.loadingController.dismiss();\n          this.presentToast('لم يتم حفظ البيانات، خطأ في الإتصال حاول مرة أخرى', 'danger');\n        }\n      },\n      (err) => {\n        this.loadingController.dismiss();\n        this.presentToast('لم يتم حفظ البيانات، خطأ في الإتصال حاول مرة أخرى', 'danger');\n      }\n    );\n  }\n\n  private saveJournalDetails() {\n    // Save both from and to journal details\n    if (this.jdetail_fromArr.length > 0) {\n      this.api.saveJournalFrom(this.jdetail_fromArr).subscribe(\n        data => {\n          if (data['message'] != 'Post Not Created') {\n            if (this.jdetail_toArr.length > 0) {\n              this.saveJournalTo();\n            } else {\n              this.handleSaveSuccess();\n            }\n          } else {\n            this.loadingController.dismiss();\n            this.presentToast('لم يتم حفظ البيانات، خطأ في الإتصال حاول مرة أخرى', 'danger');\n          }\n        },\n        (err) => {\n          this.loadingController.dismiss();\n          this.presentToast('لم يتم حفظ البيانات، خطأ في الإتصال حاول مرة أخرى', 'danger');\n        }\n      );\n    } else if (this.jdetail_toArr.length > 0) {\n      this.saveJournalTo();\n    }\n  }\n\n  private saveJournalTo() {\n    this.api.saveJournalTo(this.jdetail_toArr).subscribe(\n      data => {\n        if (data['message'] != 'Post Not Created') {\n          this.handleSaveSuccess();\n        } else {\n          this.loadingController.dismiss();\n          this.presentToast('لم يتم حفظ البيانات، خطأ في الإتصال حاول مرة أخرى', 'danger');\n        }\n      },\n      (err) => {\n        this.loadingController.dismiss();\n        this.presentToast('لم يتم حفظ البيانات، خطأ في الإتصال حاول مرة أخرى', 'danger');\n      }\n    );\n  }\n\n  private handleSaveSuccess() {\n    this.loadingController.dismiss();\n    this.presentToast('تم حفظ القيد بنجاح', 'success');\n    this.journalSaved.emit(true);\n  }\n\n  cancel() {\n    this.journalCancelled.emit();\n  }\n\n  // Get current amount for header display (reactive to user changes)\n  getCurrentAmount(): number {\n    return this.pay || 0;\n  }\n\n  // Handle amount input changes with validation\n  onAmountChange(event: any) {\n    const newAmount = event.target.value;\n    this.pay = parseFloat(newAmount) || 0;\n    // The header will automatically update due to getCurrentAmount() method\n  }\n\n  // Get transaction type text for header\n  getTransactionTypeText(): string {\n    return this.invoiceData?.invoiceType === 'sales' ? 'سند قبض' : 'سند دفع';\n  }\n\n  // Get customer name for header\n  getCustomerName(): string {\n    return this.invoiceData?.customerAccount?.sub_name || 'غير محدد';\n  }\n\n  // Get customer balance for header display\n  getCustomerBalance(): any {\n    return this.invoiceData?.customerBalance || null;\n  }\n\n  // Format customer balance for display\n  formatCustomerBalance(balance: any): string {\n    if (!balance) return '0.00';\n    const amount = Math.abs(parseFloat(balance.current_balance || 0)).toFixed(2);\n    const status = balance.status === 'debit' ? 'مدين' : 'دائن';\n    return `${amount} ${status}`;\n  }\n\n  // Get balance color for styling\n  getCustomerBalanceColor(balance: any): string {\n    if (!balance) return 'medium';\n    return balance.status === 'debit' ? 'success' : 'danger';\n  }\n\n  // Load balance for source account\n  loadSourceBalance(accountId: any) {\n    if (!accountId || !this.invoiceData) return;\n\n    this.loadingSourceBalance = true;\n    this.sourceAccountBalance = null;\n\n    this.api.getAccountBalance(accountId, this.invoiceData.store_info.id, this.invoiceData.year.id).subscribe(\n      (response) => {\n        this.loadingSourceBalance = false;\n        if (response.success) {\n          this.sourceAccountBalance = response.data;\n        }\n      },\n      (error) => {\n        this.loadingSourceBalance = false;\n        this.sourceAccountBalance = null;\n      }\n    );\n  }\n\n  // Format balance for display\n  formatBalance(balance: any): string {\n    if (!balance) return '0.00';\n    const amount = parseFloat(balance.current_balance || 0).toFixed(2);\n    const type = balance.balance_type === 'debit' ? 'مدين' : 'دائن';\n    return `${amount} ${type}`;\n  }\n\n  // Get balance color for styling\n  getBalanceColor(balance: any): string {\n    if (!balance) return 'medium';\n    return balance.balance_type === 'debit' ? 'success' : 'danger';\n  }\n\n  async presentToast(msg: string, color?: string) {\n    const toast = await this.toast.create({\n      message: msg,\n      duration: 2000,\n      color: color,\n      cssClass: 'cust_Toast',\n      mode: 'ios',\n      position: 'top'\n    });\n    toast.present();\n  }\n\n  async presentLoadingWithOptions(msg?: string) {\n    const loading = await this.loadingController.create({\n      spinner: 'bubbles',\n      mode: 'ios',\n      message: msg,\n      translucent: true,\n      backdropDismiss: false\n    });\n    await loading.present();\n  }\n}","import { Component, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-invoice-price-config-dialog',\n  templateUrl: './invoice-price-config-dialog.component.html',\n  styleUrls: ['./invoice-price-config-dialog.component.scss']\n})\nexport class InvoicePriceConfigDialogComponent implements OnInit {\n  @Input() itemList: any[] = [];\n  @Input() invoiceType: 'sales' | 'purchase' = 'sales';\n  @Input() context: 'sales-record' | 'purchase-record' | 'default' = 'default';\n  \n  // Price configuration options\n  salesPriceOption: 'keep_original' | 'use_perch_price' = 'use_perch_price';\n  purchasePriceOption: 'keep_original' | 'set_custom' | 'pay_price_as_perch_price' | 'keep_pay_price' = 'pay_price_as_perch_price';\n  purchaseSourcePrice: 'pay_price' | 'perch_price' = 'perch_price';\n  customPerchPrice: number = 0;\n  \n  // Preview data\n  previewItems: any[] = [];\n  \n  constructor(private modalController: ModalController) { }\n\n  ngOnInit() {\n    // Ensure itemList is an array\n    if (!this.itemList || !Array.isArray(this.itemList)) {\n      this.itemList = [];\n    }\n    \n    // Initialize preview items\n    this.initializePreviewItems();\n    this.updatePreview();\n  }\n\n  initializePreviewItems() {\n    this.previewItems = this.itemList.map(item => ({\n      ...item,\n      original_pay_price: parseFloat(item.pay_price) || 0,\n      original_perch_price: parseFloat(item.perch_price) || 0,\n      new_pay_price: parseFloat(item.pay_price) || 0,\n      new_perch_price: parseFloat(item.perch_price) || 0,\n      quantity: parseFloat(item.quantity) || 0\n    }));\n  }\n\n  onSalesPriceOptionChange() {\n    this.updatePreview();\n  }\n\n  onPurchasePriceOptionChange() {\n    this.updatePreview();\n  }\n\n  onPurchaseSourcePriceChange() {\n    this.updatePreview();\n  }\n\n  onCustomPerchPriceChange() {\n    this.updatePreview();\n  }\n\n  updatePreview() {\n    if (this.invoiceType === 'sales') {\n      this.updateSalesPreview();\n    } else {\n      this.updatePurchasePreview();\n    }\n  }\n\n  updateSalesPreview() {\n    this.previewItems = this.previewItems.map(item => {\n      let newPayPrice = item.original_pay_price;\n      \n      if (this.salesPriceOption === 'use_perch_price') {\n        // Use perch_price as pay_price for sales\n        newPayPrice = item.original_perch_price;\n      }\n      \n      return {\n        ...item,\n        new_pay_price: newPayPrice,\n        new_perch_price: item.original_perch_price // Keep perch_price unchanged\n      };\n    });\n  }\n\n  updatePurchasePreview() {\n    this.previewItems = this.previewItems.map(item => {\n      let newPerchPrice = item.original_perch_price;\n      let newPayPrice = item.original_pay_price;\n      \n      if (this.purchasePriceOption === 'set_custom') {\n        if (this.customPerchPrice > 0) {\n          newPerchPrice = this.customPerchPrice;\n        }\n        \n        // Choose which price to copy from old invoice\n        if (this.purchaseSourcePrice === 'pay_price') {\n          newPayPrice = item.original_pay_price;\n        } else {\n          newPayPrice = item.original_perch_price;\n        }\n      } else if (this.purchasePriceOption === 'pay_price_as_perch_price') {\n        // Default option: Set current pay_price as perch_price in the copied invoice\n        newPerchPrice = item.original_pay_price;\n        newPayPrice = item.original_pay_price; // Keep the same for pay_price too\n      } else if (this.purchasePriceOption === 'keep_pay_price') {\n        // Second option: Use current pay_price in copied invoice\n        newPerchPrice = item.original_perch_price; // Keep original perch_price\n        newPayPrice = item.original_pay_price; // Keep original pay_price\n      }\n      \n      return {\n        ...item,\n        new_pay_price: newPayPrice,\n        new_perch_price: newPerchPrice\n      };\n    });\n  }\n\n  async applyConfiguration() {\n    // Return configured items based on invoice type\n    const configuredItems = this.previewItems.map(item => {\n      if (this.invoiceType === 'sales') {\n        return {\n          ...item,\n          pay_price: item.new_pay_price,\n          perch_price: item.new_perch_price\n        };\n      } else {\n        return {\n          ...item,\n          pay_price: item.new_pay_price,\n          perch_price: item.new_perch_price\n        };\n      }\n    });\n    \n    await this.modalController.dismiss(configuredItems);\n  }\n\n  async cancel() {\n    await this.modalController.dismiss();\n  }\n\n  // Helper methods for template\n  getTotalOriginal(): number {\n    return this.previewItems.reduce((total, item) => {\n      const price = this.invoiceType === 'sales' ? item.original_pay_price : item.original_perch_price;\n      const qty = item.quantity || 0;\n      return total + (price * qty);\n    }, 0);\n  }\n\n  getTotalNew(): number {\n    return this.previewItems.reduce((total, item) => {\n      const price = this.invoiceType === 'sales' ? item.new_pay_price : item.new_perch_price;\n      const qty = item.quantity || 0;\n      return total + (price * qty);\n    }, 0);\n  }\n\n  getTotalDifference(): number {\n    return this.getTotalNew() - this.getTotalOriginal();\n  }\n\n  getItemOriginalPrice(item: any): number {\n    return this.invoiceType === 'sales' ? item.original_pay_price : item.original_perch_price;\n  }\n\n  getItemNewPrice(item: any): number {\n    return this.invoiceType === 'sales' ? item.new_pay_price : item.new_perch_price;\n  }\n\n  getItemPriceDifference(item: any): number {\n    return this.getItemNewPrice(item) - this.getItemOriginalPrice(item);\n  }\n\n  hasChanges(): boolean {\n    // Always show preview\n    return true;\n  }\n}","import { Component, OnInit, OnDestroy, ViewChild, Input, Output, EventEmitter, ElementRef, HostListener, ChangeDetectorRef } from '@angular/core';\nimport { ServicesService } from \"../../stockService/services.service\";\nimport { Storage } from '@ionic/storage';\nimport { AlertController, LoadingController, ToastController } from '@ionic/angular';\nimport { FilterPipe } from './pipe';\nimport { ModalController } from '@ionic/angular';\nimport { ItemModalPage } from '../../item-modal/item-modal.page';\nimport { DatePipe } from '@angular/common';\nimport { NavigationExtras, Router } from '@angular/router';\n\n@Component({\n  selector: 'app-item-selector',\n  templateUrl: './item-selector.component.html',\n  styleUrls: ['./item-selector.component.scss'],\n})\nexport class ItemSelectorComponent implements OnInit {\n  @ViewChild('searchInput', { static: false }) searchInput: ElementRef;\n  @ViewChild('inputWrapper', { static: false }) inputWrapper: ElementRef;\n  @ViewChild('qtyId') qtyId;\n  \n  // Dropdown state\n  showDropdown: boolean = false;\n  highlightedIndex: number = -1;\n  loadingQty: boolean = false;\n  updateSuccess: boolean = false;\n  \n  // Legacy compatibility properties (for remaining old code)\n  selectedIndex: number = -1;\n  isOpen: boolean = false;\n  popoverSize: any = {};\n  triggerElement: any;\n  @ViewChild('popover') popover: any;\n  @ViewChild('popInput') popInput: any;\n  @Input() items: Array<any> = [];\n  @Input() loadingItems: boolean = false;\n  @Input() searchLang: number = 0;\n  @Input() store_info: any;\n  @Input() year: any;\n  @Input() payRef: string = '';\n  @Input() showQuantityInput: boolean = true;\n  @Input() showPriceInput: boolean = true;\n  @Input() showPerchPriceInput: boolean = true;\n  @Input() placeholder: string = 'اختر الصنف';\n\n  \n  \n  \n  \n  // Dropdown positioning\n  dropdownPosition = { top: '0px', left: '0px', width: '250px' };\n  \n  // Price update properties\n  @Input() enablePriceUpdateConfirmation: boolean = true;\n  private originalPayPrice: number = 0;\n  private originalPerchPrice: number = 0;\n  private pricesChanged: boolean = false;\n  @Output() itemSelected = new EventEmitter<any>();\n  @Output() itemAdded = new EventEmitter<any>();\n  @Output() refreshItems = new EventEmitter<void>();\n  \n  // Component properties\n  @Input() parentPage: string = '';\n  private payPriceInputElement: HTMLElement | null = null;\n  showQtyWarning: boolean = false;\n  searchTerm: string = \"\";\n  availQty: number = 0;\n  \n  // Focus tracking\n  private componentHasFocus: boolean = false;\n  \n  // Quantity calculation properties\n  payTotQty: number = 0;\n  perchTotQty: number = 0;\n  firstQty: number = 0;\n  qtyReal: number = 0;\n  \n  // Error handling\n  qtyError: boolean = false;\n  qtyErrorMsg: string = '';\n\n  selectedItem: {\n    id: any,\n    pay_ref: any,\n    item_name: any,\n    pay_price: any,\n    perch_price: any,\n    item_unit: any,\n    item_desc: any,\n    parcode: any,\n    qty: any,\n    tot: any,\n    dateCreated: any,\n    availQty: any,\n    aliasEn: any, \n  };\n\n  \n\nuser_info: {id:any ,user_name:any ,store_id :any,full_name:any,password:any};\nfirstq: {id:any ,item_id:any , store_id:any , quantity :any ,\tfq_year:any ,\tpay_price:any ,\tperch_price:any ,item_name:any};\nlogHistoryArr: Array<any> = [];\ngetItemLoader: boolean = false;\n  constructor(\n    private alertController: AlertController,\n    private router: Router, \n    private api: ServicesService,\n    private storage: Storage,\n    private toast: ToastController,\n    private modalController: ModalController,\n    private loadingController: LoadingController,\n    private datePipe: DatePipe,\n    private cdr: ChangeDetectorRef\n  ) {\n    this.initializeSelectedItem();\n  }\n\n  ngOnInit() {\n    this.getAppInfo();\n  }\n\n  ngOnChanges() {\n    console.log('📊 ITEMS CHANGED - ngOnChanges triggered');\n    console.log('New items count:', this.items.length);\n  }\n\n\n\n  // Calculate dropdown position\n  calculateDropdownPosition() {\n    // Use the inner div wrapper for positioning (this is our reference element)\n    const elementToUse = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n    \n    if (elementToUse) {\n      const rect = elementToUse.getBoundingClientRect();\n      \n      this.dropdownPosition = {\n        top: (rect.bottom + 4) + 'px',\n        left: rect.left + 'px',\n        width: rect.width + 'px'\n      };\n      \n      console.log('Dropdown position calculated:', this.dropdownPosition);\n      console.log('Element used for positioning:', elementToUse.tagName, elementToUse.className);\n    } else {\n      console.warn('Could not find element for dropdown positioning');\n    }\n  }\n\n  \n  \n  // Reset all fields and selection when input is cleared\n  resetAllFieldsAndSelection() {\n    console.log('🔄 Starting resetAllFieldsAndSelection...');\n    \n    // Use the existing initialization method\n    this.initializeSelectedItem();\n    \n    // Reset additional states not covered in initializeSelectedItem\n    this.loadingQty = false;\n    this.updateSuccess = false;\n    \n    // Reset price change tracking\n    this.pricesChanged = false;\n    this.originalPayPrice = 0;\n    this.originalPerchPrice = 0;\n    \n    // Reset any warning states\n    this.showQtyWarning = false;\n    \n    // Clear search term completely\n    this.searchTerm = '';\n    \n    // Reset dropdown state\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    \n    // Force update of all input field displays\n    setTimeout(() => {\n      // Clear the search input field\n      if (this.searchInput && this.searchInput.nativeElement) {\n        console.log('📝 Clearing search input field');\n        this.searchInput.nativeElement.value = '';\n      }\n      \n      // Clear quantity input field if exists\n      if (this.qtyId && this.qtyId.nativeElement) {\n        console.log('📝 Clearing quantity input field');\n        this.qtyId.nativeElement.value = '0';\n      }\n      \n      // Force change detection to update all bindings\n      this.cdr.detectChanges();\n      console.log('🔄 Change detection forced');\n    }, 10);\n    \n    // Emit null selection to parent components\n    this.itemSelected.emit(null);\n    console.log('📤 Emitted null selection to parent');\n    \n    console.log('✅ resetAllFieldsAndSelection completed');\n    console.log('Final values - qty:', this.selectedItem.qty, 'pay_price:', this.selectedItem.pay_price, 'availQty:', this.availQty);\n  }\n  \n\n  applyFilters() {\n    // No category filtering - items are used directly in templates\n    // Search filtering is handled by the getFilteredItems method\n  }\n\n  // Get filtered items for display (search filtering only)\n  getFilteredItems() {\n    if (!this.items || this.items.length === 0) {\n      return [];\n    }\n\n    // Apply search filter if search term exists\n    if (this.searchTerm && this.searchTerm.trim() !== '') {\n      const searchValue = this.searchTerm.toLowerCase();\n      return this.items.filter(item => \n        item.item_name.toLowerCase().includes(searchValue) ||\n        (item.item_desc && item.item_desc.toLowerCase().includes(searchValue))\n      );\n    }\n    \n    // Return all items if no search term\n    return this.items;\n  }\n\n \n  getAppInfo() {\n    this.storage.get('USER_INFO').then((response) => {\n      if (response) {\n        this.user_info = response;\n        console.log(this.user_info);\n      }\n    });\n  }\n  // drop down \n\n  // Add this method to your component\nviewItemReport(item: any) {\n  if (!item || !item.id) {\n    this.presentToast('يرجى اختيار صنف أولاً', 'warning');\n    return;\n  }\n\n  let navigationExtras: NavigationExtras = {\n    queryParams: {\n      item: JSON.stringify(item)\n    }\n  };\n \n  this.router.navigate(['folder/items-report'], navigationExtras); \n}\n\n// Add this method to handle button click from popover\nviewSelectedItemReport() {\n  if (this.selectedItem && this.selectedItem.id) {\n    this.viewItemReport(this.selectedItem);\n  } else {\n    this.presentToast('يرجى اختيار صنف أولاً', 'warning');\n  }\n}\n\n  \n \n  async presentModal2() {\n    const modal = await this.modalController.create({\n      component: ItemModalPage,\n      componentProps: {\n        \"item\": this.selectedItem,\n        \"status\": 'save'\n      }\n    });\n    \n    modal.onDidDismiss().then((dataReturned) => {\n      if (dataReturned !== null) {\n        console.log(dataReturned);\n        this.doAfterDismiss(dataReturned);\n      }\n    });\n\n    return await modal.present(); \n  }\n\n\n  // Add this method to present item details modal\nasync presentModal(id?, status?) {\n  if (!id || id === 'null') {\n    this.presentToast('يرجى اختيار صنف أولاً', 'warning');\n    return;\n  }\n\n  let selectedItemForModal;\n  \n  if (status === 'edit') {\n    // Find item from items array\n    let fl = this.items.filter(x => x.id == id);\n    if (fl.length === 0) {\n      this.presentToast('لم يتم العثور على بيانات الصنف', 'danger');\n      return;\n    }\n    \n    selectedItemForModal = {\n      id: fl[0]['id'],\n      item_desc: fl[0]['item_desc'],\n      model: fl[0]['model'],\n      item_name: fl[0]['item_name'],\n      min_qty: fl[0]['min_qty'],\n      part_no: fl[0]['part_no'],\n      brand: fl[0]['brand'],\n      item_unit: fl[0]['item_unit'],\n      item_parcode: fl[0]['item_parcode'],\n      pay_price: fl[0]['pay_price'],\n      perch_price: fl[0]['perch_price'],\n      aliasEn: fl[0]['aliasEn']\n    };\n  }\n\n  const modal = await this.modalController.create({\n    component: ItemModalPage,\n    componentProps: {\n      \"item\": selectedItemForModal,\n      \"colSetting\":   {}, \n      \"filterArrayOrign\": this.items, \n      \"filterArray\": this.items,   \n      \"status\": status\n    }\n  });\n  \n  modal.onDidDismiss().then((dataReturned) => {\n    if (dataReturned !== null) {\n      console.log('Modal dismissed with data:', dataReturned);\n      this.doAfterDismiss(dataReturned);\n    }\n  });\n\n  return await modal.present(); \n}\n\n  \n\n  doAfterDismiss(data) {\n  if (data.role === 'edit') {\n    console.log('Item edited:', data.data);\n    // Handle item edit if needed\n   this.update(data.data);\n  } else if (data.role === 'save') {\n    console.log('Item saved:', data.data);\n      this.saveItem(data.data);  \n    // Handle item save if needed\n  }else if(data.role == 'dele') {\n        console.log('dele') \n         this.delete()   \n      }\n  // Add other handlers as needed\n}\n\n  handleItemUpdate(updatedData) {\n    console.log('Received updated data:', updatedData);\n    \n      const updatedItem = updatedData; \n      // Update the selected item if it matches\n      console.log('Updated Item:', updatedItem);\n      if (this.selectedItem.id === updatedItem.id) {\n        this.selectedItem = {\n          ...this.selectedItem,\n          item_name: updatedItem.item_name,\n          item_desc: updatedItem.item_desc,\n          pay_price: updatedItem.pay_price,\n          perch_price: updatedItem.perch_price \n        }; \n        // Update original prices\n        this.originalPayPrice = updatedItem.pay_price;\n        this.originalPerchPrice = updatedItem.perch_price;\n\n      }\n      \n      // Update items array\n      const itemIndex = this.items.findIndex(item => item.id === updatedItem.id);\n      if (itemIndex !== -1) {\n        this.items[itemIndex] = { ...this.items[itemIndex], ...updatedItem };\n      }\n      \n      // Update search results\n      const searchIndex = this.items.findIndex(item => item.id === updatedItem.id);\n      if (searchIndex !== -1) {\n        this.items[searchIndex] = { ...this.items[searchIndex], ...updatedItem };\n      }\n      \n      this.presentToast('تم تحديث بيانات الصنف', 'success');\n    \n  }\n\n update(mdata){ \n       this.presentLoadingWithOptions('جاري تعديل البيانات ...')\n       this.api.updateItem(mdata[0]).subscribe(data => {\n        console.log(data)\n       if (data['message'] != 'Post Not Updated') {\n        this.presentToast('تم التعديل بنجاح' , 'success')\n        this.handleItemUpdate(mdata[0]); \n       }else{\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n       }\n      \n     }, (err) => {\n       //console.log(err);\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n     },() => {\n      this.loadingController.dismiss()\n    }) \n    }\n\ndelete(){ \n  this.presentLoadingWithOptions('جاري حذف البيانات ...')\n this.api.deleteItems(this.selectedItem.id).subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Deleted') {\n    this.presentToast('تم الحذف بنجاح' , 'success')\n  \n   //delete selected_ item  from items array\n    const itemIndex = this.items.findIndex(item => item.id === this.selectedItem.id);\n    if (itemIndex !== -1) {\n      this.items.splice(itemIndex, 1);\n    }\n    //delete selected_ item  from searchResult array\n    const searchIndex = this.items.findIndex(item => item.id === this.selectedItem.id);\n    if (searchIndex !== -1)\n    {\n      this.items.splice(searchIndex, 1);\n    }\n      this.initializeSelectedItem();\n    //reset selected item object  n \n   }else{\n    this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n   }\n  \n },(err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   \n  },() => {\n    this.loadingController.dismiss()\n  }) \n}\n\n\n\n\nsaveItem(mdata) {\n  console.log('mdata[0]', mdata[0]);\n  this.presentLoadingWithOptions('جاري حفظ البيانات ...');\n  if ('imageUrl' in  mdata[0]) delete  mdata[0].imageUrl;\n  if ('tax' in  mdata[0]) delete  mdata[0].tax;\n  this.api.saveItem(mdata[0]).subscribe(data => {\n    console.log(data);\n    if (data['message'] != 'Post Not Created') {\n      let item_id = data['message'];\n      this.firstq = {\n        id: null,\n        item_id: item_id,\n        store_id: this.store_info.id,\n        quantity: mdata[1].quantity,\n        pay_price: mdata[0].pay_price,\n        perch_price: mdata[0].perch_price,\n        fq_year: this.year.id,\n        item_name: mdata[0].item_name\n      };\n      this.saveFierstQty(mdata);\n    } else {\n      this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري', 'danger');\n    }\n  }, (err) => {\n    console.log(err);\n    this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري', 'danger');\n    this.loadingController.dismiss();\n  });\n}\n\nasync saveFierstQty(meta) {  \n  this.api.saveFirstQty(this.firstq).subscribe(data => { \n    console.log(data); \n    // Update selected item from meta data \n    this.selectedItem = {\n      id: this.firstq.item_id,\n      dateCreated: \"\",\n      pay_ref: this.payRef,\n      item_desc: meta[0].item_desc,\n      item_name: meta[0].item_name,\n      item_unit: meta[0].item_unit,\n      parcode: meta[0].parcode,\n      pay_price: meta[0].pay_price,\n      perch_price: meta[0].perch_price,\n      qty: 1,\n      tot: meta[0].perch_price,\n      aliasEn: meta[0].aliasEn,\n      availQty: meta[1].quantity\n    };\n\n    this.setFocusOnInput('qtyId');\n    this.getItemLoader = true;\n     \n    // Push meta data to items array\n    this.items.push({\n      \"aliasEn\": meta[0].aliasEn,   \n      \"availQty\": meta[1].quantity,\n      \"brand\": meta[0].brand,\n      \"firstQuantity\": meta[1].quantity,\n      \"id\": this.firstq.item_id,\n      \"item_desc\": meta[0].item_desc,\n      \"item_name\": meta[0].item_name,\n      \"item_parcode\": meta[0].item_parcode,\n      \"item_unit\": meta[0].item_unit,\n      \"min_qty\": meta[0].min_qty,\n      \"model\": meta[0].model,\n      \"part_no\": meta[0].part_no,\n      \"pay_price\": meta[0].pay_price,\n      \"perch_price\": meta[0].perch_price,\n      \"qtyReal\": 0, \n      \"salesQuantity\": 0,\n      \"totalCount\": 0,\n      \"tswiaQuantity\": 0,\n      \"quantity\": meta[1].quantity,\n      \"tax\": meta[0].tax,\n      \"imageUrl\": meta[0].imageUrl\n    });\n         \n    // Items are now loaded directly without filtering\n    console.log('Updated items', this.items);\n    \n    // Store items locally\n    this.storage.set('itemsLocal', this.items).then((response) => {\n      this.getItemLoader = false;\n    });\n\n    this.presentToast('تم حفظ الصنف بنجاح', 'success');\n    \n  }, (err) => {\n    console.log(err);\n    this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري', 'danger');\n    this.loadingController.dismiss();\n  }, () => {\n    this.loadingController.dismiss();\n  });      \n}\n\n // Add this method to view selected item details\nviewSelectedItemDetails() {\n  if (this.selectedItem && this.selectedItem.id) {\n    this.presentModal(this.selectedItem.id, 'edit');\n  } else {\n    this.presentToast('يرجى اختيار صنف أولاً', 'warning');\n  }\n}\n\n\nasync presentLoadingWithOptions(msg?) {\n  const loading = await this.loadingController.create({\n    spinner: 'bubbles',\n    mode: 'ios',\n    duration: 5000,\n    message: msg,\n    translucent: true,\n    backdropDismiss: false\n  });\n  await loading.present();\n\n  const { role, data } = await loading.onDidDismiss();\n  console.log('Loading dismissed with role:', role);\n}\n\n\n\n\n  initializeSelectedItem() {\n    this.selectedItem = {\n      id: undefined,\n      dateCreated: \"\",\n      pay_ref: this.payRef,\n      item_desc: \"\",\n      item_name: \"\",\n      item_unit: \"\",\n      parcode: 0,\n      pay_price: 0,\n      perch_price: 0,\n      qty: 0,\n      tot: 0,\n      availQty: 0,\n      aliasEn: \"\"\n    };\n    \n    // Reset quantity calculation values\n    this.resetQuantityValues();\n  }\n\n  resetQuantityValues() {\n    this.availQty = 0;\n    this.payTotQty = 0;\n    this.perchTotQty = 0;\n    this.firstQty = 0;\n    this.qtyReal = 0;\n    this.qtyError = false;\n    this.qtyErrorMsg = '';\n  }\n\n// Removed duplicate implementation\n\n\n// Removed duplicate implementation\n\n// Removed duplicate implementation\n\n\n// Removed duplicate implementations\n\n/// Optimize search method\nsearchItem(ev) {\n  const searchValue = ev.target.value || ev.detail.value;\n  this.searchTerm = searchValue || '';\n  this.highlightedIndex = -1;\n}\n\n// Handle input focus - show dropdown\nonInputFocus() {\n  console.log('Input focused, items:', this.items.length);\n  this.componentHasFocus = true;\n  this.highlightedIndex = -1;\n  \n  // Show dropdown when focused if we have items\n  if (this.items.length > 0) {\n    // Calculate position before showing\n    setTimeout(() => {\n      this.calculateDropdownPosition();\n      this.showDropdown = true;\n    }, 10);\n    \n    // If no search term, show all items (limited for performance)\n    if (this.searchTerm.length === 0) {\n      // Show first 50 items if no search term\n      // All items are shown since no category filtering\n    } else {\n      // Items are used directly without filtering\n    }\n  } else {\n    console.warn('No items available to show in dropdown');\n  }\n}\n\n// Handle input blur - hide dropdown with delay\nonInputBlur() {\n  console.log('Input blur triggered');\n  this.componentHasFocus = false;\n  \n  // Reduced timeout since we now have document click listener as backup\n  setTimeout(() => {\n    // Only hide if component doesn't have focus anymore\n    if (!this.componentHasFocus) {\n      console.log('Hiding dropdown after blur delay');\n      this.showDropdown = false;\n      this.highlightedIndex = -1;\n    }\n  }, 150); // Delay to allow click events\n}\n\n// Listen for clicks outside the component to hide dropdowns\n@HostListener('document:click', ['$event'])\nonDocumentClick(event: Event) {\n  const target = event.target as HTMLElement;\n  if (!target) return;\n  \n  const componentElement = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n  \n  // Get all relevant dropdown elements\n  const dropdownElements = document.querySelectorAll('.dropdown-container, .category-dropdown-container');\n  \n  let isClickInsideComponent = false;\n  let isClickInsideDropdown = false;\n  \n  // Check if click is inside the component input area\n  if (componentElement) {\n    isClickInsideComponent = componentElement.contains(target) || \n                            target.closest('.item-selector-wrapper') !== null;\n  }\n  \n  // Check if click is inside any of the dropdown elements\n  dropdownElements.forEach(dropdown => {\n    if (dropdown.contains(target)) {\n      isClickInsideDropdown = true;\n    }\n  });\n  \n  // Only hide dropdowns if click is completely outside both component and dropdowns\n  if (!isClickInsideComponent && !isClickInsideDropdown) {\n    if (this.showDropdown) {\n      console.log('Hiding item dropdown due to outside click');\n      this.showDropdown = false;\n      this.highlightedIndex = -1;\n      this.componentHasFocus = false;\n    }\n    \n    // Category dropdown removed\n  }\n}\n\n// Listen for focus changes to hide dropdowns when focus moves away\n@HostListener('document:focusin', ['$event'])\nonDocumentFocusIn(event: Event) {\n  const target = event.target as HTMLElement;\n  if (!target) return;\n  \n  const componentElement = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n  \n  // Check if focus moved to an element outside the component\n  if (componentElement && !componentElement.contains(target)) {\n    // Check if focus is not on dropdown elements either\n    const dropdownElements = document.querySelectorAll('.dropdown-container, .category-dropdown-container');\n    let isFocusInsideDropdown = false;\n    \n    dropdownElements.forEach(dropdown => {\n      if (dropdown.contains(target)) {\n        isFocusInsideDropdown = true;\n      }\n    });\n    \n    // If focus is completely outside component and dropdowns, hide them\n    if (!isFocusInsideDropdown) {\n      if (this.showDropdown) {\n        console.log('Hiding item dropdown due to focus change');\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n      }\n      \n      // Category dropdown removed\n      \n      this.componentHasFocus = false;\n    }\n  } else if (componentElement && componentElement.contains(target)) {\n    // Focus is back on the component\n    this.componentHasFocus = true;\n  }\n}\n\n// Handle search input changes\nonSearchInput(event: any) {\n  const searchValue = event.target.value || event.detail.value;\n  this.searchTerm = searchValue || '';\n  \n  console.log('Search term changed to:', this.searchTerm);\n  \n  // Check if input field was cleared - reset all fields and selection\n  if (this.searchTerm.length === 0) {\n    console.log('Input field cleared - resetting all fields and selection');\n    this.resetAllFieldsAndSelection();\n  }\n  \n  this.highlightedIndex = -1; // Reset highlight when user types\n  \n  // Show dropdown when user starts typing or when there are items\n  if (this.searchTerm.length > 0 || this.items.length > 0) {\n    // Calculate position if dropdown is not already shown\n    if (!this.showDropdown) {\n      this.calculateDropdownPosition();\n    }\n    this.showDropdown = true;\n    console.log('Showing dropdown with', this.getFilteredItems().length, 'filtered items');\n  } else {\n    this.showDropdown = false;\n  }\n}\n\n// Handle clear button click (X button on ion-input)\nonInputClear(event: any) {\n  console.log('🔴 CLEAR BUTTON CLICKED - ionClear event fired!');\n  console.log('Event details:', event);\n  console.log('Current searchTerm before clear:', this.searchTerm);\n  console.log('Current selectedItem before clear:', this.selectedItem);\n  \n  // Immediately set search term to empty\n  this.searchTerm = '';\n  \n  // Direct reset without relying on synthetic events\n  this.resetAllFieldsAndSelection();\n  \n  // No filters to apply - all items shown\n  \n  // Hide dropdown\n  this.showDropdown = false;\n  this.highlightedIndex = -1;\n  \n  console.log('🟢 Clear button reset completed');\n  console.log('searchTerm after clear:', this.searchTerm);\n  console.log('selectedItem after clear:', this.selectedItem);\n}\n\n// Handle model changes (including clear button)\nonModelChange(newValue: string) {\n  console.log('🔄 Model changed from:', this.searchTerm, 'to:', newValue);\n  \n  // Update the search term\n  this.searchTerm = newValue || '';\n  \n  // If the new value is empty, reset everything\n  if (!newValue || newValue.length === 0) {\n    console.log('🧽 Model change detected empty value - resetting component');\n    this.resetAllFieldsAndSelection();\n  }\n  \n  this.highlightedIndex = -1;\n  \n  // Show/hide dropdown based on content\n  if (this.searchTerm.length > 0 || this.getFilteredItems().length > 0) {\n    if (!this.showDropdown) {\n      this.calculateDropdownPosition();\n    }\n    this.showDropdown = true;\n  } else {\n    this.showDropdown = false;\n  }\n}\n\n// Reset fields and show dropdown after adding item to list\nresetAfterAddingItem() {\n  console.log('📦 Item added - resetting fields and showing dropdown');\n  \n  // Use the comprehensive reset method\n  this.resetAllFieldsAndSelection();\n  \n  // Set pay_ref back since it should be preserved\n  this.selectedItem.pay_ref = this.payRef;\n  \n  // Show dropdown automatically to allow quick selection of next item\n  if (this.items.length > 0) {\n    setTimeout(() => {\n      // Calculate position and show dropdown\n      this.calculateDropdownPosition();\n      this.showDropdown = true;\n      \n      // Focus on the search input for immediate typing\n      if (this.searchInput && this.searchInput.nativeElement) {\n        this.searchInput.nativeElement.focus();\n      }\n      \n      console.log('📦 Dropdown shown after item added - ready for next selection');\n    }, 100); // Small delay to ensure DOM is updated\n  }\n}\n\n// Toggle dropdown visibility\ntoggleDropdown() {\n  console.log('Toggle dropdown clicked, items:', this.items.length);\n  if (this.items.length > 0) {\n    this.showDropdown = !this.showDropdown;\n    if (this.showDropdown) {\n      // Calculate position before showing\n      this.calculateDropdownPosition();\n      // Show all items when dropdown is opened\n      // Items loaded directly without filtering\n      // Focus the input field\n      if (this.searchInput) {\n        setTimeout(() => {\n          this.searchInput.nativeElement.focus();\n        }, 100);\n      }\n    }\n    this.highlightedIndex = -1;\n  } else {\n    console.warn('No items loaded yet');\n  }\n}\n\n// Add missing methods that are being called\npresentDropdown(event?: Event) {\n  this.highlightedIndex = -1;\n  this.clearSearch();\n  // Items loaded directly without filtering\n  \n  if (this.items.length > 0) {\n    this.calculateDropdownPosition();\n    this.showDropdown = true;\n    \n    // Focus input after short delay\n    setTimeout(() => {\n      if (this.searchInput) {\n        this.searchInput.nativeElement.focus();\n      }\n    }, 100);\n  }\n}\n\nclearSelection() {\n  this.selectedItem = {\n    id: undefined,\n    dateCreated: \"\",\n    pay_ref: this.payRef,\n    item_desc: \"\",\n    item_name: \"\",\n    item_unit: \"\",\n    parcode: 0,\n    pay_price: 0,\n    perch_price: 0,\n    qty: 0,\n    tot: 0,\n    availQty: 0,\n    aliasEn: \"\"\n  };\n  \n  this.searchTerm = '';\n  this.showDropdown = false;\n  this.highlightedIndex = -1;\n  // Items loaded directly without filtering\n  \n  this.itemSelected.emit(null);\n}\n\nonKeyDown(event: KeyboardEvent) {\n  if (!this.showDropdown || this.getFilteredItems().length === 0) {\n    if (event.key === 'ArrowDown' && this.getFilteredItems().length > 0) {\n      event.preventDefault();\n      this.showDropdown = true;\n      this.highlightedIndex = 0;\n      this.calculateDropdownPosition();\n    }\n    return;\n  }\n\n  switch (event.key) {\n    case 'ArrowDown':\n      event.preventDefault();\n      this.highlightedIndex = Math.min(this.highlightedIndex + 1, this.getFilteredItems().length - 1);\n      this.scrollHighlightedItemIntoView();\n      break;\n\n    case 'ArrowUp':\n      event.preventDefault();\n      this.highlightedIndex = Math.max(this.highlightedIndex - 1, -1);\n      this.scrollHighlightedItemIntoView();\n      break;\n\n    case 'Enter':\n      event.preventDefault();\n      if (this.highlightedIndex >= 0 && this.highlightedIndex < this.getFilteredItems().length) {\n        this.selectItem(this.getFilteredItems()[this.highlightedIndex]);\n      }\n      break;\n\n    case 'Escape':\n      event.preventDefault();\n      this.showDropdown = false;\n      this.highlightedIndex = -1;\n      break;\n\n    case 'Tab':\n      this.showDropdown = false;\n      this.highlightedIndex = -1;\n      break;\n  }\n}\n\nscrollHighlightedItemIntoView() {\n  if (this.highlightedIndex >= 0) {\n    setTimeout(() => {\n      const dropdownContainer = document.querySelector('.dropdown-container');\n      const highlightedItem = document.querySelector('.item-item.highlighted');\n      \n      if (dropdownContainer && highlightedItem) {\n        const containerRect = dropdownContainer.getBoundingClientRect();\n        const itemRect = highlightedItem.getBoundingClientRect();\n        \n        if (itemRect.bottom > containerRect.bottom) {\n          dropdownContainer.scrollTop += (itemRect.bottom - containerRect.bottom + 10);\n        } else if (itemRect.top < containerRect.top) {\n          dropdownContainer.scrollTop -= (containerRect.top - itemRect.top + 10);\n        }\n      }\n    }, 10);\n  }\n}\n\nselectItem(item: any) {\n  this.selectedItem = {\n    id: item.id,\n    dateCreated: item.dateCreated,\n    pay_ref: this.payRef,\n    item_desc: item.item_desc,\n    item_name: item.item_name,\n    item_unit: item.item_unit,\n    parcode: item.parcode,\n    pay_price: item.pay_price,\n    perch_price: item.perch_price,\n    qty: \"\",\n    tot: item.pay_price,\n    availQty: item.quantity,\n    aliasEn: item.aliasEn\n  };\n\n  // Store original prices for comparison\n  this.originalPayPrice = item.pay_price;\n  this.originalPerchPrice = item.perch_price;\n  this.pricesChanged = false;\n  \n  this.searchTerm = item.item_name;\n  this.showDropdown = false;\n  this.highlightedIndex = -1;\n  \n  // Force change detection\n  this.cdr.detectChanges();\n  \n  // Update input value manually\n  if (this.searchInput && this.searchInput.nativeElement) {\n    setTimeout(() => {\n      const ionInput = this.searchInput.nativeElement;\n      ionInput.value = item.item_name;\n      \n      const inputEvent = new Event('input', { bubbles: true });\n      ionInput.dispatchEvent(inputEvent);\n    }, 10);\n  }\n  \n  this.itemSelected.emit(this.selectedItem);\n  \n  // Load item quantity data\n  if (this.selectedItem.id) {\n    this.readItemByIdQty();\n    setTimeout(() => {\n      this.setFocusOnInput('qtyId');\n    }, 200);\n  }\n}\n\nreopenDropdown() {\n  setTimeout(() => {\n    this.highlightedIndex = -1;\n    this.clearSearch();\n    // Items loaded directly without filtering\n    this.presentDropdown();\n  }, 50);\n}\n\nclearSearch() {\n  this.searchTerm = '';\n  this.highlightedIndex = -1;\n}\n\n// Enhanced selection\nselectFromPop(item) {\n  this.selectedItem = {\n    id: item.id,\n    dateCreated: item.dateCreated,\n    pay_ref: this.payRef,\n    item_desc: item.item_desc,\n    item_name: item.item_name,\n    item_unit: item.item_unit,\n    parcode: item.parcode,\n    pay_price: item.pay_price,\n    perch_price: item.perch_price,\n    qty: \"\",\n    tot: item.pay_price,\n    availQty: item.quantity,\n    aliasEn: item.aliasEn\n     \n  };\n\n  // Store original prices for comparison\n  this.originalPayPrice = item.pay_price;\n  this.originalPerchPrice = item.perch_price;\n  this.pricesChanged = false;\n  \n  this.searchTerm = item.item_name;\n  this.itemSelected.emit(this.selectedItem);\n  // Store original position before closing\n  const originalEvent = this.popover.event;\n  \n  this.isOpen = false;\n  \n  // Focus on quantity input after selection\n  setTimeout(() => {\n    this.setFocusOnInput('qtyId');\n  }, 200);\n}\n\n\n// Method to detect if prices have changed\ncheckPriceChanges(): boolean {\n  const payPriceChanged = +this.selectedItem.pay_price !== +this.originalPayPrice;\n  const perchPriceChanged = +this.selectedItem.perch_price !== +this.originalPerchPrice;\n  \n  this.pricesChanged = payPriceChanged || perchPriceChanged;\n  return this.pricesChanged;\n}\n\n// Method to get changed prices info\ngetChangedPricesInfo(): string {\n  let changes = [];\n  \n  if (+this.selectedItem.pay_price !== +this.originalPayPrice) {\n    changes.push(`سعر البيع: ${this.originalPayPrice} ← ${this.selectedItem.pay_price}`);\n  }\n  \n  if (+this.selectedItem.perch_price !== +this.originalPerchPrice) {\n    changes.push(`سعر الشراء: ${this.originalPerchPrice} ← ${this.selectedItem.perch_price}`);\n  }\n  \n  return changes.join('\\n');\n}\n\n updatePayPrice(item)  : Promise<boolean> {\n  return new Promise((resolve, reject) => { \n  this.presentLoadingWithOptions('جاري تعديل البيانات ...')  \n  this.api.updatePayPrice(item).subscribe(data => {\n  //console.log(data)\n  if (data['message'] != 'Post Not Updated') {\n   this.presentToast('تم التعديل بنجاح' , 'success') \n   this.originalPayPrice = +this.selectedItem.pay_price;\n          this.originalPerchPrice = +this.selectedItem.perch_price;\n          this.pricesChanged = false;\n           this.updateItemInArray();\n         this.updateSuccess = true; // Set success flag\n          // Update the item in the items array\n          resolve(true);\n         \n  }else{\n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   resolve(false);\n  } \n}, (err) => { \n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n  resolve(false);\n},() => {\n this.loadingController.dismiss()\n}) \n}\n  );\n}\n  \n\n\n\n// Method to update item in the items array\nupdateItemInArray() {\n  const itemIndex = this.items.findIndex(item => item.id === this.selectedItem.id);\n  if (itemIndex !== -1) {\n    this.items[itemIndex].pay_price = this.selectedItem.pay_price;\n    this.items[itemIndex].perch_price = this.selectedItem.perch_price;\n  }\n  \n  // Update search results if needed\n  const searchIndex = this.items.findIndex(item => item.id === this.selectedItem.id);\n  if (searchIndex !== -1) {\n    this.items[searchIndex].pay_price = this.selectedItem.pay_price;\n    this.items[searchIndex].perch_price = this.selectedItem.perch_price;\n  }\n\n  \n}\n\n// Method to show price update confirmation dialog\nasync showPriceUpdateConfirmation(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    const changesInfo = this.getChangedPricesInfo();\n    \n    const alert = await this.alertController.create({\n      cssClass: 'price-update-alert',\n      header: 'تحديث الأسعار',\n      mode: 'ios',\n      message: `\n        <div style=\"text-align: right; direction: rtl;\">\n          <p><strong>تم تغيير الأسعار للصنف:</strong></p>\n          <p><strong>${this.selectedItem.item_name}</strong></p>\n          <br>\n          <p><strong>التغييرات:</strong></p>\n          <p style=\"color: #3880ff; white-space: pre-line;\">${changesInfo}</p>\n          <br>\n          <p>هل تريد حفظ الأسعار الجديدة؟</p>\n        </div>\n      `,\n      buttons: [\n        // {\n        //   text: 'إلغاء',\n        //   role: 'cancel',\n        //   cssClass: 'secondary',\n        //   handler: () => {\n        //     // Reset prices to original values\n        //     this.selectedItem.pay_price = this.originalPayPrice;\n        //     this.selectedItem.perch_price = this.originalPerchPrice;\n        //     this.pricesChanged = false;\n        //     resolve(false);\n        //   }\n        // },\n        {\n          text: 'المتابعة بدون حفظ',\n          cssClass: 'tertiary',\n          handler: () => {\n            // Continue without updating prices in database\n            resolve(false);\n          }\n        },\n        {\n          text: 'حفظ وإضافة',\n          cssClass: 'primary',\n          handler: () => {\n            // Update prices then continue\n            resolve(true);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  });\n}\n\n\n// Performance optimization\ntrackByItemId(index: number, item: any): any {\n  return item.id || index;\n}\n\n readItemByIdQty() {\n  if (!this.selectedItem.id || !this.store_info || !this.year) return; \n  this.resetQuantityValues();\n  this.loadingQty = true; // Add this line \n  this.api.readItemByIdQty(this.store_info.id, this.selectedItem.id, this.year.id).subscribe(data => {\n    console.log('readItemByIdQty', data);\n    let res = data;\n    if (res['message'] != 'No record Found') {\n      this.payTotQty = res['data'][0].salesQuantity;\n      this.availQty = res['data'][0].availQty;\n      this.qtyReal = res['data'][0].qtyReal;\n      this.perchTotQty = res['data'][0].perchQuantity;\n      this.firstQty = res['data'][0].firstQuantity;\n      \n      console.log('readItemByIdQty', this.payTotQty, this.availQty, this.qtyReal, this.perchTotQty, this.firstQty);\n      this.getQtyTotalItemId();\n      this.qtyError = false;\n    } else {\n      this.qtyError = true;\n      this.qtyErrorMsg = 'لا توجد بيانات للصنف';\n    }\n    this.loadingQty = false; // Add this line\n  }, (err) => {\n    console.log(err);\n    this.qtyError = true;\n    this.qtyErrorMsg = 'خطأ في الإتصال';\n    this.loadingQty = false; // Add this line\n    this.presentToast('خطأ في الإتصال حاول مرة أخرى', 'danger');\n  });\n}\n\n\n  getQtyTotalItemId() {\n    console.log('perchTotQty', this.perchTotQty, this.payTotQty);\n    \n    // تجميع الكميات السالبة وتحويلها لموجب لإضافتها للمشتريات\n    if ((+this.availQty - +this.qtyReal) < 0) { \n      this.perchTotQty = +this.perchTotQty + Math.abs((+this.availQty - +this.qtyReal));  \n    } else if ((+this.availQty - +this.qtyReal) > 0) {\n      this.payTotQty = +this.payTotQty + (+this.availQty - +this.qtyReal);  \n    } \n    \n    this.availQty = +this.firstQty + +this.perchTotQty - +this.payTotQty;\n    this.selectedItem.availQty = this.availQty;\n    \n    console.log('Final availQty:', this.availQty);\n  }\n\n  refreshQuantity() {\n    if (this.selectedItem.id) {\n      this.readItemByIdQty();\n    }\n  }\n\n  qtyChange(ev) {\n   \n     const isSalesPage = this.parentPage === 'sales' || this.parentPage === 'edit-sales';\n     const isPurchasePage = this.parentPage === 'purchase' || this.parentPage === 'edit-perch';\n      \n     if(isSalesPage){\n       this.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.pay_price).toFixed(2);\n      const qtyExceedsAvailable = this.selectedItem.qty   > +this.availQty;\n            if (qtyExceedsAvailable ) {\n            // Show red border on pay_price input only for sales pages\n             this.showPayPriceWarning();   \n            }\n      }\n       if (isPurchasePage){\n       this.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2);\n       // No quantity checking or warnings for purchase pages\n       } \n  }\n\n  onPayPriceChange(ev) {\n    const isSalesPage = this.parentPage === 'sales' || this.parentPage === 'edit-sales';\n     if (isSalesPage) {\n    this.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.pay_price).toFixed(2);\n   }\n    if (this.enablePriceUpdateConfirmation) {\n       this.checkPriceChanges();\n      } \n}\n\n  onPerchPriceChange(ev) {\n     const isPurchasePage = this.parentPage === 'purchase' || this.parentPage === 'edit-perch';\n     if (isPurchasePage) {\n      this.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2);\n     }\n\n      if (this.enablePriceUpdateConfirmation) {\n       this.checkPriceChanges();\n      }\n  }\n\n \nasync   addToList() {\n    // Check if this is a purchase page where quantity checking should be ignored\n    const isPurchasePage = this.parentPage === 'purchase' || this.parentPage === 'edit-perch';\n    const isSalesPage = this.parentPage === 'sales' || this.parentPage === 'edit-sales';\n\n    // Show quantity warning for sales pages but don't prevent adding\n    if (isSalesPage && (+this.selectedItem.qty > +this.availQty)) {\n      this.presentToast('الكمية المطلوبة أكبر من المتوفر في المخزن', 'warning');\n      // Continue execution - don't return, just show the warning\n    }\n    \n    if (this.selectedItem.item_name == \"\" || this.selectedItem.id == \"\" || +this.selectedItem.qty == 0) {\n      this.presentToast('الرجاء اختيار الصنف وتحديد الكمية', 'danger');\n    } else { \n       // Check if prices have changed and confirmation is enabled\n       // Check if prices have changed and confirmation is enabled\n  if (this.enablePriceUpdateConfirmation && this.checkPriceChanges()) {\n    const shouldContinue = await this.showPriceUpdateConfirmation();\n    console.log('User chose not to save prices' ,shouldContinue);\n    if (!shouldContinue) {\n     \n     \n    } else {\n       // If user chose to save prices, update them via API\n    if (this.pricesChanged) {\n      let item = {id : this.selectedItem.id, pay_price: this.selectedItem.pay_price, perch_price: this.selectedItem.perch_price};\n      // Call the updatePayPrice method\n        const updateSuccess =   await this.updatePayPrice(item);\n      if (!updateSuccess) {\n        // If update failed, ask user if they want to continue anyway\n        const continueAnyway = await this.askContinueWithoutUpdate();\n        if (!continueAnyway) {\n          return;\n        }\n      }\n     }\n    }\n    \n   \n  }\n\n\n     // Emit the selected item to parent component\n      this.itemAdded.emit({...this.selectedItem}); \n      \n      // Reset all fields and show dropdown after adding item\n      this.resetAfterAddingItem();\n      \n      this.setFocusOnInput('dstPop');\n\n\n      // Store the original trigger element before reopening popover\n    const originalTrigger = this.popover.event;\n    \n    // Close and reopen popover with proper positioning and focus\n    this.isOpen = false;\n     \n    this.resetSelectedItem();\n    setTimeout(() => {\n      // Restore original trigger position\n      this.popover.event = originalTrigger;\n      this.isOpen = true;\n      this.highlightedIndex = -1;\n      this.clearSearch();\n      // Items loaded directly without filtering\n      this.resetSelectedItem();\n      // Multiple focus attempts\n      setTimeout(() => this.forceFocusOnPopInput(), 100);\n      setTimeout(() => this.forceFocusOnPopInput(), 300);\n      setTimeout(() => this.forceFocusOnPopInput(), 500);\n      }, 50);\n    }   \n }\n// Helper method for continue without update confirmation\nasync askContinueWithoutUpdate(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    const alert = await this.alertController.create({\n      header: 'فشل التحديث',\n      mode: 'ios',\n      message: 'فشل في تحديث الأسعار. هل تريد المتابعة بالأسعار الجديدة بدون حفظها؟',\n      buttons: [\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => resolve(false)\n        },\n        {\n          text: 'متابعة',\n          handler: () => resolve(true)\n        }\n      ]\n    });\n    await alert.present();\n  });\n}\n\n// Helper method to reset selected item\nresetSelectedItem() {\n  this.selectedItem = {\n    id: undefined,\n    dateCreated: \"\",\n    pay_ref: null,\n    item_desc: \"\",\n    item_name: \"\",\n    item_unit: \"\",\n    parcode: 0,\n    pay_price: 0,\n    perch_price: 0,\n    qty: 0,\n    tot: 0,\n    availQty: 0,\n    aliasEn: \"\"\n  };\n \n}\n\n// Helper method to reopen popover\n\n\n\n// Add this method to show pay_price input warning\nshowPayPriceWarning() {\n  // Find the pay_price input element\n  this.findPayPriceInput();\n  \n  if (this.payPriceInputElement) {\n    // Add red border class\n    this.payPriceInputElement.classList.add('qty-warning-border');\n    \n    // Remove the class after 3 seconds\n    setTimeout(() => {\n      if (this.payPriceInputElement) {\n        this.payPriceInputElement.classList.remove('qty-warning-border');\n      }\n    }, 3000);\n  }\n  \n  // Set warning flag\n  this.showQtyWarning = true;\n  setTimeout(() => {\n    this.showQtyWarning = false;\n  }, 3000);\n}\n\n// Method to find pay_price input element\nfindPayPriceInput() {\n  // Try different selectors to find the pay_price input\n  const selectors = [\n    'ion-input[ng-reflect-model*=\"pay_price\"] input',\n    'ion-input[ng-reflect-model*=\"selectedItem.pay_price\"] input',\n    '.pay-price-input input',\n    'ion-col:nth-child(3) ion-input input', // Assuming it's the 3rd column\n  ];\n  \n  for (const selector of selectors) {\n    const element = document.querySelector(selector) as HTMLElement;\n    if (element) {\n      this.payPriceInputElement = element;\n      break;\n    }\n  }\n  \n  // Fallback: find by looking for input with pay_price value\n  if (!this.payPriceInputElement) {\n    const allInputs = document.querySelectorAll('ion-input input');\n    allInputs.forEach((input: HTMLInputElement) => {\n      if (input.value == this.selectedItem.pay_price.toString()) {\n        this.payPriceInputElement = input;\n      }\n    });\n  }\n}\n\n\n\n\n// Method to present dropdown from external call\n  presentDropdownFromEvent(event: Event) {\n    this.presentDropdown(event);\n  }\n  refresh() {\n    this.refreshItems.emit();\n  }\n\n  // Refresh items (manual refresh with user feedback)\n  refreshItemsList() {\n    console.log('Manual refresh triggered by user');\n    \n    // Clear current data\n    // Items cleared directly\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    \n    // Clear selection if exists\n    if (this.selectedItem && this.selectedItem.id) {\n      this.clearSelection();\n    }\n    \n    // Reload items\n    this.refreshItems.emit();\n  }\n\n  setFocusOnInput(inputName: string) {\n    if (inputName === 'dstPop' || inputName === 'searchInput') {\n      if (this.searchInput) {\n        this.searchInput.nativeElement.focus();\n      }\n      this.presentDropdown();\n    } else if (inputName === 'qtyId') {\n      if (this.qtyId) {\n        this.qtyId.setFocus();\n      }\n    }\n  }\n\n  isFocused(event) {\n    // Handle focus events if needed\n  }\n\n  async presentToast(msg, color?) {\n    const toast = await this.toast.create({\n      message: msg,\n      duration: 2000,\n      color: color,\n      cssClass: 'cust_Toast',\n      mode: 'ios',\n      position: 'top'\n    });\n    toast.present();\n  }\n\n  // Compatibility methods for remaining old code\n  calculatePopoverSize() {\n    // Legacy method - no longer needed\n  }\n\n  presentPopover(event?: Event) {\n    // Redirect to new dropdown method\n    this.presentDropdown(event);\n  }\n\n  didDismiss() {\n    // Legacy method - handled by new dropdown logic\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    this.searchTerm = '';\n  }\n\n  onPopoverDidPresent() {\n    // Legacy method - no longer needed\n  }\n\n  onPopoverKeyDown(event: KeyboardEvent) {\n    // Redirect to new method\n    this.onKeyDown(event);\n  }\n\n  scrollToSelected() {\n    // Legacy method - replaced by scrollHighlightedItemIntoView\n    this.scrollHighlightedItemIntoView();\n  }\n\n  fixPopoverPosition(event?: Event) {\n    // Legacy method - no longer needed\n  }\n\n  setFocusOnPopInput() {\n    // Legacy method - redirect to new input\n    if (this.searchInput) {\n      this.searchInput.nativeElement.focus();\n    }\n  }\n\n  forceFocusOnPopInput() {\n    // Legacy method - redirect to new input\n    setTimeout(() => {\n      if (this.searchInput) {\n        this.searchInput.nativeElement.focus();\n      }\n    }, 100);\n  }\n\n  onWindowResize() {\n    // Legacy method - no longer needed for dropdowns\n  }\n\n  onOrientationChange() {\n    // Legacy method - no longer needed for dropdowns\n  }\n\n  reopenPopover() {\n    // Legacy method - redirect to dropdown\n    this.reopenDropdown();\n  }\n\n  reopenPopoverWithStoredPosition() {\n    // Legacy method - redirect to dropdown\n    this.presentDropdown();\n  }\n}\n","import { Pipe} from '@angular/core';\n@Pipe({ name: 'filterByName', pure: true })\nexport class FilterPipe{\n  transform(items: any[], args: any): any {\n    let filter = args.toString();\n    if(filter !== undefined && filter.length !== null){\n        if(filter.length === 0 || items.length ===0){\n            return items;\n        }else{\n         /// old way   return filter ? items.filter(item=> item.item_name.toLocaleLowerCase().indexOf(filter) != -1 ) : items;\n         return filter ? items.filter(item => {\n              filter = filter.toLocaleLowerCase();\n              // Search across multiple attributes\n              return (\n                (item.item_name && item.item_name.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.brand && item.brand.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.pay_price && item.pay_price.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.perch_price && item.perch_price.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.model && item.model.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.parcode && item.parcode.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.part_no && item.part_no.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.item_desc && item.item_desc.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.aliasEn && item.aliasEn.toLocaleLowerCase().indexOf(filter) !== -1)\n              );\n            }) : items;\n        }\n        \n    }\n  } \n}","import { Component, Input, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { ModalController, IonInput } from '@ionic/angular';\n\n@Component({\n  selector: 'app-price-adjustment-dialog',\n  templateUrl: './price-adjustment-dialog.component.html',\n  styleUrls: ['./price-adjustment-dialog.component.scss'], \n})\nexport class PriceAdjustmentDialogComponent implements OnInit, OnDestroy {\n  @Input() itemsList: any[] = [];\n  @Input() mode: 'purchase' | 'sales' = 'purchase'; // New input to determine which price to adjust\n  @ViewChild('adjustmentInput', { static: false }) adjustmentInput!: IonInput;\n  \n  adjustmentValue: number = 0;\n  adjustmentType: 'percentage' | 'amount' = 'percentage';\n  previewItems: any[] = [];\n  \n  // Dynamic properties based on mode\n  get priceField(): string {\n    return this.mode === 'sales' ? 'pay_price' : 'perch_price';\n  }\n  \n  get originalPriceField(): string {\n    return this.mode === 'sales' ? 'original_pay_price' : 'original_perch_price';\n  }\n  \n  get newPriceField(): string {\n    return this.mode === 'sales' ? 'new_pay_price' : 'new_perch_price';\n  }\n\n  constructor(\n    private modalController: ModalController\n  ) { }\n\n  ngOnInit() {\n    // Ensure itemsList is an array\n    if (!this.itemsList || !Array.isArray(this.itemsList)) {\n      this.itemsList = [];\n    }\n    \n    // Create preview items with current prices based on mode\n    this.previewItems = this.itemsList.map(item => {\n      const currentPrice = parseFloat(item[this.priceField]) || 0;\n      return {\n        ...item,\n        [this.originalPriceField]: currentPrice,\n        [this.newPriceField]: currentPrice\n      };\n    });\n    \n    this.updatePreview();\n  }\n\n  onAdjustmentTypeChange() {\n    // Reset adjustment value when type changes for better UX\n    this.adjustmentValue = 0;\n    this.updatePreview();\n  }\n\n  updatePreview() {\n    this.previewItems = this.previewItems.map(item => {\n      const originalPrice = parseFloat(item[this.originalPriceField]) || 0;\n      let newPrice = originalPrice;\n      \n      if (this.adjustmentType === 'percentage') {\n        // Percentage adjustment\n        newPrice = originalPrice * (1 + (this.adjustmentValue / 100));\n      } else {\n        // Amount adjustment\n        newPrice = originalPrice + this.adjustmentValue;\n      }\n      \n      // Ensure price doesn't go below 0\n      newPrice = Math.max(0, newPrice);\n      \n      return {\n        ...item,\n        [this.newPriceField]: Math.round(newPrice * 100) / 100 // Round to 2 decimal places\n      };\n    });\n  }\n\n  async applyChanges() {\n    // Update original items with new prices\n    const updatedItems = this.previewItems.map(item => ({\n      ...item,\n      [this.priceField]: item[this.newPriceField]\n    }));\n    \n    await this.modalController.dismiss(updatedItems);\n  }\n\n  async cancel() {\n    await this.modalController.dismiss();\n  }\n\n  getTotalOriginal(): number {\n    return this.previewItems.reduce((total, item) => {\n      const price = parseFloat(item[this.originalPriceField]) || 0;\n      const qty = parseFloat(item.qty) || 0;\n      return total + (price * qty);\n    }, 0);\n  }\n\n  getTotalNew(): number {\n    return this.previewItems.reduce((total, item) => {\n      const price = parseFloat(item[this.newPriceField]) || 0;\n      const qty = parseFloat(item.qty) || 0;\n      return total + (price * qty);\n    }, 0);\n  }\n\n  getTotalDifference(): number {\n    return this.getTotalNew() - this.getTotalOriginal();\n  }\n\n  setPresetValue(value: number) {\n    this.adjustmentValue = value;\n    this.updatePreview();\n  }\n\n  // Helper methods for template\n  getOriginalPrice(item: any): number {\n    return parseFloat(item[this.originalPriceField]) || 0;\n  }\n\n  getNewPrice(item: any): number {\n    return parseFloat(item[this.newPriceField]) || 0;\n  }\n\n  getPriceDifference(item: any): number {\n    return this.getNewPrice(item) - this.getOriginalPrice(item);\n  }\n\n  ngOnDestroy() {\n    // Cleanup if needed\n  }\n}","import { Component, Input, Output, EventEmitter, OnInit, OnChanges, OnDestroy, forwardRef, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { NavController } from '@ionic/angular';\nimport { ServicesService } from '../../stockService/services.service';\nimport { AccountCommunicationService } from '../../services/account-communication.service';\nimport { Subscription } from 'rxjs';\n\nexport interface AccountSelectorData {\n  id: any;\n  ac_id: any;\n  sub_name: string;\n  sub_type: string;\n  sub_code: string;\n  sub_balance: any;\n  store_id: any;\n  cat_name: string;\n  cat_id: any;\n  phone: string;\n  address: string;\n}\n\nexport interface AccountBalance {\n  current_balance: number;\n  status: string;\n  invoice_amount?: number;\n}\n\n@Component({\n  selector: 'app-account-selector',\n  templateUrl: './account-selector.component.html',\n  styleUrls: ['./account-selector.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AccountSelectorComponent),\n      multi: true\n    }\n  ]\n})\nexport class AccountSelectorComponent implements OnInit, OnChanges, OnDestroy, ControlValueAccessor {\n  @ViewChild('searchInput', { static: false }) searchInput: ElementRef;\n  @ViewChild('inputWrapper', { static: false }) inputWrapper: ElementRef;\n\n  @Input() accountType: 'customer' | 'supplier' = 'customer'; // customer = ac_id 1, supplier = ac_id 2\n  @Input() placeholder: string = 'اختر الحساب';\n  @Input() label: string = 'الحساب';\n  @Input() store_info: any = null;\n  @Input() year: any = null;\n  @Input() showAddButton: boolean = true;\n  @Input() disabled: boolean = false;\n\n  @Output() accountSelected = new EventEmitter<AccountSelectorData>();\n  @Output() balanceLoaded = new EventEmitter<AccountBalance>();\n  @Output() addAccountClicked = new EventEmitter<void>();\n\n  // Component state\n  accounts: AccountSelectorData[] = [];\n  filteredAccounts: AccountSelectorData[] = [];\n  selectedAccount: AccountSelectorData | null = null;\n  accountBalance: AccountBalance | null = null;\n  \n  searchTerm: string = '';\n  showDropdown: boolean = false;\n  loadingAccounts: boolean = false;\n  loadingBalance: boolean = false;\n\n  // Keyboard navigation\n  highlightedIndex: number = -1;\n\n  // Dropdown positioning\n  dropdownPosition = { top: '0px', left: '0px', width: '250px' };\n\n  // Service subscription\n  private newAccountSubscription: Subscription;\n\n  // ControlValueAccessor implementation\n  private onChange = (value: any) => {};\n  private onTouched = () => {};\n\n  constructor(\n    private api: ServicesService,\n    private navController: NavController,\n    private accountCommunicationService: AccountCommunicationService,\n    private cdr: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    // Ensure we start with no selection\n    this.selectedAccount = null;\n    this.accountBalance = null;\n    this.loadingBalance = false;\n    \n    this.loadAccounts();\n    this.subscribeToNewAccount();\n  }\n\n  ngOnDestroy() {\n    if (this.newAccountSubscription) {\n      this.newAccountSubscription.unsubscribe();\n    }\n  }\n\n  // Subscribe to new account creation\n  private subscribeToNewAccount() {\n    this.newAccountSubscription = this.accountCommunicationService.newAccount$.subscribe(newAccount => {\n      if (newAccount) {\n        console.log('AccountSelector: Received new account:', newAccount);\n        \n        // Add to accounts list\n        this.accounts.push(newAccount);\n        this.filteredAccounts = [...this.accounts];\n        \n        // Select the new account\n        this.selectAccount(newAccount);\n        \n        // Clear the service data\n        this.accountCommunicationService.clearNewAccount();\n        \n        console.log('AccountSelector: New account added and selected');\n      }\n    });\n  }\n\n  ngOnChanges() {\n    // Reload accounts if store_info or year changes\n    if (this.store_info && this.year) {\n      this.loadAccounts();\n    }\n  }\n\n  // Load all accounts (both customers and suppliers)\n  loadAccounts() {\n    if (!this.store_info || !this.year) {\n      console.warn('Account Selector: store_info or year not provided');\n      return;\n    }\n\n    this.loadingAccounts = true;\n    console.log('Loading accounts for store:', this.store_info.id, 'year:', this.year.id);\n    \n    // Load all accounts with ac_id = 1 (customers) and ac_id = 2 (suppliers)\n    this.api.getAllCustomerSupplierAccounts(this.store_info.id, this.year.id).subscribe(\n      (response: any) => {\n        this.loadingAccounts = false;\n        console.log('Accounts response:', response);\n        \n        if (response && response.data) {\n          this.accounts = response.data;\n          this.filteredAccounts = [...this.accounts];\n          console.log('Loaded', this.accounts.length, 'accounts');\n        } else {\n          console.warn('No accounts data in response');\n          this.accounts = [];\n          this.filteredAccounts = [];\n        }\n      },\n      (error) => {\n        this.loadingAccounts = false;\n        console.error('Error loading accounts:', error);\n        this.accounts = [];\n        this.filteredAccounts = [];\n      }\n    );\n  }\n\n  // Handle search input\n  onSearchInput(event: any) {\n    this.searchTerm = event.target.value; // Keep original case\n    console.log('Search term:', this.searchTerm);\n    console.log('Total accounts:', this.accounts.length);\n    \n    // Clear selected account if user is typing something different\n    if (this.selectedAccount && this.searchTerm !== this.selectedAccount.sub_name) {\n      console.log('Clearing selectedAccount because search term changed');\n      this.selectedAccount = null;\n      this.accountBalance = null; // Also clear balance\n      this.loadingBalance = false; // Stop any loading\n      // Force change detection\n      this.cdr.detectChanges();\n    }\n    \n    this.filterAccounts();\n    this.highlightedIndex = -1; // Reset highlight when user types\n    \n    // Show dropdown when user starts typing or when there are accounts\n    if (this.searchTerm.length > 0 || this.accounts.length > 0) {\n      // Calculate position if dropdown is not already shown\n      if (!this.showDropdown) {\n        this.calculateDropdownPosition();\n      }\n      this.showDropdown = true;\n      console.log('Showing dropdown with', this.filteredAccounts.length, 'filtered accounts');\n    } else {\n      this.showDropdown = false;\n      this.filteredAccounts = [...this.accounts];\n    }\n  }\n\n  // Filter accounts based on search term\n  filterAccounts() {\n    if (this.searchTerm.trim() === '') {\n      this.filteredAccounts = [...this.accounts];\n    } else {\n      this.filteredAccounts = this.accounts.filter(account =>\n        account.sub_name.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n        (account.sub_code && account.sub_code.toLowerCase().includes(this.searchTerm.toLowerCase()))\n      );\n    }\n  }\n\n  // Handle input focus\n  onInputFocus() {\n    console.log('Input focused, accounts:', this.accounts.length);\n    console.log('Current searchTerm:', this.searchTerm);\n    console.log('Selected account:', this.selectedAccount);\n    \n    this.highlightedIndex = -1; // Reset highlight on focus\n    \n    // Show dropdown when focused if we have accounts\n    if (this.accounts.length > 0) {\n      // Calculate position before showing\n      setTimeout(() => {\n        this.calculateDropdownPosition();\n        this.showDropdown = true;\n      }, 10);\n      \n      // If the current search term matches selected account name exactly, show all accounts\n      // This handles the case where user clicks on input after selecting an account\n      if (this.selectedAccount && this.searchTerm === this.selectedAccount.sub_name) {\n        this.filteredAccounts = [...this.accounts];\n      } else if (this.searchTerm.length === 0) {\n        // If no search term, show all accounts\n        this.filteredAccounts = [...this.accounts];\n      } else {\n        // Otherwise filter based on search term\n        this.filteredAccounts = this.accounts.filter(account =>\n          account.sub_name.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n          (account.sub_code && account.sub_code.toLowerCase().includes(this.searchTerm.toLowerCase()))\n        );\n      }\n    }\n  }\n\n  // Handle input blur with delay to allow item click\n  onInputBlur() {\n    console.log('Input blur triggered');\n    setTimeout(() => {\n      console.log('Hiding dropdown after blur delay');\n      this.showDropdown = false;\n      this.highlightedIndex = -1; // Reset highlight when dropdown closes\n    }, 200); // Delay to allow click events on dropdown items\n  }\n\n  // Handle keyboard navigation\n  onKeyDown(event: KeyboardEvent) {\n    if (!this.showDropdown || this.filteredAccounts.length === 0) {\n      // If dropdown is not shown, down arrow should open it\n      if (event.key === 'ArrowDown' && this.filteredAccounts.length > 0) {\n        event.preventDefault();\n        this.showDropdown = true;\n        this.highlightedIndex = 0;\n        this.calculateDropdownPosition();\n      }\n      return;\n    }\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        this.highlightedIndex = Math.min(this.highlightedIndex + 1, this.filteredAccounts.length - 1);\n        this.scrollHighlightedItemIntoView();\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        this.highlightedIndex = Math.max(this.highlightedIndex - 1, -1);\n        this.scrollHighlightedItemIntoView();\n        break;\n\n      case 'Enter':\n        event.preventDefault();\n        if (this.highlightedIndex >= 0 && this.highlightedIndex < this.filteredAccounts.length) {\n          this.selectAccount(this.filteredAccounts[this.highlightedIndex]);\n        }\n        break;\n\n      case 'Escape':\n        event.preventDefault();\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n        break;\n\n      case 'Tab':\n        // Allow tab to close dropdown and move to next field\n        this.showDropdown = false;\n        this.highlightedIndex = -1;\n        break;\n    }\n  }\n\n  // Scroll highlighted item into view\n  private scrollHighlightedItemIntoView() {\n    if (this.highlightedIndex >= 0) {\n      // Find the dropdown container and highlighted item\n      setTimeout(() => {\n        const dropdownContainer = document.querySelector('.dropdown-container');\n        const highlightedItem = document.querySelector('.account-item.highlighted');\n        \n        if (dropdownContainer && highlightedItem) {\n          const containerRect = dropdownContainer.getBoundingClientRect();\n          const itemRect = highlightedItem.getBoundingClientRect();\n          \n          if (itemRect.bottom > containerRect.bottom) {\n            // Item is below visible area, scroll down\n            dropdownContainer.scrollTop += (itemRect.bottom - containerRect.bottom + 10);\n          } else if (itemRect.top < containerRect.top) {\n            // Item is above visible area, scroll up\n            dropdownContainer.scrollTop -= (containerRect.top - itemRect.top + 10);\n          }\n        }\n      }, 10);\n    }\n  }\n\n  // Calculate dropdown position\n  calculateDropdownPosition() {\n    // Try to use the input wrapper first, fallback to search input\n    const elementToUse = this.inputWrapper?.nativeElement || this.searchInput?.nativeElement;\n    \n    if (elementToUse) {\n      const rect = elementToUse.getBoundingClientRect();\n      \n      console.log('Dropdown position calculation:');\n      console.log('Element used:', elementToUse.tagName, elementToUse.className);\n      console.log('Element rect:', rect);\n      console.log('Viewport size:', window.innerWidth, window.innerHeight);\n      \n      this.dropdownPosition = {\n        top: (rect.bottom + 2) + 'px',\n        left: rect.left + 'px',\n        width: rect.width + 'px'\n      };\n      \n      console.log('Calculated dropdown position:', this.dropdownPosition);\n    } else {\n      console.warn('Could not find element for dropdown positioning');\n    }\n  }\n\n  // Toggle dropdown visibility\n  toggleDropdown() {\n    console.log('Toggle dropdown clicked, accounts:', this.accounts.length);\n    if (this.accounts.length > 0) {\n      this.showDropdown = !this.showDropdown;\n      if (this.showDropdown) {\n        // Calculate position before showing\n        this.calculateDropdownPosition();\n        // Show all accounts when dropdown is opened\n        this.filteredAccounts = [...this.accounts];\n        // Focus the input field\n        if (this.searchInput) {\n          setTimeout(() => {\n            this.searchInput.nativeElement.focus();\n          }, 100);\n        }\n      }\n    } else {\n      console.warn('No accounts loaded yet');\n    }\n  }\n\n  // Select account from dropdown\n  selectAccount(account: AccountSelectorData) {\n    console.log('selectAccount called with:', account);\n    console.log('Before - searchTerm:', this.searchTerm);\n    \n    this.selectedAccount = account;\n    this.searchTerm = account.sub_name;\n    this.showDropdown = false;\n    this.highlightedIndex = -1; // Reset highlight after selection\n    \n    console.log('After - searchTerm:', this.searchTerm);\n    console.log('After - selectedAccount:', this.selectedAccount);\n    \n    // Force change detection\n    this.cdr.detectChanges();\n    \n    // Also try to manually update the input value\n    if (this.searchInput && this.searchInput.nativeElement) {\n      setTimeout(() => {\n        // For ion-input, we need to set the value and trigger input event\n        const ionInput = this.searchInput.nativeElement;\n        ionInput.value = account.sub_name;\n        \n        // Trigger input event to ensure ion-input updates\n        const inputEvent = new Event('input', { bubbles: true });\n        ionInput.dispatchEvent(inputEvent);\n      }, 10);\n    }\n    \n    // Emit events\n    this.accountSelected.emit(account);\n    this.onChange(account);\n    this.onTouched();\n    \n    // Notify pages about customer selection for payInvo.cust_id setting\n    if (account && account.id) {\n      this.accountCommunicationService.setCustomerSelected(account.id, account);\n    }\n    \n    // Load account balance\n    this.loadAccountBalance(account.id);\n    \n    console.log('Account selection completed');\n  }\n\n  // Load account balance\n  loadAccountBalance(accountId: any) {\n    if (!accountId || !this.store_info || !this.year) {\n      return;\n    }\n\n    this.loadingBalance = true;\n    this.accountBalance = null;\n\n    this.api.getAccountBalance(accountId, this.store_info.id, this.year.id).subscribe(\n      (response: any) => {\n        this.loadingBalance = false;\n        if (response.success) {\n          this.accountBalance = response.data;\n          this.balanceLoaded.emit(this.accountBalance);\n        }\n      },\n      (error) => {\n        this.loadingBalance = false;\n        console.error('Error loading account balance:', error);\n      }\n    );\n  }\n\n  // Handle add account button click\n  onAddAccount() {\n    console.log('Add account button clicked');\n    this.addAccountClicked.emit();\n    \n    // Navigate to account modal page\n    this.navController.navigateForward('/account-modal', {\n      queryParams: {\n        mode: 'create'\n      }\n    });\n  }\n\n  // Clear selection\n  clearSelection() {\n    console.log('Clearing all selection data');\n    this.selectedAccount = null;\n    this.accountBalance = null;\n    this.searchTerm = '';\n    this.showDropdown = false;\n    this.loadingBalance = false;\n    this.highlightedIndex = -1; // Reset highlight on clear\n    this.filteredAccounts = [...this.accounts];\n    \n    this.onChange(null);\n    this.onTouched();\n    this.accountSelected.emit(null);\n  }\n\n  // Format balance for display\n  formatBalance(balance: AccountBalance): string {\n    if (!balance) return '';\n    \n    const amount = Math.abs(balance.current_balance).toFixed(2);\n    const status = balance.status === 'debit' ? 'مدين' : 'دائن';\n    return `${amount} (${status})`;\n  }\n\n  // Get balance color\n  getBalanceColor(balance: AccountBalance): string {\n    if (!balance) return 'medium';\n    return balance.status === 'debit' ? 'danger' : 'success';\n  }\n\n  // Refresh accounts (manual refresh with user feedback)\n  refreshAccounts() {\n    console.log('Manual refresh triggered by user');\n    \n    // Clear current data\n    this.accounts = [];\n    this.filteredAccounts = [];\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    \n    // Clear selection if exists\n    if (this.selectedAccount) {\n      this.selectedAccount = null;\n      this.accountBalance = null;\n      this.searchTerm = '';\n      this.onChange(null);\n      this.accountSelected.emit(null);\n    }\n    \n    // Reload accounts\n    this.loadAccounts();\n  }\n\n  // Refresh accounts (internal method)\n  refresh() {\n    console.log('Internal refresh triggered');\n    this.loadAccounts();\n  }\n\n  // Check if component is ready\n  isReady(): boolean {\n    return !this.loadingAccounts && this.accounts.length > 0;\n  }\n\n  // ControlValueAccessor implementation\n  writeValue(value: any): void {\n    if (value && typeof value === 'object') {\n      this.selectedAccount = value;\n      this.searchTerm = value.sub_name || '';\n    } else {\n      this.clearSelection();\n    }\n  }\n\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { ItemSelectorComponent } from '../../component/item-selector/item-selector.component';\nimport { FilterPipe } from '../../component/item-selector/pipe';\nimport { EnhancedItemSelectorComponent } from '../../component/enhanced-item-selector/enhanced-item-selector.component';\nimport { PriceAdjustmentDialogComponent } from '../../component/price-adjustment-dialog/price-adjustment-dialog.component';\nimport { InvoicePriceConfigDialogComponent } from '../../component/invoice-price-config-dialog/invoice-price-config-dialog.component';\nimport { AccountSelectorComponent } from '../../components/account-selector/account-selector.component';\nimport { ActionPopoverComponent } from '../../component/action-popover/action-popover.component';\nimport { InvoiceJournalEntryComponent } from 'src/app/component/invoice-journal-entry/invoice-journal-entry.component';\nimport { ExportButtonsComponent } from '../../component/export-buttons/export-buttons.component';\n\n\n@NgModule({\n  declarations: [\n     ItemSelectorComponent,\n    FilterPipe,\n    EnhancedItemSelectorComponent,\n    PriceAdjustmentDialogComponent,\n    InvoicePriceConfigDialogComponent,\n    ActionPopoverComponent,\n    AccountSelectorComponent ,\n    InvoiceJournalEntryComponent,\n    ExportButtonsComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule\n  ] ,\n  exports: [\n    ItemSelectorComponent,\n    FilterPipe,\n    EnhancedItemSelectorComponent,\n    ActionPopoverComponent,\n    PriceAdjustmentDialogComponent,\n    InvoicePriceConfigDialogComponent,\n    AccountSelectorComponent ,\n    InvoiceJournalEntryComponent,\n    ExportButtonsComponent\n\n  ]\n})\nexport class SharedModule { }\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AccountCommunicationService {\n  private newAccountSubject = new BehaviorSubject<any>(null);\n  public newAccount$ = this.newAccountSubject.asObservable();\n\n  // For notifying pages to set customer ID in their payInvo\n  private customerSelectedSubject = new Subject<{id: any, account: any}>();\n  public customerSelected$ = this.customerSelectedSubject.asObservable();\n\n  constructor() { }\n\n  // Set new account data (for account selector)\n  setNewAccount(account: any) {\n    console.log('AccountCommunicationService: Setting new account:', account);\n    this.newAccountSubject.next(account);\n    \n    // Also emit customer selection event for pages to update their payInvo\n    if (account && account.id) {\n      this.customerSelectedSubject.next({id: account.id, account: account});\n    }\n  }\n\n  // Emit customer selection (for pages to set cust_id)\n  setCustomerSelected(accountId: any, account: any) {\n    console.log('AccountCommunicationService: Customer selected with ID:', accountId);\n    this.customerSelectedSubject.next({id: accountId, account: account});\n  }\n\n  // Clear the new account data\n  clearNewAccount() {\n    this.newAccountSubject.next(null);\n  }\n\n  // Get current value without subscription\n  getCurrentAccount() {\n    return this.newAccountSubject.value;\n  }\n}"],"names":[],"sourceRoot":"webpack:///"}