"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1075],{30752:(q,w,p)=>{p.d(w,{y:()=>H});var h=p(70655),t=p(29863),g=p(3671),m=p(23349),x=p(94030),P=p(91472),b=p(90849),f=p(69808),v=p(34182);const I=["searchInput"],T=["inputWrapper"],Z=["qtyId"],A=["popover"],d=["popInput"];function u(s,_){1&s&&(t.TgZ(0,"ion-col",9),t.TgZ(1,"ion-item",4),t._UZ(2,"ion-input",10),t._UZ(3,"ion-spinner"),t.qZA(),t.qZA()),2&s&&(t.xp6(2),t.Q6J("disabled",!0))}function i(s,_){1&s&&t._UZ(0,"ion-spinner",31)}function c(s,_){if(1&s&&(t.TgZ(0,"p",40),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_desc)}}function l(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"ion-item",35),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).selectItem(r)})("mousedown",function(o){return o.preventDefault()})("mouseenter",function(){const r=t.CHM(e).index;return t.oxw(3).highlightedIndex=r}),t.TgZ(1,"ion-label"),t.TgZ(2,"h3"),t._uU(3),t.qZA(),t.YNc(4,c,2,1,"p",36),t.TgZ(5,"div",37),t.TgZ(6,"span",38),t._uU(7),t.qZA(),t.TgZ(8,"span",39),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=_.$implicit,n=_.index,o=t.oxw(3);t.ekj("highlighted",n===o.highlightedIndex),t.xp6(3),t.Oqu(e.item_name),t.xp6(1),t.Q6J("ngIf",e.item_desc),t.xp6(3),t.hij("\u0628\u064a\u0639: ",e.pay_price,""),t.xp6(2),t.hij("\u0634\u0631\u0627\u0621: ",e.perch_price,"")}}function C(s,_){if(1&s&&(t.TgZ(0,"div",32),t.TgZ(1,"ion-list",33),t.YNc(2,l,10,6,"ion-item",34),t.qZA(),t.qZA()),2&s){const e=t.oxw(2);t.Udp("top",e.dropdownPosition.top)("left",e.dropdownPosition.left)("width",e.dropdownPosition.width),t.xp6(2),t.Q6J("ngForOf",e.getFilteredItems())("ngForTrackBy",e.trackByItemId)}}function D(s,_){if(1&s&&(t.TgZ(0,"div",32),t.TgZ(1,"ion-list",33),t.TgZ(2,"ion-item",41),t.TgZ(3,"ion-label"),t.TgZ(4,"p"),t._uU(5,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u0645\u0637\u0627\u0628\u0642\u0629"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s){const e=t.oxw(2);t.Udp("top",e.dropdownPosition.top)("left",e.dropdownPosition.left)("width",e.dropdownPosition.width)}}function E(s,_){1&s&&(t.TgZ(0,"div",42),t._UZ(1,"ion-spinner",43),t.TgZ(2,"ion-text",44),t._uU(3,"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."),t.qZA(),t.qZA())}function F(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"ion-button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).viewSelectedItemReport()}),t._UZ(1,"ion-icon",58),t.TgZ(2,"ion-text",53),t._uU(3," \u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0635\u0646\u0641 "),t.qZA(),t.qZA()}}function Q(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"div",46),t.TgZ(2,"ion-text"),t._uU(3,"\u0627\u0644\u0645\u062e\u0632\u0648\u0646: "),t.qZA(),t.TgZ(4,"ion-text",47),t._uU(5),t.qZA(),t.TgZ(6,"ion-button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshQuantity()}),t._UZ(7,"ion-icon",49),t.qZA(),t.qZA(),t.TgZ(8,"div",50),t.TgZ(9,"ion-label"),t.TgZ(10,"strong"),t._uU(11," | "),t.qZA(),t.qZA(),t.YNc(12,F,4,0,"ion-button",51),t.qZA(),t.TgZ(13,"div",52),t.TgZ(14,"ion-label"),t.TgZ(15,"strong"),t._uU(16," | "),t.qZA(),t.qZA(),t.TgZ(17,"ion-text",53),t._uU(18,"\u0634\u0631\u0627\u0621"),t.qZA(),t.TgZ(19,"ion-text",53),t._uU(20),t.qZA(),t.TgZ(21,"ion-label"),t.TgZ(22,"strong"),t._uU(23," | "),t.qZA(),t.qZA(),t.TgZ(24,"ion-text",53),t._uU(25,"\u0628\u064a\u0639"),t.qZA(),t.TgZ(26,"ion-text",53),t._uU(27),t.qZA(),t.TgZ(28,"ion-label"),t.TgZ(29,"strong"),t._uU(30," | "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",54),t.TgZ(32,"ion-button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).viewSelectedItemDetails()}),t._UZ(33,"ion-icon",56),t._uU(34," \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0635\u0646\u0641 "),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw(2);t.xp6(5),t.Oqu(e.availQty),t.xp6(7),t.Q6J("ngIf",e.selectedItem&&e.selectedItem.id),t.xp6(8),t.Oqu(e.selectedItem.perch_price),t.xp6(7),t.Oqu(e.selectedItem.pay_price)}}function U(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"div",59),t.TgZ(1,"ion-text",60),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshQuantity()}),t._UZ(4,"ion-icon",61),t.qZA(),t.qZA()}if(2&s){const e=t.oxw(2);t.xp6(2),t.Oqu(e.qtyErrorMsg)}}function S(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"ion-col",9),t.TgZ(1,"ion-grid",11),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",12),t.TgZ(4,"div",13),t.TgZ(5,"div",14),t.TgZ(6,"ion-button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().refresh()}),t._UZ(7,"ion-icon",16),t.qZA(),t.TgZ(8,"ion-button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().presentModal2()}),t._UZ(9,"ion-icon",18),t.qZA(),t.YNc(10,i,1,0,"ion-spinner",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"ion-row"),t.TgZ(12,"ion-item",20),t.TgZ(13,"div",21,22),t.TgZ(15,"ion-input",23,24),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().searchTerm=o})("ngModelChange",function(o){return t.CHM(e),t.oxw().onModelChange(o)})("ionInput",function(o){return t.CHM(e),t.oxw().onSearchInput(o)})("ionClear",function(o){return t.CHM(e),t.oxw().onInputClear(o)})("ionFocus",function(){return t.CHM(e),t.oxw().onInputFocus()})("ionBlur",function(){return t.CHM(e),t.oxw().onInputBlur()})("click",function(){return t.CHM(e),t.oxw().onInputFocus()})("keydown",function(o){return t.CHM(e),t.oxw().onKeyDown(o)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,C,3,8,"div",25),t.YNc(18,D,6,6,"div",25),t.qZA(),t.qZA(),t.TgZ(19,"div",26),t.YNc(20,E,4,0,"div",27),t.TgZ(21,"div",28),t.YNc(22,Q,35,4,"div",29),t.qZA(),t.YNc(23,U,5,1,"div",30),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(6),t.Q6J("disabled",e.loadingItems),t.xp6(1),t.ekj("spin",e.loadingItems),t.xp6(3),t.Q6J("ngIf",e.loadingItems),t.xp6(5),t.Q6J("ngModel",e.searchTerm)("placeholder",e.placeholder)("disabled",e.loadingItems)("clearInput",!0),t.xp6(2),t.Q6J("ngIf",e.showDropdown&&e.getFilteredItems().length>0),t.xp6(1),t.Q6J("ngIf",e.showDropdown&&0===e.getFilteredItems().length&&e.searchTerm.length>0),t.xp6(2),t.Q6J("ngIf",e.loadingQty&&e.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.items.length>0&&e.selectedItem.id&&!e.qtyError&&!e.loadingQty),t.xp6(1),t.Q6J("ngIf",e.qtyError&&e.selectedItem.id&&!e.loadingQty)}}const z=function(s){return{"qty-warning":s}};function j(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"ion-col",2),t.TgZ(1,"ion-label",3),t.TgZ(2,"strong"),t._uU(3,"\u0627\u0644\u0643\u0645\u064a\u0629"),t.qZA(),t.qZA(),t.TgZ(4,"ion-item",62),t.TgZ(5,"ion-input",63,64),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().addToList()})("ionFocus",function(o){return t.CHM(e),t.oxw().isFocused(o)})("ngModelChange",function(o){return t.CHM(e),t.oxw().selectedItem.qty=o})("ionChange",function(o){return t.CHM(e),t.oxw().qtyChange(o)}),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(2,z,e.showQtyWarning)),t.xp6(1),t.Q6J("ngModel",e.selectedItem.qty)}}function N(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"ion-col",2),t.TgZ(1,"ion-label",3),t.TgZ(2,"strong"),t._uU(3,"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"),t.qZA(),t.qZA(),t.TgZ(4,"ion-item",4),t.TgZ(5,"ion-input",65),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().addToList()})("ngModelChange",function(o){return t.CHM(e),t.oxw().selectedItem.pay_price=o})("ionChange",function(o){return t.CHM(e),t.oxw().onPayPriceChange(o)}),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.selectedItem.pay_price)}}function J(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"ion-col",2),t.TgZ(1,"ion-label",3),t.TgZ(2,"strong"),t._uU(3,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),t.qZA(),t.qZA(),t.TgZ(4,"ion-item",4),t.TgZ(5,"ion-input",65),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().addToList()})("ngModelChange",function(o){return t.CHM(e),t.oxw().selectedItem.perch_price=o})("ionChange",function(o){return t.CHM(e),t.oxw().onPerchPriceChange(o)}),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.selectedItem.perch_price)}}let H=(()=>{class s{constructor(e,n,o,r,a,M,O,y,k){this.alertController=e,this.router=n,this.api=o,this.storage=r,this.toast=a,this.modalController=M,this.loadingController=O,this.datePipe=y,this.cdr=k,this.showDropdown=!1,this.highlightedIndex=-1,this.loadingQty=!1,this.updateSuccess=!1,this.selectedIndex=-1,this.isOpen=!1,this.popoverSize={},this.items=[],this.loadingItems=!1,this.searchLang=0,this.payRef="",this.showQuantityInput=!0,this.showPriceInput=!0,this.showPerchPriceInput=!0,this.placeholder="\u0627\u062e\u062a\u0631 \u0627\u0644\u0635\u0646\u0641",this.dropdownPosition={top:"0px",left:"0px",width:"250px"},this.enablePriceUpdateConfirmation=!0,this.originalPayPrice=0,this.originalPerchPrice=0,this.pricesChanged=!1,this.itemSelected=new t.vpe,this.itemAdded=new t.vpe,this.refreshItems=new t.vpe,this.parentPage="",this.payPriceInputElement=null,this.showQtyWarning=!1,this.searchTerm="",this.availQty=0,this.componentHasFocus=!1,this.payTotQty=0,this.perchTotQty=0,this.firstQty=0,this.qtyReal=0,this.qtyError=!1,this.qtyErrorMsg="",this.logHistoryArr=[],this.getItemLoader=!1,this.initializeSelectedItem()}ngOnInit(){this.getAppInfo()}ngOnChanges(){console.log("\u{1f4ca} ITEMS CHANGED - ngOnChanges triggered"),console.log("New items count:",this.items.length)}calculateDropdownPosition(){var e,n;const o=(null===(e=this.inputWrapper)||void 0===e?void 0:e.nativeElement)||(null===(n=this.searchInput)||void 0===n?void 0:n.nativeElement);if(o){const r=o.getBoundingClientRect();this.dropdownPosition={top:r.bottom+4+"px",left:r.left+"px",width:r.width+"px"},console.log("Dropdown position calculated:",this.dropdownPosition),console.log("Element used for positioning:",o.tagName,o.className)}else console.warn("Could not find element for dropdown positioning")}resetAllFieldsAndSelection(){console.log("\u{1f504} Starting resetAllFieldsAndSelection..."),this.initializeSelectedItem(),this.loadingQty=!1,this.updateSuccess=!1,this.pricesChanged=!1,this.originalPayPrice=0,this.originalPerchPrice=0,this.showQtyWarning=!1,this.searchTerm="",this.showDropdown=!1,this.highlightedIndex=-1,setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement&&(console.log("\u{1f4dd} Clearing search input field"),this.searchInput.nativeElement.value=""),this.qtyId&&this.qtyId.nativeElement&&(console.log("\u{1f4dd} Clearing quantity input field"),this.qtyId.nativeElement.value="0"),this.cdr.detectChanges(),console.log("\u{1f504} Change detection forced")},10),this.itemSelected.emit(null),console.log("\u{1f4e4} Emitted null selection to parent"),console.log("\u2705 resetAllFieldsAndSelection completed"),console.log("Final values - qty:",this.selectedItem.qty,"pay_price:",this.selectedItem.pay_price,"availQty:",this.availQty)}applyFilters(){}getFilteredItems(){if(!this.items||0===this.items.length)return[];if(this.searchTerm&&""!==this.searchTerm.trim()){const e=this.searchTerm.toLowerCase();return this.items.filter(n=>n.item_name.toLowerCase().includes(e)||n.item_desc&&n.item_desc.toLowerCase().includes(e))}return this.items}getAppInfo(){this.storage.get("USER_INFO").then(e=>{e&&(this.user_info=e,console.log(this.user_info))})}viewItemReport(e){if(!e||!e.id)return void this.presentToast("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0646\u0641 \u0623\u0648\u0644\u0627\u064b","warning");let n={queryParams:{item:JSON.stringify(e)}};this.router.navigate(["folder/items-report"],n)}viewSelectedItemReport(){this.selectedItem&&this.selectedItem.id?this.viewItemReport(this.selectedItem):this.presentToast("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0646\u0641 \u0623\u0648\u0644\u0627\u064b","warning")}presentModal2(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:g.X,componentProps:{item:this.selectedItem,status:"save"}});return e.onDidDismiss().then(n=>{null!==n&&(console.log(n),this.doAfterDismiss(n))}),yield e.present()})}presentModal(e,n){return(0,h.mG)(this,void 0,void 0,function*(){if(!e||"null"===e)return void this.presentToast("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0646\u0641 \u0623\u0648\u0644\u0627\u064b","warning");let o;if("edit"===n){let a=this.items.filter(M=>M.id==e);if(0===a.length)return void this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0635\u0646\u0641","danger");o={id:a[0].id,item_desc:a[0].item_desc,model:a[0].model,item_name:a[0].item_name,min_qty:a[0].min_qty,part_no:a[0].part_no,brand:a[0].brand,item_unit:a[0].item_unit,item_parcode:a[0].item_parcode,pay_price:a[0].pay_price,perch_price:a[0].perch_price,aliasEn:a[0].aliasEn}}const r=yield this.modalController.create({component:g.X,componentProps:{item:o,colSetting:{},filterArrayOrign:this.items,filterArray:this.items,status:n}});return r.onDidDismiss().then(a=>{null!==a&&(console.log("Modal dismissed with data:",a),this.doAfterDismiss(a))}),yield r.present()})}doAfterDismiss(e){"edit"===e.role?(console.log("Item edited:",e.data),this.update(e.data)):"save"===e.role?(console.log("Item saved:",e.data),this.saveItem(e.data)):"dele"==e.role&&(console.log("dele"),this.delete())}handleItemUpdate(e){console.log("Received updated data:",e);const n=e;console.log("Updated Item:",n),this.selectedItem.id===n.id&&(this.selectedItem=Object.assign(Object.assign({},this.selectedItem),{item_name:n.item_name,item_desc:n.item_desc,pay_price:n.pay_price,perch_price:n.perch_price}),this.originalPayPrice=n.pay_price,this.originalPerchPrice=n.perch_price);const o=this.items.findIndex(a=>a.id===n.id);-1!==o&&(this.items[o]=Object.assign(Object.assign({},this.items[o]),n));const r=this.items.findIndex(a=>a.id===n.id);-1!==r&&(this.items[r]=Object.assign(Object.assign({},this.items[r]),n)),this.presentToast("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0635\u0646\u0641","success")}update(e){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.updateItem(e[0]).subscribe(n=>{console.log(n),"Post Not Updated"!=n.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success"),this.handleItemUpdate(e[0])):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},n=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}delete(){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.deleteItems(this.selectedItem.id).subscribe(e=>{if("Post Not Deleted"!=e.message){this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d","success");const n=this.items.findIndex(r=>r.id===this.selectedItem.id);-1!==n&&this.items.splice(n,1);const o=this.items.findIndex(r=>r.id===this.selectedItem.id);-1!==o&&this.items.splice(o,1),this.initializeSelectedItem()}else this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}saveItem(e){console.log("mdata[0]",e[0]),this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),"imageUrl"in e[0]&&delete e[0].imageUrl,"tax"in e[0]&&delete e[0].tax,this.api.saveItem(e[0]).subscribe(n=>{console.log(n),"Post Not Created"!=n.message?(this.firstq={id:null,item_id:n.message,store_id:this.store_info.id,quantity:e[1].quantity,pay_price:e[0].pay_price,perch_price:e[0].perch_price,fq_year:this.year.id,item_name:e[0].item_name},this.saveFierstQty(e)):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},n=>{console.log(n),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()})}saveFierstQty(e){return(0,h.mG)(this,void 0,void 0,function*(){this.api.saveFirstQty(this.firstq).subscribe(n=>{console.log(n),this.selectedItem={id:this.firstq.item_id,dateCreated:"",pay_ref:this.payRef,item_desc:e[0].item_desc,item_name:e[0].item_name,item_unit:e[0].item_unit,parcode:e[0].parcode,pay_price:e[0].pay_price,perch_price:e[0].perch_price,qty:1,tot:e[0].perch_price,aliasEn:e[0].aliasEn,availQty:e[1].quantity},this.setFocusOnInput("qtyId"),this.getItemLoader=!0,this.items.push({aliasEn:e[0].aliasEn,availQty:e[1].quantity,brand:e[0].brand,firstQuantity:e[1].quantity,id:this.firstq.item_id,item_desc:e[0].item_desc,item_name:e[0].item_name,item_parcode:e[0].item_parcode,item_unit:e[0].item_unit,min_qty:e[0].min_qty,model:e[0].model,part_no:e[0].part_no,pay_price:e[0].pay_price,perch_price:e[0].perch_price,qtyReal:0,salesQuantity:0,totalCount:0,tswiaQuantity:0,quantity:e[1].quantity,tax:e[0].tax,imageUrl:e[0].imageUrl}),console.log("Updated items",this.items),this.storage.set("itemsLocal",this.items).then(o=>{this.getItemLoader=!1}),this.presentToast("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0635\u0646\u0641 \u0628\u0646\u062c\u0627\u062d","success")},n=>{console.log(n),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()},()=>{this.loadingController.dismiss()})})}viewSelectedItemDetails(){this.selectedItem&&this.selectedItem.id?this.presentModal(this.selectedItem.id,"edit"):this.presentToast("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0646\u0641 \u0623\u0648\u0644\u0627\u064b","warning")}presentLoadingWithOptions(e){return(0,h.mG)(this,void 0,void 0,function*(){const n=yield this.loadingController.create({spinner:"bubbles",mode:"ios",duration:5e3,message:e,translucent:!0,backdropDismiss:!1});yield n.present();const{role:o}=yield n.onDidDismiss();console.log("Loading dismissed with role:",o)})}initializeSelectedItem(){this.selectedItem={id:void 0,dateCreated:"",pay_ref:this.payRef,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,availQty:0,aliasEn:""},this.resetQuantityValues()}resetQuantityValues(){this.availQty=0,this.payTotQty=0,this.perchTotQty=0,this.firstQty=0,this.qtyReal=0,this.qtyError=!1,this.qtyErrorMsg=""}searchItem(e){this.searchTerm=e.target.value||e.detail.value||"",this.highlightedIndex=-1}onInputFocus(){console.log("Input focused, items:",this.items.length),this.componentHasFocus=!0,this.highlightedIndex=-1,this.items.length>0?setTimeout(()=>{this.calculateDropdownPosition(),this.showDropdown=!0},10):console.warn("No items available to show in dropdown")}onInputBlur(){console.log("Input blur triggered"),this.componentHasFocus=!1,setTimeout(()=>{this.componentHasFocus||(console.log("Hiding dropdown after blur delay"),this.showDropdown=!1,this.highlightedIndex=-1)},150)}onDocumentClick(e){var n,o;const r=e.target;if(!r)return;const a=(null===(n=this.inputWrapper)||void 0===n?void 0:n.nativeElement)||(null===(o=this.searchInput)||void 0===o?void 0:o.nativeElement),M=document.querySelectorAll(".dropdown-container, .category-dropdown-container");let O=!1,y=!1;a&&(O=a.contains(r)||null!==r.closest(".item-selector-wrapper")),M.forEach(k=>{k.contains(r)&&(y=!0)}),!O&&!y&&this.showDropdown&&(console.log("Hiding item dropdown due to outside click"),this.showDropdown=!1,this.highlightedIndex=-1,this.componentHasFocus=!1)}onDocumentFocusIn(e){var n,o;const r=e.target;if(!r)return;const a=(null===(n=this.inputWrapper)||void 0===n?void 0:n.nativeElement)||(null===(o=this.searchInput)||void 0===o?void 0:o.nativeElement);if(a&&!a.contains(r)){const M=document.querySelectorAll(".dropdown-container, .category-dropdown-container");let O=!1;M.forEach(y=>{y.contains(r)&&(O=!0)}),O||(this.showDropdown&&(console.log("Hiding item dropdown due to focus change"),this.showDropdown=!1,this.highlightedIndex=-1),this.componentHasFocus=!1)}else a&&a.contains(r)&&(this.componentHasFocus=!0)}onSearchInput(e){this.searchTerm=e.target.value||e.detail.value||"",console.log("Search term changed to:",this.searchTerm),0===this.searchTerm.length&&(console.log("Input field cleared - resetting all fields and selection"),this.resetAllFieldsAndSelection()),this.highlightedIndex=-1,this.searchTerm.length>0||this.items.length>0?(this.showDropdown||this.calculateDropdownPosition(),this.showDropdown=!0,console.log("Showing dropdown with",this.getFilteredItems().length,"filtered items")):this.showDropdown=!1}onInputClear(e){console.log("\u{1f534} CLEAR BUTTON CLICKED - ionClear event fired!"),console.log("Event details:",e),console.log("Current searchTerm before clear:",this.searchTerm),console.log("Current selectedItem before clear:",this.selectedItem),this.searchTerm="",this.resetAllFieldsAndSelection(),this.showDropdown=!1,this.highlightedIndex=-1,console.log("\u{1f7e2} Clear button reset completed"),console.log("searchTerm after clear:",this.searchTerm),console.log("selectedItem after clear:",this.selectedItem)}onModelChange(e){console.log("\u{1f504} Model changed from:",this.searchTerm,"to:",e),this.searchTerm=e||"",(!e||0===e.length)&&(console.log("\u{1f9fd} Model change detected empty value - resetting component"),this.resetAllFieldsAndSelection()),this.highlightedIndex=-1,this.searchTerm.length>0||this.getFilteredItems().length>0?(this.showDropdown||this.calculateDropdownPosition(),this.showDropdown=!0):this.showDropdown=!1}resetAfterAddingItem(){console.log("\u{1f4e6} Item added - resetting fields and showing dropdown"),this.resetAllFieldsAndSelection(),this.selectedItem.pay_ref=this.payRef,this.items.length>0&&setTimeout(()=>{this.calculateDropdownPosition(),this.showDropdown=!0,this.searchInput&&this.searchInput.nativeElement&&this.searchInput.nativeElement.focus(),console.log("\u{1f4e6} Dropdown shown after item added - ready for next selection")},100)}toggleDropdown(){console.log("Toggle dropdown clicked, items:",this.items.length),this.items.length>0?(this.showDropdown=!this.showDropdown,this.showDropdown&&(this.calculateDropdownPosition(),this.searchInput&&setTimeout(()=>{this.searchInput.nativeElement.focus()},100)),this.highlightedIndex=-1):console.warn("No items loaded yet")}presentDropdown(e){this.highlightedIndex=-1,this.clearSearch(),this.items.length>0&&(this.calculateDropdownPosition(),this.showDropdown=!0,setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement.focus()},100))}clearSelection(){this.selectedItem={id:void 0,dateCreated:"",pay_ref:this.payRef,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,availQty:0,aliasEn:""},this.searchTerm="",this.showDropdown=!1,this.highlightedIndex=-1,this.itemSelected.emit(null)}onKeyDown(e){if(this.showDropdown&&0!==this.getFilteredItems().length)switch(e.key){case"ArrowDown":e.preventDefault(),this.highlightedIndex=Math.min(this.highlightedIndex+1,this.getFilteredItems().length-1),this.scrollHighlightedItemIntoView();break;case"ArrowUp":e.preventDefault(),this.highlightedIndex=Math.max(this.highlightedIndex-1,-1),this.scrollHighlightedItemIntoView();break;case"Enter":e.preventDefault(),this.highlightedIndex>=0&&this.highlightedIndex<this.getFilteredItems().length&&this.selectItem(this.getFilteredItems()[this.highlightedIndex]);break;case"Escape":e.preventDefault(),this.showDropdown=!1,this.highlightedIndex=-1;break;case"Tab":this.showDropdown=!1,this.highlightedIndex=-1}else"ArrowDown"===e.key&&this.getFilteredItems().length>0&&(e.preventDefault(),this.showDropdown=!0,this.highlightedIndex=0,this.calculateDropdownPosition())}scrollHighlightedItemIntoView(){this.highlightedIndex>=0&&setTimeout(()=>{const e=document.querySelector(".dropdown-container"),n=document.querySelector(".item-item.highlighted");if(e&&n){const o=e.getBoundingClientRect(),r=n.getBoundingClientRect();r.bottom>o.bottom?e.scrollTop+=r.bottom-o.bottom+10:r.top<o.top&&(e.scrollTop-=o.top-r.top+10)}},10)}selectItem(e){this.selectedItem={id:e.id,dateCreated:e.dateCreated,pay_ref:this.payRef,item_desc:e.item_desc,item_name:e.item_name,item_unit:e.item_unit,parcode:e.parcode,pay_price:e.pay_price,perch_price:e.perch_price,qty:"",tot:e.pay_price,availQty:e.quantity,aliasEn:e.aliasEn},this.originalPayPrice=e.pay_price,this.originalPerchPrice=e.perch_price,this.pricesChanged=!1,this.searchTerm=e.item_name,this.showDropdown=!1,this.highlightedIndex=-1,this.cdr.detectChanges(),this.searchInput&&this.searchInput.nativeElement&&setTimeout(()=>{const n=this.searchInput.nativeElement;n.value=e.item_name;const o=new Event("input",{bubbles:!0});n.dispatchEvent(o)},10),this.itemSelected.emit(this.selectedItem),this.selectedItem.id&&(this.readItemByIdQty(),setTimeout(()=>{this.setFocusOnInput("qtyId")},200))}reopenDropdown(){setTimeout(()=>{this.highlightedIndex=-1,this.clearSearch(),this.presentDropdown()},50)}clearSearch(){this.searchTerm="",this.highlightedIndex=-1}selectFromPop(e){this.selectedItem={id:e.id,dateCreated:e.dateCreated,pay_ref:this.payRef,item_desc:e.item_desc,item_name:e.item_name,item_unit:e.item_unit,parcode:e.parcode,pay_price:e.pay_price,perch_price:e.perch_price,qty:"",tot:e.pay_price,availQty:e.quantity,aliasEn:e.aliasEn},this.originalPayPrice=e.pay_price,this.originalPerchPrice=e.perch_price,this.pricesChanged=!1,this.searchTerm=e.item_name,this.itemSelected.emit(this.selectedItem),this.isOpen=!1,setTimeout(()=>{this.setFocusOnInput("qtyId")},200)}checkPriceChanges(){return this.pricesChanged=+this.selectedItem.pay_price!=+this.originalPayPrice||+this.selectedItem.perch_price!=+this.originalPerchPrice,this.pricesChanged}getChangedPricesInfo(){let e=[];return+this.selectedItem.pay_price!=+this.originalPayPrice&&e.push(`\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639: ${this.originalPayPrice} \u2190 ${this.selectedItem.pay_price}`),+this.selectedItem.perch_price!=+this.originalPerchPrice&&e.push(`\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621: ${this.originalPerchPrice} \u2190 ${this.selectedItem.perch_price}`),e.join("\n")}updatePayPrice(e){return new Promise((n,o)=>{this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.updatePayPrice(e).subscribe(r=>{"Post Not Updated"!=r.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success"),this.originalPayPrice=+this.selectedItem.pay_price,this.originalPerchPrice=+this.selectedItem.perch_price,this.pricesChanged=!1,this.updateItemInArray(),this.updateSuccess=!0,n(!0)):(this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),n(!1))},r=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),n(!1)},()=>{this.loadingController.dismiss()})})}updateItemInArray(){const e=this.items.findIndex(o=>o.id===this.selectedItem.id);-1!==e&&(this.items[e].pay_price=this.selectedItem.pay_price,this.items[e].perch_price=this.selectedItem.perch_price);const n=this.items.findIndex(o=>o.id===this.selectedItem.id);-1!==n&&(this.items[n].pay_price=this.selectedItem.pay_price,this.items[n].perch_price=this.selectedItem.perch_price)}showPriceUpdateConfirmation(){return(0,h.mG)(this,void 0,void 0,function*(){return new Promise(e=>(0,h.mG)(this,void 0,void 0,function*(){const n=this.getChangedPricesInfo();yield(yield this.alertController.create({cssClass:"price-update-alert",header:"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0623\u0633\u0639\u0627\u0631",mode:"ios",message:`\n        <div style="text-align: right; direction: rtl;">\n          <p><strong>\u062a\u0645 \u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 \u0644\u0644\u0635\u0646\u0641:</strong></p>\n          <p><strong>${this.selectedItem.item_name}</strong></p>\n          <br>\n          <p><strong>\u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a:</strong></p>\n          <p style="color: #3880ff; white-space: pre-line;">${n}</p>\n          <br>\n          <p>\u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0641\u0638 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629\u061f</p>\n        </div>\n      `,buttons:[{text:"\u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629 \u0628\u062f\u0648\u0646 \u062d\u0641\u0638",cssClass:"tertiary",handler:()=>{e(!1)}},{text:"\u062d\u0641\u0638 \u0648\u0625\u0636\u0627\u0641\u0629",cssClass:"primary",handler:()=>{e(!0)}}]})).present()}))})}trackByItemId(e,n){return n.id||e}readItemByIdQty(){!this.selectedItem.id||!this.store_info||!this.year||(this.resetQuantityValues(),this.loadingQty=!0,this.api.readItemByIdQty(this.store_info.id,this.selectedItem.id,this.year.id).subscribe(e=>{console.log("readItemByIdQty",e);let n=e;"No record Found"!=n.message?(this.payTotQty=n.data[0].salesQuantity,this.availQty=n.data[0].availQty,this.qtyReal=n.data[0].qtyReal,this.perchTotQty=n.data[0].perchQuantity,this.firstQty=n.data[0].firstQuantity,console.log("readItemByIdQty",this.payTotQty,this.availQty,this.qtyReal,this.perchTotQty,this.firstQty),this.getQtyTotalItemId(),this.qtyError=!1):(this.qtyError=!0,this.qtyErrorMsg="\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0635\u0646\u0641"),this.loadingQty=!1},e=>{console.log(e),this.qtyError=!0,this.qtyErrorMsg="\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644",this.loadingQty=!1,this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger")}))}getQtyTotalItemId(){console.log("perchTotQty",this.perchTotQty,this.payTotQty),+this.availQty-+this.qtyReal<0?this.perchTotQty=+this.perchTotQty+Math.abs(+this.availQty-+this.qtyReal):+this.availQty-+this.qtyReal>0&&(this.payTotQty=+this.availQty-+this.qtyReal+ +this.payTotQty),this.availQty=+this.firstQty+ +this.perchTotQty-+this.payTotQty,this.selectedItem.availQty=this.availQty,console.log("Final availQty:",this.availQty)}refreshQuantity(){this.selectedItem.id&&this.readItemByIdQty()}qtyChange(e){const o="purchase"===this.parentPage||"edit-perch"===this.parentPage;("sales"===this.parentPage||"edit-sales"===this.parentPage)&&(this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.pay_price).toFixed(2),this.selectedItem.qty>+this.availQty&&this.showPayPriceWarning()),o&&(this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.perch_price).toFixed(2))}onPayPriceChange(e){("sales"===this.parentPage||"edit-sales"===this.parentPage)&&(this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.pay_price).toFixed(2)),this.enablePriceUpdateConfirmation&&this.checkPriceChanges()}onPerchPriceChange(e){("purchase"===this.parentPage||"edit-perch"===this.parentPage)&&(this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.perch_price).toFixed(2)),this.enablePriceUpdateConfirmation&&this.checkPriceChanges()}addToList(){return(0,h.mG)(this,void 0,void 0,function*(){if(("sales"===this.parentPage||"edit-sales"===this.parentPage)&&+this.selectedItem.qty>+this.availQty&&this.presentToast("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0645\u062a\u0648\u0641\u0631 \u0641\u064a \u0627\u0644\u0645\u062e\u0632\u0646","warning"),""==this.selectedItem.item_name||""==this.selectedItem.id||0==+this.selectedItem.qty)this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0635\u0646\u0641 \u0648\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0645\u064a\u0629","danger");else{if(this.enablePriceUpdateConfirmation&&this.checkPriceChanges()){const r=yield this.showPriceUpdateConfirmation();if(console.log("User chose not to save prices",r),r&&this.pricesChanged){let a={id:this.selectedItem.id,pay_price:this.selectedItem.pay_price,perch_price:this.selectedItem.perch_price};if(!(yield this.updatePayPrice(a))&&!(yield this.askContinueWithoutUpdate()))return}}this.itemAdded.emit(Object.assign({},this.selectedItem)),this.resetAfterAddingItem(),this.setFocusOnInput("dstPop");const o=this.popover.event;this.isOpen=!1,this.resetSelectedItem(),setTimeout(()=>{this.popover.event=o,this.isOpen=!0,this.highlightedIndex=-1,this.clearSearch(),this.resetSelectedItem(),setTimeout(()=>this.forceFocusOnPopInput(),100),setTimeout(()=>this.forceFocusOnPopInput(),300),setTimeout(()=>this.forceFocusOnPopInput(),500)},50)}})}askContinueWithoutUpdate(){return(0,h.mG)(this,void 0,void 0,function*(){return new Promise(e=>(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"\u0641\u0634\u0644 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",mode:"ios",message:"\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0623\u0633\u0639\u0627\u0631. \u0647\u0644 \u062a\u0631\u064a\u062f \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629 \u0628\u0627\u0644\u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0628\u062f\u0648\u0646 \u062d\u0641\u0638\u0647\u0627\u061f",buttons:[{text:"\u0625\u0644\u063a\u0627\u0621",role:"cancel",handler:()=>e(!1)},{text:"\u0645\u062a\u0627\u0628\u0639\u0629",handler:()=>e(!0)}]})).present()}))})}resetSelectedItem(){this.selectedItem={id:void 0,dateCreated:"",pay_ref:null,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,availQty:0,aliasEn:""}}showPayPriceWarning(){this.findPayPriceInput(),this.payPriceInputElement&&(this.payPriceInputElement.classList.add("qty-warning-border"),setTimeout(()=>{this.payPriceInputElement&&this.payPriceInputElement.classList.remove("qty-warning-border")},3e3)),this.showQtyWarning=!0,setTimeout(()=>{this.showQtyWarning=!1},3e3)}findPayPriceInput(){const e=['ion-input[ng-reflect-model*="pay_price"] input','ion-input[ng-reflect-model*="selectedItem.pay_price"] input',".pay-price-input input","ion-col:nth-child(3) ion-input input"];for(const n of e){const o=document.querySelector(n);if(o){this.payPriceInputElement=o;break}}this.payPriceInputElement||document.querySelectorAll("ion-input input").forEach(o=>{o.value==this.selectedItem.pay_price.toString()&&(this.payPriceInputElement=o)})}presentDropdownFromEvent(e){this.presentDropdown(e)}refresh(){this.refreshItems.emit()}refreshItemsList(){console.log("Manual refresh triggered by user"),this.showDropdown=!1,this.highlightedIndex=-1,this.selectedItem&&this.selectedItem.id&&this.clearSelection(),this.refreshItems.emit()}setFocusOnInput(e){"dstPop"===e||"searchInput"===e?(this.searchInput&&this.searchInput.nativeElement.focus(),this.presentDropdown()):"qtyId"===e&&this.qtyId&&this.qtyId.setFocus()}isFocused(e){}presentToast(e,n){return(0,h.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:e,duration:2e3,color:n,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}calculatePopoverSize(){}presentPopover(e){this.presentDropdown(e)}didDismiss(){this.showDropdown=!1,this.highlightedIndex=-1,this.searchTerm=""}onPopoverDidPresent(){}onPopoverKeyDown(e){this.onKeyDown(e)}scrollToSelected(){this.scrollHighlightedItemIntoView()}fixPopoverPosition(e){}setFocusOnPopInput(){this.searchInput&&this.searchInput.nativeElement.focus()}forceFocusOnPopInput(){setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement.focus()},100)}onWindowResize(){}onOrientationChange(){}reopenPopover(){this.reopenDropdown()}reopenPopoverWithStoredPosition(){this.presentDropdown()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(m.Br),t.Y36(x.F0),t.Y36(P.r),t.Y36(b.K),t.Y36(m.yF),t.Y36(m.IN),t.Y36(m.HT),t.Y36(f.uU),t.Y36(t.sBO))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-item-selector"]],viewQuery:function(e,n){if(1&e&&(t.Gf(I,5),t.Gf(T,5),t.Gf(Z,5),t.Gf(A,5),t.Gf(d,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.searchInput=o.first),t.iGM(o=t.CRH())&&(n.inputWrapper=o.first),t.iGM(o=t.CRH())&&(n.qtyId=o.first),t.iGM(o=t.CRH())&&(n.popover=o.first),t.iGM(o=t.CRH())&&(n.popInput=o.first)}},hostBindings:function(e,n){1&e&&t.NdJ("click",function(r){return n.onDocumentClick(r)},!1,t.evT)("focusin",function(r){return n.onDocumentFocusIn(r)},!1,t.evT)},inputs:{items:"items",loadingItems:"loadingItems",searchLang:"searchLang",store_info:"store_info",year:"year",payRef:"payRef",showQuantityInput:"showQuantityInput",showPriceInput:"showPriceInput",showPerchPriceInput:"showPerchPriceInput",placeholder:"placeholder",enablePriceUpdateConfirmation:"enablePriceUpdateConfirmation",parentPage:"parentPage"},outputs:{itemSelected:"itemSelected",itemAdded:"itemAdded",refreshItems:"refreshItems"},features:[t.TTD],decls:17,vars:7,consts:[["size","4",4,"ngIf"],["size","2","class","ion-margin-top",4,"ngIf"],["size","2",1,"ion-margin-top"],[1,"ion-padding"],[1,"custInput"],[3,"readonly","ngModel","ngModelChange"],["size","2",1,"ion-margin-top","ion-padding-top"],["expand","block","routerDirection","root","color","primary",1,"ion-margin-top",3,"click"],[1,"ion-text-center"],["size","4"],[3,"disabled"],[1,"ion-no-margin","ion-no-padding"],["size","12",1,"ion-no-margin","ion-no-padding"],[1,"label-with-buttons-container"],[1,"action-buttons-left"],["fill","clear","size","small",1,"item-refresh-btn-left",3,"disabled","click"],["name","refresh","color","primary"],["size","small","fill","clear",1,"add-item-btn-left",3,"click"],["name","add-circle-outline","color","primary","slot","icon-only"],["name","dots","class","item-loading-spinner-left",4,"ngIf"],[1,"custInput","item-selector-wrapper"],[1,"input-container-wrapper"],["inputWrapper",""],[1,"item-selector-input",3,"ngModel","placeholder","disabled","clearInput","ngModelChange","ionInput","ionClear","ionFocus","ionBlur","click","keydown"],["searchInput",""],["class","dropdown-container",3,"top","left","width",4,"ngIf"],[1,"stock-info-container"],["class","stock-info-line",4,"ngIf"],[1,"stock-display-container"],["class","stock-info-single-line",4,"ngIf"],["class","stock-info-line error-line",4,"ngIf"],["name","dots",1,"item-loading-spinner-left"],[1,"dropdown-container"],[1,"item-dropdown"],["button","","class","item-item",3,"highlighted","click","mousedown","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["button","",1,"item-item",3,"click","mousedown","mouseenter"],["class","item-desc",4,"ngIf"],[1,"item-prices-compact"],[1,"price-sale"],[1,"price-purchase"],[1,"item-desc"],[1,"no-results"],[1,"stock-info-line"],["name","crescent","color","primary"],[1,"loading-text"],[1,"stock-info-single-line"],[1,"stock-section"],["color","danger",1,"qty-value"],["fill","clear","size","small",1,"refresh-btn",3,"click"],["name","refresh-outline","color","primary"],[1,"report-section"],["fill","outline","fill","clear","size","small","color","primary",3,"click",4,"ngIf"],[1,"price-info-section"],["color","dark"],[1,"action-button-section"],["fill","clear","size","small","color","primary",2,"cursor","pointer","z-index","1000","position","relative",3,"click"],["name","information-circle-outline","slot","start"],["fill","outline","fill","clear","size","small","color","primary",3,"click"],["name","analytics-outline","slot","icon-only"],[1,"stock-info-line","error-line"],["color","danger",1,"error-text"],["name","refresh-outline","color","danger"],[1,"custInput",3,"ngClass"],["select-all","",3,"ngModel","keyup.enter","ionFocus","ngModelChange","ionChange"],["qtyId",""],[3,"ngModel","keyup.enter","ngModelChange","ionChange"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.YNc(2,u,4,1,"ion-col",0),t.YNc(3,S,24,13,"ion-col",0),t.YNc(4,j,7,4,"ion-col",1),t.YNc(5,N,6,1,"ion-col",1),t.YNc(6,J,6,1,"ion-col",1),t.TgZ(7,"ion-col",2),t.TgZ(8,"ion-label",3),t.TgZ(9,"strong"),t._uU(10,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),t.qZA(),t.qZA(),t.TgZ(11,"ion-item",4),t.TgZ(12,"ion-input",5),t.NdJ("ngModelChange",function(r){return n.selectedItem.tot=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"ion-col",6),t.TgZ(14,"ion-button",7),t.NdJ("click",function(){return n.addToList()}),t.TgZ(15,"ion-label",8),t._uU(16,"+"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",1==n.loadingItems),t.xp6(1),t.Q6J("ngIf",0==n.loadingItems),t.xp6(1),t.Q6J("ngIf",n.showQuantityInput),t.xp6(1),t.Q6J("ngIf",n.showPriceInput),t.xp6(1),t.Q6J("ngIf",n.showPerchPriceInput),t.xp6(6),t.Q6J("readonly",!0)("ngModel",n.selectedItem.tot))},directives:[m.jY,m.Nd,f.O5,m.wI,m.Q$,m.Ie,m.pK,m.j9,v.JJ,v.On,m.YG,m.PQ,m.gu,m.q_,f.sg,m.yW,f.mk],styles:[".custInput[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;margin:5px 0}.red[_ngcontent-%COMP%]{--background: #ffebee;--color: #c62828}.darko[_ngcontent-%COMP%]{--background: #f5f5f5;--color: #333}.cust_Toast[_ngcontent-%COMP%]{--border-radius: 10px;--box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .1)}.label-with-buttons-container[_ngcontent-%COMP%]{direction:rtl;display:flex;justify-content:space-between;align-items:center;position:relative;text-align:right}.label-with-buttons-container[_ngcontent-%COMP%]   .action-buttons-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;order:1}.label-with-buttons-container[_ngcontent-%COMP%]   .item-label-center[_ngcontent-%COMP%]{flex:1;text-align:center;order:2}.item-refresh-btn-left[_ngcontent-%COMP%]{--color: var(--ion-color-success);--padding-start: 3px;--padding-end: 3px;height:32px;width:32px;margin:0}.item-refresh-btn-left[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;transition:transform .3s ease}.item-refresh-btn-left[_ngcontent-%COMP%]   ion-icon.spin[_ngcontent-%COMP%]{animation:spin 1s linear infinite}.item-refresh-btn-left[_ngcontent-%COMP%]:hover{--color: var(--ion-color-success-shade);--background: rgba(var(--ion-color-success-rgb), .1)}.item-refresh-btn-left[disabled][_ngcontent-%COMP%]{--color: var(--ion-color-medium);opacity:.5}.add-item-btn-left[_ngcontent-%COMP%]{--color: var(--ion-color-success);--padding-start: 3px;--padding-end: 3px;height:32px;width:32px;margin:0}.add-item-btn-left[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.add-item-btn-left[_ngcontent-%COMP%]:hover{--color: var(--ion-color-success-shade);--background: rgba(var(--ion-color-success-rgb), .1)}.item-loading-spinner-left[_ngcontent-%COMP%]{width:18px;height:18px;margin:0}.dropdown-filter-container[_ngcontent-%COMP%]{background:var(--ion-color-light-tint);border-bottom:1px solid var(--ion-color-light-shade)}.filter-toggle-header[_ngcontent-%COMP%]{padding:8px 12px;background:var(--ion-color-light)}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;margin:0;width:100%;justify-content:space-between;display:flex;align-items:center}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   .button-inner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-left:6px;transition:transform .2s ease;order:1}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;order:2;flex:1;text-align:right;margin-right:8px}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{font-size:12px;font-weight:400;order:3;margin-left:auto}.filter-buttons-wrapper[_ngcontent-%COMP%]{padding:12px;animation:slideDown .2s ease-out}.filter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-start;direction:rtl}.filter-button[_ngcontent-%COMP%]{--border-radius: 20px;--padding-start: 12px;--padding-end: 12px;--padding-top: 6px;--padding-bottom: 6px;height:32px;font-size:13px;font-weight:500;margin:0;text-transform:none}.filter-button[fill=outline][_ngcontent-%COMP%]{--border-color: var(--ion-color-primary);--border-width: 1.5px;--color: var(--ion-color-primary);--background: transparent}.filter-button[fill=outline][_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-color-primary-rgb), .1)}.filter-button[fill=outline][_ngcontent-%COMP%]:active{--background: rgba(var(--ion-color-primary-rgb), .2)}.filter-button[fill=solid][_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: white}.filter-button[fill=solid][_ngcontent-%COMP%]:hover, .filter-button[fill=solid][_ngcontent-%COMP%]:active{--background: var(--ion-color-primary-shade)}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px);max-height:0}to{opacity:1;transform:translateY(0);max-height:200px}}.dropdown-container[_ngcontent-%COMP%]   .dropdown-filter-container[_ngcontent-%COMP%] + .item-dropdown[_ngcontent-%COMP%]{border-top:none}.item-selector-wrapper[_ngcontent-%COMP%]{width:100%;margin:5px 0}.item-selector-wrapper[_ngcontent-%COMP%]   .input-container-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]{--background: transparent;--color: var(--ion-color-dark);--placeholder-color: var(--ion-color-medium);width:100%;direction:rtl;text-align:right;--padding-start: 12px;--padding-end: 45px}.item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], .item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:calc(100% - 80px)!important;display:block!important}.item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[disabled][_ngcontent-%COMP%]{--background: var(--ion-color-light);--color: var(--ion-color-medium);cursor:not-allowed}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[_ngcontent-%COMP%]{--color: var(--ion-color-success);--padding-start: 3px;--padding-end: 3px;height:30px;width:30px;margin:0;position:absolute;right:40px;top:50%;transform:translateY(-50%);z-index:1000}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;transition:transform .3s ease}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[_ngcontent-%COMP%]   ion-icon.spin[_ngcontent-%COMP%]{animation:spin 1s linear infinite}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[_ngcontent-%COMP%]:hover{--color: var(--ion-color-success-shade);--background: rgba(var(--ion-color-success-rgb), .1)}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[disabled][_ngcontent-%COMP%]{--color: var(--ion-color-medium);opacity:.5}.item-selector-wrapper[_ngcontent-%COMP%]   .item-loading-spinner[_ngcontent-%COMP%]{position:absolute;right:45px;top:50%;transform:translateY(-50%);width:16px;height:16px;z-index:999}.dropdown-container[_ngcontent-%COMP%]{position:fixed;z-index:10000;background:white;border:1px solid var(--ion-color-light);border-radius:8px;box-shadow:0 8px 24px #0003;max-height:300px;overflow-y:auto;margin-top:4px;min-width:250px}.dropdown-container[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{background:var(--ion-color-light-tint);border-bottom:1px solid var(--ion-color-light-shade);padding:8px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]{margin:0;padding:0;background:transparent}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;--color: var(--ion-color-dark);--padding-start: 12px;--padding-end: 12px;--min-height: 60px;direction:rtl;text-align:right}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light)}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]:active{--background: rgba(var(--ion-color-primary-rgb), .1)}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item.highlighted[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .1);border-left:3px solid var(--ion-color-primary)}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--ion-color-dark);margin:0 0 4px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);margin:2px 0}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-prices-compact[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:11px;margin-top:4px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-prices-compact[_ngcontent-%COMP%]   .price-sale[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-prices-compact[_ngcontent-%COMP%]   .price-purchase[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:600}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-prices-compact[_ngcontent-%COMP%]   .stock-qty[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:500}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{--color: var(--ion-color-medium);--padding-start: 12px;--padding-end: 12px;text-align:center;font-style:italic}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.label-with-buttons-container[_ngcontent-%COMP%]   .action-buttons-left[_ngcontent-%COMP%]{gap:2px}.label-with-buttons-container[_ngcontent-%COMP%]   .item-refresh-btn-left[_ngcontent-%COMP%], .label-with-buttons-container[_ngcontent-%COMP%]   .add-item-btn-left[_ngcontent-%COMP%]{height:28px;width:28px;--padding-start: 2px;--padding-end: 2px}.label-with-buttons-container[_ngcontent-%COMP%]   .item-refresh-btn-left[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .label-with-buttons-container[_ngcontent-%COMP%]   .add-item-btn-left[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.label-with-buttons-container[_ngcontent-%COMP%]   .item-loading-spinner-left[_ngcontent-%COMP%]{width:16px;height:16px}.label-with-buttons-container[_ngcontent-%COMP%]   .item-label-center[_ngcontent-%COMP%]{font-size:14px}.filter-buttons[_ngcontent-%COMP%]{gap:6px}.filter-button[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 4px;--padding-bottom: 4px;height:28px;font-size:12px}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;margin-left:4px}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:13px}.filter-toggle-header[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{font-size:11px}.item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]{font-size:13px;--padding-start: 10px;--padding-end: 40px}.item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], .item-selector-wrapper[_ngcontent-%COMP%]   .item-selector-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:calc(100% - 45px)!important;font-size:13px!important}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[_ngcontent-%COMP%]{right:36px;height:26px;width:26px;--padding-start: 2px;--padding-end: 2px}.item-selector-wrapper[_ngcontent-%COMP%]   .item-refresh-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.item-selector-wrapper[_ngcontent-%COMP%]   .item-loading-spinner[_ngcontent-%COMP%]{right:41px;width:14px;height:14px}.dropdown-container[_ngcontent-%COMP%]{max-height:200px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]{--min-height: 50px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:13px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:11px}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-prices-compact[_ngcontent-%COMP%]{font-size:10px}}.item-selector-wrapper[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], .item-selector-wrapper[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;width:100%!important}.item-selector-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{overflow:hidden!important}.item-selector-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.stock-info-container[_ngcontent-%COMP%]{display:flex;align-items:center}.stock-info-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.stock-info-line[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:14px;margin:0}.stock-info-line[_ngcontent-%COMP%]   .qty-value[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.stock-info-line[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:12px}.stock-info-line[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{font-size:12px}.stock-info-line[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;margin:0;height:24px;width:24px}.stock-info-line[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.error-line[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-danger)!important}ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px}.new-item-btn[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;margin-left:4px}.new-item-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.button-labels[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:4px;padding-right:8px}.button-labels[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{font-size:11px;color:var(--ion-color-primary);margin-left:32px}.category-selector-container[_ngcontent-%COMP%]{padding:8px 16px;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-light-shade);position:relative}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-input[_ngcontent-%COMP%]{--background: #ffffff;--border-radius: 6px;--padding-start: 12px;--padding-end: 35px;--color: var(--ion-color-dark);--placeholder-color: var(--ion-color-medium);border:1.5px solid var(--ion-color-light);border-radius:6px;height:36px;font-size:13px;direction:rtl;text-align:right}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-input[_ngcontent-%COMP%]:focus{--border-color: var(--ion-color-primary);box-shadow:0 0 0 2px rgba(var(--ion-color-primary-rgb),.2)}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-input.has-focus[_ngcontent-%COMP%]{--border-color: var(--ion-color-primary)}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-dropdown-icon[_ngcontent-%COMP%]{position:absolute;right:10px;color:var(--ion-color-medium);font-size:16px;transition:transform .2s ease;cursor:pointer;z-index:10}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-dropdown-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.category-dropdown-container[_ngcontent-%COMP%]{position:fixed;z-index:10000;background:white;border:1px solid var(--ion-color-light);border-radius:6px;box-shadow:0 8px 24px #0003;max-height:160px;overflow-y:auto;margin-top:4px;min-width:200px}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]{margin:0;padding:0;background:transparent}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;--color: var(--ion-color-dark);--padding-start: 12px;--padding-end: 12px;--min-height: 40px;direction:rtl;text-align:right}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light)}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:active{--background: rgba(var(--ion-color-primary-rgb), .1)}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item.highlighted[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .1);border-left:3px solid var(--ion-color-primary)}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--ion-color-dark);margin:0}@media (max-width: 480px){.category-selector-container[_ngcontent-%COMP%]{padding:6px 12px}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-input[_ngcontent-%COMP%]{height:32px;font-size:12px;--padding-start: 10px;--padding-end: 30px}.category-selector-container[_ngcontent-%COMP%]   .category-input-wrapper[_ngcontent-%COMP%]   .category-dropdown-icon[_ngcontent-%COMP%]{right:8px;font-size:14px}.category-dropdown-container[_ngcontent-%COMP%]{max-height:120px}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{--min-height: 36px}.category-dropdown-container[_ngcontent-%COMP%]   .category-dropdown[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:12px}}.popover-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;gap:16px}.popover-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: var(--ion-color-primary);transform:scale(1.2)}.popover-loading[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;font-weight:500}.items-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;min-height:0}.item-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:6px!important}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:4px}.item-name[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-dark);font-size:13px!important;line-height:1.2!important;flex:1;margin:0;letter-spacing:.2px}.stock-status[_ngcontent-%COMP%]{flex-shrink:0}.stock-status[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:4px 8px;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.stock-status[_ngcontent-%COMP%]   ion-badge[color=danger][_ngcontent-%COMP%]{--background: var(--ion-color-danger);--color: white}.stock-status[_ngcontent-%COMP%]   ion-badge[color=warning][_ngcontent-%COMP%]{--background: var(--ion-color-warning);--color: var(--ion-color-warning-contrast)}.stock-status[_ngcontent-%COMP%]   ion-badge[color=success][_ngcontent-%COMP%]{--background: var(--ion-color-success);--color: white}.item-prices[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:20px}.price-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;flex:1;padding:6px 8px;border-radius:6px;background:rgba(0,0,0,.02);padding:2px 5px!important}.price-item.sale-price[_ngcontent-%COMP%]{background:rgba(var(--ion-color-success-rgb),.1)}.price-item.sale-price[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%]{color:var(--ion-color-success);font-size:14px}.price-item.sale-price[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:700}.price-item.sale-price[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{color:var(--ion-color-success-shade)}.price-item.purchase-price[_ngcontent-%COMP%]{background:rgba(var(--ion-color-danger-rgb),.1)}.price-item.purchase-price[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:14px}.price-item.purchase-price[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:300}.price-item.purchase-price[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{color:var(--ion-color-danger-shade)}.price-icon[_ngcontent-%COMP%]{font-size:10px;min-width:10px}.price-label[_ngcontent-%COMP%]{font-size:8px;font-weight:700;min-width:25px;text-transform:uppercase;letter-spacing:.3px}.price-value[_ngcontent-%COMP%]{font-size:10px;font-weight:700;white-space:nowrap}.stock-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:6px;padding:2px 5px!important;background:rgba(var(--ion-color-medium-rgb),.1);border-radius:6px}.stock-label[_ngcontent-%COMP%]{font-size:11px;color:var(--ion-color-medium);font-weight:700;text-transform:uppercase;letter-spacing:.3px}.stock-value[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:var(--ion-color-dark)}.selection-icon[_ngcontent-%COMP%]{font-size:20px;animation:checkmark-bounce .3s ease}@keyframes checkmark-bounce{0%{transform:scale(0)}50%{transform:scale(1.2)}to{transform:scale(1)}}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;gap:12px;text-align:center}.no-results[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.no-results[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.5}.navigation-hint[_ngcontent-%COMP%]{padding:12px 16px;background:var(--ion-color-light-tint);border-top:1px solid var(--ion-color-light-shade);text-align:center}.navigation-hint[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:11px;color:var(--ion-color-medium);line-height:1.4}.popover-item[_ngcontent-%COMP%]{--inner-margin-top: 8px !important;--inner-padding-top: 8px !important;--inner-padding-bottom: 8px !important}.popover-item.keyboard-selected[_ngcontent-%COMP%]{--background: #514e4e !important;--color: white !important;transform:translate(-4px);box-shadow:4px 0 12px #4a4a4a4d;border-left:4px solid #333333}.popover-item.keyboard-selected[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#fff!important;font-weight:700!important}.popover-item.keyboard-selected[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{color:#fffffff2!important;font-weight:600!important}.popover-item.keyboard-selected[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%], .popover-item.keyboard-selected[_ngcontent-%COMP%]   .stock-label[_ngcontent-%COMP%]{color:#ffffffd9!important}.popover-item.keyboard-selected[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%]{color:#ffffffe6!important}.popover-item.keyboard-selected[_ngcontent-%COMP%]   .stock-value[_ngcontent-%COMP%]{color:#fffffff2!important;font-weight:600!important}.popover-item.keyboard-selected[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .25) !important;--color: white !important;font-weight:600!important}.popover-item.keyboard-selected[_ngcontent-%COMP%]   .price-item.sale-price[_ngcontent-%COMP%], .popover-item.keyboard-selected[_ngcontent-%COMP%]   .price-item.purchase-price[_ngcontent-%COMP%], .popover-item.keyboard-selected[_ngcontent-%COMP%]   .stock-info[_ngcontent-%COMP%]{background:rgba(255,255,255,.15)!important}.popover-content[_ngcontent-%COMP%]{scroll-behavior:smooth}.popover-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.popover-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.popover-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--ion-color-medium-tint);border-radius:2px}.popover-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--ion-color-medium)}[_nghost-%COMP%]     .item-selector-popover{width:min(280px,75vw)!important;height:min(320px,45vh)!important;max-width:75vw!important;max-height:45vh!important}[_nghost-%COMP%]     .item-selector-popover .popover-content{max-height:calc(min(320px,45vh) - 45px)!important}[_nghost-%COMP%]     .item-selector-popover ion-toolbar{min-height:45px!important}@supports (padding: 0px){[_nghost-%COMP%]     .item-selector-popover .popover-content{padding-left:max(8px,env(safe-area-inset-left));padding-right:max(8px,env(safe-area-inset-right));padding-bottom:max(8px,env(safe-area-inset-bottom))}}[_nghost-%COMP%]     .item-selector-popover{position:absolute!important}[_nghost-%COMP%]     .item-selector-popover.popover-desktop{position:absolute!important;top:auto!important;left:auto!important;transform:none!important}@media (max-width: 768px){[_nghost-%COMP%]     .item-selector-popover{position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important}}.stock-display-container[_ngcontent-%COMP%]{margin-top:5px}.stock-info-single-line[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;flex-wrap:nowrap;gap:4px;width:100%;overflow-x:auto}.stock-info-single-line[_ngcontent-%COMP%]   .stock-section[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .price-info-section[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;flex-shrink:0;white-space:nowrap}.stock-info-single-line[_ngcontent-%COMP%]   .stock-section[_ngcontent-%COMP%]   .qty-value[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.stock-info-single-line[_ngcontent-%COMP%]   .stock-section[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;margin:0;height:24px;width:24px}.stock-info-single-line[_ngcontent-%COMP%]   .stock-section[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.stock-info-single-line[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 6px;--padding-end: 6px;--padding-top: 4px;--padding-bottom: 4px;margin:0;min-height:28px}.stock-info-single-line[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.stock-info-single-line[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:14px;margin:0}.stock-info-single-line[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.stock-info-single-line[_ngcontent-%COMP%]{gap:2px;font-size:12px}.stock-info-single-line[_ngcontent-%COMP%]   .stock-section[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .price-info-section[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]{gap:2px}.stock-info-single-line[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:12px}.stock-info-single-line[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}.stock-info-single-line[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;--padding-top: 2px;--padding-bottom: 2px;min-height:24px}.stock-info-single-line[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .stock-info-single-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}[_nghost-%COMP%]     .qty-warning-border{border:2px solid #ff4444!important;border-radius:4px!important;box-shadow:0 0 8px #ff44444d!important;animation:warningPulse .5s ease-in-out}@keyframes warningPulse{0%{box-shadow:0 0 8px #ff44444d}50%{box-shadow:0 0 16px #f449}to{box-shadow:0 0 8px #ff44444d}}[_nghost-%COMP%]     ion-item.qty-warning{--border-color: #ff4444 !important;--border-width: 2px !important;--border-style: solid !important}[_nghost-%COMP%]     ion-item.qty-warning ion-input{--border-color: #ff4444 !important;--border-width: 2px !important}.stock-info-line[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}.stock-info-line[_ngcontent-%COMP%]   .price-info-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;flex:1}.stock-info-line[_ngcontent-%COMP%]   .action-button-section[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.stock-info-line[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 6px;--padding-bottom: 6px;margin:0;min-height:32px;cursor:pointer!important}.stock-info-line[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-color-primary-rgb), .1);cursor:pointer!important}.stock-info-line[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]:active{--background: rgba(var(--ion-color-primary-rgb), .2)}.stock-info-line[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:4px}.stock-info-line[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{cursor:pointer!important}.stock-info-line[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{cursor:pointer!important}.stock-info-line[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%], .stock-info-line[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{cursor:pointer!important;pointer-events:all!important}@media (prefers-color-scheme: dark){.search-input-wrapper[_ngcontent-%COMP%]   .item-input[_ngcontent-%COMP%]{--background: var(--ion-color-step-50);--color: var(--ion-color-dark-contrast);border-color:var(--ion-color-step-200)}.dropdown-container[_ngcontent-%COMP%]{background:var(--ion-color-step-50);border-color:var(--ion-color-step-200)}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]{--color: var(--ion-color-dark-contrast)}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-step-100)}.dropdown-container[_ngcontent-%COMP%]   .item-dropdown[_ngcontent-%COMP%]   .item-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-dark-contrast)}}"]}),s})()},91872:(q,w,p)=>{p.d(w,{z:()=>A});var h=p(70655),t=p(29863),g=p(23349),m=p(34182),x=p(69808);const P=["adjustmentInput"];function b(d,u){if(1&d){const i=t.EpF();t.TgZ(0,"ion-button",49),t.NdJ("click",function(){const C=t.CHM(i).$implicit;return t.oxw().setPresetValue(C)}),t._uU(1),t.qZA()}if(2&d){const i=u.$implicit,c=t.oxw();t.xp6(1),t.lnq(" ",i>0?"+":"","",i,"","percentage"===c.adjustmentType?"%":""," ")}}function f(d,u){if(1&d&&(t.TgZ(0,"div",67),t._UZ(1,"ion-icon",68),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&d){const i=t.oxw().$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("name",c.getNewPrice(i)>c.getOriginalPrice(i)?"trending-up":"trending-down")("color",c.getNewPrice(i)>c.getOriginalPrice(i)?"success":"danger"),t.xp6(1),t.ekj("increased",c.getNewPrice(i)>c.getOriginalPrice(i))("decreased",c.getNewPrice(i)<c.getOriginalPrice(i)),t.xp6(1),t.hij(" ",c.getPriceDifference(i).toFixed(2)," ")}}function v(d,u){if(1&d&&(t.TgZ(0,"div",55),t.TgZ(1,"div",56),t.TgZ(2,"div",57),t._UZ(3,"ion-icon",58),t._uU(4),t.qZA(),t.TgZ(5,"div",59),t.TgZ(6,"span",60),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",61),t.TgZ(9,"div",62),t.TgZ(10,"span",63),t._uU(11),t.qZA(),t.TgZ(12,"span",64),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"div",62),t.TgZ(15,"span",63),t._uU(16),t.qZA(),t.TgZ(17,"span",65),t._uU(18),t.qZA(),t.qZA(),t.YNc(19,f,4,7,"div",66),t.qZA(),t.qZA()),2&d){const i=u.$implicit,c=u.index,l=t.oxw(2);t.ekj("even",c%2==0),t.xp6(4),t.hij(" ",i.item_name," "),t.xp6(3),t.hij("\u0627\u0644\u0643\u0645\u064a\u0629: ",i.qty,""),t.xp6(4),t.Oqu("sales"===l.mode?"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u064a:":"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 \u0627\u0644\u062d\u0627\u0644\u064a:"),t.xp6(2),t.Oqu(l.getOriginalPrice(i).toFixed(2)),t.xp6(3),t.Oqu("sales"===l.mode?"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639 \u0627\u0644\u062c\u062f\u064a\u062f:":"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 \u0627\u0644\u062c\u062f\u064a\u062f:"),t.xp6(1),t.ekj("increased",l.getNewPrice(i)>l.getOriginalPrice(i))("decreased",l.getNewPrice(i)<l.getOriginalPrice(i)),t.xp6(1),t.hij(" ",l.getNewPrice(i).toFixed(2)," "),t.xp6(1),t.Q6J("ngIf",l.getNewPrice(i)!==l.getOriginalPrice(i))}}function I(d,u){if(1&d&&(t.TgZ(0,"div",50),t.TgZ(1,"ion-card",51),t.TgZ(2,"ion-card-header"),t.TgZ(3,"ion-card-title",11),t._UZ(4,"ion-icon",52),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"ion-card-content"),t.TgZ(7,"div",53),t.YNc(8,v,20,13,"div",54),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d){const i=t.oxw();t.xp6(5),t.hij(" \u0645\u0639\u0627\u064a\u0646\u0629 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 (",i.previewItems.length,") "),t.xp6(3),t.Q6J("ngForOf",i.previewItems)}}const T=function(d,u,i,c,l){return[2,5,7,10,15,d,u,i,c,l]},Z=function(d,u,i){return[100,200,300,d,u,i]};let A=(()=>{class d{constructor(i){this.modalController=i,this.itemsList=[],this.mode="purchase",this.adjustmentValue=0,this.adjustmentType="percentage",this.previewItems=[]}get priceField(){return"sales"===this.mode?"pay_price":"perch_price"}get originalPriceField(){return"sales"===this.mode?"original_pay_price":"original_perch_price"}get newPriceField(){return"sales"===this.mode?"new_pay_price":"new_perch_price"}ngOnInit(){(!this.itemsList||!Array.isArray(this.itemsList))&&(this.itemsList=[]),this.previewItems=this.itemsList.map(i=>{const c=parseFloat(i[this.priceField])||0;return Object.assign(Object.assign({},i),{[this.originalPriceField]:c,[this.newPriceField]:c})}),this.updatePreview()}onAdjustmentTypeChange(){this.adjustmentValue=0,this.updatePreview()}updatePreview(){this.previewItems=this.previewItems.map(i=>{const c=parseFloat(i[this.originalPriceField])||0;let l=c;return l="percentage"===this.adjustmentType?c*(1+this.adjustmentValue/100):c+this.adjustmentValue,l=Math.max(0,l),Object.assign(Object.assign({},i),{[this.newPriceField]:Math.round(100*l)/100})})}applyChanges(){return(0,h.mG)(this,void 0,void 0,function*(){const i=this.previewItems.map(c=>Object.assign(Object.assign({},c),{[this.priceField]:c[this.newPriceField]}));yield this.modalController.dismiss(i)})}cancel(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss()})}getTotalOriginal(){return this.previewItems.reduce((i,c)=>i+(parseFloat(c[this.originalPriceField])||0)*(parseFloat(c.qty)||0),0)}getTotalNew(){return this.previewItems.reduce((i,c)=>i+(parseFloat(c[this.newPriceField])||0)*(parseFloat(c.qty)||0),0)}getTotalDifference(){return this.getTotalNew()-this.getTotalOriginal()}setPresetValue(i){this.adjustmentValue=i,this.updatePreview()}getOriginalPrice(i){return parseFloat(i[this.originalPriceField])||0}getNewPrice(i){return parseFloat(i[this.newPriceField])||0}getPriceDifference(i){return this.getNewPrice(i)-this.getOriginalPrice(i)}ngOnDestroy(){}}return d.\u0275fac=function(i){return new(i||d)(t.Y36(g.IN))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-price-adjustment-dialog"]],viewQuery:function(i,c){if(1&i&&t.Gf(P,5),2&i){let l;t.iGM(l=t.CRH())&&(c.adjustmentInput=l.first)}},inputs:{itemsList:"itemsList",mode:"mode"},decls:79,vars:28,consts:[["dir","rtl",1,"modern-header"],["color","primary"],[1,"header-title"],["name","pricetag",1,"title-icon"],["slot","end"],["fill","clear",1,"close-btn",3,"click"],["name","close","slot","icon-only"],["dir","rtl",1,"modern-content"],[1,"adjustment-section"],[1,"control-card"],[1,"card-header"],[1,"section-title"],["name","settings","color","primary"],[1,"card-content"],[1,"adjustment-type-container"],[1,"modern-segment",3,"ngModel","ngModelChange","ionChange"],["value","percentage",1,"segment-btn"],["name","percent"],["value","amount",1,"segment-btn"],["name","cash"],[1,"value-input-container"],["fill","outline",1,"modern-input"],["position","stacked"],["type","number",1,"adjustment-input",3,"ngModel","placeholder","ngModelChange"],["adjustmentInput",""],["slot","end","color","primary",3,"name"],[1,"quick-actions"],["size","small","fill","outline","color","primary","class","quick-btn",3,"click",4,"ngFor","ngForOf"],[1,"summary-section"],[1,"summary-card"],["name","calculator","color","success"],[1,"summary-grid"],["size","4"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value","primary"],[1,"summary-value"],[1,"summary-value","success"],["size","12"],[1,"difference-item"],[1,"difference-label"],[1,"difference-value"],["class","preview-section",4,"ngIf"],[1,"modern-footer"],[1,"action-buttons"],["expand","block","color","medium","fill","outline",1,"cancel-btn",3,"click"],["name","close-circle","slot","start"],["expand","block","color","primary",1,"apply-btn",3,"disabled","click"],["name","checkmark-circle","slot","start"],["size","small","fill","outline","color","primary",1,"quick-btn",3,"click"],[1,"preview-section"],[1,"items-card"],["name","eye","color","tertiary"],[1,"items-container"],["class","item-preview",3,"even",4,"ngFor","ngForOf"],[1,"item-preview"],[1,"item-info"],[1,"item-name"],["name","cube","color","primary"],[1,"item-details"],[1,"quantity"],[1,"price-comparison"],[1,"price-row"],[1,"price-label"],[1,"original-price"],[1,"new-price"],["class","price-difference",4,"ngIf"],[1,"price-difference"],[3,"name","color"]],template:function(i,c){1&i&&(t.TgZ(0,"ion-header",0),t.TgZ(1,"ion-toolbar",1),t.TgZ(2,"ion-title",2),t._UZ(3,"ion-icon",3),t._uU(4),t.qZA(),t.TgZ(5,"ion-buttons",4),t.TgZ(6,"ion-button",5),t.NdJ("click",function(){return c.cancel()}),t._UZ(7,"ion-icon",6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-content",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"div",10),t.TgZ(12,"h3",11),t._UZ(13,"ion-icon",12),t._uU(14," \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062a\u0639\u062f\u064a\u0644 "),t.qZA(),t.qZA(),t.TgZ(15,"div",13),t.TgZ(16,"div",14),t.TgZ(17,"ion-segment",15),t.NdJ("ngModelChange",function(C){return c.adjustmentType=C})("ionChange",function(){return c.onAdjustmentTypeChange()}),t.TgZ(18,"ion-segment-button",16),t._UZ(19,"ion-icon",17),t.TgZ(20,"ion-label"),t._uU(21,"\u0646\u0633\u0628\u0629 \u0645\u0626\u0648\u064a\u0629"),t.qZA(),t.qZA(),t.TgZ(22,"ion-segment-button",18),t._UZ(23,"ion-icon",19),t.TgZ(24,"ion-label"),t._uU(25,"\u0642\u064a\u0645\u0629 \u062b\u0627\u0628\u062a\u0629"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",20),t.TgZ(27,"ion-item",21),t.TgZ(28,"ion-label",22),t._uU(29),t.qZA(),t.TgZ(30,"ion-input",23,24),t.NdJ("ngModelChange",function(C){return c.adjustmentValue=C})("ngModelChange",function(){return c.updatePreview()}),t.qZA(),t._UZ(32,"ion-icon",25),t.qZA(),t.qZA(),t.TgZ(33,"div",26),t.YNc(34,b,2,3,"ion-button",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",28),t.TgZ(36,"ion-card",29),t.TgZ(37,"ion-card-header"),t.TgZ(38,"ion-card-title",11),t._UZ(39,"ion-icon",30),t._uU(40," \u0645\u0644\u062e\u0635 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 "),t.qZA(),t.qZA(),t.TgZ(41,"ion-card-content"),t.TgZ(42,"ion-grid",31),t.TgZ(43,"ion-row"),t.TgZ(44,"ion-col",32),t.TgZ(45,"div",33),t.TgZ(46,"div",34),t._uU(47,"\u0639\u062f\u062f \u0627\u0644\u0623\u0635\u0646\u0627\u0641"),t.qZA(),t.TgZ(48,"div",35),t._uU(49),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"ion-col",32),t.TgZ(51,"div",33),t.TgZ(52,"div",34),t._uU(53,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062d\u0627\u0644\u064a"),t.qZA(),t.TgZ(54,"div",36),t._uU(55),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"ion-col",32),t.TgZ(57,"div",33),t.TgZ(58,"div",34),t._uU(59,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062c\u062f\u064a\u062f"),t.qZA(),t.TgZ(60,"div",37),t._uU(61),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(62,"ion-row"),t.TgZ(63,"ion-col",38),t.TgZ(64,"div",39),t.TgZ(65,"div",40),t._uU(66,"\u0627\u0644\u0641\u0631\u0642"),t.qZA(),t.TgZ(67,"div",41),t._uU(68),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(69,I,9,2,"div",42),t.qZA(),t.TgZ(70,"ion-footer",43),t.TgZ(71,"ion-toolbar"),t.TgZ(72,"div",44),t.TgZ(73,"ion-button",45),t.NdJ("click",function(){return c.cancel()}),t._UZ(74,"ion-icon",46),t._uU(75," \u0625\u0644\u063a\u0627\u0621 "),t.qZA(),t.TgZ(76,"ion-button",47),t.NdJ("click",function(){return c.applyChanges()}),t._UZ(77,"ion-icon",48),t._uU(78," \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(4),t.hij(" ","sales"===c.mode?"\u062a\u0639\u062f\u064a\u0644 \u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u0628\u064a\u0639":"\u062a\u0639\u062f\u064a\u0644 \u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"," "),t.xp6(13),t.Q6J("ngModel",c.adjustmentType),t.xp6(12),t.hij(" ","percentage"===c.adjustmentType?"\u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 (%)":"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u062f\u064a\u0644"," "),t.xp6(1),t.s9C("placeholder","percentage"===c.adjustmentType?"\u0645\u062b\u0627\u0644: 10 \u0644\u0644\u0632\u064a\u0627\u062f\u0629\u060c -10 \u0644\u0644\u0646\u0642\u0635\u0627\u0646":"\u0645\u062b\u0627\u0644: 5.50 \u0644\u0644\u0632\u064a\u0627\u062f\u0629\u060c -2.25 \u0644\u0644\u0646\u0642\u0635\u0627\u0646"),t.Q6J("ngModel",c.adjustmentValue),t.xp6(2),t.s9C("name","percentage"===c.adjustmentType?"percent":"cash"),t.xp6(2),t.Q6J("ngForOf","percentage"===c.adjustmentType?t.qbA(18,T,-2,-5,-7,-10,-15):t.kEZ(24,Z,-100,-200,-300)),t.xp6(15),t.Oqu(c.previewItems.length),t.xp6(6),t.Oqu((c.getTotalOriginal()||0).toFixed(2)),t.xp6(6),t.Oqu((c.getTotalNew()||0).toFixed(2)),t.xp6(6),t.ekj("positive",c.getTotalDifference()>0)("negative",c.getTotalDifference()<0),t.xp6(1),t.AsE(" ",c.getTotalDifference()>0?"+":"","",(c.getTotalDifference()||0).toFixed(2)," "),t.xp6(1),t.Q6J("ngIf",c.previewItems&&c.previewItems.length>0),t.xp6(7),t.Q6J("disabled",0===c.adjustmentValue))},directives:[g.Gu,g.sr,g.wd,g.gu,g.Sm,g.YG,g.W2,g.cJ,g.QI,m.JJ,m.On,g.GO,g.Q$,g.Ie,g.pK,g.as,x.sg,g.PM,g.Zi,g.Dq,g.FN,g.jY,g.Nd,g.wI,x.O5,g.fr],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.modern-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(45deg, var(--ion-color-primary), var(--ion-color-primary-shade));--color: white;box-shadow:0 2px 10px #0000001a}.modern-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:8px}.modern-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:1.4rem}.modern-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{--color: white;--color-hover: rgba(255, 255, 255, .8)}.modern-content[_ngcontent-%COMP%]{--background: #f8f9fa;padding:16px 16px 80px;flex:1}.modern-content[_ngcontent-%COMP%]   .adjustment-section[_ngcontent-%COMP%], .modern-content[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%], .modern-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]{margin-bottom:16px;display:block;visibility:visible}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]{background:white;border-radius:8px;border:1px solid #ddd;margin-bottom:16px;padding:16px}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-bottom:16px}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:block}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:8px;margin-bottom:8px}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.3rem}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .adjustment-type-container[_ngcontent-%COMP%]{margin-bottom:20px;display:block}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .adjustment-type-container[_ngcontent-%COMP%]   .modern-segment[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:4px;display:flex;width:100%}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .adjustment-type-container[_ngcontent-%COMP%]   .modern-segment.segment[_ngcontent-%COMP%]{display:flex!important;flex-direction:row!important}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .adjustment-type-container[_ngcontent-%COMP%]   .modern-segment[_ngcontent-%COMP%]   .segment-btn[_ngcontent-%COMP%]{--background-checked: var(--ion-color-primary);--color-checked: white;--border-radius: 6px;font-weight:500;transition:all .3s ease;flex:1;display:flex;align-items:center;justify-content:center}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .adjustment-type-container[_ngcontent-%COMP%]   .modern-segment[_ngcontent-%COMP%]   .segment-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:4px}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .adjustment-type-container[_ngcontent-%COMP%]   .modern-segment[_ngcontent-%COMP%]   .segment-btn[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{white-space:nowrap}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .value-input-container[_ngcontent-%COMP%]{margin-bottom:20px;display:block}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .value-input-container[_ngcontent-%COMP%]   .modern-input[_ngcontent-%COMP%]{background:white;border:1px solid #dee2e6;border-radius:8px;margin-bottom:0}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .value-input-container[_ngcontent-%COMP%]   .modern-input[_ngcontent-%COMP%]   .adjustment-input[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;justify-content:center}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]{--border-radius: 20px;height:36px;min-width:60px;font-weight:500;transition:all .3s ease}.modern-content[_ngcontent-%COMP%]   .control-card[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{--background: white;box-shadow:0 4px 12px #0000000d;border-radius:12px;border:1px solid #e9ecef}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{padding:0}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{text-align:center;padding:12px;border-radius:8px;background:#f8f9fa;margin:4px}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;margin-bottom:8px;font-weight:500}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#495057}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.primary[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.success[_ngcontent-%COMP%]{color:var(--ion-color-success)}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .difference-item[_ngcontent-%COMP%]{text-align:center;padding:16px;border-radius:8px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);margin:8px 4px 4px;border:2px solid transparent}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .difference-item[_ngcontent-%COMP%]   .difference-label[_ngcontent-%COMP%]{font-size:1rem;color:#495057;margin-bottom:8px;font-weight:600}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .difference-item[_ngcontent-%COMP%]   .difference-value[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:800}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .difference-item[_ngcontent-%COMP%]   .difference-value.positive[_ngcontent-%COMP%]{color:var(--ion-color-success)}.modern-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .difference-item[_ngcontent-%COMP%]   .difference-value.negative[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]{--background: white;box-shadow:0 4px 12px #0000000d;border-radius:12px;border:1px solid #e9ecef}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;margin-bottom:10px}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:8px;margin-bottom:8px;transition:all .3s ease;border:1px solid #e9ecef}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview.even[_ngcontent-%COMP%]{background:#f8f9fa}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{flex:1}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#495057;margin-bottom:4px;display:flex;align-items:center;gap:8px}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{background:var(--ion-color-primary-tint);color:var(--ion-color-primary);padding:2px 8px;border-radius:12px;font-weight:500}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]{text-align:right;min-width:140px}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;margin-left:8px}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{font-weight:500;color:#495057;text-decoration:line-through;opacity:.7}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .new-price[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .new-price.increased[_ngcontent-%COMP%]{color:var(--ion-color-success)}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .new-price.decreased[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-difference[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:4px;font-size:.9rem;font-weight:600}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-difference[_ngcontent-%COMP%]   span.increased[_ngcontent-%COMP%]{color:var(--ion-color-success)}.modern-content[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-container[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]   .price-difference[_ngcontent-%COMP%]   span.decreased[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.modern-footer[_ngcontent-%COMP%]{position:relative;margin-top:auto}.modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{background:white;padding:8px 16px;box-shadow:0 -2px 8px #0000001a}.modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%], .modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{flex:1;height:48px;font-weight:600;--border-radius: 12px;transition:all .3s ease}.modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, .modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{--background: linear-gradient(45deg, var(--ion-color-primary), var(--ion-color-primary-shade));box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.3)}.modern-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:disabled{--background: #e9ecef;--color: #6c757d;box-shadow:none;transform:none}@media (max-width: 768px){.modern-content[_ngcontent-%COMP%]{padding:12px}.modern-content[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   ion-col[size="4"][_ngcontent-%COMP%]{size:12;margin-bottom:8px}.modern-content[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.modern-content[_ngcontent-%COMP%]   .item-preview[_ngcontent-%COMP%]   .price-comparison[_ngcontent-%COMP%]{text-align:left;width:100%}.modern-content[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]{min-width:50px;height:32px;font-size:.9rem}.modern-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.modern-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%], .modern-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{height:44px}}@keyframes slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.adjustment-section[_ngcontent-%COMP%], .summary-section[_ngcontent-%COMP%], .preview-section[_ngcontent-%COMP%]{animation:slideInUp .5s ease-out}.adjustment-section[_ngcontent-%COMP%]{animation-delay:.1s}.summary-section[_ngcontent-%COMP%]{animation-delay:.2s}.preview-section[_ngcontent-%COMP%]{animation-delay:.3s}ion-segment[_ngcontent-%COMP%]{display:flex!important;flex-direction:row!important;width:100%}ion-segment-button[_ngcontent-%COMP%]{flex:1!important;display:flex!important;align-items:center!important;justify-content:center!important}']}),d})()},62279:(q,w,p)=>{p.d(w,{m:()=>x});var h=p(69808),t=p(34182),g=p(23349),m=p(29863);let x=(()=>{class P{}return P.\u0275fac=function(f){return new(f||P)},P.\u0275mod=m.oAB({type:P}),P.\u0275inj=m.cJS({imports:[[h.ez,t.u5,g.Pc]]}),P})()}}]);