"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1209],{61209:(ne,p,l)=>{l.r(p),l.d(p,{PrchOrderPageModule:()=>ee});var u=l(69808),h=l(34182),a=l(23349),m=l(94030),_=l(70655),f=l(4441),Z=l(3671),y=l(79208),e=l(29863),T=l(65465),x=l(90849),A=l(91472);const P=["dstP"],I=["qtyIdP6"],q=["dstPop7"],C=["popInput6"],b=["popover6"];function M(o,r){1&o&&(e.TgZ(0,"ion-text",6),e._uU(1,"\u0645\u062a\u0635\u0644"),e.qZA())}function v(o,r){1&o&&(e.TgZ(0,"ion-text",6),e._uU(1,"\u063a\u064a\u0631 \u0645\u062a\u0635\u0644"),e.qZA())}function O(o,r){1&o&&e._UZ(0,"option",26),2&o&&e.Q6J("value",r.$implicit.sub_name)}function w(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",22),e.TgZ(1,"ion-item",20),e.TgZ(2,"input",23),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).selectedAccount.sub_name=n})("change",function(n){return e.CHM(t),e.oxw(2).pickAccount(n)}),e.qZA(),e.TgZ(3,"datalist",24),e.YNc(4,O,1,1,"option",25),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.selectedAccount.sub_name),e.xp6(2),e.Q6J("ngForOf",t.sub_account)}}function L(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",27),e.TgZ(1,"ion-item",20),e.TgZ(2,"ion-input",28),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).sub_nameNew=n}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.sub_nameNew)}}function J(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",29),e.TgZ(1,"ion-item",20),e.TgZ(2,"ion-input",30),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).selectedAccount.phone=n}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.selectedAccount.phone)}}function Q(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",31),e.TgZ(1,"ion-item",20),e.TgZ(2,"ion-input",32),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).selectedAccount.address=n}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.selectedAccount.address)}}function N(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row",7),e.TgZ(2,"ion-col",8),e.TgZ(3,"ion-card",9),e.TgZ(4,"ion-grid",9),e.TgZ(5,"ion-row",7),e.TgZ(6,"ion-col",10),e.TgZ(7,"ion-radio-group",11),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().radioVal=n})("ionChange",function(n){return e.CHM(t),e.oxw().radioChange(n)}),e.TgZ(8,"ion-grid",9),e.TgZ(9,"ion-row"),e.TgZ(10,"ion-col",9),e.TgZ(11,"ion-item",12),e._UZ(12,"ion-radio",13),e.TgZ(13,"ion-label"),e._uU(14,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"ion-col",9),e.TgZ(16,"ion-item",12),e._UZ(17,"ion-radio",13),e.TgZ(18,"ion-label"),e._uU(19,"\u062d\u0633\u0627\u0628 \u062c\u062f\u064a\u062f"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"ion-col",14),e.TgZ(21,"ion-item",12),e.TgZ(22,"input",15),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().payInvo.pay_date=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"ion-row"),e.YNc(24,w,5,2,"ion-col",16),e.YNc(25,L,3,1,"ion-col",17),e.YNc(26,J,3,1,"ion-col",18),e.YNc(27,Q,3,1,"ion-col",19),e.TgZ(28,"ion-col"),e.TgZ(29,"ion-item",20),e.TgZ(30,"ion-input",21),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().payInvo.payComment=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.radioVal),e.xp6(5),e.Q6J("value",0),e.xp6(5),e.Q6J("value",1),e.xp6(5),e.Q6J("ngModel",t.payInvo.pay_date),e.xp6(2),e.Q6J("ngIf",0==t.radioVal),e.xp6(1),e.Q6J("ngIf",1==t.radioVal),e.xp6(1),e.Q6J("ngIf",1==t.radioVal),e.xp6(1),e.Q6J("ngIf",1==t.radioVal),e.xp6(3),e.Q6J("ngModel",t.payInvo.payComment)}}function k(o,r){1&o&&(e.TgZ(0,"ion-text"),e._uU(1,"(\u0639\u0631\u0628\u064a)"),e.qZA())}function F(o,r){1&o&&(e.TgZ(0,"ion-text"),e._uU(1,"(ENG)"),e.qZA())}function U(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",59),e.TgZ(1,"ion-button",60),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).presentModal2("null","save")}),e._uU(2," \u0635\u0646\u0641 \u062c\u062f\u064a\u062f "),e._UZ(3,"ion-icon",61),e.qZA(),e.qZA()}}function H(o,r){1&o&&(e.TgZ(0,"ion-label"),e._UZ(1,"ion-spinner",62),e.qZA())}function E(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-input",63,64),e.NdJ("click",function(n){return e.CHM(t),e.oxw(2).presentPopover(n)})("ngModelChange",function(n){return e.CHM(t),e.oxw(2).selectedItem.item_name=n}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngModel",t.selectedItem.item_name)}}function Y(o,r){1&o&&(e.TgZ(0,"ion-list",50),e.TgZ(1,"ion-label"),e._UZ(2,"ion-spinner",62),e.qZA(),e.qZA())}const S=function(o,r){return{red:o,dark:r}};function D(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item",71),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).selectFromPop(s)}),e._uU(1),e.qZA()}if(2&o){const t=r.$implicit;e.Q6J("ngClass",e.WLB(2,S,0==t.quantity,t.quantity>0)),e.xp6(1),e.hij(" ",t.item_name," ")}}function R(o,r){if(1&o&&(e.TgZ(0,"ion-list"),e.YNc(1,D,2,5,"ion-item",70),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.searchResult)}}function z(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",7),e.TgZ(2,"ion-item"),e.TgZ(3,"ion-input",11,65),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).searchTerm=n})("ionChange",function(n){return e.CHM(t),e.oxw(2).searchItem(n)}),e.qZA(),e.TgZ(5,"ion-button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).clear()}),e._UZ(6,"ion-icon",67),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"ion-content",68),e.YNc(8,Y,3,0,"ion-list",69),e.YNc(9,R,2,1,"ion-list",4),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.searchTerm),e.xp6(5),e.Q6J("ngIf",0==t.searchResult.length&&""==t.searchTerm),e.xp6(1),e.Q6J("ngIf",t.searchResult.length>0)}}function V(o,r){if(1&o&&(e.TgZ(0,"ion-text"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.quantity)}}function G(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item"),e.TgZ(1,"ion-input",75),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw().index;return e.oxw(2).editCell(n)})("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.quantity=n})("ionBlur",function(){e.CHM(t);const n=e.oxw().index;return e.oxw(2).editCell(n)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.quantity)}}function B(o,r){if(1&o&&(e.TgZ(0,"ion-text"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.perch_price)}}function $(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item"),e.TgZ(1,"ion-input",75),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw().index;return e.oxw(2).editCell(n)})("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.perch_price=n})("ionBlur",function(){e.CHM(t);const n=e.oxw().index;return e.oxw(2).editCell(n)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.perch_price)}}function j(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",72),e.NdJ("dblclick",function(){const s=e.CHM(t).index;return e.oxw(2).qtyClick(s)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,V,2,1,"ion-text",4),e.YNc(7,G,2,1,"ion-item",4),e.qZA(),e.TgZ(8,"td"),e.YNc(9,B,2,1,"ion-text",4),e.YNc(10,$,2,1,"ion-item",4),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e.TgZ(14,"ion-button",73),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(2).deleteItem(s)}),e._UZ(15,"ion-icon",74),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,i=r.index,n=e.oxw(2);e.xp6(2),e.Oqu(t.item_name),e.xp6(2),e.Oqu(t.item_desc),e.xp6(2),e.Q6J("ngIf",n.showMe!=i),e.xp6(1),e.Q6J("ngIf",n.showMe==i),e.xp6(2),e.Q6J("ngIf",n.showMe!=i),e.xp6(1),e.Q6J("ngIf",n.showMe==i),e.xp6(2),e.Oqu(+t.tot)}}function W(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-grid",33),e.TgZ(1,"ion-row",7),e.TgZ(2,"ion-col",34),e.TgZ(3,"ion-grid"),e.TgZ(4,"ion-row"),e.TgZ(5,"ion-col",8),e.TgZ(6,"ion-card"),e.TgZ(7,"ion-grid"),e.TgZ(8,"ion-row"),e.TgZ(9,"ion-col",35),e.TgZ(10,"ion-grid",36),e.TgZ(11,"ion-row"),e.TgZ(12,"ion-col",37),e.TgZ(13,"ion-label"),e.TgZ(14,"strong"),e._uU(15,"\u0627\u0644\u0635\u0646\u0641"),e.qZA(),e.YNc(16,k,2,0,"ion-text",4),e.YNc(17,F,2,0,"ion-text",4),e.qZA(),e.qZA(),e.YNc(18,U,4,0,"ion-col",38),e.qZA(),e.TgZ(19,"ion-row"),e.TgZ(20,"ion-item",20),e.YNc(21,H,2,0,"ion-label",4),e.YNc(22,E,2,1,"ion-input",39),e.qZA(),e.TgZ(23,"ion-popover",40,41),e.NdJ("didDismiss",function(){return e.CHM(t),e.oxw().didDissmis()}),e.YNc(25,z,10,3,"ng-template"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"ion-col",42),e.TgZ(27,"ion-label",43),e.TgZ(28,"strong"),e._uU(29,"\u0627\u0644\u0643\u0645\u064a\u0629"),e.qZA(),e.qZA(),e.TgZ(30,"ion-item",20),e.TgZ(31,"ion-input",44,45),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().chechPrice("check")})("ngModelChange",function(n){return e.CHM(t),e.oxw().selectedItem.qty=n})("ionChange",function(n){return e.CHM(t),e.oxw().qtyhange(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",42),e.TgZ(34,"ion-label",43),e.TgZ(35,"strong"),e._uU(36,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),e.qZA(),e.qZA(),e.TgZ(37,"ion-item",20),e.TgZ(38,"ion-input",44),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().chechPrice("check")})("ngModelChange",function(n){return e.CHM(t),e.oxw().selectedItem.perch_price=n})("ionChange",function(n){return e.CHM(t),e.oxw().perchPricehange(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"ion-col",42),e.TgZ(40,"ion-label",43),e.TgZ(41,"strong"),e._uU(42,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639"),e.qZA(),e.qZA(),e.TgZ(43,"ion-item",20),e.TgZ(44,"ion-input",44),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().chechPrice("check")})("ngModelChange",function(n){return e.CHM(t),e.oxw().selectedItem.pay_price=n})("ionChange",function(n){return e.CHM(t),e.oxw().payPricehange(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"ion-col",42),e.TgZ(46,"ion-label",43),e.TgZ(47,"strong"),e._uU(48,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),e.qZA(),e.qZA(),e.TgZ(49,"ion-item",20),e.TgZ(50,"ion-input",46),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().selectedItem.tot=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"ion-row",47),e.TgZ(52,"ion-col",48),e.TgZ(53,"ion-button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().chechPrice("check")}),e.TgZ(54,"ion-label",50),e._uU(55,"\u0625\u0636\u0627\u0641\u0629 "),e.qZA(),e._UZ(56,"ion-icon",51),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"ion-row"),e.TgZ(58,"ion-col",8),e.TgZ(59,"ion-card"),e.TgZ(60,"table",52),e.TgZ(61,"tr"),e.TgZ(62,"th"),e._uU(63,"\u0627\u0644\u0635\u0646\u0641"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"EN"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"\u0627\u0644\u0643\u0645\u064a\u0629"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),e.qZA(),e._UZ(72,"th"),e.qZA(),e.YNc(73,j,16,7,"tr",53),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"ion-col",54),e.TgZ(75,"ion-card"),e.TgZ(76,"ion-grid"),e.TgZ(77,"ion-row",47),e.TgZ(78,"ion-col",55),e.TgZ(79,"ion-label",43),e.TgZ(80,"strong"),e._uU(81,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a"),e.qZA(),e.qZA(),e.TgZ(82,"ion-item",20),e.TgZ(83,"ion-input",56),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().payInvo.tot_pr=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(84,"ion-col",55),e._UZ(85,"ion-item-divider"),e.TgZ(86,"ion-label",43),e.TgZ(87,"strong"),e._uU(88,"\u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0637\u0628\u0627\u0639\u0629"),e.qZA(),e.qZA(),e.TgZ(89,"ion-radio-group",11),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().radioVal3=n})("ionChange",function(n){return e.CHM(t),e.oxw().radio3Change(n)}),e.TgZ(90,"ion-grid",57),e.TgZ(91,"ion-row"),e.TgZ(92,"ion-col",9),e.TgZ(93,"ion-item",12),e._UZ(94,"ion-radio",13),e.TgZ(95,"ion-label"),e._uU(96," \u0639\u0631\u0628\u064a "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(97,"ion-col",57),e.TgZ(98,"ion-item",12),e._UZ(99,"ion-radio",13),e.TgZ(100,"ion-label"),e._uU(101," EN "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(102,"ion-row",47),e.TgZ(103,"ion-col",58),e.TgZ(104,"ion-button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e.TgZ(105,"ion-label",50),e._uU(106," \u062d\u0641\u0640\u0640\u0638"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(16),e.Q6J("ngIf",0==t.searchLang),e.xp6(1),e.Q6J("ngIf",1==t.searchLang),e.xp6(1),e.Q6J("ngIf",0==t.offline),e.xp6(3),e.Q6J("ngIf",1==t.getItemLoader),e.xp6(1),e.Q6J("ngIf",0==t.getItemLoader),e.xp6(1),e.Q6J("isOpen",t.isOpen),e.xp6(8),e.Q6J("ngModel",t.selectedItem.qty),e.xp6(7),e.Q6J("ngModel",t.selectedItem.perch_price),e.xp6(6),e.Q6J("ngModel",t.selectedItem.pay_price),e.xp6(6),e.Q6J("readonly",!0)("ngModel",t.selectedItem.tot),e.xp6(23),e.Q6J("ngForOf",t.itemList),e.xp6(10),e.Q6J("ngModel",t.payInvo.tot_pr)("readonly",!0),e.xp6(6),e.Q6J("ngModel",t.radioVal3),e.xp6(5),e.Q6J("value",0),e.xp6(5),e.Q6J("value",1)}}const K=[{path:"",component:(()=>{class o{constructor(t,i,n,s,c,d,g,te,ie){this.renderer=t,this.modalController=i,this.alertController=n,this.authenticationService=s,this.storage=c,this.loadingController=d,this.datePipe=g,this.api=te,this.toast=ie,this.sub_account=[],this.sub_accountLocalPurch=[],this.items=[],this.isOpen=!1,this.sub_accountPurch=[],this.color="dark",this.itemsLocal=[],this.itemList=[],this.purchLocal=[],this.purchase=[],this.randomsNumber=[],this.sub_nameNew="",this.discountPerc=0,this.radioVal=0,this.radioVal3=0,this.printMode=!1,this.offline=!1,this.printArr=[],this.showMe=null,this.getItemLoader=!1,this.searchLang=0,this.searchTerm="",this.aliasTerm="",this.searchResult=[],this.aliasResult=[],this.printArr.push({payInvo:"",itemList:"",selectedAccount:"",sub_nameNew:""}),this.selectedItem={id:void 0,dateCreated:"",pay_ref:"",item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,aliasEn:""}}presentAlertConfirm(){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"\u062a\u0623\u0643\u064a\u062f!",mode:"ios",message:"\u0647\u0644 \u062a\u0631\u064a\u062f \u0637\u0628\u0627\u0639\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u061f ",buttons:[{text:"\u0625\u0644\u063a\u0627\u0621",role:"cancel",cssClass:"secondary",id:"cancel-button",handler:i=>{this.prepareInvo()}},{text:"\u0645\u0648\u0627\u0641\u0642",id:"confirm-button",handler:()=>{0==this.radioVal3?this.presentModal(this.printArr,"perchOrderAr"):1==this.radioVal3&&this.presentModal(this.printArr,"perchOrderEn")}}]})).present()})}priceChangeAlertConfirm(){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"\u062a\u0623\u0643\u064a\u062f!",mode:"ios",message:"\u0647\u0644 \u062a\u0631\u064a\u062f \u062a\u0639\u062f\u064a\u0644 \u0627\u0633\u0639\u0627\u0631 \u0627\u0644\u0628\u064a\u0639 \u0648\u0627\u0644\u0634\u0631\u0627\u0621",buttons:[{text:"\u0625\u0644\u063a\u0627\u0621",role:"cancel",cssClass:"secondary",id:"cancel-button",handler:i=>{this.addTolist()}},{text:"\u0645\u0648\u0627\u0641\u0642",id:"confirm-button",handler:()=>{this.updateItemDetail()}}]})).present()})}updateItemDetail(){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.updateItem(this.selectedItem).subscribe(t=>{"Post Not Updated"!=t.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success"),this.getStockItemsAfterUpdate()):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}Print(t){this.printMode=!0;var i=window.open("","PRINT","height=400,width=600");return i.document.write("<html><head>"),i.document.write('<style type="text/css">'),i.document.write(".flr{ display: block; float: right; } .show{ } .hide{width:0px;height:0px} .w45 {width:45%} .w50 {width:50%} .w100 {width:100%} td, th {border: 1px solid #dddddd;text-align: center;padding: 8px;} tr:nth-child(even) {background-color: #dddddd;} .table{text-align: center;width: 100%; margin: 12px;}.ion-margin{ margin: 10px; } .ion-margin-top{ margin-top: 10px; } .rtl {  direction: rtl; } .ion-text-center{ text-align: center; } .ion-text-end{ text-align: left; } .ion-text-start{ text-align: right; }"),i.document.write("</style></head><body>"),i.document.write(document.getElementById(t).innerHTML),i.document.write("</body></html>"),i.document.close(),i.focus(),i.print(),i.close(),this.printMode=!1,!0}ngOnInit(){this.prepareOffline(),this.getAppInfo(),this.getStockItems()}getOffliemode(){this.storage.get("offline").then(t=>{this.offline=t,this.color=1==this.offline?"dark":"primary"})}changeMode(){1==this.offline?(this.offline=!1,this.color="primary"):0==this.offline&&(this.offline=!0,this.color="dark"),this.storage.set("offline",this.offline).then(t=>{})}getAppInfo(){this.getOffliemode(),this.storage.get("USER_INFO").then(t=>{t&&(this.user_info=t)}),this.storage.get("year").then(t=>{t&&(this.year=t)}),this.storage.get("STORE_INFO").then(t=>{t&&(this.store_info=t,this.getSalesAccount(),this.prepareInvo())}),this.storage.get("searchLang").then(t=>{t&&(this.searchLang=t)})}prepareOffline(){this.storage.get("itemsLocal").then(t=>{t&&(this.itemsLocal=t,this.items=this.itemsLocal)}),this.storage.get("purchLocal").then(t=>{t&&(this.purchLocal=t)}),this.storage.get("purchase").then(t=>{t&&(this.purchase=t)}),this.storage.get("sub_accountLocalPurch").then(t=>{t&&(this.sub_accountLocalPurch=t)}),this.storage.get("sub_accountPurch").then(t=>{t&&(this.sub_accountPurch=t)})}radioChange(t){}radio3Change(t){}presentPopover(t){this.popover2.event=t,this.isOpen=!0,this.clear(),this.searchResult=this.items,setTimeout(()=>{this.setFocusOnInput("popInput2")},2e3)}didDissmis(){this.isOpen=!1,this.setFocusOnInput("qtyIdP6")}searchItem(t){this.searchResult=[],this.aliasTerm=t.target.value;let n=(new y.g).transform(this.items,t.target.value);n.length>0&&n.forEach(s=>{this.searchResult.push(s)})}clear(t){t?this.selectedItem={id:void 0,dateCreated:"",pay_ref:this.payInvo.pay_ref,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,aliasEn:""}:this.searchTerm=""}prepareInvo(){this.selectedAccount={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:"",cat_name:"",cat_id:"",phone:"",address:""},this.sub_nameNew="",this.radioVal=0,this.payInvo={pay_id:void 0,pay_ref:0,store_id:"",tot_pr:0,pay:0,pay_date:"",pay_time:"",user_id:"",cust_id:null,pay_method:"",discount:0,changee:0,sub_name:"",payComment:"",nextPay:null},this.discountPerc=0;let t=new Date;this.payInvo.pay_date=this.datePipe.transform(t,"yyyy-MM-dd"),this.payInvo.pay_time=this.datePipe.transform(t,"HH:mm:ss"),this.generateRandom(),this.payInvo.store_id=this.store_info.id,this.payInvo.user_id=this.user_info.id,this.itemList=[],this.getSalesAccount()}setFocusOnInput(t){"dstP"==t?this.nameField.nativeElement.focus():"dstPop7"==t?(this.dstPop7.setFocus(),this.isOpen=!0,this.clear(),this.searchResult=this.items,setTimeout(()=>{this.popInput2.setFocus()},1500)):"qtyIdP6"==t?this.qtyIdP6.setFocus():"popInput2"==t&&this.popInput2.setFocus()}getStockItems(t){this.storage.get("year").then(i=>{i&&(this.year=i,0==this.offline?this.api.stockItems(1,this.year.id).subscribe(n=>{this.items=n.data,this.items.forEach(c=>{c.quantity=+c.perchQuantity+ +c.firstQuantity-+c.salesQuantity}),this.searchResult=this.items,t&&this.pickDetail(t,"afterSave")},n=>{},()=>{}):(this.items=this.itemsLocal,this.items.forEach(n=>{n.quantity=+n.perchQuantity+ +n.firstQuantity-+n.salesQuantity}),this.searchResult=this.items))})}getStockItemsAfterUpdate(){let t=[];t=this.items.filter(1==this.searchLang?c=>c.item_desc==this.selectedItem.item_desc:c=>c.item_name==this.selectedItem.item_name),this.selectedItem={id:t[0].id,dateCreated:t[0].dateCreated,pay_ref:this.payInvo.pay_ref,item_desc:t[0].item_desc,item_name:t[0].item_name,item_unit:t[0].item_unit,parcode:t[0].parcode,pay_price:+this.selectedItem.pay_price,perch_price:+this.selectedItem.perch_price,qty:+this.selectedItem.qty,tot:t[0].perch_price,aliasEn:t[0].aliasEn},this.addTolist(),0==this.offline?(this.getItemLoader=!0,this.api.stockItems(1,this.year.id).subscribe(c=>{this.items=c.data,this.sumStockItemsAfterUpdate()},c=>{this.getItemLoader=!1},()=>{})):(this.items=this.itemsLocal,this.items.forEach(c=>{c.quantity=+c.perchQuantity+ +c.firstQuantity-+c.salesQuantity}),this.searchResult=this.items)}sumStockItemsAfterUpdate(){0==this.offline?(this.getItemLoader=!0,this.api.stockItems(1,this.year.id).subscribe(t=>{let n=t.data;for(let s=0;s<this.items.length;s++){const c=this.items[s];let d=n.filter(g=>g.id==c.id);d.length>0&&(c.perchQuantity=+c.perchQuantity+ +d[0].perchQuantity,c.salesQuantity=+c.salesQuantity+ +d[0].salesQuantity)}this.items.forEach(s=>{s.quantity=+s.perchQuantity+ +s.firstQuantity-+s.salesQuantity}),this.searchResult=this.items,this.getItemLoader=!1,this.storage.set("itemsLocal",this.items).then(s=>{this.storage.get("itemsLocal").then(c=>{s&&(this.itemsLocal=c,this.searchResult=[],this.items=this.itemsLocal,this.searchResult=this.items)})})},t=>{this.getItemLoader=!1},()=>{})):(this.items=this.itemsLocal,this.items.forEach(t=>{t.quantity=+t.perchQuantity+ +t.firstQuantity-+t.salesQuantity}),this.searchResult=this.items)}qtyClick(t){this.showMe=t}hideMe(t){this.showMe=null}editCell(t){+this.itemList[t].quantity>0&&+this.itemList[t].perch_price>0?(this.itemList[t].tot=+this.itemList[t].quantity*+this.itemList[t].perch_price,this.discountPerc=0,this.payInvo.discount=0,this.hideMe(t),this.getTotal()):this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644 ","danger")}ionViewDidEnter(){}presentModal2(t,i){return(0,_.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:Z.X,componentProps:{item:this.selectedItem,status:i}});return n.onDidDismiss().then(s=>{null!==s&&this.doAfterDissmiss(s)}),yield n.present()})}getItems(t){0==this.offline?this.api.getItems().subscribe(i=>{this.items=i.data,this.searchResult=this.items,t&&this.pickDetail(t,"afterSave")},i=>{}):(this.items=this.itemsLocal,this.searchResult=this.items)}getSalesAccount(){0==this.offline?this.api.getPerchAccounts(this.store_info.id,this.year.id).subscribe(t=>{this.sub_account=t.data,this.addSubaccountLocal()},t=>{}):this.MixSubaccountSalesOffline()}addSubaccountLocal(){if(this.sub_account){if(this.sub_accountLocalPurch)for(let t=0;t<this.sub_accountLocalPurch.length;t++)this.sub_account.push(this.sub_accountLocalPurch[t])}else this.sub_accountLocalPurch&&(this.sub_account=this.sub_accountLocalPurch)}MixSubaccountSalesOffline(){if(this.sub_account=[],this.sub_accountLocalPurch)for(let t=0;t<this.sub_accountLocalPurch.length;t++)this.sub_account.push(this.sub_accountLocalPurch[t]);if(this.sub_accountPurch)for(let t=0;t<this.sub_accountPurch.length;t++)this.sub_account.push(this.sub_accountPurch[t])}generateRandom(){let t=new Date,i=t.getMonth().toString()+t.getDay().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+t.getMilliseconds().toString();this.payInvo.pay_ref=this.store_info.store_ref+i}selectFromPop(t){this.selectedItem={id:t.id,dateCreated:t.dateCreated,pay_ref:this.payInvo.pay_ref,item_desc:t.item_desc,item_name:t.item_name,item_unit:t.item_unit,parcode:t.parcode,pay_price:t.pay_price,perch_price:t.perch_price,qty:"",tot:t.perch_price,aliasEn:t.aliasEn},this.searchTerm=t.item_name,this.didDissmis()}pickDetail(t,i){let n;i?(n=t,this.searchLang=0):n=t.target.value;let s=[];s=this.items.filter(1==this.searchLang?c=>c.item_desc==n:c=>c.item_name==n),this.selectedItem={id:s[0].id,dateCreated:s[0].dateCreated,pay_ref:this.payInvo.pay_ref,item_desc:s[0].item_desc,item_name:s[0].item_name,item_unit:s[0].item_unit,parcode:s[0].parcode,pay_price:s[0].pay_price,perch_price:s[0].perch_price,qty:0,tot:s[0].perch_price,aliasEn:s[0].aliasEn},this.setFocusOnInput("qtyIdP6")}qtyhange(t){this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.perch_price).toFixed(2)}payPricehange(t){+this.selectedItem.perch_price>=+this.selectedItem.pay_price&&+this.selectedItem.perch_price>0&&+this.selectedItem.pay_price>0&&this.presentToast("\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 \u0627\u0639\u0644\u064a \u0645\u0646 \u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639 ","warning"),this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.perch_price).toFixed(2)}perchPricehange(t){this.selectedItem.perch_price>=this.selectedItem.pay_price&&this.selectedItem.perch_price>0&&this.selectedItem.pay_price>0&&this.presentToast("\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 \u0627\u0639\u0644\u064a \u0645\u0646 \u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639 ","warning"),this.selectedItem.tot=(this.selectedItem.qty*+this.selectedItem.perch_price).toFixed(2)}payChange(t){this.payInvo.changee=+(this.payInvo.tot_pr-+this.payInvo.discount)-t.target.value}discountChange(t){this.discountPerc=+this.payInvo.discount/+this.payInvo.tot_pr*100,this.payInvo.changee=+(this.payInvo.tot_pr-t.target.value)-this.payInvo.pay}discountPerChange(t){this.payInvo.discount=(+this.payInvo.tot_pr*+this.discountPerc/100).toFixed(2),this.payInvo.changee=+(this.payInvo.tot_pr-this.payInvo.discount)-this.payInvo.pay}deleteItem(t){this.itemList.splice(t,1),this.payInvo.pay=0,this.payInvo.discount=0,this.getTotal()}presentToast(t,i){return(0,_.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:t,duration:2e3,color:i,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}getTotal(){let t=this.itemList.reduce((i,n)=>i+ +n.tot,0);this.payInvo.tot_pr=t-+this.payInvo.discount,this.payInvo.changee=+(t-+this.payInvo.discount)-this.payInvo.pay,this.payInvo.tot_pr=this.payInvo.tot_pr.toFixed(2),this.payInvo.changee=this.payInvo.changee.toFixed(2)}chechPrice(t){""==this.selectedItem.item_name||""==this.selectedItem.id||0==+this.selectedItem.qty?this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0635\u0646\u0641 \u0648\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0645\u064a\u0629","danger"):"check"==t?+this.selectedItem.perch_price>=+this.selectedItem.pay_price?this.priceChangeAlertConfirm():this.addTolist():"uncheck"==t&&this.updateItemDetail()}addTolist(){if(""==this.selectedItem.item_name||""==this.selectedItem.id||0==+this.selectedItem.qty)this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0635\u0646\u0641 \u0648\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0645\u064a\u0629","danger");else{let t=[];if(this.itemList.length>0&&(t=this.itemList.filter(i=>i.item_name==this.selectedItem.item_name&&i.perch_price==this.selectedItem.perch_price)),0==t.length){let i=new Date,n=this.datePipe.transform(i,"dd-MM-YYYY");this.itemList.push({id:"NULL",pay_ref:this.selectedItem.pay_ref,item_name:this.selectedItem.item_name,pay_price:this.selectedItem.pay_price,quantity:+this.selectedItem.qty,tot:this.selectedItem.tot,store_id:+this.store_info.id,item_id:+this.selectedItem.id,dateCreated:n,perch_price:this.selectedItem.perch_price})}else{this.selectedItem.qty=+t[0].quantity+ +this.selectedItem.qty;let i=this.itemList.map(n=>n.item_name).indexOf(this.selectedItem.item_name);this.itemList[i].quantity=+this.selectedItem.qty,this.itemList[i].tot=(+this.selectedItem.qty*+this.selectedItem.perch_price).toFixed(2)}this.selectedItem={id:void 0,dateCreated:"",pay_ref:this.payInvo.pay_ref,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,aliasEn:""},this.getTotal()}}validate(){let t=[];return this.sub_account&&(t=this.sub_account.filter(i=>i.sub_name==this.sub_nameNew)),0==this.itemList.length||""==this.payInvo.pay_ref?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0635\u0646\u0627\u0641 \u0627\u0644\u064a \u0627\u0644\u0642\u0627\u0626\u0645\u0629","danger"),!1):1==this.radioVal&&""==this.sub_nameNew?(this.presentToast("s\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062e\u062a\u064a\u0627\u0631 \u062d\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u064a\u0644","danger"),!1):0==this.radioVal&&""==this.selectedAccount.sub_name?(this.presentToast("w\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062e\u062a\u064a\u0627\u0631 \u062d\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u064a\u0644","danger"),!1):null==this.payInvo.cust_id&&0==this.radioVal&&""==this.selectedAccount.sub_name||0==+this.payInvo.cust_id&&0==this.radioVal?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062e\u062a\u064a\u0627\u0631 \u062d\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u064a\u0644","danger"),!1):""==this.payInvo.pay_date||null==this.payInvo.pay_date?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u062d\u062f\u064a\u062f \u0627\u0644\u062a\u0627\u0631\u064a\u062e ","danger"),!1):this.payInvo.changee<0?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u0644\u0645 \u0648\u0627\u0644\u062e\u0635\u0645  ","danger"),!1):!(1==this.radioVal&&t.length>0&&(this.presentToast("\u0627\u0644\u0639\u0645\u064a\u0644 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627 , \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631\u0629 \u0645\u0646 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","danger"),1))}save(){let t=this.payInvo.pay_date;this.payInvo.sub_name=this.selectedAccount.sub_name,this.payInvo.pay_date=this.datePipe.transform(t,"yyyy-MM-dd"),1==this.validate()&&(this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),0==this.radioVal&&null!=this.selectedAccount.id?1==this.offline?this.presentToast("\u0644\u0627 \u064a\u0648\u062c\u062f \u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a","danger"):this.saveInvo():(0==this.radioVal&&null==this.selectedAccount.id&&""!=this.selectedAccount.sub_name||1==this.radioVal)&&(1==this.offline?this.presentToast("\u0644\u0627 \u064a\u0648\u062c\u062f \u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a","danger"):this.saveSubAccount()))}pickAccount(t){let i=this.sub_account.filter(n=>n.sub_name==t.target.value);i.length>0?(this.selectedAccount={id:i[0].id,ac_id:i[0].ac_id,sub_name:i[0].sub_name,sub_type:i[0].sub_type,sub_code:i[0].sub_code,store_id:i[0].store_id,sub_balance:i[0].sub_balance,cat_id:i[0].cat_id,cat_name:i[0].cat_name,phone:i[0].phone,address:i[0].address},this.payInvo.cust_id=this.selectedAccount.id,this.payInvo.sub_name=this.selectedAccount.sub_name):(this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 ","danger"),this.selectedItem.item_name="")}preparenewaccount(){this.selectedAccount.sub_name.length>0&&null==this.selectedAccount.id||(this.selectedAccount.sub_name=this.sub_nameNew,this.payInvo.sub_name=this.selectedAccount.sub_name),this.selectedAccount.id=null,this.selectedAccount.ac_id=2,this.selectedAccount.sub_type="credit",this.selectedAccount.sub_code=null,this.selectedAccount.sub_balance="0",this.selectedAccount.cat_id=2,this.selectedAccount.cat_name="\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",this.selectedAccount.store_id=this.store_info.id}saveSubAccount(){this.preparenewaccount(),this.api.saveSubAccount(this.selectedAccount).subscribe(t=>{"Post Not Created"!=t.message?(this.payInvo.cust_id=t.message,0==this.radioVal&&null==this.selectedAccount.id&&0==this.offline&&(this.sub_accountLocalPurch=this.sub_accountLocalPurch.filter(i=>i.sub_name!=this.selectedAccount.sub_name),this.storage.set("sub_accountLocalPurch",this.sub_accountLocalPurch).then(i=>{this.selectedAccount.id=this.payInvo.cust_id,this.sub_accountPurch.push(this.selectedAccount),this.storage.set("sub_accountPurch",this.sub_accountPurch).then(n=>{})})),this.saveInvo()):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u0644\u0644\u0645\u0648\u0631\u062f , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u0644\u0644\u0645\u0648\u0631\u062f , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}saveSubAccountlocal(){this.preparenewaccount(),this.sub_account||(this.sub_account=[]),this.sub_account.push(this.selectedAccount),this.sub_accountLocalPurch.push(this.selectedAccount),this.storage.set("sub_accountLocalPurch",this.sub_accountLocalPurch).then(t=>{this.saveInvoLocal()})}saveInvoLocal(){this.purchLocal.push({payInvo:this.payInvo,itemList:this.itemList}),this.storage.set("purchLocal",this.purchLocal).then(t=>{this.printArr=[],this.printArr.push({payInvo:this.payInvo,itemList:this.itemList,selectedAccount:this.selectedAccount,sub_nameNew:this.sub_nameNew}),this.presentAlertConfirm(),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success")})}saveInvo(){this.api.savePerchOrderInvo(this.payInvo).subscribe(t=>{this.saveitemList()},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}saveitemList(){this.api.savePerchOrderitemList(this.itemList).subscribe(t=>{this.printArr=[],this.printArr.push({payInvo:this.payInvo,itemList:this.itemList,selectedAccount:this.selectedAccount,sub_nameNew:this.sub_nameNew}),this.presentAlertConfirm(),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success")},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}presentModal(t,i){return(0,_.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:f.n,componentProps:{printArr:this.printArr,page:i}});return n.onDidDismiss().then(s=>{null!==s&&this.prepareInvo()}),yield n.present()})}presentLoadingWithOptions(t){return(0,_.mG)(this,void 0,void 0,function*(){const i=yield this.loadingController.create({spinner:"bubbles",mode:"ios",duration:5e3,message:t,translucent:!0,backdropDismiss:!1});yield i.present(),yield i.onDidDismiss()})}doAfterDissmiss(t){"save"==t.role&&this.saveItem(t.data)}saveItem(t){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.saveitemMulti(t[0]).subscribe(i=>{"Post Not Created"!=i.message?(this.firstq={id:null,item_id:i.message,store_id:this.store_info.id,quantity:t[1].quantity,pay_price:t[0].pay_price,perch_price:t[0].perch_price,fq_year:"2022"},this.saveFierstQty(t[0].item_name)):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},i=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}saveFierstQty(t){return(0,_.mG)(this,void 0,void 0,function*(){this.api.saveFirstQty(this.firstq).subscribe(i=>{this.getStockItems(t),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success")},i=>{this.presentToast("1\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()},()=>{this.loadingController.dismiss()})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.Qsj),e.Y36(a.IN),e.Y36(a.Br),e.Y36(T.u),e.Y36(x.K),e.Y36(a.HT),e.Y36(u.uU),e.Y36(A.r),e.Y36(a.yF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-prch-order"]],viewQuery:function(t,i){if(1&t&&(e.Gf(P,5),e.Gf(I,5),e.Gf(q,5),e.Gf(C,5),e.Gf(b,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.nameField=n.first),e.iGM(n=e.CRH())&&(i.qtyIdP6=n.first),e.iGM(n=e.CRH())&&(i.dstPop7=n.first),e.iGM(n=e.CRH())&&(i.popInput2=n.first),e.iGM(n=e.CRH())&&(i.popover2=n.first)}},decls:16,vars:5,consts:[["slot","start"],["fill","clear","slot","end",1,"ion-margin",3,"click"],["name","wifi-outline",2,"font-size","20px",3,"color"],["color","dark",4,"ngIf"],[4,"ngIf"],["class","ion-margin-top",4,"ngIf"],["color","dark"],["dir","rtl"],["size","12"],[1,"ion-no-padding","ion-no-margin"],["size","4","offset","5"],[3,"ngModel","ngModelChange","ionChange"],["lines","none"],[1,"ion-margin-end",3,"value"],["size","3",1,"ion-text-end"],["type","date","id","startingDate","name","startingDate",2,"width","100%",3,"ngModel","ngModelChange"],["size","4","offset","4",4,"ngIf"],["size","3","offset","1",4,"ngIf"],["size","2","offset","1",4,"ngIf"],["size","3","offset","2",4,"ngIf"],[1,"custInput"],["placeholder","\u0623\u0643\u062a\u0628 \u062a\u0639\u0644\u064a\u0642\u0627",3,"ngModel","ngModelChange"],["size","4","offset","4"],["placeholder","\u0627\u062e\u062a\u0631  \u062d\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u064a\u0644","list","accountsp","id","accountp",1,"bnone",3,"ngModel","ngModelChange","change"],["id","accountsp",2,"height","auto","max-height","20px"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size","3","offset","1"],[3,"ngModel","ngModelChange"],["size","2","offset","1"],["placeholder","\u0627\u0644\u062c\u0648\u0627\u0644",3,"ngModel","ngModelChange"],["size","3","offset","2"],["placeholder","\u0627\u0644\u0639\u0646\u0648\u0627\u0646",3,"ngModel","ngModelChange"],[1,"ion-margin-top"],["size","9",1,"ion-no-padding"],["size","3",1,"ion-no-margin","ion-no-padding"],[1,"ion-no-margin","ion-no-padding"],["size","6",1,"custPadding","ion-no-margin","ion-no-padding"],["size","5","class","ion-no-margin ion-no-padding ion-text-end",4,"ngIf"],[3,"ngModel","click","ngModelChange",4,"ngIf"],[3,"isOpen","didDismiss"],["popover6",""],["size","2",1,"ion-margin-top"],[1,"ion-padding"],[3,"ngModel","keyup.enter","ngModelChange","ionChange"],["qtyIdP6",""],[3,"readonly","ngModel","ngModelChange"],[1,"ion-justify-content-center"],["size","2",1,"ion-padding"],["expand","block","routerDirection","root","color","success",3,"click"],[1,"ion-text-center"],["name","add-circle","color","light"],[1,"table"],[3,"dblclick",4,"ngFor","ngForOf"],["size","3",1,"ion-no-padding"],["size","9"],[3,"ngModel","readonly","ngModelChange"],["size","6",1,"ion-no-padding","ion-no-margin"],["size","5"],["size","5",1,"ion-no-margin","ion-no-padding","ion-text-end"],["size","small","fill","clear",3,"click"],["name","add-circle-outline","color","success","slot","end"],["name","lines-sharp"],[3,"ngModel","click","ngModelChange"],["dstPop7",""],["popInput6",""],["fill","clear","slot","end",3,"click"],["name","close","color","danger"],["dir","rtl",1,"ion-padding"],["class","ion-text-center",4,"ngIf"],["button","","class","dark",3,"ngClass","click",4,"ngFor","ngForOf"],["button","",1,"dark",3,"ngClass","click"],[3,"dblclick"],["fill","clear","size","small",3,"click"],["name","trash","color","danger"],[3,"ngModel","keyup.enter","ngModelChange","ionBlur"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",0),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"\u0623\u0645\u0631 \u0634\u0631\u0627\u0621"),e.qZA(),e.TgZ(6,"ion-button",1),e.NdJ("click",function(){return i.changeMode()}),e.TgZ(7,"ion-label"),e._UZ(8,"ion-icon",2),e.qZA(),e.TgZ(9,"ion-label"),e.YNc(10,M,2,0,"ion-text",3),e.qZA(),e.TgZ(11,"ion-label"),e.YNc(12,v,2,0,"ion-text",3),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-content"),e.YNc(14,N,31,9,"ion-grid",4),e.YNc(15,W,107,17,"ion-grid",5),e.qZA()),2&t&&(e.xp6(8),e.Q6J("color",i.color),e.xp6(2),e.Q6J("ngIf","primary"==i.color),e.xp6(2),e.Q6J("ngIf","dark"==i.color),e.xp6(2),e.Q6J("ngIf",i.user_info&&i.store_info),e.xp6(1),e.Q6J("ngIf",i.user_info&&i.store_info))},directives:[a.Gu,a.sr,a.Sm,a.fG,a.wd,a.YG,a.Q$,a.gu,u.O5,a.W2,a.yW,a.jY,a.Nd,a.wI,a.PM,a.se,a.QI,h.JJ,h.On,a.Ie,a.B7,a.U5,h.Fj,a.pK,a.j9,u.sg,h.YN,h.Kr,a.d8,a.rH,a.PQ,a.q_,u.mk],styles:[".custInput[_ngcontent-%COMP%]{border-style:solid;border-color:var(--ion-color-light);border-radius:5px}.cust-card[_ngcontent-%COMP%]{border-radius:5px}.show[_ngcontent-%COMP%]{visibility:visible}.hide[_ngcontent-%COMP%]{visibility:hidden}.custRow[_ngcontent-%COMP%]{margin-top:5rem}.bnone[_ngcontent-%COMP%]{border:none}.red[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.dark[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-popover[_ngcontent-%COMP%]{--offset-y: -30px }.custInp[_ngcontent-%COMP%]{border-right-style:solid;border-right-width:.5px;text-align:center}.table[_ngcontent-%COMP%]{text-align:center;width:100%;margin:12px}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#ddd}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:center;padding:8px;font-size:16px;font-weight:700;color:#000}td[_ngcontent-%COMP%]:nth-child(2), th[_ngcontent-%COMP%]:nth-child(2){text-align:right;padding-right:12px}"]}),o})()}];let X=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(K)],m.Bz]}),o})(),ee=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,h.u5,a.Pc,X]]}),o})()}}]);