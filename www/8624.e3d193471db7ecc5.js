"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8624],{68624:(V,p,l)=>{l.r(p),l.d(p,{Cash3PageModule:()=>S});var g=l(69808),c=l(34182),a=l(23349),f=l(94030),Z=l(70655),m=l(15439),e=l(29863),T=l(17158),A=l(65465),b=l(90849),y=l(91472),j=l(742);const q=["popoverNotif32"];function C(n,d){if(1&n&&(e.TgZ(0,"ion-text"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.notifArr.length)}}function x(n,d){if(1&n&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row"),e.TgZ(3,"ion-col",16),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",17),e.TgZ(6,"ion-text",18),e._uU(7),e.ALo(8,"dateAgo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=d.$implicit;e.xp6(4),e.hij(" ",t.desc," "),e.xp6(3),e.Oqu(e.lcZ(8,2,t.datee))}}function M(n,d){if(1&n&&(e.TgZ(0,"ion-list",14),e.YNc(1,x,9,4,"ion-item",15),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.LogHistoryLocalArr)}}function v(n,d){if(1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",11),e._uU(2," \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a "),e.qZA(),e.qZA(),e.TgZ(3,"ion-content",12),e.YNc(4,M,2,1,"ion-list",13),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.LogHistoryLocalArr.length>0)}}function F(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row",12),e.TgZ(2,"ion-col",19),e.TgZ(3,"ion-card"),e.TgZ(4,"ion-grid"),e.TgZ(5,"ion-row"),e.TgZ(6,"ion-col",19),e.TgZ(7,"ion-grid"),e.TgZ(8,"ion-row",12),e.TgZ(9,"ion-col",20),e.TgZ(10,"ion-label",21),e.TgZ(11,"strong"),e._uU(12,"\u0646\u0648\u0639 \u0627\u0644\u0642\u064a\u062f "),e.qZA(),e.qZA(),e.TgZ(13,"ion-radio-group",22),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).jType=o})("ionChange",function(o){return e.CHM(t),e.oxw(2).radioChange(o)}),e.TgZ(14,"ion-grid",23),e.TgZ(15,"ion-row",24),e.TgZ(16,"ion-col",23),e.TgZ(17,"ion-item",25),e._UZ(18,"ion-radio",26),e.TgZ(19,"ion-label"),e._uU(20," \u0633\u0646\u062f \u062f\u0641\u0639 "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-col",23),e.TgZ(22,"ion-item",25),e._UZ(23,"ion-radio",27),e.TgZ(24,"ion-label"),e._uU(25," \u0633\u0646\u062f \u0642\u0628\u0636"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"ion-col",20),e.TgZ(27,"ion-label",21),e.TgZ(28,"strong"),e._uU(29," \u0627\u0644\u0645\u0635\u062f\u0631"),e.qZA(),e.qZA(),e.TgZ(30,"ion-radio-group",22),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).radioVal=o})("ionChange",function(o){return e.CHM(t),e.oxw(2).radioChange(o)}),e.TgZ(31,"ion-grid",23),e.TgZ(32,"ion-row",24),e.TgZ(33,"ion-col",23),e.TgZ(34,"ion-item",25),e._UZ(35,"ion-radio",26),e.TgZ(36,"ion-label"),e._uU(37,"\u0627\u0644\u062e\u0632\u064a\u0646\u0629 "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"ion-col",23),e.TgZ(39,"ion-item",25),e._UZ(40,"ion-radio",27),e.TgZ(41,"ion-label"),e._uU(42," \u0627\u0644\u0628\u0646\u0643 "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"ion-col",17),e.TgZ(44,"ion-label"),e.TgZ(45,"strong"),e._uU(46,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),e.qZA(),e.qZA(),e.TgZ(47,"ion-item",24),e.TgZ(48,"input",28),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).journal.j_date=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngModel",t.jType),e.xp6(17),e.Q6J("ngModel",t.radioVal),e.xp6(18),e.Q6J("ngModel",t.journal.j_date)}}function w(n,d){1&n&&e._UZ(0,"option",41),2&n&&e.Q6J("value",d.$implicit.sub_name)}function P(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row"),e.TgZ(2,"ion-col",29),e.TgZ(3,"ion-card"),e.TgZ(4,"ion-list-header",30),e.TgZ(5,"h4"),e.TgZ(6,"ion-label",21),e.TgZ(7,"strong"),e._uU(8," \u0627\u0644\u062d\u0633\u0627\u0628 : "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-grid"),e.TgZ(10,"ion-row"),e.TgZ(11,"ion-col",19),e.TgZ(12,"ion-grid"),e.TgZ(13,"ion-row"),e.TgZ(14,"ion-col",31),e.TgZ(15,"ion-label"),e.TgZ(16,"strong"),e._uU(17," \u0627\u0644\u062d\u0633\u0627\u0628 : "),e.qZA(),e.qZA(),e.TgZ(18,"ion-item",24),e.TgZ(19,"input",32),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).selectedFromAccount.sub_name=o})("change",function(o){return e.CHM(t),e.oxw(2).pickAccount(o,1)}),e.qZA(),e.TgZ(20,"datalist",33),e.YNc(21,w,1,1,"option",34),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"ion-col",17),e.TgZ(23,"ion-label"),e.TgZ(24,"strong"),e._uU(25," \u0627\u0644\u0645\u0628\u0644\u063a : "),e.qZA(),e.qZA(),e.TgZ(26,"ion-item",24),e.TgZ(27,"ion-input",35),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).pay=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"ion-row"),e._UZ(29,"ion-col",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"ion-col",36),e.TgZ(31,"ion-card"),e.TgZ(32,"ion-item",30),e.TgZ(33,"h4"),e.TgZ(34,"ion-label"),e.TgZ(35,"strong"),e._uU(36," \u0627\u0644\u0628\u064a\u0627\u0646"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"ion-item",24),e.TgZ(38,"ion-textarea",37),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).journal.j_details=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"ion-row",38),e.TgZ(40,"ion-col",39),e.TgZ(41,"ion-button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).save()}),e.TgZ(42,"ion-label",14),e._uU(43," \u062d\u0641\u0640\u0640\u0638"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(19),e.Q6J("ngModel",t.selectedFromAccount.sub_name),e.xp6(2),e.Q6J("ngForOf",t.sub_accountFrom),e.xp6(6),e.Q6J("ngModel",t.pay),e.xp6(11),e.Q6J("ngModel",t.journal.j_details)}}function N(n,d){if(1&n&&(e.TgZ(0,"ion-content"),e.YNc(1,F,49,3,"ion-grid",4),e.YNc(2,P,44,4,"ion-grid",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.user_info&&t.store_info),e.xp6(1),e.Q6J("ngIf",t.user_info&&t.store_info)}}function J(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row",12),e.TgZ(2,"ion-col",19),e.TgZ(3,"ion-card"),e.TgZ(4,"ion-grid"),e.TgZ(5,"ion-row"),e.TgZ(6,"ion-col",19),e.TgZ(7,"ion-grid"),e.TgZ(8,"ion-row",12),e.TgZ(9,"ion-col",19),e.TgZ(10,"ion-label",21),e.TgZ(11,"strong"),e._uU(12,"\u0646\u0648\u0639 \u0627\u0644\u0642\u064a\u062f "),e.qZA(),e.qZA(),e.TgZ(13,"ion-radio-group",22),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).jType=o})("ionChange",function(o){return e.CHM(t),e.oxw(2).radioChange(o)}),e.TgZ(14,"ion-grid",23),e.TgZ(15,"ion-row",24),e.TgZ(16,"ion-col",23),e.TgZ(17,"ion-item",25),e._UZ(18,"ion-radio",26),e.TgZ(19,"ion-label"),e._uU(20," \u0633\u0646\u062f \u062f\u0641\u0639 "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-col",23),e.TgZ(22,"ion-item",25),e._UZ(23,"ion-radio",27),e.TgZ(24,"ion-label"),e._uU(25," \u0633\u0646\u062f \u0642\u0628\u0636"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"ion-col",19),e.TgZ(27,"ion-label",21),e.TgZ(28,"strong"),e._uU(29," \u0627\u0644\u0645\u0635\u062f\u0631"),e.qZA(),e.qZA(),e.TgZ(30,"ion-radio-group",22),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).radioVal=o})("ionChange",function(o){return e.CHM(t),e.oxw(2).radioChange(o)}),e.TgZ(31,"ion-grid",23),e.TgZ(32,"ion-row",24),e.TgZ(33,"ion-col",23),e.TgZ(34,"ion-item",25),e._UZ(35,"ion-radio",26),e.TgZ(36,"ion-label"),e._uU(37,"\u0627\u0644\u062e\u0632\u064a\u0646\u0629 "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"ion-col",23),e.TgZ(39,"ion-item",25),e._UZ(40,"ion-radio",27),e.TgZ(41,"ion-label"),e._uU(42," \u0627\u0644\u0628\u0646\u0643 "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"ion-col",19),e.TgZ(44,"ion-label"),e.TgZ(45,"strong"),e._uU(46,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),e.qZA(),e.qZA(),e.TgZ(47,"ion-item",24),e.TgZ(48,"input",28),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).journal.j_date=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngModel",t.jType),e.xp6(17),e.Q6J("ngModel",t.radioVal),e.xp6(18),e.Q6J("ngModel",t.journal.j_date)}}function I(n,d){1&n&&e._UZ(0,"option",41),2&n&&e.Q6J("value",d.$implicit.sub_name)}function U(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row"),e.TgZ(2,"ion-col",19),e.TgZ(3,"ion-card"),e.TgZ(4,"ion-list-header",30),e.TgZ(5,"h4"),e.TgZ(6,"ion-label",21),e.TgZ(7,"strong"),e._uU(8," \u0627\u0644\u062d\u0633\u0627\u0628 : "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-grid"),e.TgZ(10,"ion-row"),e.TgZ(11,"ion-col",19),e.TgZ(12,"ion-grid"),e.TgZ(13,"ion-row"),e.TgZ(14,"ion-col",19),e.TgZ(15,"ion-label"),e.TgZ(16,"strong"),e._uU(17," \u0627\u0644\u062d\u0633\u0627\u0628 : "),e.qZA(),e.qZA(),e.TgZ(18,"ion-item",24),e.TgZ(19,"input",32),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).selectedFromAccount.sub_name=o})("change",function(o){return e.CHM(t),e.oxw(2).pickAccount(o,1)}),e.qZA(),e.TgZ(20,"datalist",33),e.YNc(21,I,1,1,"option",34),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"ion-col",19),e.TgZ(23,"ion-label"),e.TgZ(24,"strong"),e._uU(25," \u0627\u0644\u0645\u0628\u0644\u063a : "),e.qZA(),e.qZA(),e.TgZ(26,"ion-item",24),e.TgZ(27,"ion-input",35),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).pay=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"ion-row"),e._UZ(29,"ion-col",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"ion-col",19),e.TgZ(31,"ion-card"),e.TgZ(32,"ion-item",30),e.TgZ(33,"h4"),e.TgZ(34,"ion-label"),e.TgZ(35,"strong"),e._uU(36," \u0627\u0644\u0628\u064a\u0627\u0646"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"ion-item",24),e.TgZ(38,"ion-textarea",37),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).journal.j_details=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(19),e.Q6J("ngModel",t.selectedFromAccount.sub_name),e.xp6(2),e.Q6J("ngForOf",t.sub_accountFrom),e.xp6(6),e.Q6J("ngModel",t.pay),e.xp6(11),e.Q6J("ngModel",t.journal.j_details)}}function L(n,d){if(1&n&&(e.TgZ(0,"ion-content"),e.YNc(1,J,49,3,"ion-grid",4),e.YNc(2,U,39,4,"ion-grid",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.user_info&&t.store_info),e.xp6(1),e.Q6J("ngIf",t.user_info&&t.store_info)}}function H(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"ion-footer"),e.TgZ(1,"ion-row",38),e.TgZ(2,"ion-col",42),e.TgZ(3,"ion-button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e.TgZ(4,"ion-label",14),e._uU(5," \u062d\u0641\u0640\u0640\u0638"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}const D=function(n,d){return{warn:n,dark:d}},Q=[{path:"",component:(()=>{class n{constructor(t,i,o,r,s,u,_,h,k,E){this.platform=t,this.behavApi=i,this.modalController=o,this.alertController=r,this.authenticationService=s,this.storage=u,this.loadingController=_,this.datePipe=h,this.api=k,this.toast=E,this.notifArr=[],this.showNotif=!1,this.LogHistoryLocalArr=[],this.logHistoryArr=[],this.isOpenNotif=!1,this.newNotif=!1,this.sub_accountFrom=[],this.itemList=[],this.sub_accountTo=[],this.randomsNumber=[],this.jdetail_fromArr=[],this.journalType=[],this.journalTypeDetails=[],this.jType="1",this.pay=0,this.radioVal="1",this.jdetail_toArr=[],this.selectedFromAccountArr=[],this.selectedToAccountArr=[],this.showMe=null,this.showFrom=!1,this.showTo=!1,this.showFrom3=!1,this.showTo3=!1,this.device="",this.coloredMsgFrom=!1,this.coloredMsgFrom3=!1,this.coloredMsgTo=!1,this.coloredMsgTo3=!1,this.checkPlatform(),this.getAppInfo()}ngOnInit(){}checkPlatform(){this.platform.is("desktop")?this.device="desktop":this.platform.is("mobile")&&(this.device="mobile")}ionViewDidLeave(){this.subiscribtionNotif.unsubscribe()}ionViewDidEnter(){}getAppInfo(){this.storage.get("USER_INFO").then(t=>{t&&(this.user_info=t)}),this.storage.get("year").then(t=>{t&&(this.year=t)}),this.storage.get("LogHistoryLocal").then(t=>{t&&(this.LogHistoryLocalArr=t)}),this.storage.get("STORE_INFO").then(t=>{t&&(this.store_info=t,this.getAllAccounts(),this.getJournalType(),this.prepareInvo())})}coleredMsgFromFunc(){1==this.showFrom&&""==this.selectedFromAccount2.sub_name?this.coloredMsgFrom=!0:1==this.showFrom3&&""==this.selectedFromAccount3.sub_name&&(this.coloredMsgFrom3=!0),1==this.showTo&&""==this.selectedToAccount2.sub_name?this.coloredMsgTo=!0:1==this.showTo3&&""==this.selectedToAccount3.sub_name&&(this.coloredMsgTo3=!0),setTimeout(()=>{this.coloredMsgFrom=!1,this.coloredMsgFrom3=!1,this.coloredMsgTo=!1,this.coloredMsgTo3=!1},1e4)}radioChange(t){}pickAccount(t,i,o){let r;r=o||t.target.value;let _,s=this.sub_accountTo.filter(h=>h.sub_name==r);s[0].debit>0?_="debit":s[0].credit>0&&(_="credit"),this.selectedFromAccount={id:s[0].id,ac_id:s[0].ac_id,sub_name:s[0].sub_name,sub_type:s[0].sub_type,sub_code:s[0].sub_code,store_id:s[0].store_id,sub_balance:s[0].sub_balance,currentType:_,debit:+s[0].debit,credit:+s[0].credit},this.selectedItem={id:"NULL",ac_id:this.selectedFromAccount.id,sub_name:this.selectedFromAccount.sub_name,sub_type:this.selectedFromAccount.sub_type,sub_code:this.selectedFromAccount.sub_code,store_id:this.selectedFromAccount.store_id,sub_balance:this.selectedFromAccount.sub_balance,currentType:this.selectedFromAccount.currentType,debit:this.selectedFromAccount.debit,credit:this.selectedFromAccount.credit}}addTolist(){if(""==this.selectedItem.sub_name||""==this.selectedItem.id)this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u062d\u0633\u0627\u0628 ","danger");else if(0==+this.pay)this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0645\u0628\u0644\u063a ","danger");else{let t=[];if(this.itemList.length>0&&(t=this.itemList.filter(i=>i.ac_id==this.selectedItem.ac_id)),0==t.length){let i=0,o=0;1==+this.jType?i=+this.pay:2==+this.jType&&(o=+this.pay),this.itemList.push({id:"NULL",j_id:this.journal.j_id,ac_id:this.selectedItem.id,j_ref:this.journal.j_ref,j_desc:this.selectedItem.sub_type,j_type:"",credit:o,debit:i,store_id:this.store_info.id,sub_code:this.selectedItem.sub_code,sub_name:this.selectedItem.sub_name,yearId:this.year.id})}this.getTotal(),this.pay=0,this.selectedItem={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:this.store_info.id,credit:"",debit:"",currentType:""},this.selectedFromAccount={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:this.store_info.id,credit:"",debit:"",currentType:""}}}deleteItem(t){this.itemList.splice(t,1),this.pay=0,this.getTotal()}generateRandom(t){let i=new Date,o=i.getMonth().toString()+i.getDay().toString()+i.getHours().toString()+i.getMinutes().toString()+i.getSeconds().toString()+i.getMilliseconds().toString();"invo"==t?(this.payInvo.rec_ref=this.store_info.store_ref+"INV"+o,this.journal.invo_ref=this.payInvo.rec_ref):(this.journal.j_ref=this.store_info.store_ref+"JO"+o,this.jdetail_from.j_ref=this.journal.j_ref,this.jdetail_to.j_ref=this.journal.j_ref)}hideMe(t){this.showMe=null}editCell(t){1==+this.jType?+this.itemList[t].debit>0?(this.hideMe(t),this.getTotal()):this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644 ","danger"):2==+this.jType&&(+this.itemList[t].credit>0?(this.hideMe(t),this.getTotal()):this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644 ","danger"))}getTotal(){if(1==+this.jType){let t=this.itemList.reduce((i,o)=>i+ +o.debit,0);this.journal.j_pay=t}else if(2==+this.jType){let t=this.itemList.reduce((i,o)=>i+ +o.credit,0);this.journal.j_pay=t}}qtyClick(t){this.showMe=t}pickAccountTo(t,i,o){let r;r=o||t.target.value;let u,_,s=this.sub_accountTo.filter(h=>h.sub_name==r);s[0].debit>0?_="debit":s[0].credit>0&&(_="credit"),1==i?this.selectedToAccount={id:s[0].id,ac_id:s[0].ac_id,sub_name:s[0].sub_name,sub_type:s[0].sub_type,sub_code:s[0].sub_code,store_id:s[0].store_id,sub_balance:s[0].sub_balance,currentType:_,debit:+s[0].debit,credit:+s[0].credit}:2==i?this.selectedToAccount2={id:s[0].id,ac_id:s[0].ac_id,sub_name:s[0].sub_name,sub_type:s[0].sub_type,sub_code:s[0].sub_code,store_id:s[0].store_id,sub_balance:u,currentType:_,debit:+s[0].debit,credit:+s[0].credit}:3==i&&(this.selectedToAccount3={id:s[0].id,ac_id:s[0].ac_id,sub_name:s[0].sub_name,sub_type:s[0].sub_type,sub_code:s[0].sub_code,store_id:s[0].store_id,sub_balance:u,currentType:_,debit:+s[0].debit,credit:+s[0].credit})}prepareInvo(t){this.selectedItem={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:this.store_info.id,credit:"",debit:"",currentType:""},this.selectedFromAccount={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:this.store_info.id,credit:"",debit:"",currentType:""},this.jdetail_from={id:"",j_id:"",j_ref:"",ac_id:"",credit:"",debit:"",j_desc:"",j_type:"",store_id:"",yearId:this.year.id},this.jdetail_to={id:"",j_id:"",j_ref:"",ac_id:"",credit:"",debit:"",j_desc:"",j_type:"",store_id:"",yearId:this.year.id},this.payInvo={rec_id:void 0,rec_ref:0,store_id:this.store_info.id,rec_date:"",user_id:"",ac_id:0,rec_detailes:"",rec_pay:0,rec_type:"",yearId:this.year.id},this.journal={j_id:void 0,j_ref:"",j_details:"",j_type:"",invo_ref:"",j_desc:"",j_date:"",store_id:this.store_info.id,user_id:"",j_pay:"",standard_details:"",yearId:this.year.id},this.jdetail_fromArr=[],this.jdetail_toArr=[],this.pay=0;let i=new Date;this.payInvo.rec_date=this.datePipe.transform(i,"yyyy-MM-dd"),this.journal.j_date=this.datePipe.transform(i,"yyyy-MM-dd"),this.generateRandom("invo"),this.generateRandom("journal"),this.payInvo.store_id=this.store_info.id,this.payInvo.yearId=this.year.id,this.payInvo.user_id=this.user_info.id,this.journal.invo_ref=this.payInvo.rec_ref,this.journal.yearId=this.year.id,this.journal.store_id=this.store_info.id,this.journal.user_id=this.user_info.id,this.journal.store_id=this.store_info.id,this.journal.user_id=this.user_info.id,this.jdetail_from.store_id=this.store_info.id,this.jdetail_from.j_ref=this.journal.j_ref,this.jdetail_from.yearId=this.year.id,this.jdetail_to.j_ref=this.journal.j_ref,this.jdetail_to.store_id=this.store_info.id,this.jdetail_to.yearId=this.year.id,this.radioVal="1",this.jType="1",t&&this.loadingController.dismiss(),this.getAllAccounts()}getAllAccounts(){this.api.getAllAccounts(this.store_info.id,this.year.id).subscribe(t=>{let i=t;this.sub_accountFrom=i.data,this.sub_accountTo=i.data,this.sub_accountFrom=this.sub_accountFrom.filter(o=>5==o.ac_id),this.prepareCurrentBalnces()},t=>{})}prepareCurrentBalnces(){for(let t=0;t<this.sub_accountFrom.length;t++){const i=this.sub_accountFrom[t];let o=+i.fromDebitTot+ +i.toDebitTot,r=+i.fromCreditTot+ +i.toCreditTot;if("debit"==i.sub_type){let s=+i.sub_balance+ +o-+r;s>0?(i.debit=s,i.credit=0):s<0?(s*=-1,i.debit=0,i.credit=s):0==s&&(i.debit=s,i.credit=0)}else if("credit"==i.sub_type){let s=+i.sub_balance+ +r-+o;s>0?(i.debit=0,i.credit=s):s<0?(s*=-1,i.debit=s,i.credit=0):0==s&&(i.debit=0,i.credit=s)}}this.sub_accountTo=this.sub_accountFrom}getJournalType(){this.api.getJournalType(this.store_info.id).subscribe(t=>{this.journalType=t.data,this.getJournalTypeDetails()},t=>{})}getJournalTypeDetails(){this.api.getJournalTypeDetails(this.store_info.id).subscribe(t=>{this.journalTypeDetails=t.data},t=>{})}payChange(t){this.jdetail_from.debit=t.target.value,this.jdetail_to.credit=t.target.value}validate(){return 0==+this.radioVal||0==+this.jType?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631  \u0646\u0648\u0639 \u0627\u0644\u0633\u0646\u062f ","danger"),!1):0==+this.journal.j_pay?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0645\u0639\u0627\u0645\u0644\u0627\u062a ","danger"),!1):0!=+this.jdetail_fromArr[0].ac_id&&0!=+this.jdetail_toArr[0].ac_id||void this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u062d\u0633\u0627\u0628 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a  ","danger")}setStandard(){let t="",i="",o="",r="";1==this.showFrom&&null!=this.selectedFromAccount2.sub_name?t=" , "+this.selectedFromAccount2.sub_name:1==this.showFrom3&&null!=this.selectedFromAccount3.sub_name&&(i=" , "+this.selectedFromAccount3.sub_name),1==this.showTo&&null!=this.selectedToAccount2.sub_name?o=" , "+this.selectedToAccount2.sub_name:1==this.showTo3&&null!=this.selectedToAccount3.sub_name&&(r=" , "+this.selectedToAccount3.sub_name),this.journal.standard_details="\u0645\u0646 \u062d\u0633\u0627\u0628 "+this.selectedFromAccount.sub_name+t+i+" \u0627\u0644\u064a \u062d\u0633\u0627\u0628 "+this.selectedToAccount.sub_name+o+r}prepare4save(){this.payInvo.rec_date=this.journal.j_date,this.payInvo.rec_date=this.datePipe.transform(this.payInvo.rec_date,"yyyy-MM-dd");let i=0,o=0;1==+this.jType?(i=+this.pay,this.journal.j_type="\u0633\u0646\u062f \u062f\u0641\u0639"):2==+this.jType&&(o=+this.pay,this.journal.j_type="\u0633\u0646\u062f \u0642\u0628\u0636"),this.itemList=[],this.itemList.push({id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:this.selectedFromAccount.id,j_desc:this.selectedFromAccount.sub_type,j_type:"",credit:o,debit:i,store_id:this.store_info.id,sub_code:this.selectedFromAccount.sub_code,sub_name:this.selectedFromAccount.sub_name,yearId:this.year.id}),this.journal.j_pay=+this.pay;let s="",u="";1==+this.jType?(1==+this.radioVal?(this.jdetail_to={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:46,j_desc:"",j_type:"\u0633\u0646\u062f \u062f\u0641\u0639",credit:this.pay,debit:0,store_id:this.store_info.id,yearId:this.year.id},u="\u0627\u0644\u062e\u0632\u064a\u0646\u0629",s=this.selectedFromAccount.sub_name):2==+this.radioVal&&(this.jdetail_to={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:47,j_desc:"",j_type:"\u0633\u0646\u062f \u062f\u0641\u0639",credit:this.pay,debit:0,store_id:this.store_info.id,yearId:this.year.id},u="\u0627\u0644\u0628\u0646\u0643",s=this.selectedFromAccount.sub_name),this.itemList[0].j_type="\u0633\u0646\u062f \u0642\u0628\u0636",this.jdetail_toArr.push(this.jdetail_to),this.jdetail_fromArr.push(this.itemList[0]),this.journal.standard_details="\u0645\u0646 \u062d\u0633\u0627\u0628 "+s+" \u0627\u0644\u064a \u062d\u0633\u0627\u0628 "+u):2==+this.jType&&(1==+this.radioVal?(this.jdetail_from={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:46,j_desc:"",j_type:"\u0633\u0646\u062f \u0642\u0628\u0636",credit:0,debit:this.pay,store_id:this.store_info.id,yearId:this.year.id},s="\u0627\u0644\u062e\u0632\u064a\u0646\u0629",u=this.selectedFromAccount.sub_name):2==+this.radioVal&&(this.jdetail_from={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:47,j_desc:"",j_type:"\u0633\u0646\u062f \u0642\u0628\u0636",credit:0,debit:+this.pay,store_id:this.store_info.id,yearId:this.year.id},s="\u0627\u0644\u0628\u0646\u0643",u=this.selectedFromAccount.sub_name),this.itemList[0].j_type="\u0633\u0646\u062f \u062f\u0641\u0639",this.jdetail_toArr.push(this.itemList[0]),this.jdetail_fromArr.push(this.jdetail_from),this.journal.standard_details="\u0645\u0646 \u062d\u0633\u0627\u0628 "+s+" \u0627\u0644\u064a \u062d\u0633\u0627\u0628 "+u)}save(){this.prepare4save(),1==this.validate()&&(this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.saveJournal())}presentModalSales(t,i,o){return(0,Z.mG)(this,void 0,void 0,function*(){8==this.selectedToAccount.ac_id&&(t="sales",""==this.selectedFromAccount2.sub_name&&1==this.showFrom?this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u062d\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u064a\u0644","warning"):""!=this.selectedFromAccount2.sub_name&&1==this.showFrom&&(i=this.selectedFromAccount2.sub_name,o=this.selectedFromAccount2.id)),9==this.selectedFromAccount.ac_id&&(t="purch",""==this.selectedToAccount2.sub_name&&1==this.showTo?this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u0648\u0631\u062f","warning"):""!=this.selectedToAccount2.sub_name&&1==this.showTo&&(i=this.selectedToAccount2.sub_name,o=this.selectedToAccount2.id));const r=yield this.modalController.create({component:"AccountModalPage",componentProps:{type:t,sub_name:i,cust_id:o}});return r.onDidDismiss().then(s=>{null!==s&&this.doAfterDissmiss(s)}),yield r.present()})}doAfterDissmiss(t){("sales"==t.role||"purch"==t.role)&&(this.journal.j_details=this.journal.j_details+", "+t.data[1]+" , \u0631\u0642\u0645 :  "+t.data[0].pay_id+" \u0628\u062a\u0627\u0631\u064a\u062e "+t.data[0].pay_date+", \u0625\u062c\u0645\u0627\u0644\u064a : "+(+t.data[0].tot_pr-+t.data[0].discount))}saveJournal(){this.api.saveJournal(this.journal).subscribe(t=>{if("Post Not Created"!=t.message){for(let i=0;i<this.jdetail_fromArr.length;i++)this.jdetail_fromArr[i].j_id=t.message;for(let i=0;i<this.jdetail_toArr.length;i++)this.jdetail_toArr[i].j_id=t.message;this.logHistoryArr.push({id:null,logRef:this.generateRandom2("insert journal"),userId:this.user_info.id,typee:"insert journal",datee:m(new Date).locale("en").format("YYYY-MM-DD HH:mm:ss"),logStatus:0,logToken:JSON.stringify(this.journal),yearId:this.year.id,store_id:this.store_info.id}),this.saveJournalFrom()}else this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()})}generateRandom2(t){let i=new Date,o=i.getMonth().toString()+i.getDay().toString()+i.getHours().toString()+i.getMinutes().toString()+i.getSeconds().toString()+i.getMilliseconds().toString()+t;return this.store_info.store_ref+o}performSync(){return(0,Z.mG)(this,void 0,void 0,function*(){yield this.saveLogHistory(),yield this.prepareInvo("saved")})}presentPopoverNotif(t){this.notifArr=[],this.showNotif=!1,this.popoverNotif32.event=t,this.isOpenNotif=!0}didDissmisNotif(){this.isOpenNotif=!1}saveJournalFrom(){this.api.saveJournalFrom(this.jdetail_fromArr).subscribe(t=>{"Post Not Created"!=t.message?this.saveJournalTo():(this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss())},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()})}saveJournalTo(){this.api.saveJournalTo(this.jdetail_toArr).subscribe(t=>{"Post Not Created"!=t.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success"),this.performSync()):(this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss())},t=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()})}presentLoadingWithOptions(t){return(0,Z.mG)(this,void 0,void 0,function*(){const i=yield this.loadingController.create({spinner:"bubbles",mode:"ios",message:t,translucent:!0,backdropDismiss:!1});yield i.present(),yield i.onDidDismiss()})}saveLogHistory(){let t,i,o;this.logHistoryArr.length>1?(o=this.logHistoryArr[1],i=this.logHistoryArr[0],t="new account"):(o=this.logHistoryArr[0],t=void 0),this.api.saveLogHistoryMultiSales(o,i,t).subscribe(r=>{"Post Not Created"!=r.message?this.logHistoryArr=[]:this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},r=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}presentToast(t,i){return(0,Z.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:t,duration:2e3,color:i,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.t4),e.Y36(T.h),e.Y36(a.IN),e.Y36(a.Br),e.Y36(A.u),e.Y36(b.K),e.Y36(a.HT),e.Y36(g.uU),e.Y36(y.r),e.Y36(a.yF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cash3"]],viewQuery:function(t,i){if(1&t&&e.Gf(q,5),2&t){let o;e.iGM(o=e.CRH())&&(i.popoverNotif32=o.first)}},decls:23,vars:9,consts:[["slot","start"],["slot","end"],[1,"poRel"],[1,"posAb","noti"],[4,"ngIf"],[3,"click"],["name","notifications-outline",1,"dark",3,"ngClass"],["fill","clear",3,"click"],["color","dark"],[3,"isOpen","didDismiss"],["popoverNotif32",""],["dir","rtl",1,"ion-text-center"],["dir","rtl"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","9"],["size","3"],["color","primary"],["size","12"],["size","3","offset","1"],[1,"ion-padding"],[3,"ngModel","ngModelChange","ionChange"],[1,"ion-no-padding","ion-no-margin"],[1,"custInput"],["lines","none"],["value","1",1,"ion-margin-end"],["value","2",1,"ion-margin-end"],["type","date","id","startingDate","name","startingDate",2,"width","100%",3,"ngModel","ngModelChange"],["size","7"],[1,"bgP"],["size","6","offset","1"],["placeholder","\u0627\u062e\u062a\u0631  \u0627\u0644\u062d\u0633\u0627\u0628 ","list","accountsfrom","id","accountfrom",1,"bnone",3,"ngModel","ngModelChange","change"],["id","accountsfrom",2,"height","auto","max-height","20px"],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u0627\u062f\u062e\u0644 \u0627\u0644\u0645\u0628\u0644\u063a",3,"ngModel","ngModelChange"],["size","5"],["rows","5","cols","5",3,"ngModel","ngModelChange"],[1,"ion-justify-content-center"],["size","4"],["expand","block","routerDirection","root","color","primary",3,"click"],[3,"value"],["size","8"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",0),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a "),e.qZA(),e.TgZ(6,"ion-buttons",1),e.TgZ(7,"div",2),e.TgZ(8,"div",3),e.TgZ(9,"ion-label"),e.YNc(10,C,2,1,"ion-text",4),e.qZA(),e.qZA(),e.TgZ(11,"div",5),e.NdJ("click",function(r){return i.presentPopoverNotif(r)}),e._UZ(12,"ion-icon",6),e.qZA(),e.qZA(),e.TgZ(13,"ion-button",7),e.NdJ("click",function(r){return i.presentPopoverNotif(r)}),e.TgZ(14,"ion-label"),e.TgZ(15,"ion-text",8),e._uU(16,"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"ion-popover",9,10),e.NdJ("didDismiss",function(){return i.didDissmisNotif()}),e.YNc(19,v,5,1,"ng-template"),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,N,3,2,"ion-content",4),e.YNc(21,L,3,2,"ion-content",4),e.YNc(22,H,6,0,"ion-footer",4)),2&t&&(e.xp6(10),e.Q6J("ngIf",1==i.showNotif&&i.notifArr.length>0),e.xp6(2),e.Q6J("ngClass",e.WLB(6,D,1==i.showNotif&&i.notifArr.length>0,0==i.showNotif)),e.xp6(5),e.Q6J("isOpen",i.isOpenNotif),e.xp6(3),e.Q6J("ngIf","desktop"==i.device),e.xp6(1),e.Q6J("ngIf","mobile"==i.device),e.xp6(1),e.Q6J("ngIf","mobile"==i.device))},directives:[a.Gu,a.sr,a.Sm,a.fG,a.wd,a.Q$,g.O5,a.gu,g.mk,a.YG,a.yW,a.d8,a.W2,a.q_,g.sg,a.Ie,a.jY,a.Nd,a.wI,a.PM,a.se,a.QI,c.JJ,c.On,a.B7,a.U5,c.Fj,a.yh,a.pK,a.j9,a.g2,c.YN,c.Kr,a.fr],pipes:[j.R],styles:[".custInput[_ngcontent-%COMP%]{border-style:solid;border-color:var(--ion-color-light);border-radius:5px}.bgP[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}.coloredMsg[_ngcontent-%COMP%]{border-style:solid;border-width:1.5px;box-shadow:10px 10px 5px 5px #ff8c00;border-color:var(--ion-color-warning)}.table[_ngcontent-%COMP%]{text-align:center;width:100%;margin:12px}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#ddd}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:center;padding:8px;font-size:16px;font-weight:700;color:#000}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.Bz.forChild(Q)],f.Bz]}),n})();var Y=l(78565);let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,c.u5,Y.G,a.Pc,O]]}),n})()}}]);