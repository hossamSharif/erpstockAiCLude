{"version":3,"file":"src_app_item-stock_item-stock_module_ts.js","mappings":";;;;;;;;;;;;;;;AAA2C;AACA;AACpC,2CAA2C,mDAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,mDAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACrDyC;AACc;AAEL;AAElD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAa;KACzB;CACF,CAAC;IAMW,0BAA0B,SAA1B,0BAA0B;CAAG;AAA7B,0BAA0B;IAJtC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,0BAA0B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBE;AACM;AACF;AAEA;AACW;AACiB;AAEvB;AAC4B;IAejE,mBAAmB,SAAnB,mBAAmB;CAAG;AAAtB,mBAAmB;IAb/B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YAEX,kEAAmB;YAEnB,sFAAW;YACX,kFAA0B;SAC3B;QACD,YAAY,EAAE,CAAC,2DAAa,CAAC;KAC9B,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBqD;AAClB;AAE6C;AAC5C;AACrC;AACY;AACmB;AACrB;AACZ;AACH;AACY;AACF;AACuC;AACrC;AACqB;AACE;AACF,CAAC,OAAO;IAOtD,aAAa,SAAb,aAAa;IA2HxB,YAAoB,MAAa,EAAU,IAAU,EAAU,UAAsB,EAAS,QAA4B,EAAS,OAAgB,EAAS,eAAgC,EAAS,eAAgC,EAAS,iBAAmC,EAAU,QAAiB,EAAS,GAAmB,EAAS,KAAsB;QAAnV,WAAM,GAAN,MAAM,CAAO;QAAU,SAAI,GAAJ,IAAI,CAAM;QAAU,eAAU,GAAV,UAAU,CAAY;QAAS,aAAQ,GAAR,QAAQ,CAAoB;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,oBAAe,GAAf,eAAe,CAAiB;QAAS,oBAAe,GAAf,eAAe,CAAiB;QAAS,sBAAiB,GAAjB,iBAAiB,CAAkB;QAAU,aAAQ,GAAR,QAAQ,CAAS;QAAS,QAAG,GAAH,GAAG,CAAgB;QAAS,UAAK,GAAL,KAAK,CAAiB;QArHvW,wBAAmB,GAAG,KAAK,CAAC;QAC5B,uBAAkB,GAAQ,IAAI,CAAC;QAGjC,WAAM,GAAG,KAAK,CAAC;QAGd,eAAU,GAAG,KAAK,CAAC;QACpB,aAAQ,GAAa,EAAE;QACvB,cAAS,GAAG,KAAK;QACjB,uBAAkB,GAAa,EAAE;QACjC,kBAAa,GAAY,EAAE,CAAC;QAC5B,gBAAW,GAAG,KAAK,CAAE;QACrB,aAAQ,GAAG,KAAK,CAAE;QAClB,qBAAqB;QACrB,gBAAW,GAAuD,EAAC,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAC;QAC/F,UAAK,GAAa,EAAE;QACpB,aAAQ,GAAa,EAAE;QACrB,gBAAW,GAAa,EAAE;QAC1B,eAAU,GAAY,KAAK;QAC3B,eAAU,GAAO,EAAE;QAGpB,oBAAe,GAAG,KAAK,CAAC;QAIvB,cAAS,GAAQ,CAAC;QAClB,aAAQ,GAAQ,CAAC;QACjB,iBAAY,GAAQ,CAAC;QACrB,YAAO,GAAW,KAAK;QACvB,eAAU,GAAW,KAAK;QAC1B,sBAAiB,GAAc,EAAE,CAAC;QAClC,qBAAgB,GAAc,EAAE,CAAC;QACjC,sBAAiB,GAAc,EAAE,CAAC;QAClC,gBAAW,GAAc,EAAE,CAAC;QAC5B,qBAAgB,GAAc,EAAE,CAAC;QACjC,cAAS,GAAY,EAAE,CAAC;QACxB,cAAS,GAAa,EAAE,CAAC;QACzB,eAAU,GAAgB,EAAE,CAAE;QAC9B,WAAM,GAAG,IAAI;QACb,eAAU,GAAY,KAAK;QAC3B,eAAU,GAAY,KAAK;QAC3B,cAAS,GAAW,KAAK;QACzB,aAAQ,GAAW,KAAK;QAIvB,sBAAiB,GAAe,EAAE,CAAC;QAEpC,aAAQ,GAAE,YAAY,CAAC;QAEvB,gBAAW,GAAW,CAAC,CAAC;QACxB,iBAAY,GAAW,EAAE,CAAC,CAAC,yBAAyB;QACpD,eAAU,GAAW,CAAC,CAAC;QACvB,eAAU,GAAW,CAAC,CAAC;QACvB,oBAAe,GAAa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QAuB9C,2BAA2B;QAC3B,oBAAe,GAA8D,EAAE,CAAC;QAChF,oBAAe,GAA8D,EAAE,CAAC;QAChF,4BAAuB,GAA8D,EAAE,CAAC;QACxF,4BAAuB,GAA8D,EAAE,CAAC;QACxF,oBAAe,GAAW,EAAE,CAAC;QAC7B,oBAAe,GAAW,EAAE,CAAC;QAG7B,wBAAwB;QACxB,mBAAc,GAAU,EAAE,CAAC;QAC3B,0BAAqB,GAAW,CAAC,CAAC;QAClC,uBAAkB,GAAW,EAAE,CAAC;QAChC,sBAAiB,GAAY,KAAK,CAAC;QACnC,sBAAiB,GAAY,KAAK,CAAC;QACnC,yBAAoB,GAAW,EAAE,CAAC;QAClC,sBAAiB,GAAQ,EAAE,CAAC;QACpB,kBAAa,GAAG,IAAI,0CAAO,EAAU,CAAC;QAC9C,sBAAiB,GAAY,KAAK,CAAC;QACnC,0BAAqB,GAAQ,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QAE3E,2BAA2B;QAC3B,qBAAgB,GAAY,KAAK,CAAC;QAClC,iBAAY,GAAU,EAAE,CAAC;QACzB,oBAAe,GAAY,KAAK,CAAC;QACjC,wBAAmB,GAAQ,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QAEzE,iCAAiC;QACjC,mBAAc,GAAY,KAAK,CAAC;QAChC,eAAU,GAAU,EAAE,CAAC;QACvB,kBAAa,GAAY,KAAK,CAAC;QAC/B,sBAAiB,GAAQ,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QACvE,sBAAiB,GAAW,EAAE,CAAC;QAE/B,gCAAgC;QAChC,uBAAkB,GAAW,CAAC,CAAC;QAC/B,yBAAoB,GAAW,CAAC,CAAC;QACjC,uBAAkB,GAAY,KAAK,CAAC;QAElC,IAAI,CAAC,UAAU,GAAG,EAAC,EAAE,EAAC,EAAE,EAAE,SAAS,EAAC,EAAE,EAAG,UAAU,EAAC,EAAE,EAAG,QAAQ,EAAE,EAAE,EAAE;QACvE,IAAI,CAAC,YAAY,GAAG,EAAC,EAAE,EAAC,IAAI,EAAE,SAAS,EAAC,EAAE,EAAE,KAAK,EAAC,EAAE,EAAE,OAAO,EAAC,EAAE,EAAG,OAAO,EAAC,CAAC,EAAE,KAAK,EAAC,EAAE,EAAC,SAAS,EAAC,CAAC,EAAC,WAAW,EAAC,CAAC,EAAC,SAAS,EAAC,EAAE,EAAC,SAAS,EAAC,EAAE,EAAC,YAAY,EAAC,EAAE,EAAC,OAAO,EAAC,EAAE,EAAC,CAAC;QACvK,IAAI,CAAC,aAAa,GAAG,EAAC,EAAE,EAAC,IAAI,EAAE,SAAS,EAAC,EAAE,EAAE,KAAK,EAAC,EAAE,EAAE,OAAO,EAAC,EAAE,EAAG,OAAO,EAAC,CAAC,EAAE,KAAK,EAAC,EAAE,EAAC,SAAS,EAAC,CAAC,EAAC,WAAW,EAAC,CAAC,EAAC,SAAS,EAAC,EAAE,EAAC,SAAS,EAAC,EAAE,EAAC,YAAY,EAAC,EAAE,EAAC,OAAO,EAAC,EAAE,EAAC,CAAC;QACxK,IAAI,CAAC,UAAU,GAAG,EAAC,EAAE,EAAC,IAAI,EAAE,SAAS,EAAC,IAAI,EAAE,KAAK,EAAC,IAAI,EAAE,OAAO,EAAC,IAAI,EAAG,OAAO,EAAC,IAAI,EAAE,KAAK,EAAC,IAAI,EAAC,SAAS,EAAC,IAAI,EAAC,WAAW,EAAC,IAAI,EAAC,SAAS,EAAC,IAAI,EAAC,SAAS,EAAC,IAAI,EAAC,YAAY,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,QAAQ,EAAC,IAAI,EAAC,IAAI,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,IAAI,EAAC,CAAC;QACtQ,IAAI,CAAC,UAAU,EAAE;QACd,0BAA0B;QAC7B,IAAI,CAAC,WAAW,GAAG;YACjB,KAAK,EAAE;gBACL,QAAQ,EAAE,KAAK;gBACf,SAAS,EAAE,KAAK;gBAChB,cAAc,EAAE,EAAE;aACnB;YACD,KAAK,EAAE;gBACL,QAAQ,EAAE,KAAK;gBACf,SAAS,EAAE,KAAK;gBAChB,cAAc,EAAE,EAAE;aACnB;YACD,QAAQ,EAAE;gBACR,QAAQ,EAAE,KAAK;gBACf,SAAS,EAAE,KAAK;gBAChB,WAAW,EAAE,CAAC;gBACd,WAAW,EAAE,CAAC;gBACd,UAAU,EAAE,OAAO;aACpB;SACF;QAED,+BAA+B;QAC/B,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB,6DAAY,CAAC,GAAG,CAAC,EACjB,qEAAoB,EAAE,CACvB,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE;YACvB,IAAI,CAAC,oBAAoB,GAAG,UAAU,CAAC;YACvC,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC;IA7JoD,gBAAgB,CAAC,KAAoB;QACxF,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;IACpB,CAAC;IA+JC,GAAG;IAML,GAAG;IAEF,mBAAmB,CAAC,IAAS,EAAE,KAAU;QACtC,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;YACxB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACnC;SACF;aAAM;YACL,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;SACrG;IACH,CAAC;IAED,cAAc,CAAC,IAAS;QACtB,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;IAClF,CAAC;IAED,eAAe,CAAC,KAAU;QACxB,MAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE9C,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;YACxB,mCAAmC;YACnC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACzB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnC;YACH,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,qCAAqC;YACrC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACzB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;YACtG,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,aAAa;QACX,MAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9C,OAAO,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;IACxF,CAAC;IAED,cAAc;QACZ,MAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9C,MAAM,qBAAqB,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QACpF,OAAO,qBAAqB,CAAC,MAAM,GAAG,CAAC,IAAI,qBAAqB,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;IAC/F,CAAC;IAED,qBAAqB;IACrB,uBAAuB,CAAC,KAAU;QAChC,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;YACxB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC9B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnC;YACH,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;YACtG,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,qBAAqB;QACnB,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;IAClG,CAAC;IAED,sBAAsB;QACpB,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC5E,CAAC;IAED,qBAAqB;IACrB,qBAAqB,CAAC,KAAU;QAC9B,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;;YAChD,kBAAI,CAAC,SAAS,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;iBACrE,UAAI,CAAC,SAAS,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;iBACrE,UAAI,CAAC,OAAO,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;iBACnE,UAAI,CAAC,KAAK,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;SAAA,CAClE,CAAC;QAEF,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;YACxB,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC3B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnC;YACH,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;YACtG,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,mBAAmB;QACjB,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;;YAChD,kBAAI,CAAC,SAAS,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;iBACrE,UAAI,CAAC,SAAS,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;iBACrE,UAAI,CAAC,OAAO,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;iBACnE,UAAI,CAAC,KAAK,0CAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;SAAA,CAClE,CAAC;QACF,OAAO,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5F,CAAC;IAED,oBAAoB;QAClB,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC1E,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;IAC9B,CAAC;IAED,iDAAiD;IACjD,kBAAkB;QAChB,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,OAAO,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC;SAC9B;aAAM,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAChC,OAAO,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC;SAChC;aAAM,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,gBAAgB,EAAE,EAAE;YACrD,OAAO,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC;SAC/B;aAAM,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YAChE,kBAAkB;YAClB,OAAO,IAAI,CAAC,cAAc,CAAC;SAC5B;aAAM;YACL,0DAA0D;YAC1D,OAAO,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;SACzB;IACH,CAAC;IAED,2BAA2B;QACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,2CAA2C;QAC3C,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC;QAClE,IAAI,WAAW,EAAE;YACf,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;SACvC;QAED,kCAAkC;QAClC,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAC5B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAEK,0BAA0B;;YAC9B,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvC,qBAAqB;gBACrB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACpC,OAAO,EAAE,wBAAwB;oBACjC,QAAQ,EAAE,IAAI;oBACd,KAAK,EAAE,SAAS;iBACjB,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,OAAO;aACR;YAED,qCAAqC;YACrC,MAAM,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACxD,EAAE,EAAE,IAAI,CAAC,EAAE;gBACX,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,CAAC;gBAClC,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,CAAC;gBAC9B,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAC5F,GAAG,EAAE,IAAI,CAAC,WAAW,IAAI,CAAC;gBAC1B,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,CAAC;gBAC5B,OAAO,EAAE,IAAI,CAAC,OAAO;aACtB,CAAC,CAAC,CAAC;YAIJ,gDAAgD;YAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE;gBACxC,WAAW,EAAE;oBACX,MAAM,EAAE,sBAAsB;oBAC9B,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC;iBACjD;aACF,CAAC,CAAC;YACH,mCAAmC;YACnC,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;KAAA;IAGM,sBAAsB;;YAC3B,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACpC,OAAO,EAAE,wBAAwB;oBACjC,QAAQ,EAAE,IAAI;oBACd,KAAK,EAAE,SAAS;oBAChB,QAAQ,EAAE,eAAe;iBAC1B,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,OAAO;aACR;YAED,oBAAoB;YAInB,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACpD,EAAE,EAAE,IAAI,CAAC,EAAE;gBACb,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,CAAC;gBAClC,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,CAAC;gBAC9B,GAAG,EAAE,IAAI,CAAC,QAAQ;gBAClB,GAAG,EAAE,IAAI,CAAC,SAAS,IAAI,CAAC;gBACxB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,CAAC;gBAC5B,OAAO,EAAE,IAAI,CAAC,OAAO;aACpB,CAAC,CAAC,CAAC;YAEJ,yBAAyB;YACzB,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,EAAE;gBAC3C,WAAW,EAAE;oBACX,MAAM,EAAE,sBAAsB;oBAC9B,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;iBAC9C;aACF,CAAC,CAAC;YAEH,kBAAkB;YAChB,IAAI,CAAC,cAAc,EAAE,CAAC;YAC1B,eAAe;QAEjB,CAAC;KAAA;IAEK,uBAAuB;;YAC3B,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACpC,OAAO,EAAE,wBAAwB;oBACjC,QAAQ,EAAE,IAAI;oBACd,KAAK,EAAE,SAAS;oBAChB,QAAQ,EAAE,eAAe;iBAC1B,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,OAAO;aACR;YAED,oBAAoB;YAInB,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACtD,EAAE,EAAE,IAAI,CAAC,EAAE;gBACX,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,CAAC;gBAClC,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,CAAC;gBAC9B,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAC5F,GAAG,EAAE,IAAI,CAAC,SAAS,IAAI,CAAC;gBACxB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,CAAC;gBAC5B,OAAO,EAAE,IAAI,CAAC,OAAO;aACpB,CAAC,CAAC,CAAC;YAEJ,yBAAyB;YACzB,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,EAAE;gBAC3C,WAAW,EAAE;oBACX,MAAM,EAAE,sBAAsB;oBAC9B,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;iBAC9C;aACF,CAAC,CAAC;YAED,kBAAkB;YAClB,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,eAAe;QAErB,CAAC;KAAA;IAGD,GAAG;IAGE,oBAAoB,CAAC,KAAU,EAAE,IAAS;;YAC7C,gBAAgB;YAChB,OAAO,CAAC,GAAG,CAAC,wCAAwC,EAAE,IAAI,CAAC,CAAC;YAC5D,OAAO,CAAC,GAAG,CAAC,kCAAkC,EAAE,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,EAAE,CAAC,CAAC;YAE1D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;YACjC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAClC,CAAC;KAAA;IAGD,cAAc,CAAC,IAAS;QACtB,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,IAAI,gBAAgB,GAAqB;YACvC,WAAW,EAAE;gBACX,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;aAC3B;SACF,CAAC;QAEA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,EAAE,gBAAgB,CAAC,CAAC;IACpE,CAAC;IAEA,QAAQ,CAAC,IAAS;QACjB,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QAEjC,sCAAsC;QACtC,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAE,IAAI,CAAC,CAAC;QAChD,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,EAAE,CAAC,CAAC;QAElC,qCAAqC;QACrC,IAAI,CAAC,IAAI,EAAE;YACT,IAAI,CAAC,YAAY,CAAC,iCAAiC,EAAE,QAAQ,CAAC,CAAC;YAC/D,OAAO;SACR;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC;QAEvC,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,CAAC,KAAK,CAAC,qCAAqC,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACxE,IAAI,CAAC,YAAY,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC;YACrD,OAAO;SACR;QAED,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IACpC,CAAC;IAEM,aAAa,CAAC,IAAS;;YAC5B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YACjC,6BAA6B;YAC7B,eAAe;YACf,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,aAAa;gBACrB,OAAO,EAAE,iCAAiC;gBAC1C,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,OAAO;wBACb,IAAI,EAAE,QAAQ;qBACf;oBACD;wBACE,IAAI,EAAE,KAAK;wBACX,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;4BACtB,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;wBACpC,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;IAEC,UAAU,CAAC,IAAI;QACb,mBAAmB;QACnB,IAAI,CAAC,YAAY,GAAG,IAAI;QAC1B,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE;YACpD,IAAI,CAAC,YAAY,CAAC,+CAA+C,EAAG,QAAQ,CAAC;SAC9E;aAAM;YACL,IAAI,CAAC,MAAM,EAAE;SACd;IACD,CAAC;IAGL,MAAM;QACJ,IAAI,CAAC,yBAAyB,CAAC,uBAAuB,CAAC;QACxD,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC1D,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBAC1C,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAG,SAAS,CAAC;gBAC/C,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAG,QAAQ,CAAC;gBACtD,iEAAiE;gBAClE,kDAAkD;aACjD;iBAAI;gBACJ,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;aAClF;QAEH,CAAC,EAAC,CAAC,GAAG,EAAE,EAAE;YACR,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QAEnF,CAAC,EAAC,GAAG,EAAE;YACL,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;QAClC,CAAC,CAAC;IACJ,CAAC;IAMC,EAAE;IAEA,4DAA4D;IAC5D,YAAY,CAAC,EAAO;QAClB,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,EAAE,CAAC,CAAC;QAChD,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE;YAClC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;YACvC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,gBAAgB,EAAE,IAAI,CAAC,gBAAgB,EAAE;SAC1C,CAAC,CAAC;QAEH,oCAAoC;QACpC,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACxE,OAAO,CAAC,GAAG,CAAC,kCAAkC,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YACxE,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YACpD,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;gBAC3C,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;YAC9E,OAAO,CAAC,GAAG,CAAC,oCAAoC,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAC5E,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YACtD,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;gBAC7C,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YACnG,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAC1E,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YACrD,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;gBAC5C,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YACzD,OAAO,CAAC,GAAG,CAAC,sCAAsC,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAChF,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YACxD,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,KAAK,CAAC,CAAC;gBAC/C,OAAO,KAAK,CAAC;aACd;SACF;QAED,0BAA0B;QAC1B,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACvC,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAC9D,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YAC/C,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;gBACtC,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7C,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpE,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YAClD,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;gBACzC,OAAO,KAAK,CAAC;aACd;SACF;QAED,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;QAC3C,OAAO,IAAI,CAAC;IACd,CAAC;IAEK,YAAY,CAAC,EAAG,EAAE,MAAO;;;YAC7B,IAAI,EAAE,IAAG,MAAM,IAAI,MAAM,IAAI,MAAM,EAAE;gBAClC,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBAExC,IAAI,CAAC,SAAS,EAAE;oBACd,IAAI,CAAC,YAAY,CAAC,iCAAiC,EAAE,QAAQ,CAAC,CAAC;oBAC/D,OAAO;iBACR;gBAEJ,yBAAyB;gBACzB,IAAI,CAAC,YAAY,GAAG;oBAClB,EAAE,EAAE,SAAS,CAAC,EAAE;oBAChB,SAAS,EAAE,SAAS,CAAC,SAAS;oBAC9B,KAAK,EAAE,SAAS,CAAC,KAAK;oBACtB,SAAS,EAAE,SAAS,CAAC,SAAS;oBAC9B,OAAO,EAAE,SAAS,CAAC,OAAO;oBAC1B,OAAO,EAAE,SAAS,CAAC,OAAO;oBAC1B,KAAK,EAAE,SAAS,CAAC,KAAK;oBACtB,SAAS,EAAE,SAAS,CAAC,SAAS;oBAC9B,YAAY,EAAE,SAAS,CAAC,YAAY;oBACpC,SAAS,EAAE,SAAS,CAAC,SAAS;oBAC9B,WAAW,EAAE,SAAS,CAAC,WAAW;oBAClC,OAAO,EAAE,SAAS,CAAC,OAAO;iBAC3B;gBAED,qCAAqC;gBACrC,IAAI,CAAC,MAAM,GAAG;oBACZ,EAAE,EAAE,SAAS,CAAC,EAAE;oBAChB,OAAO,EAAE,SAAS,CAAC,EAAE;oBACrB,QAAQ,EAAE,UAAI,CAAC,UAAU,0CAAE,EAAE;oBAC7B,QAAQ,EAAE,SAAS,CAAC,aAAa,IAAI,CAAC;oBACtC,OAAO,EAAE,UAAI,CAAC,IAAI,0CAAE,EAAE;oBACtB,SAAS,EAAE,SAAS,CAAC,SAAS;oBAC9B,WAAW,EAAE,SAAS,CAAC,WAAW;iBACnC;aACA;YAGD,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,SAAS,EAAE,sEAAa;gBACxB,cAAc,EAAE;oBACd,MAAM,EAAE,IAAI,CAAC,YAAY;oBACzB,QAAQ,EAAE,IAAI,CAAC,MAAM;oBACrB,YAAY,EAAE,IAAI,CAAC,UAAU;oBAC7B,kBAAkB,EAAE,IAAI,CAAC,gBAAgB;oBACzC,aAAa,EAAE,IAAI,CAAC,WAAW;oBAC/B,WAAW,EAAE,IAAI,CAAC,SAAS;oBAC3B,WAAW,EAAE,IAAI,CAAC,SAAS;oBAC3B,QAAQ,EAAE,MAAM;iBACjB;aACF,CAAC,CAAC;YAEH,KAAK,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC,YAAY,EAAE,EAAE;gBACzC,IAAI,YAAY,KAAK,IAAI,EAAE;oBACzB,4BAA4B;oBAC5B,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;iBACnC;YACH,CAAC,CAAC,CAAC;YAEH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;;KAC9B;IAGD,UAAU;QACR,IAAI,CAAC,WAAW,GAAG,KAAK;QACxB,4BAA4B;IAC9B,CAAC;IAED,cAAc,CAAC,CAAS;QACtB,6BAA6B;QAC5B,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,KAAK;IACxB,CAAC;IAEF,OAAO,CAAC,CAAC,EAAG,IAAI;QACd,IAAG,IAAI,CAAC,MAAM,IAAI,CAAC,EAAC;YAClB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;SACf;aAAI;YACF,IAAI,CAAC,MAAM,GAAG,CAAC;YAChB,IAAI,CAAC,aAAa,GAAG,EAAC,EAAE,EAAC,IAAI,CAAC,EAAE,EAAE,SAAS,EAAC,IAAI,CAAC,SAAS,EAAE,KAAK,EAAC,IAAI,CAAC,KAAK,EAAE,OAAO,EAAC,IAAI,CAAC,OAAO,EAAG,OAAO,EAAC,IAAI,CAAC,OAAO,EAAE,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,SAAS,EAAC,IAAI,CAAC,SAAS,EAAC,WAAW,EAAC,IAAI,CAAC,WAAW,EAAC,SAAS,EAAC,IAAI,CAAC,SAAS,EAAC,SAAS,EAAC,IAAI,CAAC,SAAS,EAAC,YAAY,EAAC,IAAI,CAAC,YAAY,EAAC,OAAO,EAAC,IAAI,CAAC,OAAO,EAAG,QAAQ,EAAC,IAAI,CAAC,aAAa,EAAC,CAAC;SACxU;IACH,CAAC;IAED,MAAM,CAAC,CAAC;QACN,IAAI,CAAC,MAAM,GAAG,IAAI;QACnB,IAAI,CAAC,aAAa,GAAG,EAAC,EAAE,EAAE,IAAI,EAAE,SAAS,EAAC,EAAE,EAAE,KAAK,EAAC,EAAE,EAAE,OAAO,EAAC,EAAE,EAAG,OAAO,EAAC,CAAC,EAAE,KAAK,EAAC,EAAE,EAAC,SAAS,EAAC,CAAC,EAAC,WAAW,EAAC,CAAC,EAAC,SAAS,EAAC,EAAE,EAAC,SAAS,EAAC,EAAE,EAAC,YAAY,EAAC,EAAE,EAAC,OAAO,EAAC,EAAE,EAAE,QAAQ,EAAC,CAAC,EAAC,CAAC;IACtL,CAAC;IAGD,MAAM,CAAC,KAAK;QACT,IAAI,CAAC,yBAAyB,CAAC,yBAAyB,CAAC;QACzD,qEAAqE;QACrE,MAAM,UAAU,GAAG,kBAAK,KAAK,CAAC,CAAC,CAAC,CAAS,CAAC;QAC1C,IAAI,UAAU,IAAI,UAAU;YAAE,OAAO,UAAU,CAAC,QAAQ,CAAC;QACzD,IAAI,KAAK,IAAI,UAAU;YAAE,OAAO,UAAU,CAAC,GAAG,CAAC;QAC/C,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACjD,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBAC1C,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAG,SAAS,CAAC;gBACjD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,EAAG,SAAS,EAAE,QAAQ,CAAC;gBAE/C,IAAI,CAAC,wBAAwB,EAAE;aAEnC;iBAAI;gBACL,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;aACjF;QAEH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QACpF,CAAC,EAAC,GAAG,EAAE;YACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;QAClC,CAAC,CAAC;IACF,CAAC;IAKH,IAAI;QACF,wBAAwB;IAC1B,CAAC;IAEC,QAAQ,CAAC,CAAC,EAAG,IAAI;QACf,IAAI,CAAC,yBAAyB,CAAC,yBAAyB,CAAC;QAEzD,sBAAsB;QACtB,IAAG,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,IAAI,EAAE,EAAC;YAE9G,0BAA0B;YAC1B,0EAA0E;YAC1E,MAAM,QAAQ,GAAG,kBAAK,IAAI,CAAC,aAAa,CAAS,CAAC;YAClD,IAAI,UAAU,IAAI,QAAQ;gBAAE,OAAO,QAAQ,CAAC,QAAQ,CAAC;YACrD,IAAI,KAAK,IAAI,QAAQ;gBAAE,OAAO,QAAQ,CAAC,GAAG,CAAC;YAC3C,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;gBAC7C,mBAAmB;gBACnB,IAAI,GAAG,GAAG,IAAI;gBACd,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;oBACzC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;oBACvB,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;oBAChC,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAG,SAAS,CAAC;iBAClD;qBAAI;oBACH,IAAI,CAAC,YAAY,CAAC,uDAAuD,EAAG,QAAQ,CAAC;oBACrF,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;iBACjC;gBACD,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;gBACX,mBAAmB;gBACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;gBAClF,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;gBAChC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,CAAC,EACC,GAAE,EAAE;gBACJ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;YAClC,CAAC,CACE;SACF;aAAI;YACH,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,QAAQ,CAAC;YAC9C,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;SACjC;IACH,CAAC;IAEL,YAAY,CAAC,IAAI;QACf,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;QACjB,IAAI,EAAE,GAAG;YACP,SAAS,EAAC,IAAI,CAAC,EAAE;YACjB,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,QAAQ;YACtC,WAAW,EAAC,IAAI,CAAC,SAAS;YAC1B,aAAa,EAAC,IAAI,CAAC,WAAW;YAC9B,UAAU,EAAC,IAAI,CAAC,UAAU,CAAC,EAAE;SAC9B;QACD,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC/C,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBACzC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAChC;iBAAI;gBACL,IAAI,CAAC,YAAY,CAAC,+DAA+D,EAAG,QAAQ,CAAC;gBAC7F,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;aAC/B;YACF,kDAAkD;QACnD,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QACpF,CAAC,EAAC,GAAG,EAAE;YACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;QACjC,CAAC,CAAC;IACF,CAAC;IAED,SAAS,CAAC,CAAC,EAAG,IAAI;QAChB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAG;QACnB,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;IAC5E,CAAC;IAED,gBAAgB,CAAC,MAAM,EAAC,MAAO;QAC9B,6DAA6D;QAC5D,0CAA0C;QAC1C,IAAG,MAAM,IAAI,QAAQ,EAAC;YACpB,mCAAmC;YACnC,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;YACnE,IAAI,SAAS,KAAK,CAAC,CAAC,EAAE;gBACpB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;aACjC;YAED,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;YACzE,IAAI,YAAY,KAAK,CAAC,CAAC,EAAE;gBACvB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;aACvC;YAED,oCAAoC;YACpC,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;gBACzD,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;gBACjF,IAAI,cAAc,KAAK,CAAC,CAAC,EAAE;oBACzB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;iBAC/C;aACF;YAED,iCAAiC;YACjC,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjD,MAAM,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;gBAC1E,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;oBACtB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;iBACxC;aACF;YAED,kCAAkC;YAClC,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrD,MAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;gBAC9E,IAAI,aAAa,KAAK,CAAC,CAAC,EAAE;oBACxB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;iBAC5C;aACF;YAED,gCAAgC;YAChC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBACnD,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;gBAC3E,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;oBACtB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;iBACzC;aACF;YAED,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC5D,kBAAkB;YACpB,CAAC,CAAC,CAAC;SAEJ;aAAK;YAEP,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,SAAS,CACnC,CAAC,IAAI,EAAE,EAAE;gBACP,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAC,IAAI,CAAC;gBAC5C,IAAI,IAAI,EAAE;oBACP,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,WAAW,CAAC;oBAC5C,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;oBAEtC,4CAA4C;oBAC5C,qBAAqB;oBACrB,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;oBACnE,IAAI,SAAS,KAAK,CAAC,CAAC,EAAE;wBACpB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,mCAAQ,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAK,WAAW,CAAE,CAAC;qBACtE;oBAED,wBAAwB;oBACxB,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;oBACzE,IAAI,YAAY,KAAK,CAAC,CAAC,EAAE;wBACvB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,mCAAQ,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAK,WAAW,CAAE,CAAC;qBAClF;oBAED,oCAAoC;oBACpC,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;wBACzD,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;wBACjF,IAAI,cAAc,KAAK,CAAC,CAAC,EAAE;4BACzB,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,mCAAQ,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,GAAK,WAAW,CAAE,CAAC;yBAClG;qBACF;oBAED,iCAAiC;oBACjC,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBACjD,MAAM,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;wBAC1E,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;4BACtB,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,mCAAQ,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,GAAK,WAAW,CAAE,CAAC;yBACpF;qBACF;oBAED,kCAAkC;oBAClC,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;wBACrD,MAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;wBAC9E,IAAI,aAAa,KAAK,CAAC,CAAC,EAAE;4BACxB,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,mCAAQ,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,GAAK,WAAW,CAAE,CAAC;yBAC5F;qBACF;oBAED,gCAAgC;oBAChC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;wBACnD,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;wBAC3E,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;4BACtB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,mCAAQ,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,GAAK,WAAW,CAAE,CAAC;yBACtF;qBACF;oBAED,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACxC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAG,WAAW,CAAC;oBACvC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;wBAC/D,2BAA2B;oBAC7B,CAAC,CAAC,CAAC;oBACJ,2DAA2D;iBAC3D;qBAAM;oBACL,oEAAoE;iBACrE;YACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;gBACN,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACnB,8DAA8D;YAChE,CAAC,EACD,GAAG,EAAE;gBACH,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;YACnC,CAAC,CACF,CAAC;SACD;IAEH,CAAC;IAMG,eAAe,CAAC,IAAI;QAClB,IAAI,IAAI,CAAC,IAAI,IAAI,MAAM,EAAG;YACxB,gCAAgC;YAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;SACxB;aAAM,IAAG,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE;YAC7B,qBAAqB;YACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAE;SACtB;aAAK,IAAG,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE;YAC5B,sBAAsB;YACrB,IAAI,CAAC,MAAM,EAAE;SACf;aAAK,IAAG,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM,EAAE;YAC3D,sBAAsB;YACtB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC;SAC7B;aAAK,IAAG,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,EAAE;YAC5D,sBAAsB;YACtB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;SAC9B;aAAM,IAAG,IAAI,CAAC,IAAI,IAAI,UAAU,EAAG;YAClC,sCAAsC;YACtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;YAChC,mCAAmC;SACjC;aACI,IAAG,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAG;YAC9B,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,QAAQ,EAAC;gBAC1B,oCAAoC;gBACpC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC3B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,YAAY,GAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAE,CAAC,GAAG,EAAE,GAAG,EAAC,EAAE,GAAG,OAAO,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aAClH;iBAAK,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,OAAO,EAAC;gBAC/B,IAAI,CAAC,YAAY,EAAE;aACpB;SACF;IACH,CAAC;IAEC,QAAQ;QACX,yBAAyB;IACtB,CAAC;IAEH,uBAAuB;QACvB,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7D,wBAAwB;YACxB,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACxF,IAAI,CAAC,eAAe,GAAG,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBAChD,KAAK,EAAE,KAAK;gBACZ,QAAQ,EAAE,KAAK;aAChB,CAAC,CAAC,CAAC;YAEJ,wBAAwB;YACxB,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACxF,IAAI,CAAC,eAAe,GAAG,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBAChD,KAAK,EAAE,KAAK;gBACZ,QAAQ,EAAE,KAAK;aAChB,CAAC,CAAC,CAAC;SACL;IACH,CAAC;IAGD,uBAAuB;IACvB,sBAAsB,CAAC,KAAU;QAC/B,IAAI,KAAK,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBAChE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACzD;SACF;aAAM;YACL,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACzE,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;gBACd,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACxD;SACF;QACD,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAED,oBAAoB,CAAC,KAAU;QAC7B,KAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC;QACjC,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;QACnF,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;QAC9D,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,GAAG,EAAE,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,uBAAuB;IACvB,sBAAsB,CAAC,KAAU;QAC/B,IAAI,KAAK,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBAChE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACzD;SACF;aAAM;YACL,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACzE,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;gBACd,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACxD;SACF;QACD,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAED,oBAAoB,CAAC,KAAU;QAC7B,KAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC;QACjC,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;QACnF,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;QAC9D,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,GAAG,EAAE,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,0BAA0B;IAC1B,0BAA0B,CAAC,KAAU;QACnC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;IAC5D,CAAC;IAED,oBAAoB,CAAC,IAAY;QAC/B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;QAC5C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC1C,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC1C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;QAC5C,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;QAC5C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,wDAAwD;IACxD,eAAe;QACb,kCAAkC;QAClC,MAAM,gBAAgB,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ;YACjC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ;YAC/B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAE1D,IAAI,gBAAgB,EAAE;YACpB,wBAAwB;YACxB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;SACxB;aAAM;YACL,wCAAwC;YACxC,IAAI,IAAI,CAAC,gBAAgB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE;gBACjE,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC;aAC/C;iBAAM;gBACL,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;aACvB;YACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;SACzB;IACH,CAAC;IAED,oBAAoB;IACpB,eAAe;QACb,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,sBAAsB;IACtB,iBAAiB;QACf,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;QACnF,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;IACrF,CAAC;IAED,gCAAgC;IAChC,gBAAgB;QACd,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ;YAC/B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ;YAC/B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;IAC5C,CAAC;IAGG,eAAe;IAEf,CAAC;IAEH,eAAe;IAEf,CAAC;IAED,UAAU;QACR,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC/C,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,SAAS,GAAG,QAAQ;aAE1B;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC1C,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,IAAI,GAAG,QAAQ;aAErB;QACH,CAAC,CAAC,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YAChD,IAAI,CAAC,OAAO,GAAG,IAAI;YAClB,IAAI,QAAQ,EAAE;gBACX,IAAI,CAAC,UAAU,GAAG,QAAQ;gBAC1B,uBAAuB;gBACvB,+BAA+B;gBAChC,0DAA0D;gBAC3D,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAC9B,IAAI,CAAC,uBAAuB,EAAE,CAAC;gBAC/B,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,2BAA2B;gBAEnD,mCAAmC;gBACnC,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC7B,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC7B;QACH,CAAC,CAAC,CAAC;QAGJ,uDAAuD;QACvD,oBAAoB;QACpB,+BAA+B;QAC/B,0CAA0C;QAC1C,MAAM;QACN,MAAM;QAEJ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YAChD,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;gBAC3B,iCAAiC;aAClC;QACD,CAAC,CAAC,CAAC;IACL,CAAC;IAEI,yBAAyB,CAAC,GAAI;;YAClC,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBAClD,OAAO,EAAE,SAAS;gBAClB,IAAI,EAAC,KAAK;gBACV,QAAQ,EAAE,IAAI;gBACd,OAAO,EAAE,GAAG;gBACZ,WAAW,EAAE,IAAI;gBAClB,2CAA2C;gBAC1C,eAAe,EAAE,KAAK;aACvB,CAAC,CAAC;YACH,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;YACxB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM,OAAO,CAAC,YAAY,EAAE,CAAC;YACpD,oDAAoD;QACtD,CAAC;KAAA;IAID,SAAS;QACP,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,IAAI,QAAQ,GAAQ,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QAC1D,IAAI,OAAO,GAAG;YACZ,UAAU,EAAE,OAAO;YACnB,MAAM,EAAE,QAAQ,CAAC,WAAW;YAC5B,KAAK,EAAE,QAAQ,CAAC,YAAY;SAC7B,CAAC;QACF,yDACQ,CAAC,QAAQ,EAAE,OAAO,CAAC;aACxB,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YAChB,IAAI,GAAG,GAAG,IAAI,6CAAK,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACrC,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAC/C,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAEtB,6BAA6B;YAC7B,+CAA+C;YAC/C,sCAAsC;YACtC,4CAA4C;YAC5C,qCAAqC;YACrC,IAAI;YACJ,6CAA6C;YAC7C,oCAAoC;YACpC,iCAAiC;YACjC,mBAAmB;YACnB,KAAK;YACL,YAAY;YACZ,oCAAoC;YACpC,qBAAqB;YACrB,gBAAgB;YAChB,yDAAyD;YACzD,yBAAyB;YACzB,iEAAiE;YACjE,0BAA0B;YAC1B,yEAAyE;YACzE,2DAA2D;YAC3D,6CAA6C;YAC7C,WAAW;YACX,4BAA4B;YAC5B,gDAAgD;YAChD,YAAY;YACZ,OAAO;YACP,wBAAwB;YACxB,gBAAgB;YAChB,gDAAgD;YAChD,yBAAyB;YACzB,iEAAiE;YACjE,0BAA0B;YAC1B,yEAAyE;YACzE,wDAAwD;YACxD,6CAA6C;YAC7C,WAAW;YACX,4BAA4B;YAC5B,gDAAgD;YAChD,YAAY;YACZ,QAAQ;QACV,CAAC,CAAC;aACD,KAAK,CAAC,UAAU,KAAK;YACpB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAGA,OAAO;QACN,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,IAAI,IAAI,GAAQ,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACtD,yBAAyB;QACzB,kDAAW,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YAChC,IAAI,SAAS,GAAG,GAAG,CAAC;YACpB,IAAI,UAAU,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,SAAS,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;YAC5D,MAAM,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YAC9C,IAAI,GAAG,GAAG,IAAI,6CAAK,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACrC,IAAI,QAAQ,GAAG,CAAC,CAAC;YACjB,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;YACjE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACtB,IAAI,CAAC,UAAU,GAAG,KAAK;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IAGG,WAAW;QAET,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,kCAAkC;QAClC,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACpD,MAAM,EAAE,GAAkB,uDAAyB,CAAC,OAAO,CAAC,CAAC;QAE7D,6CAA6C;QAC7C,MAAM,EAAE,GAAkB,iDAAmB,EAAE,CAAC;QAChD,0DAA4B,CAAC,EAAE,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC;QAE/C,kBAAkB;QAClB,4CAAc,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,KAAK;IACzB,CAAC;IAGP,aAAa;QACP,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,IAAI;QACnB,MAAM,UAAU,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QAClE,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACtD,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,UAAU,EAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC9D,OAAO,CAAC,GAAG,CAAC,cAAc,EAAC,IAAI,CAAC;YAChC,IAAI,GAAG,GAAG,IAAI;YACd,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC;YACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;YAC7C,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,KAAK;YACpC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;YACpE,IAAI,CAAC,cAAc,EAAE;YACvB,qBAAqB;YACrB,8GAA8G;YAC7G,IAAG,IAAI,CAAC,UAAU,EAAC;aAElB;iBAAI;gBACJ,IAAI,CAAC,aAAa,EAAE;aACpB;QACE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACX,mBAAmB;QACrB,CAAC,EACC,GAAE,EAAE;YACJ,IAAI,CAAC,OAAO,GAAG,KAAK;QACtB,CAAC,CACF;QAGD,mGAAmG;QACnG,yCAAyC;QACzC,uBAAuB;QACvB,kCAAkC;QAClC,oEAAoE;QAEpE,aAAa;QAEb,0BAA0B;QAC1B,wBAAwB;QACxB,sBAAsB;QACtB,+GAA+G;QAC/G,wBAAwB;QAExB,UAAU;QACV,yBAAyB;QACzB,KAAK;QACL,oBAAoB;QACpB,0BAA0B;QAC1B,QAAQ;QACR,YAAY;QACZ,2BAA2B;QAC3B,MAAM;QACN,SAAS;IAEP,CAAC;IAIP,kBAAkB;IAClB,QAAQ;QACN,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,EAAE;YACtC,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAChC;IACH,CAAC;IAED,sBAAsB;IACtB,QAAQ;QACN,IAAI,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAChC;IACH,CAAC;IAED,sBAAsB;IACtB,QAAQ,CAAC,IAAY;QACnB,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;YACxC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAChC;IACH,CAAC;IAED,wBAAwB;IACxB,kBAAkB,CAAC,KAAK;QACtB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,sBAAsB;QAC5C,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAClC,CAAC;IAED,2CAA2C;IAC3C,cAAc;QACZ,MAAM,WAAW,GAAG,EAAE,CAAC;QACvB,MAAM,cAAc,GAAG,CAAC,CAAC;QAEzB,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/E,IAAI,OAAO,GAAG,SAAS,GAAG,cAAc,GAAG,CAAC,CAAC;QAE7C,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE;YAC7B,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC;YAC1B,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,GAAG,cAAc,GAAG,CAAC,CAAC,CAAC;SACvD;QAED,KAAK,IAAI,CAAC,GAAG,SAAS,EAAE,CAAC,IAAI,OAAO,EAAE,CAAC,EAAE,EAAE;YACzC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACrB;QAED,OAAO,WAAW,CAAC;IACrB,CAAC;IAGD,OAAO;QACL,IAAI,CAAC,wBAAwB,EAAE;IACjC,CAAC;IAED,yCAAyC;IACzC,qBAAqB;QACnB,iCAAiC;QAEjC,qBAAqB;QACrB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,oBAAoB;QACpB,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,qBAAqB;QACrB,IAAI,CAAC,WAAW,GAAG;YACjB,KAAK,EAAE;gBACL,QAAQ,EAAE,KAAK;gBACf,SAAS,EAAE,KAAK;gBAChB,cAAc,EAAE,EAAE;aACnB;YACD,KAAK,EAAE;gBACL,QAAQ,EAAE,KAAK;gBACf,SAAS,EAAE,KAAK;gBAChB,cAAc,EAAE,EAAE;aACnB;YACD,QAAQ,EAAE;gBACR,QAAQ,EAAE,KAAK;gBACf,SAAS,EAAE,KAAK;gBAChB,WAAW,EAAE,CAAC;gBACd,WAAW,EAAE,CAAC;gBACd,UAAU,EAAE,OAAO;aACpB;SACF,CAAC;QAEF,0BAA0B;QAC1B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAElC,uBAAuB;QACvB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAE5B,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,eAAe;QACf,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAEtB,uBAAuB;QACvB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,mBAAmB,GAAG,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QAEzE,oBAAoB;QACpB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,iBAAiB,GAAG,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QACvE,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAE5B,gEAAgE;QAChE,IAAI,CAAC,kCAAkC,EAAE,CAAC;QAE1C,uBAAuB;QACvB,IAAI,CAAC,YAAY,CAAC,+BAA+B,EAAE,SAAS,CAAC,CAAC;IAChE,CAAC;IAIE,gBAAgB;QACT,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC;QAC/B,IAAI,CAAC,QAAQ,GAAG,EAAE;QAClB,IAAI,CAAC,UAAU,GAAG,IAAI;QAEtB,uDAAuD;QAEvD,IAAI,CAAC,GAAG,CAAC,8BAA8B,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC3F,OAAO,CAAC,GAAG,CAAC,cAAc,EAAC,IAAI,CAAC;YAChC,IAAI,GAAG,GAAG,IAAI;YACd,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC;YACvB,IAAI,CAAC,QAAQ,GAAG,KAAK;YAEnB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC9B,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;oBAC9C,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;iBAClG;qBAAM,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;oBACrD,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC;iBACxF;gBACD,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa;gBAC3F,OAAO,CAAC,kBAAkB,GAAG,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,SAAS;gBACnE,OAAO,CAAC,oBAAoB,GAAG,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,WAAW;YACzE,CAAC,CAAC,CAAE;YAEJ,yFAAyF;YAExF,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC;YAEtC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAG,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YAEzD,CAAC,CAAC,CAAC;YACV,IAAI,CAAC,UAAU,GAAG,IAAI;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ;YAC3B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ;YAChC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ;YACpC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ;YAEtC,4BAA4B;YAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBACzD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAC9G,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;aACnG;YACF,uBAAuB;YAErB,IAAI,CAAC,uBAAuB,EAAE;YACnC,+GAA+G;YAC7G,IAAG,IAAI,CAAC,UAAU,EAAC;aAElB;iBAAI;gBACJ,IAAI,CAAC,aAAa,EAAE;aACpB;QACE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACX,mBAAmB;YACnB,IAAI,CAAC,UAAU,GAAG,KAAK;QACzB,CAAC,EACC,GAAE,EAAE;YACJ,IAAI,CAAC,UAAU,GAAG,KAAK;QACzB,CAAC,CACE;IACN,CAAC;IAED,mBAAmB,CAAC,IAAI;QAGb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAE,CAAC,GAAG,EAAE,GAAG,EAAC,EAAE,GAAG,OAAO,GAAG,GAAG,CAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAErG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAE,CAAC,GAAG,EAAE,GAAG,EAAC,EAAE,GAAG,OAAO,GAAG,GAAG,CAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAEjH,CAAC;IAMJ,aAAa,CAAC,IAAK;QACb,IAAG,IAAI,EAAC;YACN,IAAI,CAAC,UAAU,GAAG,IAAI;YACtB,oCAAoC;YACpC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YAElE,CAAC,CAAC,CAAC;SACJ;IACL,CAAC;IAEA,cAAc;QACX,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;QAC7C,uBAAuB;QACvB,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAC,KAAK,EAAC,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QAC5F,uBAAuB;QACxB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACrD,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,OAAO,CAAC,KAAK,IAAG,EAAE,EAAE;gBACtB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;oBACpB,OAAO,EAAC,OAAO,CAAC,KAAK;oBACrB,UAAU,EAAE,KAAK;iBACjB,CAAC;gBACF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;oBACzB,OAAO,EAAC,OAAO,CAAC,KAAK;oBACrB,UAAU,EAAE,KAAK;iBACjB,CAAC;aACF;SACD;QACD,6BAA6B;QAG5B,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;QACzC,mBAAmB;QACnB,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAC,KAAK,EAAC,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QACzF,wBAAwB;QACxB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACrD,MAAM,OAAO,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;YACjC,IAAI,OAAO,CAAC,KAAK,IAAG,EAAE,EAAE;gBACxB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;oBAClB,OAAO,EAAC,OAAO,CAAC,KAAK;oBACrB,UAAU,EAAE,KAAK;iBAClB,CAAC;gBAEF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;oBACxB,OAAO,EAAC,OAAO,CAAC,KAAK;oBACrB,UAAU,EAAE,KAAK;iBAClB,CAAC;aACH;SACC;QACH,8BAA8B;QAC9B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,KAAK;QAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,gBAAgB;QACxC,wDAAwD;IAE1D,CAAC;IAIF,+BAA+B;IAC/B,QAAQ,CAAC,MAAc;QACrB,wBAAwB;QACxB,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,MAAM,EAAE;YACtC,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC;SACpF;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,MAAM,CAAC;YACjC,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;SACpC;QAED,gCAAgC;QAChC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;IAC/D,CAAC;IAEO,mBAAmB,CAAC,MAAc,EAAE,SAAyB;QACnE,mDAAmD;QACnD,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACvC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;SACjE;QAED,wBAAwB;QACxB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YACzD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;SACnF;QAED,sBAAsB;QACtB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;YACrD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;SAC/E;QAED,sBAAsB;QACtB,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACjD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;SAC3E;QAED,sBAAsB;QACtB,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;SAC7E;IACH,CAAC;IAEO,SAAS,CAAC,KAAY,EAAE,MAAc,EAAE,SAAyB;QACvE,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACzB,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;YAC1C,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;YAE1C,+BAA+B;YAC/B,IAAI,MAAM,IAAI,IAAI;gBAAE,MAAM,GAAG,EAAE,CAAC;YAChC,IAAI,MAAM,IAAI,IAAI;gBAAE,MAAM,GAAG,EAAE,CAAC;YAEhC,yBAAyB;YACzB,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE;gBAChC,MAAM,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC;gBACtB,MAAM,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC;aACvB;iBAAM;gBACL,oBAAoB;gBACpB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;gBACtC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;aACvC;YAED,IAAI,MAAM,GAAG,MAAM,EAAE;gBACnB,OAAO,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACrC;YACD,IAAI,MAAM,GAAG,MAAM,EAAE;gBACnB,OAAO,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACrC;YACD,OAAO,CAAC,CAAC;QACX,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,YAAY,CAAC,IAAS,EAAE,MAAc;QAC5C,QAAQ,MAAM,EAAE;YACd,KAAK,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,EAAE,CAAC;YAC1B,KAAK,WAAW,CAAC,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC;YACxC,KAAK,WAAW,CAAC,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC;YACxC,KAAK,SAAS,CAAC,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC;YACpC,KAAK,eAAe,CAAC,CAAC,OAAO,IAAI,CAAC,aAAa,CAAC;YAChD,KAAK,OAAO,CAAC,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC;YAChC,KAAK,SAAS,CAAC,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC;YACpC,KAAK,OAAO,CAAC,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC;YAChC,KAAK,SAAS,CAAC,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC;YACpC,KAAK,WAAW,CAAC,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC;YACxC,KAAK,aAAa,CAAC,CAAC,OAAO,IAAI,CAAC,WAAW,CAAC;YAC5C,KAAK,WAAW,CAAC,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC;YACxC,KAAK,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC;YAC7F,KAAK,UAAU,CAAC,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC;YACtC,KAAK,OAAO,CAAC,CAAC,OAAO,IAAI,CAAC,kBAAkB,CAAC;YAC7C,KAAK,UAAU,CAAC,CAAC,OAAO,IAAI,CAAC,YAAY,CAAC;YAC1C,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;SACpB;IACH,CAAC;IAEO,eAAe,CAAC,MAAc;QACpC,MAAM,cAAc,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,aAAa,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;QACpG,OAAO,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IACzC,CAAC;IAED,WAAW,CAAC,MAAc;QACxB,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,MAAM,EAAE;YACtC,OAAO,uBAAuB,CAAC;SAChC;QACD,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,sBAAsB,CAAC;IAC9F,CAAC;IAGD,WAAW,CAAC,IAAI;QACd,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC;QACxB,sDAAsD;QACtD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAC/B,IAAI,OAAO,CAAC,QAAQ,IAAG,IAAI,EAAC;gBAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI;aACrB;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAC/B,IAAI,OAAO,CAAC,QAAQ,IAAG,IAAI,EAAC;gBAC1B,IAAI,CAAC,SAAS,GAAG,IAAI;aACtB;QACH,CAAC,CAAC,CAAC;IACJ,CAAC;IAEF,SAAS;QACP,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK;QAC7B,IAAI,GAAG,GAAe,EAAE;QACxB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC1D,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtC,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI,EAAE;gBAC5B,IAAI,MAAM,GAAa,EAAE;gBACzB,MAAM,GAAK,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,GAAE,CAAC,CAAC,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC;gBAChE,IAAG,MAAM,CAAC,MAAM,GAAC,CAAC,EAAC;oBACjB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;wBACvB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;oBACnB,CAAC,CAAC,CAAC;iBACJ;aAEF;SACF;QAGD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC1D,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtC,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI,EAAE;gBAC5B,IAAI,MAAM,GAAa,EAAE;gBACzB,MAAM,GAAK,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,GAAE,CAAC,CAAC,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC;gBAChE,IAAG,MAAM,CAAC,MAAM,GAAC,CAAC,EAAC;oBACjB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;wBACvB,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;oBACnB,CAAC,CAAC,CAAC;iBACJ;aACF;SACF;QACD,IAAI,CAAC,WAAW,GAAG,GAAG;QAEtB,4BAA4B;QAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;YACzD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SAC/G;QAED,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,MAAM,CAAE,CAAC,GAAG,EAAE,GAAG,EAAC,EAAE,GAAG,OAAO,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACvG,gDAAgD;IAClD,CAAC;IAEA,YAAY,CAAC,IAAK;QAClB,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC;QACpC,IAAI,IAAI,IAAG,OAAO,EAAE;YACnB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC/B,OAAO,CAAC,QAAQ,GAAG,KAAK;YAC1B,CAAC,CAAC,CAAC;YACF,IAAI,CAAC,SAAS,EAAE;SACjB;aAAK,IAAG,IAAI,IAAG,OAAO,EAAC;YACvB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC/B,OAAO,CAAC,QAAQ,GAAG,KAAK;YAC1B,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,EAAE;SAChB;aAAI;YACJ,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC/B,OAAO,CAAC,QAAQ,GAAG,KAAK;YAC1B,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC/B,OAAO,CAAC,QAAQ,GAAG,KAAK;YAC1B,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,EAAE;SAChB;QAGD,IAAI,EAAE,GAAG,CAAC;QACV,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC3D,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtC,IAAI,OAAO,CAAC,QAAQ,IAAG,IAAI,EAAC;gBAC3B,EAAE,GAAG,EAAE,GAAC,CAAC;aACT;SACD;QACD,IAAI,EAAE,GAAC,CAAC,EAAE;YACT,IAAI,CAAC,SAAS,GAAG,IAAI;SACrB;aAAI;YACJ,IAAI,CAAC,SAAS,GAAG,KAAK;SACtB;QAED,IAAI,GAAG,GAAG,CAAC;QACX,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC3D,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtC,IAAI,OAAO,CAAC,QAAQ,IAAG,IAAI,EAAC;gBAC3B,GAAG,GAAG,GAAG,GAAC,CAAC;aACX;SACD;QACD,IAAI,GAAG,GAAC,CAAC,EAAE;YACV,IAAI,CAAC,QAAQ,GAAG,IAAI;SACpB;aAAI;YACJ,IAAI,CAAC,QAAQ,GAAG,KAAK;SACrB;QAED,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,EAAC;YACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK;YAC7B,IAAI,CAAC,UAAU,GAAG,KAAK;SACvB;QAED,4BAA4B;QAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;YACzD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SAC/G;QAED,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,CAAC,GAAG,EAAE,GAAG,EAAC,EAAE,GAAG,OAAO,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpH,gDAAgD;QAElD,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;IAChC,CAAC;IAED,WAAW,CAAC,UAAU;QACpB,2BAA2B;QAC3B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;QAChH,gCAAgC;IACjC,CAAC;IAEF,SAAS,CAAC,MAAM;QACf,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YAC9B,IAAI,CAAC,UAAU,GAAG,IAAI;YACtB,OAAO,CAAC,GAAG,CAAC,MAAM,EAAG,IAAI,CAAC,QAAQ,CAAC;SACpC;aAAK;YACJ,IAAI,CAAC,UAAU,GAAG,KAAK;SAExB;IACF,CAAC;IAEF,iBAAiB;IACjB,4BAA4B;IAC5B,6BAA6B;IAC7B,6BAA6B;IAC7B,KAAK;IAEP,kBAAkB;IAClB,mCAAmC;IACnC,8BAA8B;IAC9B,4BAA4B;IAC5B,KAAK;IAED,YAAY;QACV,yCAAyC;QACzC,IAAI,CAAC,UAAU,GAAG,KAAK;QACvB,IAAI,CAAC,WAAW,GAAG,EAAE;IACvB,CAAC;IAEI,YAAY,CAAC,GAAG,EAAC,KAAM;;YAC5B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,OAAO,EAAE,GAAG;gBACZ,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAC,KAAK;gBACX,QAAQ,EAAC,YAAY;gBACrB,IAAI,EAAC,KAAK;gBACV,QAAQ,EAAC,KAAK;aACf,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;KAAA;IAED,IAAI,CAAC,KAAK;QACN,IAAI,CAAC,yBAAyB,CAAC,uBAAuB,CAAC;QACvD,mEAAmE;QACnE,MAAM,QAAQ,GAAG,kBAAK,KAAK,CAAC,CAAC,CAAC,CAAS,CAAC;QACxC,IAAI,UAAU,IAAI,QAAQ;YAAE,OAAO,QAAQ,CAAC,QAAQ,CAAC;QACrD,IAAI,KAAK,IAAI,QAAQ;YAAE,OAAO,QAAQ,CAAC,GAAG,CAAC;QAC3C,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC5C,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBACzC,IAAI,CAAC,MAAM,GAAG,EAAC,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC,IAAI,CAAC,SAAS,CAAC,EAAG,QAAQ,EAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAG,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,SAAS,EAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,EAAC,WAAW,EAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,OAAO,EAAC,MAAM,EAAC;gBAC3L,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aAC7B;iBAAI;gBACH,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;aACnF;QAEH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QACpF,CAAC,CAAC;IACL,CAAC;IAEI,aAAa,CAAC,QAAQ;;YAC1B,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,IAAI,GAAE;gBACjD,qBAAqB;gBACrB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;oBACzC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;iBACjC;gBACD,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAG,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC;gBACrD,IAAI,CAAC,YAAY,CAAC,UAAU,EAAC,SAAS,CAAC;YAEzC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;gBACT,mBAAmB;gBACnB,IAAI,CAAC,YAAY,CAAC,qDAAqD,EAAG,QAAQ,CAAC;gBAEnF,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;YAElC,CAAC,EAAE,GAAG,EAAE;gBACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;YAClC,CAAC,CACA;QACH,CAAC;KAAA;IAED,cAAc,CAAC,IAAI;QACjB,IAAI,EAAE,GAAG,IAAI,IAAI;QACjB,iBAAiB;QACjB,IAAI,aAAa,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,GAAE,EAAE,CAAC,UAAU,EAAE,CAAC,QAAQ,EAAE,GAAC,EAAE,CAAC,UAAU,EAAE,CAAC,QAAQ,EAAE,GAAC,EAAE,CAAC,eAAe,EAAE,CAAC,QAAQ,EAAE,GAAG,IAAI;QAC9L,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,aAAa;IAClD,CAAC;IAEC,iBAAiB,CAAC,QAAQ,EAAG,MAAM,EAAG,IAAI;QACzC,IAAI,CAAC,aAAa,GAAG,EAAE;QACxB,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE;QACnB,IAAI,KAAK,GAAG,EAAE;QACZ,IAAG,IAAI,IAAI,QAAQ,EAAC;YAClB,KAAK,GAAG,eAAe;YACrB,QAAQ,CAAC,EAAE,GAAG,MAAM,CAAC,OAAO;YAC9B,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB;gBACE,IAAI,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBACnB,QAAQ,EAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;gBACnC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC3B,OAAO,EAAC,KAAK;gBACb,OAAO,EAAE,mCAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC;gBACjE,WAAW,EAAC,CAAC;gBACb,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAClC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;gBACtB,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,EAAE;aAC/B,CACA;YAED,KAAK,GAAG,aAAa;YACrB,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB;gBACE,IAAI,EAAC,IAAI;gBACT,QAAQ,EAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;gBACnC,QAAQ,EAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC1B,OAAO,EAAC,KAAK;gBACb,OAAO,EAAE,mCAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC;gBACjE,WAAW,EAAC,CAAC;gBACb,UAAU,EAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;gBACnC,QAAQ,EAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACrB,UAAU,EAAC,IAAI,CAAC,UAAU,CAAC,EAAE;aAC9B,CACA;SACN;aAAM;YACN,0BAA0B;YACzB,iCAAiC;YACjC,2BAA2B;YAC3B,MAAM;YACN,2BAA2B;YAC3B,sCAAsC;YACtC,mCAAmC;YACnC,qBAAqB;YACrB,yEAAyE;YACzE,qBAAqB;YACrB,4CAA4C;YAC5C,8BAA8B;YAC9B,qCAAqC;YACrC,MAAM;YACN,MAAM;YACN,IAAG,IAAI,IAAI,QAAQ,EAAE;gBACnB,KAAK,GAAG,aAAa;aACtB;iBAAK,IAAG,IAAI,IAAI,QAAQ,EAAE;gBACzB,KAAK,GAAG,aAAa;aACtB;YACC,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB;gBACE,IAAI,EAAC,IAAI;gBACT,QAAQ,EAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;gBACnC,QAAQ,EAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC1B,OAAO,EAAC,KAAK;gBACb,OAAO,EAAE,mCAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC;gBACjE,WAAW,EAAC,CAAC;gBACb,UAAU,EAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;gBACnC,QAAQ,EAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACrB,UAAU,EAAC,IAAI,CAAC,UAAU,CAAC,EAAE;aAC9B,CACA;SACF;QACH,OAAO,IAAI,CAAC,aAAa;IAC1B,CAAC;IAEL,cAAc,CAAC,QAAQ,EAAG,MAAM,EAAG,IAAI;QACtC,IAAI,KAAK,GAAI,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAG,MAAM,EAAG,IAAI,CAAC;QAC7D,4BAA4B;QAC5B,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACtE,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBACzC,IAAI,CAAC,wBAAwB,EAAE;gBAC/B,IAAI,CAAC,aAAa,GAAE,EAAE;aACvB;iBAAI;gBACH,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;aACnF;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QACpF,CAAC,CAAC;IACF,CAAC;IAGI,aAAa;;YACjB,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,IAAI,GAAE;gBACtD,qBAAqB;gBACtB,iDAAiD;gBAChD,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAG,SAAS,CAAC;YACjD,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;gBACT,mBAAmB;gBACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;YACpF,CAAC,EAAE,GAAG,EAAE;gBACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;YAClC,CAAC,CACA;QACH,CAAC;KAAA;IAMH,YAAY,CAAC,IAAI;QACf,IAAI,CAAC,yBAAyB,CAAC,wBAAwB,CAAC;QACzD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACjE,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBAC1C,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAG,SAAS,CAAC;gBACjD,gDAAgD;aAChD;iBAAI;gBACL,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;aAEjF;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QACpF,CAAC,EAAC,GAAG,EAAE;YACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;QAClC,CAAC,CAAC;IACF,CAAC;IAEC,aAAa,CAAC,IAAI;QAClB,IAAI,CAAC,yBAAyB,CAAC,wBAAwB,CAAC;QACxD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACjE,mBAAmB;YACnB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,kBAAkB,EAAE;gBACzC,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAG,SAAS,CAAC;gBACjD,IAAI,CAAC,wBAAwB,EAAE;aAChC;iBAAI;gBACL,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;aAEjF;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,mBAAmB;YACnB,IAAI,CAAC,YAAY,CAAC,oDAAoD,EAAG,QAAQ,CAAC;QACpF,CAAC,EAAC,GAAG,EAAE;YACL,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;QAClC,CAAC,CAAC;IACF,CAAC;IAKD,eAAe;QACb,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAC9B,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,kBAAkB,CAAC;YAC7C,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,oBAAoB,CAAC;QAChD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qBAAqB;IACrB,uBAAuB;QACrB,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC;QACtC,IAAI,IAAI,CAAC,iBAAiB;YAAE,OAAO;QACnC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,OAAO,CAAC,GAAG,CAAC,8CAA8C,CAAC,CAAC;QAE5D,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAClC,IAAI,CAAC,UAAU,CAAC,EAAE,EAClB,IAAI,CAAC,qBAAqB,EAC1B,IAAI,CAAC,kBAAkB,CACxB,CAAC,SAAS,CACT,IAAI,CAAC,EAAE;;YACL,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAAC,CAAC;YAC/C,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrB,IAAI,IAAI,CAAC,qBAAqB,KAAK,CAAC,EAAE;oBACpC,sCAAsC;oBACtC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC;iBACjC;qBAAM;oBACL,8CAA8C;oBAC9C,IAAI,CAAC,cAAc,GAAG,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC9D;gBAED,8EAA8E;gBAC9E,IAAI,IAAI,CAAC,qBAAqB,KAAK,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;oBAC7F,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;iBACrH;gBAED,yBAAyB;gBACzB,IAAI,CAAC,iBAAiB,GAAG,WAAI,CAAC,UAAU,0CAAE,OAAO,KAAI,KAAK,CAAC;gBAE3D,kCAAkC;gBAClC,IAAI,IAAI,CAAC,MAAM,EAAE;oBACf,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,MAAM,CAAC;iBAC1C;aACF;YAED,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC,EACD,KAAK,CAAC,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;YACvD,IAAI,CAAC,YAAY,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC;YACrD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC,CACF,CAAC;IACJ,CAAC;IAED,aAAa;QACX,IAAI,IAAI,CAAC,iBAAiB,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACrD,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAChC;IACH,CAAC;IAED,wBAAwB;QACtB,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;QAC/B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,gFAAgF;IAClF,CAAC;IAED,4DAA4D;IAC5D,kCAAkC;QAChC,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;QAC/B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,oCAAoC;IAC9D,CAAC;IAED,wBAAwB,CAAC,KAAU;QACjC,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC;QAC5C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACtC,CAAC;IAED,mBAAmB,CAAC,UAAkB,EAAE,WAAgB;QACtD,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,GAAG,WAAW,CAAC;QACjD,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAClC,CAAC;IAED,sBAAsB;QACpB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAClC,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,iBAAiB,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;QAEjD,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,2BAA2B;YAC3B,IAAI,CAAC,wBAAwB,EAAE,CAAC;SACjC;aAAM;YACL,8BAA8B;YAC9B,IAAI,CAAC,wBAAwB,EAAE,CAAC;SACjC;IACH,CAAC;IAED,+BAA+B;IAC/B,eAAe;QACb,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;QACvC,IAAI,IAAI,CAAC,kBAAkB;YAAE,OAAO;QAEpC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAE/B,IAAI,CAAC,GAAG,CAAC,cAAc,CACrB,IAAI,CAAC,UAAU,CAAC,EAAE,EAClB,IAAI,CAAC,IAAI,CAAC,EAAE,CACb,CAAC,SAAS,CACT,IAAI,CAAC,EAAE;YACL,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;YAC5C,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrB,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBACxE,IAAI,CAAC,oBAAoB,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;aAC7E;iBAAM;gBACL,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;gBAC5B,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;aAC/B;YACD,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAClC,CAAC,EACD,KAAK,CAAC,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;YACpD,IAAI,CAAC,YAAY,CAAC,6BAA6B,EAAE,QAAQ,CAAC,CAAC;YAC3D,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAChC,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;YAC5B,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAChC,CAAC,CACF,CAAC;IACJ,CAAC;IAGD,yCAAyC;IACzC,iBAAiB;QACf,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,+BAA+B;QAC/B,MAAM,OAAO,GAAG;YACd,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;YAC5D,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;YAC5D,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;SAChG,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC;QAErD,IAAI,CAAC,GAAG,CAAC,qBAAqB,CAC5B,IAAI,CAAC,UAAU,CAAC,EAAE,EAClB,IAAI,CAAC,IAAI,CAAC,EAAE,EACZ,OAAO,CACR,CAAC,SAAS,CACT,IAAI,CAAC,EAAE;YACL,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAC;YAC9C,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrB,0EAA0E;gBAC1E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC;gBAE7B,4BAA4B;gBAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;oBACzD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;iBAC/G;gBAED,sCAAsC;gBACtC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;oBACjC,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,kBAAkB,IAAI,CAAC,CAAC;oBAClD,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,oBAAoB,IAAI,CAAC,CAAC;gBACrD,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;gBACtB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;aACnB;YAED,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC,EACD,KAAK,CAAC,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,YAAY,CAAC,gCAAgC,EAAE,QAAQ,CAAC,CAAC;YAC9D,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QACpB,CAAC,CACF,CAAC;IACJ,CAAC;IAED,sCAAsC;IACtC,qBAAqB;;QACnB,IAAI,CAAC,WAAI,CAAC,UAAU,0CAAE,EAAE,KAAI,CAAC,WAAI,CAAC,IAAI,0CAAE,EAAE,GAAE;YAC1C,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;YACpD,OAAO;SACR;QAED,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAClE,IAAI,CAAC,EAAE;YACL,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE,CAAC,CAAC;oBACpD,KAAK,EAAE,KAAK,CAAC,KAAK;oBAClB,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,CAAC;iBACxB,CAAC,CAAC,CAAC;gBACJ,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;aAC1D;QACH,CAAC,EACD,KAAK,CAAC,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;QAChD,CAAC,CACF,CAAC;IACJ,CAAC;IAED,qBAAqB;;QACnB,IAAI,CAAC,WAAI,CAAC,UAAU,0CAAE,EAAE,KAAI,CAAC,WAAI,CAAC,IAAI,0CAAE,EAAE,GAAE;YAC1C,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;YACpD,OAAO;SACR;QAED,qDAAqD;QACrD,MAAM,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACvE,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,cAAc,CAAC,CAAC,SAAS,CAClF,IAAI,CAAC,EAAE;YACL,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE,CAAC,CAAC;oBACpD,KAAK,EAAE,KAAK,CAAC,KAAK;oBAClB,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,CAAC;iBACxB,CAAC,CAAC,CAAC;gBACJ,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;aAC1D;QACH,CAAC,EACD,KAAK,CAAC,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;QAChD,CAAC,CACF,CAAC;IACJ,CAAC;IAED,6BAA6B;IAC7B,kBAAkB,CAAC,KAAU;QAC3B,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACpD,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC;QAElC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE;YACtB,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;SAC1D;aAAM;YACL,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CACjE,KAAK,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,CAC/C,CAAC;SACH;IACH,CAAC;IAED,6BAA6B;IAC7B,kBAAkB,CAAC,KAAU;QAC3B,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACpD,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC;QAElC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE;YACtB,IAAI,CAAC,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;SAC1D;aAAM;YACL,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CACjE,KAAK,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,CAC/C,CAAC;SACH;IACH,CAAC;IAED,wBAAwB;IACxB,iBAAiB;QACf,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC;QACrE,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,EAAE;YACpC,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;IACH,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC;QACrE,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,EAAE;YACpC,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;IACH,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC;IAC7E,CAAC;IAED,eAAe;QACb,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3C,CAAC;IAED,eAAe;QACb,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3C,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;IAC9C,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;IAC9C,CAAC;IAED,6CAA6C;IAC7C,sBAAsB,CAAC,KAAU;QAC/B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;IAC5D,CAAC;IAED,0BAA0B;IAC1B,kBAAkB;QAChB,IAAI,CAAC,gBAAgB,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC;QAE/C,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,oDAAoD;YACpD,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;aAAM;YACL,4BAA4B;YAC5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;SAC/B;IACH,CAAC;IAEO,qBAAqB;QAC3B,2BAA2B;QAC3B,IAAI,IAAI,CAAC,gBAAgB,EAAE,EAAE;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;QAED,0BAA0B;QAC1B,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,UAAU,EAAE;YAC1C,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAED,oBAAoB;QACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,gCAAgC;QAChC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,CAAC,gDAAgD;IAClF,CAAC;IAED,YAAY;;QACV,IAAI,CAAC,WAAI,CAAC,UAAU,0CAAE,EAAE,GAAE;YACxB,IAAI,CAAC,YAAY,CAAC,2BAA2B,EAAE,QAAQ,CAAC,CAAC;YACzD,OAAO;SACR;QAED,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC;YACtD,IAAI,EAAE,CAAC,IAAS,EAAE,EAAE;gBAClB,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;gBAErC,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;oBACrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC;oBAE9B,6CAA6C;oBAC7C,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;wBAClC,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;4BAC9C,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;yBACnG;6BAAM,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;4BACrD,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;yBACzF;wBACD,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;wBAC5F,OAAO,CAAC,kBAAkB,GAAG,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC;wBACpE,OAAO,CAAC,oBAAoB,GAAG,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC;oBAC1E,CAAC,CAAC,CAAC;oBAEH,aAAa;oBACb,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,IAAI,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;oBAExF,4BAA4B;oBAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;wBACzD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;qBACjH;oBAED,IAAI,CAAC,YAAY,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,MAAM,YAAY,EAAE,SAAS,CAAC,CAAC;iBAChF;qBAAM;oBACL,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;oBACvB,IAAI,CAAC,mBAAmB,GAAG,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;oBACzE,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;iBAC/C;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC/B,CAAC;YACD,KAAK,EAAE,CAAC,GAAG,EAAE,EAAE;gBACb,OAAO,CAAC,KAAK,CAAC,0BAA0B,EAAE,GAAG,CAAC,CAAC;gBAC/C,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,sBAAsB,EAAE,QAAQ,CAAC,CAAC;YACtD,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,4BAA4B;IAC5B,sBAAsB;QACpB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,mBAAmB,GAAG,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;IAC3E,CAAC;IAED,uBAAuB;IACvB,cAAc,CAAC,KAAU;QACvB,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;QAC5D,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAE7B,IAAI,UAAU,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;YAC/C,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;SACvC;aAAM,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;IACH,CAAC;IAED,aAAa,CAAC,UAAkB;;QAC9B,IAAI,CAAC,WAAI,CAAC,UAAU,0CAAE,EAAE,KAAI,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;YACvE,OAAO;SACR;QAED,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;QAEhD,wCAAwC;QACxC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,CAAC,iCAAiC;QAE1D,gCAAgC;QAChC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,iBAAiB,GAAG,UAAU,CAAC;QACpC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QAErB,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE;YAChC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;YACvC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,UAAU,EAAE,IAAI,CAAC,UAAU;SAC5B,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,SAAS,CAAC;YAClE,IAAI,EAAE,CAAC,IAAS,EAAE,EAAE;gBAClB,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;gBAErC,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;oBACrB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;oBAE5B,6CAA6C;oBAC7C,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;wBAChC,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;4BAC9C,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;yBACnG;6BAAM,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;4BACrD,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;yBACzF;wBACD,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;wBAC5F,OAAO,CAAC,kBAAkB,GAAG,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC;wBACpE,OAAO,CAAC,oBAAoB,GAAG,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC;oBAC1E,CAAC,CAAC,CAAC;oBAEH,aAAa;oBACb,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,MAAM,IAAI,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;oBAEtF,4BAA4B;oBAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;wBACzD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;qBAC7G;oBAED,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBAC9B,IAAI,CAAC,YAAY,CAAC,iBAAiB,IAAI,CAAC,UAAU,CAAC,MAAM,MAAM,EAAE,SAAS,CAAC,CAAC;qBAC7E;yBAAM;wBACL,IAAI,CAAC,YAAY,CAAC,2BAA2B,UAAU,GAAG,EAAE,SAAS,CAAC,CAAC;qBACxE;iBACF;qBAAM;oBACL,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;oBACrB,IAAI,CAAC,iBAAiB,GAAG,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;oBACvE,IAAI,CAAC,YAAY,CAAC,2BAA2B,UAAU,GAAG,EAAE,SAAS,CAAC,CAAC;iBACxE;gBAED,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC3B,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE;oBAC5C,cAAc,EAAE,IAAI,CAAC,cAAc;oBACnC,gBAAgB,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM;oBACxC,aAAa,EAAE,IAAI,CAAC,aAAa;iBAClC,CAAC,CAAC;YACL,CAAC;YACD,KAAK,EAAE,CAAC,GAAG,EAAE,EAAE;gBACb,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,GAAG,CAAC,CAAC;gBAC7C,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC3B,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;YAC9C,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,iBAAiB,GAAG,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QACvE,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAE;YACxC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;SAC1C,CAAC,CAAC;IACL,CAAC;CAEF;;YA1kF0B,oDAAM;YADxB,yDAAI;YADJ,sEAAU;YAFV,mFAAmB;YALnB,mDAAO;YALP,4DAAe;YAA+B,4DAAe;YAAlC,8DAAiB;YAG5C,sDAAQ;YALR,2EAAe;YAEgD,4DAAe;;;+BAsBpF,wDAAY,SAAC,yBAAyB,EAAE,CAAC,QAAQ,CAAC;4BAInD,qDAAS,SAAC,eAAe;6BAIxB,qDAAS,SAAC,gBAAgB;yBAgD1B,qDAAS,SAAC,YAAY;;AAzDZ,aAAa;IALzB,yDAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;QAC1B,uEAAqC;;KAEtC,CAAC;GACW,aAAa,CAmkFzB;AAnkFyB","sources":["./node_modules/rxjs/_esm2015/internal/operators/debounceTime.js","./src/app/item-stock/item-stock-routing.module.ts","./src/app/item-stock/item-stock.module.ts","./src/app/item-stock/item-stock.page.ts"],"sourcesContent":["import { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nexport function debounceTime(dueTime, scheduler = async) {\n    return (source) => source.lift(new DebounceTimeOperator(dueTime, scheduler));\n}\nclass DebounceTimeOperator {\n    constructor(dueTime, scheduler) {\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n    }\n}\nclass DebounceTimeSubscriber extends Subscriber {\n    constructor(destination, dueTime, scheduler) {\n        super(destination);\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n        this.debouncedSubscription = null;\n        this.lastValue = null;\n        this.hasValue = false;\n    }\n    _next(value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));\n    }\n    _complete() {\n        this.debouncedNext();\n        this.destination.complete();\n    }\n    debouncedNext() {\n        this.clearDebounce();\n        if (this.hasValue) {\n            const { lastValue } = this;\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    }\n    clearDebounce() {\n        const debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    }\n}\nfunction dispatchNext(subscriber) {\n    subscriber.debouncedNext();\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ItemStockPage } from './item-stock.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ItemStockPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ItemStockPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { Ng2SearchPipeModule } from 'ng2-search-filter';\nimport { ItemStockPageRoutingModule } from './item-stock-routing.module';\n\nimport { ItemStockPage } from './item-stock.page';\nimport { ShareModule } from '../shareModule/share-module/share-module.module';\n \n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    \n    Ng2SearchPipeModule,\n    \n    ShareModule,\n    ItemStockPageRoutingModule\n  ],\n  declarations: [ItemStockPage]\n})\nexport class ItemStockPageModule {}\n","import { Component, HostListener, OnInit,ViewChild ,ElementRef} from '@angular/core';\nimport { ServicesService } from \"../stockService/services.service\";\nimport { Observable, Subscription } from 'rxjs';\nimport { AlertController, IonInput, LoadingController, ModalController, ToastController } from '@ionic/angular';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { DatePipe } from '@angular/common';\nimport { ItemModalPage } from '../item-modal/item-modal.page';\nimport { Storage } from '@ionic/storage';\nimport * as XLSX from 'xlsx'; \nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport * as momentObj from 'moment';\nimport { StockServiceService } from '../syncService/stock-service.service';\nimport domtoimage from 'dom-to-image';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { File, IWriteOptions } from '@ionic-native/file/ngx'; \nimport { NavigationExtras, Router } from '@angular/router'; // Add \nimport { stat } from 'fs';\n@Component({\n  selector: 'app-item-stock',\n  templateUrl: './item-stock.page.html',\n  styleUrls: ['./item-stock.page.scss'],\n})\nexport class ItemStockPage implements OnInit {\n  @HostListener('document:keydown.escape', ['$event']) onKeydownHandler(event: KeyboardEvent) {\n    this.hideMe('3')\n}  \n\n @ViewChild('actionPopover') actionPopover;\n  isActionPopoverOpen = false;\n  selectedActionItem: any = null;\n\n  @ViewChild('popoverNotif33') popoverNotif33;\nisOpen = false; \nsubiscribtionItem:Subscription\nsubiscribtionNotif:Subscription\n isClearing = false;\nnotifArr:Array<any> =[]\nshowNotif = false\nLogHistoryLocalArr:Array<any> =[]\nlogHistoryArr:Array<any>=[];\nisOpenNotif = false ; \nnewNotif = false ; \n// New sorting system\ncurrentSort: {column: string, direction: 'asc' | 'desc' | null} = {column: '', direction: null}\nitems:Array<any> =[]\nitemsAll:Array<any> =[]\n  searcResult:Array<any> =[]\n  searchMode :boolean = false\n  searchTerm :any =\"\"\n  selectedItem : {id:any ,item_name:any ,model:any ,part_no:any  ,min_qty:any ,brand:any,pay_price:any,perch_price:any,item_unit:any,item_desc:any,item_parcode:any,aliasEn:any};\n  firstq : {id:any ,item_id:any , store_id:any , quantity :any ,\tfq_year:any ,\tpay_price:any ,\tperch_price:any }\n isCreatingSales = false;\n  store_info : {id:any , location :any ,store_name:any , store_ref:any }\n  user_info : {id:any ,user_name:any ,store_id :any,full_name:any,password:any}\n  itemSstock : {id:any ,item_id:any , store_id:any , quantity :any }\n  store_tot :any = 0\n  cost_tot :any = 0\n  store_fltTot :any = 0\n  loading:boolean = false\n  loadingTot:boolean = false\n  partnoFilterArray:Array<any> = [];\n  filterArrayOrign:Array<any> = [];\n  sortingArrayOrign:Array<any> = [];\n  filterArray:Array<any> = [];\n  brandFilterArray:Array<any> = [];\n  brandList:Array<any>=[];\n  modelList:Array<any> =[];\n  itemsLocal : Array<any> = [] ;\n  showMe = null\n  filterMode :boolean = false\n  exportMode :boolean = false\n  showBrand:boolean = false\n  showMdel:boolean = false\n  selectedItem2 : {id:any ,item_name:any ,model:any ,part_no:any  ,min_qty:any ,brand:any,pay_price:any,perch_price:any,item_unit:any,item_desc:any,item_parcode:any,aliasEn:any , quantity?:any};\n  colSetting : {id:any ,item_name:any ,model:any ,part_no:any  ,min_qty:any ,brand:any,pay_price:any,perch_price:any,item_unit:any,item_desc:any,item_parcode:any,profit:any,instock:any,total:any,lastSold:any,edit:any,delete:any,aliasEn:any};\n  year : {id:any ,yearDesc:any ,yearStart :any,yearEnd:any}\n   selectedItemsList: Array<any> = [];\n  logHistoryObj : {id:any,\tlogRef:any,\tuserId:any,\ttypee:any,\tdatee:any,\tlogStatus:any,\tlogToken:any,\tyearId:any,\tstore_id:any}\n  fileName= 'items.xlsx'; \n  @ViewChild('exceltable') exceltable !: ElementRef; \n  currentPage: number = 1;\n  itemsPerPage: number = 20; // Default items per page\n  totalItems: number = 0;\n  totalPages: number = 0;\n  pageSizeOptions: number[] = [10, 20, 50, 100];\n  //\n    // Filter state management\n  filterState: {\n    brand: {\n      isActive: boolean,\n      isVisible: boolean,\n      selectedBrands: string[]\n    },\n    model: {\n      isActive: boolean,\n      isVisible: boolean,\n      selectedModels: string[]\n    },\n    quantity: {\n      isActive: boolean,\n      isVisible: boolean,\n      minQuantity: number,\n      maxQuantity: number,\n      filterType: string // 'range', 'min', 'max', 'exact'\n    }\n  }\n\n  // Available filter options\n  availableBrands: Array<{brand: string, selected: boolean, count?: number}> = [];\n  availableModels: Array<{model: string, selected: boolean, count?: number}> = [];\n  filteredAvailableBrands: Array<{brand: string, selected: boolean, count?: number}> = [];\n  filteredAvailableModels: Array<{model: string, selected: boolean, count?: number}> = [];\n  brandSearchTerm: string = '';\n  modelSearchTerm: string = '';\n\n  \n  // Pagination properties\n  paginatedItems: any[] = [];\n  paginationCurrentPage: number = 1;\n  paginationPageSize: number = 20;\n  paginationHasMore: boolean = false;\n  paginationLoading: boolean = false;\n  paginationSearchTerm: string = '';\n  paginationFilters: any = {};\n  private searchSubject = new Subject<string>();\n  showPaginatedView: boolean = false;\n  paginationStockTotals: any = { store_tot: 0, cost_tot: 0, items_count: 0 };\n  \n  // All Items view variables\n  showAllItemsView: boolean = false;\n  allItemsData: any[] = [];\n  loadingAllItems: boolean = false;\n  allItemsStockTotals: any = { store_tot: 0, cost_tot: 0, items_count: 0 };\n  \n  // Search functionality variables\n  showSearchView: boolean = false;\n  searchData: any[] = [];\n  loadingSearch: boolean = false;\n  searchStockTotals: any = { store_tot: 0, cost_tot: 0, items_count: 0 };\n  currentSearchTerm: string = '';\n  \n  // New separate totals variables\n  stockValuePayPrice: number = 0;\n  stockValuePerchPrice: number = 0;\n  loadingStockTotals: boolean = false;\n  constructor(private router:Router ,private file: File, private fileOpener: FileOpener,private behavApi:StockServiceService,private storage: Storage,private alertController: AlertController,private modalController: ModalController,private loadingController:LoadingController, private datePipe:DatePipe,private api:ServicesService,private toast :ToastController) { \n    this.store_info = {id:\"\" ,store_ref:\"\" , store_name:\"\" , location :\"\" }\n    this.selectedItem = {id:null ,item_name:\"\" ,model:\"\" ,part_no:\"\"  ,min_qty:0 ,brand:\"\",pay_price:0,perch_price:0,item_unit:\"\",item_desc:\"\",item_parcode:\"\",aliasEn:\"\"};\n    this.selectedItem2 = {id:null ,item_name:\"\" ,model:\"\" ,part_no:\"\"  ,min_qty:0 ,brand:\"\",pay_price:0,perch_price:0,item_unit:\"\",item_desc:\"\",item_parcode:\"\",aliasEn:\"\"};\n    this.colSetting = {id:true ,item_name:true ,model:true ,part_no:true  ,min_qty:true ,brand:true,pay_price:true,perch_price:true,item_unit:true,item_desc:true,item_parcode:true,profit:true,instock:true,total:true,lastSold:true,edit:true,delete:true,aliasEn:true};\n    this.getAppInfo()\n       // Initialize filter state\n    this.filterState = {\n      brand: {\n        isActive: false,\n        isVisible: false,\n        selectedBrands: []\n      },\n      model: {\n        isActive: false,\n        isVisible: false,\n        selectedModels: []\n      },\n      quantity: {\n        isActive: false,\n        isVisible: false,\n        minQuantity: 0,\n        maxQuantity: 0,\n        filterType: 'range'\n      }\n    }\n    \n    // Initialize search debouncing\n    this.searchSubject.pipe(\n      debounceTime(300),\n      distinctUntilChanged()\n    ).subscribe(searchTerm => {\n      this.paginationSearchTerm = searchTerm;\n      this.resetPaginationAndReload();\n    });\n  }\n \n\n\n  ///\n\n  \n\n\n\n///\n\n toggleItemSelection(item: any, event: any) {\n    if (event.detail.checked) {\n      if (!this.isItemSelected(item)) {\n        this.selectedItemsList.push(item);\n      }\n    } else {\n      this.selectedItemsList = this.selectedItemsList.filter(selectedItem => selectedItem.id !== item.id);\n    }\n  }\n\n  isItemSelected(item: any): boolean {\n    return this.selectedItemsList.some(selectedItem => selectedItem.id === item.id);\n  }\n\n  toggleSelectAll(event: any) {\n    const currentData = this.getCurrentViewData();\n    \n    if (event.detail.checked) {\n      // Select all items in current view\n      currentData.forEach(item => {\n        if (!this.isItemSelected(item)) {\n          this.selectedItemsList.push(item);\n        }\n      });\n    } else {\n      // Deselect all items in current view\n      currentData.forEach(item => {\n        this.selectedItemsList = this.selectedItemsList.filter(selectedItem => selectedItem.id !== item.id);\n      });\n    }\n  }\n\n  isAllSelected(): boolean {\n    const currentData = this.getCurrentViewData();\n    return currentData.length > 0 && currentData.every(item => this.isItemSelected(item));\n  }\n\n  isSomeSelected(): boolean {\n    const currentData = this.getCurrentViewData();\n    const selectedInCurrentView = currentData.filter(item => this.isItemSelected(item));\n    return selectedInCurrentView.length > 0 && selectedInCurrentView.length < currentData.length;\n  }\n\n  // For filtered items\n  toggleSelectAllFiltered(event: any) {\n    if (event.detail.checked) {\n      this.filterArray.forEach(item => {\n        if (!this.isItemSelected(item)) {\n          this.selectedItemsList.push(item);\n        }\n      });\n    } else {\n      this.filterArray.forEach(item => {\n        this.selectedItemsList = this.selectedItemsList.filter(selectedItem => selectedItem.id !== item.id);\n      });\n    }\n  }\n\n  isAllFilteredSelected(): boolean {\n    return this.filterArray.length > 0 && this.filterArray.every(item => this.isItemSelected(item));\n  }\n\n  isSomeFilteredSelected(): boolean {\n    return this.selectedItemsList.length > 0 && !this.isAllFilteredSelected();\n  }\n\n  // For search results\n  toggleSelectAllSearch(event: any) {\n    const searchResults = this.itemsAll.filter(item => \n      item.item_name?.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n      item.item_desc?.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n      item.part_no?.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n      item.brand?.toLowerCase().includes(this.searchTerm.toLowerCase())\n    );\n\n    if (event.detail.checked) {\n      searchResults.forEach(item => {\n        if (!this.isItemSelected(item)) {\n          this.selectedItemsList.push(item);\n        }\n      });\n    } else {\n      searchResults.forEach(item => {\n        this.selectedItemsList = this.selectedItemsList.filter(selectedItem => selectedItem.id !== item.id);\n      });\n    }\n  }\n\n  isAllSearchSelected(): boolean {\n    const searchResults = this.itemsAll.filter(item => \n      item.item_name?.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n      item.item_desc?.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n      item.part_no?.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n      item.brand?.toLowerCase().includes(this.searchTerm.toLowerCase())\n    );\n    return searchResults.length > 0 && searchResults.every(item => this.isItemSelected(item));\n  }\n\n  isSomeSearchSelected(): boolean {\n    return this.selectedItemsList.length > 0 && !this.isAllSearchSelected();\n  }\n\n  clearSelection() {\n    this.selectedItemsList = [];\n  }\n\n  // Helper method to get current view's data array\n  getCurrentViewData(): any[] {\n    if (this.showSearchView) {\n      return this.searchData || [];\n    } else if (this.showAllItemsView) {\n      return this.allItemsData || [];\n    } else if (this.filterMode || this.hasActiveFilters()) {\n      return this.filterArray || [];\n    } else if (this.paginatedItems && this.paginatedItems.length > 0) {\n      // Pagination view\n      return this.paginatedItems;\n    } else {\n      // Fallback to items array if pagination is not loaded yet\n      return this.items || [];\n    }\n  }\n  \n  clearSelectionWithAnimation() {\n    this.isClearing = true;\n    \n    // Add fade-out class for smooth transition\n    const selectedBar = document.querySelector('.selected-items-bar');\n    if (selectedBar) {\n      selectedBar.classList.add('fade-out');\n    }\n    \n    // Clear selection after animation\n    setTimeout(() => {\n      this.selectedItemsList = [];\n      this.isClearing = false;\n    }, 300);\n  }\n\n  async createPurchaseFromSelected() {\n    if (this.selectedItemsList.length === 0) {\n      // Show toast message\n      const toast = await this.toast.create({\n        message: 'يرجى تحديد عناصر أولاً',\n        duration: 2000,\n        color: 'warning'\n      });\n      toast.present();\n      return;\n    }\n\n    // Prepare items for purchase invoice\n    const purchaseItems = this.selectedItemsList.map(item => ({\n      id: item.id,\n      item_name: item.item_name,\n      item_desc: item.item_desc,\n      part_no: item.part_no,\n      brand: item.brand,\n      model: item.model,\n      item_unit: item.item_unit,\n      perch_price: item.perch_price || 0,\n      pay_price: item.pay_price || 0,\n      qty: item.quantity < 0 ? Math.abs(item.quantity) : (item.quantity === 0 ? 1 : item.quantity),\n      tot: item.perch_price || 0,\n      availQty: item.quantity || 0,\n      aliasEn: item.aliasEn\n    }));\n\n\n    \n    // Navigate to purchase page with selected items\n    this.router.navigate(['folder/purchase'], {\n      queryParams: {\n        status: 'newInvoFromItemsPage',\n        selectedItemsList: JSON.stringify(purchaseItems)\n      }\n    });\n    // Clear selection after navigation\n    this.clearSelection();\n  }\n\n\n   async createTsiaFromSelected() {\n    if (this.selectedItemsList.length === 0) {\n      const toast = await this.toast.create({\n        message: 'يرجى تحديد عناصر أولاً',\n        duration: 2000,\n        color: 'warning',\n        cssClass: 'warning-toast'\n      });\n      toast.present();\n      return;\n    }\n\n    // Set loading state\n   \n\n\n     const salesItems = this.selectedItemsList.map(item => ({\n        id: item.id,\n      item_name: item.item_name,\n      item_desc: item.item_desc,\n      part_no: item.part_no,\n      brand: item.brand,\n      model: item.model,\n      item_unit: item.item_unit,\n      perch_price: item.perch_price || 0,\n      pay_price: item.pay_price || 0,\n      qty: item.quantity,\n      tot: item.pay_price || 0,\n      availQty: item.quantity || 0,\n      aliasEn: item.aliasEn\n      }));\n\n      // Navigate to sales page\n      await this.router.navigate(['folder/tswia'], {\n        queryParams: {\n          status: 'newInvoFromItemsPage',\n          selectedItemsList: JSON.stringify(salesItems)\n        }\n      });\n    \n      // Clear selection\n        this.clearSelection();\n    // Show loading\n     \n  }\n\n  async createSalesFromSelected() {\n    if (this.selectedItemsList.length === 0) {\n      const toast = await this.toast.create({\n        message: 'يرجى تحديد عناصر أولاً',\n        duration: 2000,\n        color: 'warning',\n        cssClass: 'warning-toast'\n      });\n      toast.present();\n      return;\n    }\n\n    // Set loading state\n   \n\n\n     const salesItems = this.selectedItemsList.map(item => ({\n      id: item.id,\n      item_name: item.item_name,\n      item_desc: item.item_desc,\n      part_no: item.part_no,\n      brand: item.brand,\n      model: item.model,\n      item_unit: item.item_unit,\n      perch_price: item.perch_price || 0,\n      pay_price: item.pay_price || 0,\n      qty: item.quantity < 0 ? Math.abs(item.quantity) : (item.quantity === 0 ? 1 : item.quantity),\n      tot: item.pay_price || 0,\n      availQty: item.quantity || 0,\n      aliasEn: item.aliasEn\n      }));\n\n      // Navigate to sales page\n      await this.router.navigate(['folder/sales'], {\n        queryParams: {\n          status: 'newInvoFromItemsPage',\n          selectedItemsList: JSON.stringify(salesItems)\n        }\n      });\n    \n        // Clear selection\n        this.clearSelection();\n        // Show loading\n     \n  }\n\n\n  ///\n\n\n async presentActionPopover(event: any, item: any) {\n    // Debug logging\n    console.log('presentActionPopover called with item:', item);\n    console.log('item.id in presentActionPopover:', item?.id);\n    \n    this.selectedActionItem = item;\n    this.actionPopover.event = event;\n    this.isActionPopoverOpen = true;\n  }\n\n\n  viewItemReport(item: any) {\n    this.isActionPopoverOpen = false; \n    let navigationExtras: NavigationExtras = {\n      queryParams: {\n        item: JSON.stringify(item)\n      }\n    };\n   \n      this.router.navigate(['folder/items-report'], navigationExtras); \n  }\n\n   editItem(item: any) {\n    this.isActionPopoverOpen = false;\n    \n    // Debug logging to identify the issue\n    console.log('editItem called with item:', item);\n    console.log('item.id:', item?.id);\n    \n    // Check if item exists and has an id\n    if (!item) {\n      this.presentToast('لم يتم العثور على العنصر المحدد', 'danger');\n      return;\n    }\n    \n    const itemId = item.id || item.item_id;\n    \n    if (!itemId) {\n      console.error('Item ID not found. Item properties:', Object.keys(item));\n      this.presentToast('معرف العنصر غير موجود', 'danger');\n      return;\n    }\n    \n    this.presentModal(itemId, 'edit');\n  }\n\n   async deleteItemPop(item: any) {\n    this.isActionPopoverOpen = false;\n    // Add your delete logic here\n    // For example:\n    const alert = await this.alertController.create({\n      header: 'تأكيد الحذف',\n      message: 'هل أنت متأكد من حذف هذا العنصر؟',\n      buttons: [\n        {\n          text: 'إلغاء',\n          role: 'cancel'\n        },\n        {\n          text: 'حذف',\n          handler: () => {\n            this.deleteItem(item);\n            console.log('Delete item:', item);\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n    deleteItem(item) {\n      //console.log(item)\n      this.selectedItem = item\n    if (item.salesQuantity > 0 || item.perchQuantity > 0) {\n      this.presentToast('لا يمكن حذف الصنف , توجد كميات في المخزون    ' , 'danger')\n    } else {\n      this.delete()\n    }\n    }\n\n \ndelete(){ \n  this.presentLoadingWithOptions('جاري حذف البيانات ...')\n this.api.deleteItems(this.selectedItem.id).subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Deleted') {\n    this.presentToast('تم الحذف بنجاح' , 'success')\n    this.updateItemArrays(this.selectedItem.id , 'delete')\n    // this.saveLogHistory(this.selectedItem , undefined ,'delete')  \n   // this.getAllStockItems() //this.getStockItems() \n   }else{\n    this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n   }\n  \n },(err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   \n  },() => {\n    this.loadingController.dismiss()\n  }) \n}\n\n\n\n\n\n  //\n \n    // Helper function to find item across all table view arrays\n    findItemById(id: any): any {\n      console.log('findItemById called with id:', id);\n      console.log('Current view states:', {\n        showSearchView: this.showSearchView,\n        showAllItemsView: this.showAllItemsView,\n        filterMode: this.filterMode,\n        hasActiveFilters: this.hasActiveFilters()\n      });\n      \n      // Try to find in current view first\n      if (this.showSearchView && this.searchData && this.searchData.length > 0) {\n        console.log('Searching in searchData, length:', this.searchData.length);\n        const found = this.searchData.find(x => x.id == id);\n        if (found) {\n          console.log('Found in searchData:', found);\n          return found;\n        }\n      }\n      \n      if (this.showAllItemsView && this.allItemsData && this.allItemsData.length > 0) {\n        console.log('Searching in allItemsData, length:', this.allItemsData.length);\n        const found = this.allItemsData.find(x => x.id == id);\n        if (found) {\n          console.log('Found in allItemsData:', found);\n          return found;\n        }\n      }\n      \n      if ((this.filterMode || this.hasActiveFilters()) && this.filterArray && this.filterArray.length > 0) {\n        console.log('Searching in filterArray, length:', this.filterArray.length);\n        const found = this.filterArray.find(x => x.id == id);\n        if (found) {\n          console.log('Found in filterArray:', found);\n          return found;\n        }\n      }\n      \n      if (this.paginatedItems && this.paginatedItems.length > 0) {\n        console.log('Searching in paginatedItems, length:', this.paginatedItems.length);\n        const found = this.paginatedItems.find(x => x.id == id);\n        if (found) {\n          console.log('Found in paginatedItems:', found);\n          return found;\n        }\n      }\n      \n      // Fallback to main arrays\n      if (this.items && this.items.length > 0) {\n        console.log('Searching in items, length:', this.items.length);\n        const found = this.items.find(x => x.id == id);\n        if (found) {\n          console.log('Found in items:', found);\n          return found;\n        }\n      }\n      \n      if (this.itemsAll && this.itemsAll.length > 0) {\n        console.log('Searching in itemsAll, length:', this.itemsAll.length);\n        const found = this.itemsAll.find(x => x.id == id);\n        if (found) {\n          console.log('Found in itemsAll:', found);\n          return found;\n        }\n      }\n      \n      console.log('Item not found in any array');\n      return null;\n    }\n\n    async presentModal(id?, status?) {\n      if (id !='null' && status == 'edit') {\n         const foundItem = this.findItemById(id);\n         \n         if (!foundItem) {\n           this.presentToast('لم يتم العثور على العنصر المحدد', 'danger');\n           return;\n         }\n         \n      //console.log(foundItem);\n      this.selectedItem = {\n        id: foundItem.id,\n        item_desc: foundItem.item_desc,\n        model: foundItem.model,\n        item_name: foundItem.item_name,\n        min_qty: foundItem.min_qty,\n        part_no: foundItem.part_no,\n        brand: foundItem.brand,\n        item_unit: foundItem.item_unit,\n        item_parcode: foundItem.item_parcode,\n        pay_price: foundItem.pay_price,\n        perch_price: foundItem.perch_price,\n        aliasEn: foundItem.aliasEn,\n      }\n      \n      // Create firstq object for the modal\n      this.firstq = {\n        id: foundItem.id,\n        item_id: foundItem.id,\n        store_id: this.store_info?.id,\n        quantity: foundItem.firstQuantity || 0,\n        fq_year: this.year?.id,\n        pay_price: foundItem.pay_price,\n        perch_price: foundItem.perch_price\n      }   \n      }\n     \n      \n      const modal = await this.modalController.create({\n        component: ItemModalPage ,\n        componentProps: {\n          \"item\": this.selectedItem,\n          \"firstq\": this.firstq,\n          \"colSetting\": this.colSetting, \n          \"filterArrayOrign\": this.filterArrayOrign, \n          \"filterArray\": this.filterArray, \n          \"brandList\": this.brandList, \n          \"modelList\": this.modelList,  \n          \"status\": status\n        }\n      });\n      \n      modal.onDidDismiss().then((dataReturned) => {\n        if (dataReturned !== null) {\n          //console.log(dataReturned )\n          this.doAfterDissmiss(dataReturned)\n        }\n      });\n   \n      return await modal.present(); \n    }\n\n\n    didDissmis(){\n      this.isOpenNotif = false\n      //console.log('dismissOver')\n    }\n\n    presentPopover(e?: Event) {\n      //console.log('preent me', e)\n       this.popoverNotif33.event = e;\n       this.isOpenNotif = true;  \n       this.showNotif = false\n     }\n   \n    prClick(i , item){ \n      if(this.showMe == i){\n        console.log(i)\n      }else{ \n         this.showMe = i\n        this.selectedItem2 = {id:item.id ,item_name:item.item_name ,model:item.model ,part_no:item.part_no  ,min_qty:item.min_qty ,brand:item.brand,pay_price:item.pay_price,perch_price:item.perch_price,item_unit:item.item_unit,item_desc:item.item_desc,item_parcode:item.item_parcode,aliasEn:item.aliasEn , quantity:item.firstQuantity};\n      } \n    }\n  \n    hideMe(i){\n      this.showMe = null \n     this.selectedItem2 = {id: null ,item_name:\"\" ,model:\"\" ,part_no:\"\"  ,min_qty:0 ,brand:\"\",pay_price:0,perch_price:0,item_unit:\"\",item_desc:\"\",item_parcode:\"\",aliasEn:\"\", quantity:0};\n    }\n \n\n    update(mdata){ \n       this.presentLoadingWithOptions('جاري تعديل البيانات ...')\n       // Remove imageUrl and tax from update data while keeping category_id\n       const updateData = { ...mdata[0] } as any;\n       if ('imageUrl' in updateData) delete updateData.imageUrl;\n       if ('tax' in updateData) delete updateData.tax;\n       this.api.updateItem(updateData).subscribe(data => {\n       //console.log(data)\n       if (data['message'] != 'Post Not Updated') {\n        this.presentToast('تم التعديل بنجاح' , 'success')\n        this.saveLogHistory(mdata[0] , undefined ,'update') \n\n            this.resetPaginationAndReload() \n         \n       }else{\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n       }\n      \n     }, (err) => {\n       //console.log(err);\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n     },() => {\n      this.loadingController.dismiss()\n    }) \n    }\n\n  \n\n\n  doit(){\n    //console.log('hi man ')\n  }\n  \n    editCell(i , item){\n      this.presentLoadingWithOptions('جاري تعديل البيانات ...')\n      \n      // Validate input data\n      if(this.selectedItem2.perch_price > 0 && this.selectedItem2.pay_price > 0 && this.selectedItem2.item_name != \"\"){\n        \n        // Update the item via API\n        // Remove imageUrl and tax from inline edit data while keeping category_id\n        const editData = { ...this.selectedItem2 } as any;\n        if ('imageUrl' in editData) delete editData.imageUrl;\n        if ('tax' in editData) delete editData.tax;\n        this.api.updateItem(editData).subscribe(data => {\n          //console.log(data)\n          let res = data \n          if (data['message'] != 'Post Not Updated') { \n            this.updateFirstq(item) \n            this.loadingController.dismiss()\n            this.presentToast('تم التعديل بنجاح' , 'success') \n          }else{ \n            this.presentToast('لم يتم  تعديل البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n            this.loadingController.dismiss()\n          }\n          this.hideMe(i)\n        }, (err) => {\n        //console.log(err);\n        this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n        this.loadingController.dismiss()\n        this.hideMe(i)\n      } ,\n        ()=>{\n        this.hideMe(i)\n        this.loadingController.dismiss()\n      }\n        )   \n      }else{\n        this.presentToast(\"خطأ في الإدخال \", \"danger\")\n        this.loadingController.dismiss()\n      } \n    }\n\nupdateFirstq(item){\n  console.log(item) \n  let ft = {\n    \"item_id\":item.id, \n    \"quantity\":this.selectedItem2.quantity,\n    \"pay_price\":item.pay_price, \n    \"perch_price\":item.perch_price,\n    \"store_id\":this.store_info.id \n  }\n  this.api.updatfiratqtynew(ft).subscribe(data => {\n  //console.log(data)\n  if (data['message'] != 'Post Not Updated') { \n    this.updateItemArrays(item.id);\n  }else{\n  this.presentToast('لم يتم تعديل الكمية الإفتتاحية , خطا في الإتصال حاول مرة اخري' , 'danger') \n  this.loadingController.dismiss()\n  }\n // this.getAllStockItems() //this.getStockItems() \n}, (err) => {\n  //console.log(err);\n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n},() => {\n this.loadingController.dismiss()\n})  \n}\n\npayChange(i , item){\n  console.log(item  )\n  this.selectedItem2.perch_price = +item.pay_price - (.15 * +item.pay_price)  \n}\n\nupdateItemArrays(itemId,status?) {\n // this.presentLoadingWithOptions('جاري تحديث البيانات ...') \n  // Fetch the updated item from the backend\n  if(status == 'delete'){\n    // splice the item from all arrays \n    const itemIndex = this.items.findIndex(item => item.id === itemId);\n    if (itemIndex !== -1) {\n      this.items.splice(itemIndex, 1);\n    }\n\n    const itemAllIndex = this.itemsAll.findIndex(item => item.id === itemId);\n    if (itemAllIndex !== -1) {\n      this.itemsAll.splice(itemAllIndex, 1);\n    }\n\n    // Update pagination items if exists\n    if (this.paginatedItems && this.paginatedItems.length > 0) {\n      const paginatedIndex = this.paginatedItems.findIndex(item => item.id === itemId);\n      if (paginatedIndex !== -1) {\n        this.paginatedItems.splice(paginatedIndex, 1);\n      }\n    }\n\n    // Update search data if exists  \n    if (this.searchData && this.searchData.length > 0) {\n      const searchIndex = this.searchData.findIndex(item => item.id === itemId);\n      if (searchIndex !== -1) {\n        this.searchData.splice(searchIndex, 1);\n      }\n    }\n\n    // Update all items data if exists\n    if (this.allItemsData && this.allItemsData.length > 0) {\n      const allItemsIndex = this.allItemsData.findIndex(item => item.id === itemId);\n      if (allItemsIndex !== -1) {\n        this.allItemsData.splice(allItemsIndex, 1);\n      }\n    }\n\n    // Update filter array if exists\n    if (this.filterArray && this.filterArray.length > 0) {\n      const filterIndex = this.filterArray.findIndex(item => item.id === itemId);\n      if (filterIndex !== -1) {\n        this.filterArray.splice(filterIndex, 1);\n      }\n    }\n\n    this.storage.set('itemsLocal' , this.items).then((response) => {\n      // Storage updated\n    }); \n\n  }else {\n\n this.api.getItemById(itemId).subscribe(\n    (data) => {\n      console.log('data in updateItemArrays',data)\n      if (data) {\n         console.log(data['data']['0'] ,' emArrays')\n        const updatedItem = data['data']['0']; \n        \n        // Update item in all arrays that contain it\n        // Update items array\n        const itemIndex = this.items.findIndex(item => item.id === itemId);\n        if (itemIndex !== -1) {\n          this.items[itemIndex] = { ...this.items[itemIndex], ...updatedItem };\n        } \n        \n        // Update itemsAll array\n        const itemAllIndex = this.itemsAll.findIndex(item => item.id === itemId);\n        if (itemAllIndex !== -1) {\n          this.itemsAll[itemAllIndex] = { ...this.itemsAll[itemAllIndex], ...updatedItem };\n        }\n\n        // Update pagination items if exists\n        if (this.paginatedItems && this.paginatedItems.length > 0) {\n          const paginatedIndex = this.paginatedItems.findIndex(item => item.id === itemId);\n          if (paginatedIndex !== -1) {\n            this.paginatedItems[paginatedIndex] = { ...this.paginatedItems[paginatedIndex], ...updatedItem };\n          }\n        }\n\n        // Update search data if exists  \n        if (this.searchData && this.searchData.length > 0) {\n          const searchIndex = this.searchData.findIndex(item => item.id === itemId);\n          if (searchIndex !== -1) {\n            this.searchData[searchIndex] = { ...this.searchData[searchIndex], ...updatedItem };\n          }\n        }\n\n        // Update all items data if exists\n        if (this.allItemsData && this.allItemsData.length > 0) {\n          const allItemsIndex = this.allItemsData.findIndex(item => item.id === itemId);\n          if (allItemsIndex !== -1) {\n            this.allItemsData[allItemsIndex] = { ...this.allItemsData[allItemsIndex], ...updatedItem };\n          }\n        }\n\n        // Update filter array if exists\n        if (this.filterArray && this.filterArray.length > 0) {\n          const filterIndex = this.filterArray.findIndex(item => item.id === itemId);\n          if (filterIndex !== -1) {\n            this.filterArray[filterIndex] = { ...this.filterArray[filterIndex], ...updatedItem };\n          }\n        }\n\n        this.calculateTotalValue(this.itemsAll)\n       console.log(this.itemsAll , 'all items')\n        this.storage.set('itemsLocal' , this.itemsAll).then((response) => {\n          // Storage updated         \n        }); \n       // this.presentToast('تم تحديث البيانات بنجاح', 'success');\n      } else {\n        //this.presentToast('لم يتم العثور على البيانات المحدثة', 'danger');\n      }\n    },\n    (err) => {\n      console.error(err);\n      //this.presentToast('حدث خطأ أثناء تحديث البيانات', 'danger');\n    },\n    () => {\n      this.loadingController.dismiss();\n    }\n  );\n  }\n \n}\n\n\n\n\n\n    doAfterDissmiss(data){\n      if (data.role == 'edit' ) {\n        //console.log('edit' ,data.data)\n         this.update(data.data)\n      } else if(data.role == 'save') {\n        //console.log('save')\n        this.save(data.data )  \n      }else if(data.role == 'dele') {\n        //console.log('dele') \n         this.delete()   \n      }else if(data.role == 'price' && data.data.status == 'plus') {\n        //console.log('plus') \n        this.incresePrice(data.data) \n      }else if(data.role == 'price' && data.data.status == 'minus') {\n        //console.log('plus') \n        this.decreasePrice(data.data) \n      } else if(data.role == 'settings' ) {\n        //console.log('settings' , data.data) \n        this.setColSetting(data.data)\n     //   this.decreasePrice(data.data) \n      } \n      else if(data.role == 'filter' ) {\n        if(data.data[4] == 'filter'){\n          //console.log('filter' , data.data) \n          this.applyFilter(data.data)\n          this.filterArray = data.data[1]\n          this.store_fltTot =  data.data[1].reduce( (acc, obj)=> { return acc + (+obj.perch_price * +obj.quantity ); }, 0);\n        }else if(data.data[4] == 'clear'){\n          this.removeFilter()\n        }   \n      } \n    }\n\n      ngOnInit() {\n   //   this.loading = true \n      }\n\n    initializeFilterOptions() {\n    if (this.filterArrayOrign && this.filterArrayOrign.length > 0) {\n      // Extract unique brands\n      const uniqueBrands = Array.from(new Set(this.filterArrayOrign.map(item => item.brand)));\n      this.availableBrands = uniqueBrands.map(brand => ({\n        brand: brand,\n        selected: false\n      }));\n\n      // Extract unique models\n      const uniqueModels = Array.from(new Set(this.filterArrayOrign.map(item => item.model)));\n      this.availableModels = uniqueModels.map(model => ({\n        model: model,\n        selected: false\n      }));\n    }\n  }\n\n\n  // Brand filter methods\n  onBrandSelectionChange(brand: any) {\n    if (brand.selected) {\n      if (!this.filterState.brand.selectedBrands.includes(brand.brand)) {\n        this.filterState.brand.selectedBrands.push(brand.brand);\n      }\n    } else {\n      const index = this.filterState.brand.selectedBrands.indexOf(brand.brand);\n      if (index > -1) {\n        this.filterState.brand.selectedBrands.splice(index, 1);\n      }\n    }\n    this.updateFilterState();\n  }\n\n  toggleBrandSelection(brand: any) {\n    brand.selected = !brand.selected;\n    this.onBrandSelectionChange(brand);\n  }\n\n  applyBrandFilter() {\n    this.filterState.brand.isActive = this.filterState.brand.selectedBrands.length > 0;\n    this.filterState.brand.isVisible = false;\n    this.applyAllFilters();\n  }\n\n  clearBrandFilter() {\n    this.availableBrands.forEach(brand => brand.selected = false);\n    this.filterState.brand.selectedBrands = [];\n    this.filterState.brand.isActive = false;\n    this.filterState.brand.isVisible = false;\n    this.applyAllFilters();\n  }\n\n  // Model filter methods\n  onModelSelectionChange(model: any) {\n    if (model.selected) {\n      if (!this.filterState.model.selectedModels.includes(model.model)) {\n        this.filterState.model.selectedModels.push(model.model);\n      }\n    } else {\n      const index = this.filterState.model.selectedModels.indexOf(model.model);\n      if (index > -1) {\n        this.filterState.model.selectedModels.splice(index, 1);\n      }\n    }\n    this.updateFilterState();\n  }\n\n  toggleModelSelection(model: any) {\n    model.selected = !model.selected;\n    this.onModelSelectionChange(model);\n  }\n\n  applyModelFilter() {\n    this.filterState.model.isActive = this.filterState.model.selectedModels.length > 0;\n    this.filterState.model.isVisible = false;\n    this.applyAllFilters();\n  }\n\n  clearModelFilter() {\n    this.availableModels.forEach(model => model.selected = false);\n    this.filterState.model.selectedModels = [];\n    this.filterState.model.isActive = false;\n    this.filterState.model.isVisible = false;\n    this.applyAllFilters();\n  }\n\n  // Quantity filter methods\n  onQuantityFilterTypeChange(event: any) {\n    this.filterState.quantity.filterType = event.target.value;\n  }\n\n  selectQuantityFilter(type: string) {\n    this.filterState.quantity.filterType = type;\n    this.filterState.quantity.isActive = true;\n    this.updateFilterState();\n  }\n\n  applyQuantityFilter() {\n    this.filterState.quantity.isActive = true;\n    this.filterState.quantity.isVisible = false;\n    this.applyAllFilters();\n  }\n\n  clearQuantityFilter() {\n    this.filterState.quantity.isActive = false;\n    this.filterState.quantity.isVisible = false;\n    this.filterState.quantity.minQuantity = 0;\n    this.filterState.quantity.maxQuantity = 0;\n    this.applyAllFilters();\n  }\n\n  // Apply all active filters - now uses backend filtering\n  applyAllFilters() {\n    // Check if any filters are active\n    const hasActiveFilters = this.filterState.brand.isActive || \n                           this.filterState.model.isActive || \n                           this.filterState.quantity.isActive;\n    \n    if (hasActiveFilters) {\n      // Use backend filtering\n      this.loadFilteredItems();\n      this.filterMode = true;\n    } else {\n      // No filters active, show original data\n      if (this.filterArrayOrign && Array.isArray(this.filterArrayOrign)) {\n        this.filterArray = [...this.filterArrayOrign];\n      } else {\n        this.filterArray = [];\n      }\n      this.filterMode = false;\n    }\n  }\n\n  // Clear all filters\n  clearAllFilters() {\n    this.clearBrandFilter();\n    this.clearModelFilter();\n    this.clearQuantityFilter();\n    this.hideAllFilters();\n  }\n\n  // Update filter state\n  updateFilterState() {\n    this.filterState.brand.isActive = this.filterState.brand.selectedBrands.length > 0;\n    this.filterState.model.isActive = this.filterState.model.selectedModels.length > 0;\n  }\n\n  // Check if any filter is active\n  hasActiveFilters(): boolean {\n    return this.filterState.brand.isActive || \n           this.filterState.model.isActive || \n           this.filterState.quantity.isActive;\n  }\n\n\n      ionViewDidEnter(){\n       \n      } \n\n    ionViewDidLeave(){\n      \n    } \n\n    getAppInfo(){ \n      this.storage.get('USER_INFO').then((response) => {\n       if (response) {\n         this.user_info = response\n         \n       }\n     });\n\n     this.storage.get('year').then((response) => {\n      if (response) {\n        this.year = response \n\n      } \n    });\n\n     this.storage.get('STORE_INFO').then((response) => {\n      this.loading = true\n       if (response) {\n          this.store_info = response\n          //console.log(response)\n          //console.log(this.store_info) \n         // Use pagination method directly for initial data loading\n        this.showPaginatedView = true;\n        this.loadItemsWithPagination();\n        this.loadStockTotals(); // Load totals on page load\n        \n        // Load filter options from backend\n        this.loadBrandsFromBackend();\n        this.loadModelsFromBackend();\n       }\n     });\n\n     \n    //  this.storage.get('itemsLocal').then((response) => {\n    //   if (response) {\n    //      this.items = response  \n    //     // this.initializeFilterOptions()  \n    //   }\n    // });\n     \n      this.storage.get('colSetting').then((response) => {\n       if (response) {\n         this.colSetting = response;\n         // Category functionality removed\n       }\n       }); \n     }\n \n    async presentLoadingWithOptions(msg?) {\n      const loading = await this.loadingController.create({\n        spinner: 'bubbles',\n        mode:'ios',\n        duration: 5000,\n        message: msg,\n        translucent: true,\n       // cssClass: 'custom-class custom-loading',\n        backdropDismiss: false\n      });\n      await loading.present(); \n      const { role, data } = await loading.onDidDismiss();\n      //console.log('Loading dismissed with role:', role);\n    }\n\n    \n    \n    createPdf() {\n      this.exportMode = true\n      let pdfBlock: any = document.getElementById('exceltable');\n      let options = {\n        background: 'white',\n        height: pdfBlock.clientWidth,\n        width: pdfBlock.clientHeight,\n      };\n      domtoimage\n        .toPng(pdfBlock, options)\n        .then((fileUrl) => {\n          var doc = new jsPDF('p', 'mm', 'a4');\n          doc.addImage(fileUrl, 'PNG', 10, 10, 240, 180);\n          doc.save('items.pdf');\n\n          // let docRes = doc.output();\n          // let buffer = new ArrayBuffer(docRes.length);\n          // let array = new Uint8Array(buffer);\n          // for (var i = 0; i < docRes.length; i++) {\n          //   array[i] = docRes.charCodeAt(i);\n          // }\n          // const directory = this.file.dataDirectory;\n          // const fileName = 'user-data.pdf';\n          // let options: IWriteOptions = {\n          //   replace: true,\n          // };\n          // this.file\n          //   .checkFile(directory, fileName)\n          //   .then((res) => {\n          //     this.file\n          //       .writeFile(directory, fileName, buffer, options)\n          //       .then((res) => {\n          //         //console.log('File generated' + JSON.stringify(res));\n          //         this.fileOpener\n          //           .open(this.file.dataDirectory + fileName, 'application/pdf')\n          //           .then(() => //console.log('File is exported'))\n          //           .catch((e) => //console.log(e));\n          //       })\n          //       .catch((error) => {\n          //         //console.log(JSON.stringify(error));\n          //       });\n          //   })\n          //   .catch((error) => {\n          //     this.file\n          //       .writeFile(directory, fileName, buffer)\n          //       .then((res) => {\n          //         //console.log('File generated' + JSON.stringify(res));\n          //         this.fileOpener\n          //           .open(this.file.dataDirectory + fileName, 'application/pdf')\n          //           .then(() => //console.log('File exported'))\n          //           .catch((e) => //console.log(e));\n          //       })\n          //       .catch((error) => {\n          //         //console.log(JSON.stringify(error));\n          //       });\n          //   });\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    }\n\n\n     openPDF(): void {\n      this.exportMode = true\n      let DATA: any = document.getElementById('exceltable');\n      //console.log(DATA.width)\n      html2canvas(DATA).then((canvas) => { \n        let fileWidth = 208;\n        let fileHeight = (canvas.height * fileWidth) / canvas.width;\n        const FILEURI = canvas.toDataURL('image/png');\n        let PDF = new jsPDF('l', 'mm', 'a4');\n        let position = 0;\n        PDF.addImage(FILEURI, 'PNG', 0, position, fileWidth, fileHeight);\n        PDF.save('items.pdf');\n        this.exportMode = false\n      });\n    }\n\n\n        exportexcel(): void \n        {\n          this.exportMode = true\n          /* table id is passed over here */   \n          let element = document.getElementById('exceltable'); \n          const ws: XLSX.WorkSheet =XLSX.utils.table_to_sheet(element);\n\n          /* generate workbook and add the worksheet */\n          const wb: XLSX.WorkBook = XLSX.utils.book_new();\n          XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');\n\n          /* save to file */\n          XLSX.writeFile(wb, this.fileName);\n          this.exportMode = false\n        }\n \n  \n  getStockItems(){\n        console.log('data inrange')\n        this.loading = true\n        const startRange = (this.currentPage - 1) * this.itemsPerPage + 1;\n        const endRange = this.currentPage * this.itemsPerPage; \n        this.api.readStockInrange(startRange,endRange).subscribe(data =>{\n          console.log('data inrange',data)\n          let res = data\n          this.items = res['data'] \n          this.totalItems = this.items[0]['totalCount']\n          this.sortingArrayOrign = this.items\n         this.totalPages = Math.ceil(this.totalItems / this.itemsPerPage);\n      this.prepareFilters()\n    // this.store_tot = 0\n    // this.store_tot = this.items.reduce( (acc, obj)=> { return acc + (+obj.perch_price * +obj.quantity ); }, 0);\n     if(this.colSetting){\n\n     }else{\n      this.setColSetting()\n     }\n        }, (err) => {\n        //console.log(err);\n      } ,\n        ()=>{\n        this.loading = false\n      }\n    )  \n   \n\n    //     this.api.getAllStockItemsWithouteCounts(this.store_info.id ,this.year.id).subscribe(data =>{\n    //       console.log('data inrange',data)\n    //       let res = data\n    //       let items = res['data']  \n    //       this.storage.set('itemsLocal' , items).then((response) => {\n                 \n    //       }); \n      \n    //   this.prepareFilters()\n    //   this.setSortArayy()\n    //  this.store_tot = 0\n    //  this.store_tot = this.items.reduce( (acc, obj)=> { return acc + (+obj.perch_price * +obj.quantity ); }, 0);\n    //  if(this.colSetting){\n\n    //  }else{\n    //   this.setColSetting()\n    //  }\n    //     }, (err) => {\n    //     //console.log(err);\n    //   } ,\n    //     ()=>{\n    //     this.loading = false\n    //   }\n    //     ) \n      \n      }\n\n \n\n// Go to next page\nnextPage() {\n  if (this.currentPage < this.totalPages) {\n    this.currentPage++;\n    this.loadItemsWithPagination();\n  }\n}\n\n// Go to previous page\nprevPage() {\n  if (this.currentPage > 1) {\n    this.currentPage--;\n    this.loadItemsWithPagination();\n  }\n}\n\n// Go to specific page\ngoToPage(page: number) {\n  if (page >= 1 && page <= this.totalPages) {\n    this.currentPage = page;\n    this.loadItemsWithPagination();\n  }\n}\n\n// Change items per page\nchangeItemsPerPage(event) {\n  this.itemsPerPage = parseInt(event.detail.value);\n  this.currentPage = 1; // Reset to first page\n  this.resetPaginationAndReload();\n}\n\n// Get page numbers for pagination controls\ngetPageNumbers(): number[] {\n  const pageNumbers = [];\n  const maxPagesToShow = 5;\n  \n  let startPage = Math.max(1, this.currentPage - Math.floor(maxPagesToShow / 2));\n  let endPage = startPage + maxPagesToShow - 1;\n  \n  if (endPage > this.totalPages) {\n    endPage = this.totalPages;\n    startPage = Math.max(1, endPage - maxPagesToShow + 1);\n  }\n  \n  for (let i = startPage; i <= endPage; i++) {\n    pageNumbers.push(i);\n  }\n  \n  return pageNumbers;\n}\n\n\nrefresh() {\n  this.resetPaginationAndReload()\n}\n\n// Comprehensive refresh to initial state\nrefreshToInitialState() {\n  // Category functionality removed\n  \n  // Clear search terms\n  this.searchTerm = '';\n  this.paginationSearchTerm = '';\n  this.brandSearchTerm = '';\n  this.modelSearchTerm = '';\n  this.searchMode = false;\n  \n  // Clear all filters\n  this.clearAllFilters();\n  \n  // Reset filter state\n  this.filterState = {\n    brand: {\n      isActive: false,\n      isVisible: false,\n      selectedBrands: []\n    },\n    model: {\n      isActive: false,\n      isVisible: false,\n      selectedModels: []\n    },\n    quantity: {\n      isActive: false,\n      isVisible: false,\n      minQuantity: 0,\n      maxQuantity: 0,\n      filterType: 'range'\n    }\n  };\n  \n  // Reset available filters\n  this.availableBrands = [];\n  this.availableModels = [];\n  this.filteredAvailableBrands = [];\n  this.filteredAvailableModels = [];\n  \n  // Clear selected items\n  this.selectedItemsList = [];\n  \n  // Reset pagination filters\n  this.paginationFilters = {};\n  this.filterMode = false;\n  \n  // Reset arrays\n  this.searcResult = [];\n  this.filterArray = [];\n  \n  // Reset all items view\n  this.showAllItemsView = false;\n  this.allItemsData = [];\n  this.allItemsStockTotals = { store_tot: 0, cost_tot: 0, items_count: 0 };\n  \n  // Reset search view\n  this.showSearchView = false;\n  this.searchData = [];\n  this.searchStockTotals = { store_tot: 0, cost_tot: 0, items_count: 0 };\n  this.currentSearchTerm = '';\n  \n  // Reset pagination and reload with totals (for category change)\n  this.resetPaginationAndReloadWithTotals();\n  \n  // Show success message\n  this.presentToast('تم إعادة تعيين جميع الإعدادات', 'success');\n}\n\n\n\n   getAllStockItems(){\n          console.log('getAllStockItems')\n          this.itemsAll = []\n          this.loadingTot = true \n          \n          // Category filtering removed - load all items directly\n          \n          this.api.getAllStockItemsWithouteCounts(this.store_info.id ,this.year.id).subscribe(data =>{\n          console.log('data inrange',data)\n          let res = data\n          let items = res['data']  \n          this.itemsAll = items\n            \n            this.itemsAll.forEach(element => {\n              if ((+element.availQty - +element.qtyReal) < 0) {\n                element.perchQuantity = +element.perchQuantity + Math.abs((+element.availQty - +element.qtyReal))\n              } else if ((+element.availQty - +element.qtyReal) > 0) {\n                element.salesQuantity = +element.salesQuantity + (+element.availQty - +element.qtyReal)\n              }\n              element.quantity = +element.firstQuantity + +element.perchQuantity - +element.salesQuantity\n              element.stockValuePayPrice = +element.quantity * +element.pay_price\n              element.stockValuePerchPrice = +element.quantity * +element.perch_price\n            }) ;\n\n            // this.itemsAll = this.itemsAll.filter(item => item.quantity > 0 || item.quantity < 0); \n\n             this.calculateTotalValue(this.itemsAll) \n            \n              this.storage.set('itemsLocal' , items).then((response) => {\n                 \n              }); \n       this.loadingTot = true\n       this.items = this.itemsAll \n      this.filterArray = this.itemsAll\n      this.filterArrayOrign = this.itemsAll \n       this.sortingArrayOrign = this.itemsAll\n       \n       // Apply current sort if any\n       if (this.currentSort.column && this.currentSort.direction) {\n         this.filterArray = this.sortArray([...this.filterArray], this.currentSort.column, this.currentSort.direction);\n         this.items = this.sortArray([...this.items], this.currentSort.column, this.currentSort.direction);\n       }\n      //this.prepareFilters()\n        \n        this.initializeFilterOptions()\n   //  this.store_tot = this.items.reduce( (acc, obj)=> { return acc + (+obj.perch_price * +obj.quantity ); }, 0);\n     if(this.colSetting){\n\n     }else{\n      this.setColSetting()\n     }\n        }, (err) => {\n        //console.log(err);\n        this.loadingTot = false\n      } ,\n        ()=>{\n        this.loadingTot = false\n      }\n        )  \n   }\n\n   calculateTotalValue(item) {\n     \n              \n              this.store_tot = item.reduce( (acc, obj)=> { return acc + + Math.abs(obj.stockValuePayPrice) ; }, 0);\n              \n              this.cost_tot = item.reduce( (acc, obj)=> { return acc + + Math.abs(obj.stockValuePerchPrice) ; }, 0);\n              \n   }\n\n\n \n\n \nsetColSetting(data?){\n      if(data){\n        this.colSetting = data\n        //console.log(\"col\",this.colSetting)\n        this.storage.set('colSetting', this.colSetting).then((response) => {\n          \n        }); \n      }   \n  }\n\n   prepareFilters(){\n      const idsbrand = this.items.map(o => o.brand)\n      //console.log(idsbrand)\n      const filtered = this.items.filter(({brand}, index) => !idsbrand.includes(brand, index + 1))\n      //console.log(filtered)\n     for (let index = 0; index < filtered.length; index++) {\n      const element = filtered[index];\n      if (element.brand !=\"\") {\n        this.brandList.push({\n        \"brand\":element.brand,\n        \"selected\": false \n       }) \n       this.availableBrands.push({\n        \"brand\":element.brand,\n        \"selected\": false \n       }) \n      }\n     }\n     //console.log(this.brandList)\n\n\n      const idsm = this.items.map(o => o.model)\n      //console.log(idsm)\n      const filteredm = this.items.filter(({model}, index) => !idsm.includes(model, index + 1))\n      //console.log(filteredm)\n      for (let index = 0; index < filteredm.length; index++) {\n        const element = filteredm[index];\n        if (element.model !=\"\") { \n        this.modelList.push({\n          \"model\":element.model,\n          \"selected\": false \n        })\n\n        this.availableModels.push({\n          \"model\":element.model,\n          \"selected\": false \n        })\n      }\n       } \n     //console.log(this.modelList) \n     this.filterArrayOrign = this.items\n     this.filterArray = this.filterArrayOrign\n     //console.log(this.filterArray ,  this.filterArrayOrign)\n\n   }\n\n \n \n  // New efficient sorting system\n  sortData(column: string) {\n    // Toggle sort direction\n    if (this.currentSort.column === column) {\n      this.currentSort.direction = this.currentSort.direction === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.currentSort.column = column;\n      this.currentSort.direction = 'asc';\n    }\n\n    // Apply sort to all table views\n    this.applySortToAllViews(column, this.currentSort.direction);\n  }\n\n  private applySortToAllViews(column: string, direction: 'asc' | 'desc') {\n    // Sort the main items array (used by older tables)\n    if (this.items && this.items.length > 0) {\n      this.items = this.sortArray([...this.items], column, direction);\n    }\n\n    // Sort pagination items\n    if (this.paginatedItems && this.paginatedItems.length > 0) {\n      this.paginatedItems = this.sortArray([...this.paginatedItems], column, direction);\n    }\n\n    // Sort all items view\n    if (this.allItemsData && this.allItemsData.length > 0) {\n      this.allItemsData = this.sortArray([...this.allItemsData], column, direction);\n    }\n\n    // Sort search results\n    if (this.searchData && this.searchData.length > 0) {\n      this.searchData = this.sortArray([...this.searchData], column, direction);\n    }\n\n    // Sort filtered items\n    if (this.filterArray && this.filterArray.length > 0) {\n      this.filterArray = this.sortArray([...this.filterArray], column, direction);\n    }\n  }\n\n  private sortArray(array: any[], column: string, direction: 'asc' | 'desc'): any[] {\n    return array.sort((a, b) => {\n      let valueA = this.getSortValue(a, column);\n      let valueB = this.getSortValue(b, column);\n\n      // Handle null/undefined values\n      if (valueA == null) valueA = '';\n      if (valueB == null) valueB = '';\n\n      // Handle numeric columns\n      if (this.isNumericColumn(column)) {\n        valueA = +valueA || 0;\n        valueB = +valueB || 0;\n      } else {\n        // String comparison\n        valueA = String(valueA).toLowerCase();\n        valueB = String(valueB).toLowerCase();\n      }\n\n      if (valueA < valueB) {\n        return direction === 'asc' ? -1 : 1;\n      }\n      if (valueA > valueB) {\n        return direction === 'asc' ? 1 : -1;\n      }\n      return 0;\n    });\n  }\n\n  private getSortValue(item: any, column: string): any {\n    switch (column) {\n      case 'id': return item.id;\n      case 'item_name': return item.item_name;\n      case 'item_desc': return item.item_desc;\n      case 'aliasEn': return item.aliasEn;\n      case 'category_name': return item.category_name;\n      case 'model': return item.model;\n      case 'part_no': return item.part_no;\n      case 'brand': return item.brand;\n      case 'min_qty': return item.min_qty;\n      case 'item_unit': return item.item_unit;\n      case 'perch_price': return item.perch_price;\n      case 'pay_price': return item.pay_price;\n      case 'profit': return ((+item.pay_price - +item.perch_price) / +item.perch_price) * 100 || 0;\n      case 'quantity': return item.quantity;\n      case 'total': return item.stockValuePayPrice;\n      case 'lastSold': return item.lastSoldDate;\n      default: return '';\n    }\n  }\n\n  private isNumericColumn(column: string): boolean {\n    const numericColumns = ['id', 'min_qty', 'perch_price', 'pay_price', 'profit', 'quantity', 'total'];\n    return numericColumns.includes(column);\n  }\n\n  getSortIcon(column: string): string {\n    if (this.currentSort.column !== column) {\n      return 'swap-vertical-outline';\n    }\n    return this.currentSort.direction === 'asc' ? 'chevron-up-outline' : 'chevron-down-outline';\n  }\n\n\n  applyFilter(data){\n    this.filterMode = true\n    this.modelList = data[2]\n    this.brandList = data[3]\n    //console.log( this.modelList , this.brandList ,data )\n    this.modelList.forEach(element => {\n      if (element.selected== true){\n        this.showMdel = true\n      }\n    });\n\n    this.brandList.forEach(element => {\n      if (element.selected== true){\n        this.showBrand = true\n      }\n    });\n   }\n \n  setFilter(){\n    this.filterArray = this.items\n    let flt :Array<any> = []\n    for (let index = 0; index < this.brandList.length; index++) {\n      const element = this.brandList[index];\n      if (element.selected == true) {\n        let fltbre:Array<any>= [] \n        fltbre =   this.filterArray.filter(x=> x.brand == element.brand)\n        if(fltbre.length>0){\n          fltbre.forEach(element => {\n            flt.push(element)\n          });\n        }\n\n      } \n    }\n\n\n    for (let index = 0; index < this.modelList.length; index++) {\n      const element = this.modelList[index];\n      if (element.selected == true) {\n        let fltbre:Array<any>= [] \n        fltbre =   this.filterArray.filter(x=> x.model == element.model)\n        if(fltbre.length>0){\n          fltbre.forEach(element => {\n            flt.push(element)\n          });\n        }\n      }\n    }\n    this.filterArray = flt\n    \n    // Apply current sort if any\n    if (this.currentSort.column && this.currentSort.direction) {\n      this.filterArray = this.sortArray([...this.filterArray], this.currentSort.column, this.currentSort.direction);\n    }\n    \n    this.store_fltTot = flt.reduce( (acc, obj)=> { return acc + (+obj.perch_price * +obj.quantity ); }, 0);\n    //console.log( 'store_fltTot',this.store_fltTot)\n  }\n\n   removeFilter(type?){\n   this.presentLoadingWithOptions('....')\n     if (type =='model') {\n      this.modelList.forEach(element => {\n        element.selected = false\n      });\n       this.setFilter()\n     }else if(type =='brand'){\n      this.brandList.forEach(element => {\n        element.selected = false\n      });\n      this.setFilter()\n     }else{\n      this.modelList.forEach(element => {\n        element.selected = false\n      });\n      this.brandList.forEach(element => {\n        element.selected = false\n      });\n      this.setFilter()\n     }\n\n    \n     let bl = 0 \n     for (let index = 0; index < this.brandList.length; index++) {\n      const element = this.brandList[index];\n      if (element.selected== true){\n       bl = bl+1\n      }\n     }\n     if (bl>0) {\n      this.showBrand = true\n     }else{\n      this.showBrand = false \n     }\n\n     let bl2 = 0 \n     for (let index = 0; index < this.modelList.length; index++) {\n      const element = this.modelList[index];\n      if (element.selected== true){\n       bl2 = bl2+1\n      }\n     }\n     if (bl2>0) {\n      this.showMdel = true\n     }else{\n      this.showMdel = false \n     }\n\n     if (bl == 0 && bl2 == 0){\n      this.filterArray = this.items\n      this.filterMode = false\n     }\n\n     // Apply current sort if any\n     if (this.currentSort.column && this.currentSort.direction) {\n       this.filterArray = this.sortArray([...this.filterArray], this.currentSort.column, this.currentSort.direction);\n     }\n\n     this.store_fltTot = this.filterArray.reduce( (acc, obj)=> { return acc + (+obj.perch_price * +obj.quantity ); }, 0);\n     //console.log( 'store_fltTot',this.store_fltTot)\n\n   this.loadingController.dismiss()\n   }\n\n   filterItems(searchTerm) {\n     //console.log(searchTerm)  \n     this.searcResult = this.itemsAll.filter(item => item.item_name.toLowerCase().includes(searchTerm.toLowerCase())) \n     //console.log(this.searcResult) \n    }\n\n   searching($event){\n    if (this.searchTerm.length > 0) {\n      this.searchMode = true\n      console.log($event , this.itemsAll) \n    } else{\n      this.searchMode = false\n      \n    }\n   }\n    \n  // clearSearch(){\n  //    //console.log('clear')\n  //    this.searchMode = false\n  //   // this.searcResult = []\n  //  }\n \n//  FocusSearch(){\n//     //console.log('FocusSearch')\n//     this.searchMode = true \n//     this.searcResult = []\n// }\t\n\n    cancelSearch(){\n      //console.log('cancelSearch' ,this.items)\n      this.searchMode = false\n      this.searcResult = []\n    }\n\n   async presentToast(msg,color?) {\n    const toast = await this.toast.create({\n      message: msg,\n      duration: 2000,\n      color:color,\n      cssClass:'cust_Toast',\n      mode:'ios',\n      position:'top' \n    });\n    toast.present();\n   }\n\n   save(mdata){ \n       this.presentLoadingWithOptions('جاري حفظ البيانات ...')\n       // Remove imageUrl and tax from save data while keeping category_id\n       const saveData = { ...mdata[0] } as any;\n       if ('imageUrl' in saveData) delete saveData.imageUrl;\n       if ('tax' in saveData) delete saveData.tax;\n       this.api.saveItem(saveData).subscribe(data => {\n        //console.log(data)\n        if (data['message'] != 'Post Not Created') { \n          this.firstq = {id:null ,item_id:data['message'] , store_id:this.store_info.id , quantity :mdata[1].quantity ,pay_price:mdata[0].pay_price,perch_price:mdata[0].perch_price ,fq_year:'2022'}\n          this.saveFierstQty(mdata[0])\n        }else{\n          this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n        }\n       \n      }, (err) => {\n        //console.log(err);\n        this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n      }) \n   }\n\n  async saveFierstQty(itemData){  \n    this.api.saveFirstQty(this.firstq).subscribe(data=>{ \n      //console.log(data)  \n      if (data['message'] != 'Post Not Created') { \n        this.firstq.id = data['message']\n      }\n      this.saveLogHistory(itemData , this.firstq ,'insert')\n      this.presentToast('تم الحفظ','success')\n\n    }, (err) => {\n      //console.log(err);\n      this.presentToast('1لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n     \n      this.loadingController.dismiss()\n   \n    }, () => {\n      this.loadingController.dismiss()\n    }\n    )      \n  }\n\n  generateRandom(role):any{\n    let da = new Date \n    //console.log(da)\n    let randomsNumber = da.getMonth().toString() + da.getDay().toString() + da.getHours().toString()+ da.getMinutes().toString()+da.getSeconds().toString()+da.getMilliseconds().toString() + role\n    return this.store_info.store_ref + randomsNumber \n  }\n\n    prepareLogHistory(itemData , firstq , role){\n     this.logHistoryArr = []\n    let dt = new Date()\n    let typee = \"\" \n      if(role == 'insert'){\n        typee = \"insert firstq\"\n          itemData.id = firstq.item_id\n        this.logHistoryArr.push(\n          {\n            \"id\":this.firstq.id,\n            \"logRef\":this.generateRandom(typee),\n            \"userId\": this.user_info.id,\n            \"typee\":typee,\n            \"datee\": momentObj(dt).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n            \"logStatus\":0,\n            \"logToken\": JSON.stringify(firstq)  ,\n            \"yearId\": this.year.id,\n            \"store_id\" :this.store_info.id\n          }\n          )\n\n          typee = \"insert item\"\n          this.logHistoryArr.push(\n            {\n              \"id\":null,\n              \"logRef\":this.generateRandom(typee),\n              \"userId\":this.user_info.id,\n              \"typee\":typee,\n              \"datee\": momentObj(dt).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n              \"logStatus\":0,\n              \"logToken\":JSON.stringify(itemData)  ,\n              \"yearId\":this.year.id,\n              \"store_id\":this.store_info.id\n            }\n            )\n      } else {\n       // typee = \"insert firstq\"\n        // firstq.item_id =  itemData.id \n        // this.logHistoryArr.push(\n        //   {\n        //     \"id\":this.firstq.id,\n        //     \"logRef\":this.generateRandom(),\n        //     \"userId\": this.user_info.id,\n        //     \"typee\":typee,\n        //     \"datee\": momentObj(dt).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n        //     \"logStatus\":0,\n        //     \"logToken\": JSON.stringify(firstq)  ,\n        //     \"yearId\": this.year.id,\n        //     \"store_id\" :this.store_info.id\n        //   }\n        //   )\n        if(role == 'update' ){\n          typee = \"update item\" \n        }else if(role == 'delete' ){\n          typee = \"delete item\" \n        }\n          this.logHistoryArr.push(\n            {\n              \"id\":null,\n              \"logRef\":this.generateRandom(typee),\n              \"userId\":this.user_info.id,\n              \"typee\":typee,\n              \"datee\": momentObj(dt).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n              \"logStatus\":0,\n              \"logToken\":JSON.stringify(itemData)  ,\n              \"yearId\":this.year.id,\n              \"store_id\":this.store_info.id\n            }\n            )\n          }\n        return this.logHistoryArr\n       }\n\n   saveLogHistory(itemData , firstq , role){  \n    let mdata =  this.prepareLogHistory(itemData , firstq , role) \n    //console.log('mdata',mdata)\n    this.api.saveLogHistoryMulti(mdata[0] ,mdata[1],role).subscribe(data => {\n     //console.log(data)\n     if (data['message'] != 'Post Not Created') { \n       this.resetPaginationAndReload()\n       this.logHistoryArr =[]\n     }else{\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n     } \n   }, (err) => {\n     //console.log(err);\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   }) \n   }\n\n\n  async saveItemStock(){  \n    this.api.saveItemStock(this.itemSstock).subscribe(data=>{ \n      //console.log(data)  \n     // this.getAllStockItems() //this.getStockItems()\n      this.presentToast('تم الحفظ بنجاح' , 'success')\n    }, (err) => {\n      //console.log(err);\n      this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n    }, () => {\n      this.loadingController.dismiss()\n    }\n    )      \n  }\n\n\n\n\n\nincresePrice(data){ \n  this.presentLoadingWithOptions('جاري تعديل الأسعار ...')\n this.api.increasePrice(data.payval,data.perchval).subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Updated') {\n    this.presentToast('تم التعديل بنجاح' , 'success') \n    //this.getAllStockItems() //this.getStockItems()\n   }else{\n   this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n\n   } \n }, (err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n },() => {\n  this.loadingController.dismiss()\n}) \n}\n\n  decreasePrice(data){ \n  this.presentLoadingWithOptions('جاري تعديل الأسعار ...')\n  this.api.decreasePrice(data.payval,data.perchval).subscribe(data => {\n    //console.log(data)\n    if (data['message'] != 'Post Not Updated') {\n      this.presentToast('تم التعديل بنجاح' , 'success') \n      this.resetPaginationAndReload()\n    }else{\n    this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n\n    }\n  }, (err) => {\n    //console.log(err);\n    this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n  },() => {\n    this.loadingController.dismiss()\n  }) \n  }\n\n\n\n\n  calculateTotals() {\n    this.store_tot = 0;\n    this.cost_tot = 0; \n    this.itemsAll.forEach(element => {\n      this.store_tot += element.stockValuePayPrice;\n      this.cost_tot += element.stockValuePerchPrice;\n    });\n  }\n\n  // Pagination methods\n  loadItemsWithPagination() {\n    console.log('loadItemsWithPagination')\n    if (this.paginationLoading) return; \n    this.paginationLoading = true;\n    this.loadingTot = true; \n    \n    console.log('loadItemsWithPagination - no filters applied');\n    \n    this.api.getStockItemsWithPagination(\n      this.store_info.id,\n      this.paginationCurrentPage,\n      this.paginationPageSize\n    ).subscribe(\n      data => {\n        console.log('Paginated items response:', data); \n        if (data && data.data) {\n          if (this.paginationCurrentPage === 1) {\n            // First page - replace existing items\n            this.paginatedItems = data.data;\n          } else {\n            // Subsequent pages - append to existing items\n            this.paginatedItems = [...this.paginatedItems, ...data.data];\n          }\n          \n          // Apply current sort to new data (only for first page to maintain sort order)\n          if (this.paginationCurrentPage === 1 && this.currentSort.column && this.currentSort.direction) {\n            this.paginatedItems = this.sortArray([...this.paginatedItems], this.currentSort.column, this.currentSort.direction);\n          }\n          \n          // Update pagination info\n          this.paginationHasMore = data.pagination?.hasMore || false;\n          \n          // Update stock totals if provided\n          if (data.totals) {\n            this.paginationStockTotals = data.totals;\n          }\n        }\n        \n        this.paginationLoading = false;\n        this.loadingTot = false;\n      },\n      error => {\n        console.error('Error loading paginated items:', error);\n        this.presentToast('خطأ في تحميل البيانات', 'danger');\n        this.paginationLoading = false;\n        this.loadingTot = false;\n      }\n    );\n  }\n   \n  loadMoreItems() {\n    if (this.paginationHasMore && !this.paginationLoading) {\n      this.paginationCurrentPage++;\n      this.loadItemsWithPagination();\n    }\n  }\n  \n  resetPaginationAndReload() {\n    this.paginationCurrentPage = 1;\n    this.paginatedItems = [];\n    this.paginationHasMore = false;\n    this.loadItemsWithPagination();\n    // Note: totals are only loaded on category changes, not on search/filter resets\n  }\n\n  // Reset pagination and reload totals (for category changes)\n  resetPaginationAndReloadWithTotals() {\n    this.paginationCurrentPage = 1;\n    this.paginatedItems = [];\n    this.paginationHasMore = false;\n    this.loadItemsWithPagination();\n    this.loadStockTotals(); // Load totals when category changes\n  }\n  \n  onPaginationSearchChange(event: any) {\n    const searchTerm = event.target.value || '';\n    this.searchSubject.next(searchTerm);\n  }\n  \n  setPaginationFilter(filterType: string, filterValue: any) {\n    this.paginationFilters[filterType] = filterValue;\n    this.resetPaginationAndReload();\n  }\n  \n  clearPaginationFilters() {\n    this.paginationFilters = {};\n    this.resetPaginationAndReload();\n  }\n  \n  togglePaginatedView() {\n    this.showPaginatedView = !this.showPaginatedView;\n    \n    if (this.showPaginatedView) {\n      // Switch to paginated view\n      this.resetPaginationAndReload();\n    } else {\n      // Switch back to regular view\n      this.resetPaginationAndReload();\n    }\n  }\n\n  // Load stock totals separately\n  loadStockTotals() {\n    console.log('Loading stock totals...');\n    if (this.loadingStockTotals) return;\n    \n    this.loadingStockTotals = true;\n\n    this.api.getStockTotals(\n      this.store_info.id,\n      this.year.id\n    ).subscribe(\n      data => {\n        console.log('Stock totals response:', data);\n        if (data && data.data) {\n          this.stockValuePayPrice = parseFloat(data.data.stockValuePayPrice) || 0;\n          this.stockValuePerchPrice = parseFloat(data.data.stockValuePerchPrice) || 0;\n        } else {\n          this.stockValuePayPrice = 0;\n          this.stockValuePerchPrice = 0;\n        }\n        this.loadingStockTotals = false;\n      },\n      error => {\n        console.error('Error loading stock totals:', error);\n        this.presentToast('خطأ في تحميل إجمالي المخزون', 'danger');\n        this.loadingStockTotals = false;\n        this.stockValuePayPrice = 0;\n        this.stockValuePerchPrice = 0;\n      }\n    );\n  }\n  \n\n  // Load filtered items without pagination\n  loadFilteredItems() {\n    console.log('loadFilteredItems');\n    this.loading = true;\n    \n    // Prepare filters for API call\n    const filters = {\n      brand: this.filterState.brand.selectedBrands.join(',') || '',\n      model: this.filterState.model.selectedModels.join(',') || '',\n      quantity_filter: this.filterState.quantity.isActive ? this.filterState.quantity.filterType : ''\n    };\n    \n    console.log('loadFilteredItems - filters:', filters);\n    \n    this.api.getFilteredStockItems(\n      this.store_info.id,\n      this.year.id,\n      filters\n    ).subscribe(\n      data => {\n        console.log('Filtered items response:', data);\n        if (data && data.data) {\n          // Use filterArray for filtered results (this will display in filter mode)\n          this.filterArray = data.data;\n          \n          // Apply current sort if any\n          if (this.currentSort.column && this.currentSort.direction) {\n            this.filterArray = this.sortArray([...this.filterArray], this.currentSort.column, this.currentSort.direction);\n          }\n          \n          // Calculate totals for filtered items\n          this.store_tot = 0;\n          this.cost_tot = 0;\n          this.filterArray.forEach(element => {\n            this.store_tot += element.stockValuePayPrice || 0;\n            this.cost_tot += element.stockValuePerchPrice || 0;\n          });\n        } else {\n          this.filterArray = [];\n          this.store_tot = 0;\n          this.cost_tot = 0;\n        }\n        \n        this.loading = false;\n      },\n      error => {\n        console.error('Error loading filtered items:', error);\n        this.presentToast('خطأ في تحميل البيانات المفلترة', 'danger');\n        this.loading = false;\n        this.filterArray = [];\n        this.store_tot = 0;\n        this.cost_tot = 0;\n      }\n    );\n  }\n\n  // Load brands and models from backend\n  loadBrandsFromBackend() {\n    if (!this.store_info?.id || !this.year?.id) {\n      console.log('Store info or year not available yet');\n      return;\n    }\n    \n    this.api.getUniqueBrands(this.store_info.id, this.year.id).subscribe(\n      data => {\n        if (data && data.data) {\n          this.availableBrands = data.data.map((brand: any) => ({\n            brand: brand.brand,\n            selected: false,\n            count: brand.count || 0\n          }));\n          this.filteredAvailableBrands = [...this.availableBrands];\n        }\n      },\n      error => {\n        console.error('Error loading brands:', error);\n      }\n    );\n  }\n\n  loadModelsFromBackend() {\n    if (!this.store_info?.id || !this.year?.id) {\n      console.log('Store info or year not available yet');\n      return;\n    }\n    \n    // Load models optionally filtered by selected brands\n    const selectedBrands = this.filterState.brand.selectedBrands.join(',');\n    this.api.getUniqueModels(this.store_info.id, this.year.id, selectedBrands).subscribe(\n      data => {\n        if (data && data.data) {\n          this.availableModels = data.data.map((model: any) => ({\n            model: model.model,\n            selected: false,\n            count: model.count || 0\n          }));\n          this.filteredAvailableModels = [...this.availableModels];\n        }\n      },\n      error => {\n        console.error('Error loading models:', error);\n      }\n    );\n  }\n\n  // Brand search functionality\n  onBrandSearchInput(event: any) {\n    const searchTerm = event.target.value.toLowerCase();\n    this.brandSearchTerm = searchTerm;\n    \n    if (!searchTerm.trim()) {\n      this.filteredAvailableBrands = [...this.availableBrands];\n    } else {\n      this.filteredAvailableBrands = this.availableBrands.filter(brand =>\n        brand.brand.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n\n  // Model search functionality\n  onModelSearchInput(event: any) {\n    const searchTerm = event.target.value.toLowerCase();\n    this.modelSearchTerm = searchTerm;\n    \n    if (!searchTerm.trim()) {\n      this.filteredAvailableModels = [...this.availableModels];\n    } else {\n      this.filteredAvailableModels = this.availableModels.filter(model =>\n        model.model.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n\n  // Filter toggle methods\n  toggleBrandFilter() {\n    this.hideAllFilters();\n    this.filterState.brand.isVisible = !this.filterState.brand.isVisible;\n    if (this.filterState.brand.isVisible) {\n      this.loadBrandsFromBackend();\n    }\n  }\n\n  toggleModelFilter() {\n    this.hideAllFilters();\n    this.filterState.model.isVisible = !this.filterState.model.isVisible;\n    if (this.filterState.model.isVisible) {\n      this.loadModelsFromBackend();\n    }\n  }\n\n  toggleQuantityFilter() {\n    this.hideAllFilters();\n    this.filterState.quantity.isVisible = !this.filterState.quantity.isVisible;\n  }\n\n  hideBrandFilter() {\n    this.filterState.brand.isVisible = false;\n  }\n\n  hideModelFilter() {\n    this.filterState.model.isVisible = false;\n  }\n\n  hideQuantityFilter() {\n    this.filterState.quantity.isVisible = false;\n  }\n\n  hideAllFilters() {\n    this.filterState.brand.isVisible = false;\n    this.filterState.model.isVisible = false;\n    this.filterState.quantity.isVisible = false;\n  }\n\n  // Quantity filter radio group change handler\n  onQuantityFilterChange(event: any) {\n    this.filterState.quantity.filterType = event.detail.value;\n  }\n\n  // All Items functionality\n  toggleAllItemsView() {\n    this.showAllItemsView = !this.showAllItemsView;\n    \n    if (this.showAllItemsView) {\n      // Reset filters and search before showing all items\n      this.resetFiltersAndSearch();\n      this.loadAllItems();\n    } else {\n      // Return to pagination view\n      this.showPaginatedView = true;\n    }\n  }\n\n  private resetFiltersAndSearch() {\n    // Clear any active filters\n    if (this.hasActiveFilters()) {\n      this.clearAllFilters();\n    }\n    \n    // Clear any active search\n    if (this.showSearchView || this.searchTerm) {\n      this.clearSearch();\n    }\n\n    // Reset filter mode\n    this.filterMode = false;\n    \n    // Ensure we're in a clean state\n    this.showSearchView = false;\n    this.showPaginatedView = false; // Will be set to true in loadAllItems if needed\n  }\n\n  loadAllItems() {\n    if (!this.store_info?.id) {\n      this.presentToast('معلومات المتجر غير متوفرة', 'danger');\n      return;\n    }\n\n    this.loadingAllItems = true;\n    this.allItemsData = [];\n    \n    this.api.getAllStockItems(this.store_info.id).subscribe({\n      next: (data: any) => {\n        console.log('All items data:', data);\n        \n        if (data && data.data) {\n          this.allItemsData = data.data;\n          \n          // Process each item (same as existing logic)\n          this.allItemsData.forEach(element => {\n            if ((+element.availQty - +element.qtyReal) < 0) {\n              element.perchQuantity = +element.perchQuantity + Math.abs((+element.availQty - +element.qtyReal));\n            } else if ((+element.availQty - +element.qtyReal) > 0) {\n              element.salesQuantity = +element.salesQuantity + (+element.availQty - +element.qtyReal);\n            }\n            element.quantity = +element.firstQuantity + +element.perchQuantity - +element.salesQuantity;\n            element.stockValuePayPrice = +element.quantity * +element.pay_price;\n            element.stockValuePerchPrice = +element.quantity * +element.perch_price;\n          });\n          \n          // Set totals\n          this.allItemsStockTotals = data.totals || { store_tot: 0, cost_tot: 0, items_count: 0 };\n          \n          // Apply current sort if any\n          if (this.currentSort.column && this.currentSort.direction) {\n            this.allItemsData = this.sortArray([...this.allItemsData], this.currentSort.column, this.currentSort.direction);\n          }\n          \n          this.presentToast(`تم تحميل ${this.allItemsData.length} صنف بنجاح`, 'success');\n        } else {\n          this.allItemsData = [];\n          this.allItemsStockTotals = { store_tot: 0, cost_tot: 0, items_count: 0 };\n          this.presentToast('لا توجد أصناف', 'warning');\n        }\n        \n        this.loadingAllItems = false;\n      },\n      error: (err) => {\n        console.error('Error loading all items:', err);\n        this.loadingAllItems = false;\n        this.presentToast('خطأ في تحميل الأصناف', 'danger');\n      }\n    });\n  }\n\n  // Return to pagination view\n  returnToPaginationView() {\n    this.showAllItemsView = false;\n    this.showPaginatedView = true;\n    this.allItemsData = [];\n    this.allItemsStockTotals = { store_tot: 0, cost_tot: 0, items_count: 0 };\n  }\n\n  // Search functionality\n  onSearchChange(event: any) {\n    const searchTerm = event.detail.value || event.target.value;\n    this.searchTerm = searchTerm;\n    \n    if (searchTerm && searchTerm.trim().length >= 2) {\n      this.performSearch(searchTerm.trim());\n    } else if (searchTerm.trim().length === 0) {\n      this.clearSearch();\n    }\n  }\n\n  performSearch(searchTerm: string) {\n    if (!this.store_info?.id || !searchTerm || searchTerm.trim().length < 2) {\n      return;\n    }\n\n    console.log('Starting search for:', searchTerm);\n    \n    // Clear other views and set search view\n    this.showSearchView = true;\n    this.showAllItemsView = false;\n    this.showPaginatedView = false;\n    this.searchMode = false; // Clear any existing search mode\n    \n    // Set loading and search states\n    this.loadingSearch = true;\n    this.currentSearchTerm = searchTerm;\n    this.searchData = [];\n    \n    console.log('Search view state:', {\n      showSearchView: this.showSearchView,\n      showAllItemsView: this.showAllItemsView,\n      showPaginatedView: this.showPaginatedView,\n      searchMode: this.searchMode\n    });\n    \n    this.api.searchStockItems(this.store_info.id, searchTerm).subscribe({\n      next: (data: any) => {\n        console.log('Search results:', data);\n        \n        if (data && data.data) {\n          this.searchData = data.data;\n          \n          // Process each item (same as existing logic)\n          this.searchData.forEach(element => {\n            if ((+element.availQty - +element.qtyReal) < 0) {\n              element.perchQuantity = +element.perchQuantity + Math.abs((+element.availQty - +element.qtyReal));\n            } else if ((+element.availQty - +element.qtyReal) > 0) {\n              element.salesQuantity = +element.salesQuantity + (+element.availQty - +element.qtyReal);\n            }\n            element.quantity = +element.firstQuantity + +element.perchQuantity - +element.salesQuantity;\n            element.stockValuePayPrice = +element.quantity * +element.pay_price;\n            element.stockValuePerchPrice = +element.quantity * +element.perch_price;\n          });\n          \n          // Set totals\n          this.searchStockTotals = data.totals || { store_tot: 0, cost_tot: 0, items_count: 0 };\n          \n          // Apply current sort if any\n          if (this.currentSort.column && this.currentSort.direction) {\n            this.searchData = this.sortArray([...this.searchData], this.currentSort.column, this.currentSort.direction);\n          }\n          \n          if (this.searchData.length > 0) {\n            this.presentToast(`تم العثور على ${this.searchData.length} صنف`, 'success');\n          } else {\n            this.presentToast(`لا توجد نتائج للبحث عن \"${searchTerm}\"`, 'warning');\n          }\n        } else {\n          this.searchData = [];\n          this.searchStockTotals = { store_tot: 0, cost_tot: 0, items_count: 0 };\n          this.presentToast(`لا توجد نتائج للبحث عن \"${searchTerm}\"`, 'warning');\n        }\n        \n        this.loadingSearch = false;\n        console.log('Search completed. Final state:', {\n          showSearchView: this.showSearchView,\n          searchDataLength: this.searchData.length,\n          loadingSearch: this.loadingSearch\n        });\n      },\n      error: (err) => {\n        console.error('Error searching items:', err);\n        this.loadingSearch = false;\n        this.presentToast('خطأ في البحث', 'danger');\n      }\n    });\n  }\n\n  clearSearch() {\n    console.log('Clearing search...');\n    this.showSearchView = false;\n    this.showPaginatedView = true;\n    this.searchData = [];\n    this.searchStockTotals = { store_tot: 0, cost_tot: 0, items_count: 0 };\n    this.currentSearchTerm = '';\n    this.searchTerm = '';\n    console.log('Search cleared. New state:', {\n      showSearchView: this.showSearchView,\n      showPaginatedView: this.showPaginatedView\n    });\n  }\n\n}"],"names":[],"sourceRoot":"webpack:///"}