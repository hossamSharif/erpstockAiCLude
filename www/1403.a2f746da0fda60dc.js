"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1403],{61403:(O,h,l)=>{l.r(h),l.d(h,{BalanceSheet2PageModule:()=>E});var g=l(69808),b=l(34182),i=l(23349),f=l(94030),a=l(70655),t=l(29863),u=l(90849),p=l(91472),C=l(52562),x=l(79002),d=l(90733);function s(e,c){1&e&&(t.TgZ(0,"div",11),t._UZ(1,"ion-spinner",12),t.TgZ(2,"p",13),t._uU(3,"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."),t.qZA(),t.qZA())}function _(e,c){if(1&e&&(t.TgZ(0,"ion-card",39),t.TgZ(1,"ion-card-content",40),t.TgZ(2,"div",41),t.TgZ(3,"div",42),t.TgZ(4,"div",43),t._uU(5,"\u0639\u062f\u062f \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a"),t.qZA(),t.TgZ(6,"div",44),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",42),t.TgZ(9,"div",43),t._uU(10,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0646"),t.qZA(),t.TgZ(11,"div",45),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"div",42),t.TgZ(14,"div",43),t._uU(15,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062f\u0627\u0626\u0646"),t.qZA(),t.TgZ(16,"div",46),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"div",42),t.TgZ(19,"div",43),t._uU(20,"\u0627\u0644\u0641\u0631\u0642"),t.qZA(),t.TgZ(21,"div",44),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.oxw(2);t.xp6(7),t.Oqu(n.summary.total_accounts),t.xp6(5),t.Oqu(n.formatBalance(n.summary.grand_debit_total)),t.xp6(5),t.Oqu(n.formatBalance(n.summary.grand_credit_total)),t.xp6(4),t.ekj("debit-total",n.summary.difference>0)("credit-total",n.summary.difference<0),t.xp6(1),t.hij(" ",n.formatBalance(n.getAbsoluteValue(n.summary.difference))," ")}}function Z(e,c){if(1&e&&(t.TgZ(0,"span",63),t._uU(1),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" (",n.filteredAccounts.length," \u062d\u0633\u0627\u0628) ")}}function y(e,c){if(1&e&&(t.TgZ(0,"span",78),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(3);t.xp6(1),t.hij(" ",o.formatBalance(n.display_debit)," ")}}function A(e,c){1&e&&(t.TgZ(0,"span",79),t._uU(1,"0.00"),t.qZA())}function v(e,c){if(1&e&&(t.TgZ(0,"span",80),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(3);t.xp6(1),t.hij(" ",o.formatBalance(n.display_credit)," ")}}function T(e,c){1&e&&(t.TgZ(0,"span",79),t._uU(1,"0.00"),t.qZA())}const P=function(e,c,n,o){return{"customer-type":e,"supplier-type":c,"sales-type":n,"purchase-type":o}},M=function(e,c){return{"debit-status":e,"credit-status":c}};function w(e,c){if(1&e&&(t.TgZ(0,"tr",64),t.TgZ(1,"td",65),t._uU(2),t.qZA(),t.TgZ(3,"td",66),t._uU(4),t.qZA(),t.TgZ(5,"td",67),t._uU(6),t.qZA(),t.TgZ(7,"td",68),t.TgZ(8,"span",69),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"td",70),t._uU(11),t.qZA(),t.TgZ(12,"td",71),t.YNc(13,y,2,1,"span",72),t.YNc(14,A,2,0,"span",73),t.qZA(),t.TgZ(15,"td",74),t.YNc(16,v,2,1,"span",75),t.YNc(17,T,2,0,"span",73),t.qZA(),t.TgZ(18,"td",76),t.TgZ(19,"span",77),t._uU(20),t.qZA(),t.qZA(),t.qZA()),2&e){const n=c.$implicit,o=c.index,r=t.oxw(3);t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(n.sub_name),t.xp6(2),t.Oqu(n.sub_code||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"),t.xp6(2),t.Q6J("ngClass",t.l5B(12,P,1==n.ac_id,2==n.ac_id,8==n.ac_id,9==n.ac_id)),t.xp6(1),t.hij(" ",r.getAccountTypeDisplay(n)," "),t.xp6(2),t.Oqu(r.formatBalance(n.opening_balance)),t.xp6(2),t.Q6J("ngIf",n.display_debit>0),t.xp6(1),t.Q6J("ngIf",0==n.display_debit),t.xp6(2),t.Q6J("ngIf",n.display_credit>0),t.xp6(1),t.Q6J("ngIf",0==n.display_credit),t.xp6(2),t.Q6J("ngClass",t.WLB(17,M,"debit"==n.balance_status,"credit"==n.balance_status)),t.xp6(1),t.hij(" ",r.getBalanceStatusDisplay(n)," ")}}function q(e,c){1&e&&(t.TgZ(0,"tr",81),t.TgZ(1,"td"),t._UZ(2,"ion-skeleton-text",82),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"ion-skeleton-text",82),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"ion-skeleton-text",82),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"ion-skeleton-text",82),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"ion-skeleton-text",82),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"ion-skeleton-text",82),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"ion-skeleton-text",82),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"ion-skeleton-text",82),t.qZA(),t.qZA())}function k(e,c){if(1&e&&(t.TgZ(0,"tfoot"),t.TgZ(1,"tr",83),t.TgZ(2,"td",84),t._uU(3,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"),t.qZA(),t.TgZ(4,"td",85),t.TgZ(5,"span",78),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"td",86),t.TgZ(8,"span",80),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"td",87),t.TgZ(11,"span",88),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.oxw(3);t.xp6(6),t.Oqu(n.formatBalance(n.summary.grand_debit_total)),t.xp6(3),t.Oqu(n.formatBalance(n.summary.grand_credit_total)),t.xp6(2),t.ekj("debit-amount",n.summary.difference>0)("credit-amount",n.summary.difference<0),t.xp6(1),t.hij(" ",n.formatBalance(n.getAbsoluteValue(n.summary.difference))," ")}}function S(e,c){1&e&&(t.TgZ(0,"div",89),t._UZ(1,"ion-icon",90),t.TgZ(2,"h4"),t._uU(3,"\u0644\u0627 \u062a\u0648\u062c\u062f \u062d\u0633\u0627\u0628\u0627\u062a"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0623\u064a \u062d\u0633\u0627\u0628\u0627\u062a"),t.qZA(),t.qZA())}function B(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"ion-card",47),t.TgZ(1,"ion-card-header",48),t.TgZ(2,"div",49),t.TgZ(3,"ion-card-title",50),t._UZ(4,"ion-icon",51),t._uU(5," \u0645\u064a\u0632\u0627\u0646 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0648\u0627\u0644\u0623\u0631\u0635\u062f\u0629 "),t.YNc(6,Z,2,1,"span",52),t.qZA(),t.TgZ(7,"app-export-buttons",53),t.NdJ("exportPDF",function(){return t.CHM(n),t.oxw(2).exportToPDF()})("exportExcel",function(){return t.CHM(n),t.oxw(2).exportToExcel()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-card-content",54),t.TgZ(9,"div",55),t.TgZ(10,"table",56),t.TgZ(11,"thead"),t.TgZ(12,"tr"),t.TgZ(13,"th"),t._uU(14,"\u0627\u0644\u062a\u0633\u0644\u0633\u0644"),t.qZA(),t.TgZ(15,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("sub_name")}),t._UZ(16,"ion-icon",58),t._uU(17," \u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 "),t.qZA(),t.TgZ(18,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("sub_code")}),t._UZ(19,"ion-icon",58),t._uU(20," \u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 "),t.qZA(),t.TgZ(21,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("ac_id")}),t._UZ(22,"ion-icon",58),t._uU(23," \u0646\u0648\u0639 \u0627\u0644\u062d\u0633\u0627\u0628 "),t.qZA(),t.TgZ(24,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("opening_balance")}),t._UZ(25,"ion-icon",58),t._uU(26," \u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0627\u0641\u062a\u062a\u0627\u062d\u064a "),t.qZA(),t.TgZ(27,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("display_debit")}),t._UZ(28,"ion-icon",58),t._uU(29," \u0645\u062f\u064a\u0646 (\u0639\u0644\u064a\u0647) "),t.qZA(),t.TgZ(30,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("display_credit")}),t._UZ(31,"ion-icon",58),t._uU(32," \u062f\u0627\u0626\u0646 (\u0644\u0647) "),t.qZA(),t.TgZ(33,"th",57),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).sortBy("balance_status")}),t._UZ(34,"ion-icon",58),t._uU(35," \u062d\u0627\u0644\u0629 \u0627\u0644\u0631\u0635\u064a\u062f "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tbody"),t.YNc(37,w,21,20,"tr",59),t.YNc(38,q,17,0,"tr",60),t.qZA(),t.YNc(39,k,13,7,"tfoot",61),t.qZA(),t.qZA(),t.YNc(40,S,6,0,"div",62),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(6),t.Q6J("ngIf",n.filteredAccounts.length>0),t.xp6(1),t.Q6J("hasData",n.filteredAccounts&&n.filteredAccounts.length>0)("isLoading",n.loading),t.xp6(9),t.Q6J("name",n.getSortIcon("sub_name")),t.xp6(3),t.Q6J("name",n.getSortIcon("sub_code")),t.xp6(3),t.Q6J("name",n.getSortIcon("ac_id")),t.xp6(3),t.Q6J("name",n.getSortIcon("opening_balance")),t.xp6(3),t.Q6J("name",n.getSortIcon("display_debit")),t.xp6(3),t.Q6J("name",n.getSortIcon("display_credit")),t.xp6(3),t.Q6J("name",n.getSortIcon("balance_status")),t.xp6(3),t.Q6J("ngForOf",n.sortedAccounts),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.filteredAccounts.length>0),t.xp6(1),t.Q6J("ngIf",n.showEmpty&&!n.loading)}}function U(e,c){if(1&e&&(t.TgZ(0,"div",101),t.TgZ(1,"span",102),t._uU(2,"\u0645\u062f\u064a\u0646 (\u0639\u0644\u064a\u0647):"),t.qZA(),t.TgZ(3,"span",105),t._uU(4),t.qZA(),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(3);t.xp6(4),t.Oqu(o.formatBalance(n.display_debit))}}function D(e,c){if(1&e&&(t.TgZ(0,"div",101),t.TgZ(1,"span",102),t._uU(2,"\u062f\u0627\u0626\u0646 (\u0644\u0647):"),t.qZA(),t.TgZ(3,"span",106),t._uU(4),t.qZA(),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(3);t.xp6(4),t.Oqu(o.formatBalance(n.display_credit))}}function F(e,c){if(1&e&&(t.TgZ(0,"ion-card",95),t.TgZ(1,"ion-card-content",96),t.TgZ(2,"div",97),t.TgZ(3,"div",98),t.TgZ(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",99),t.TgZ(9,"span",69),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",100),t.TgZ(12,"div",101),t.TgZ(13,"span",102),t._uU(14,"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0627\u0641\u062a\u062a\u0627\u062d\u064a:"),t.qZA(),t.TgZ(15,"span",103),t._uU(16),t.qZA(),t.qZA(),t.YNc(17,U,5,1,"div",104),t.YNc(18,D,5,1,"div",104),t.TgZ(19,"div",101),t.TgZ(20,"span",102),t._uU(21,"\u062d\u0627\u0644\u0629 \u0627\u0644\u0631\u0635\u064a\u062f:"),t.qZA(),t.TgZ(22,"span",77),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=c.$implicit,o=t.oxw(3);t.xp6(5),t.Oqu(n.sub_name),t.xp6(2),t.Oqu(n.sub_code||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"),t.xp6(2),t.Q6J("ngClass",t.l5B(9,P,1==n.ac_id,2==n.ac_id,8==n.ac_id,9==n.ac_id)),t.xp6(1),t.hij(" ",o.getAccountTypeDisplay(n)," "),t.xp6(6),t.Oqu(o.formatBalance(n.opening_balance)),t.xp6(1),t.Q6J("ngIf",n.display_debit>0),t.xp6(1),t.Q6J("ngIf",n.display_credit>0),t.xp6(4),t.Q6J("ngClass",t.WLB(14,M,"debit"==n.balance_status,"credit"==n.balance_status)),t.xp6(1),t.hij(" ",o.getBalanceStatusDisplay(n)," ")}}function N(e,c){1&e&&(t.TgZ(0,"div",89),t._UZ(1,"ion-icon",90),t.TgZ(2,"h4"),t._uU(3,"\u0644\u0627 \u062a\u0648\u062c\u062f \u062d\u0633\u0627\u0628\u0627\u062a"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0623\u064a \u062d\u0633\u0627\u0628\u0627\u062a"),t.qZA(),t.qZA())}function I(e,c){if(1&e&&(t.TgZ(0,"div",91),t.TgZ(1,"ion-card",92),t.TgZ(2,"ion-card-header"),t.TgZ(3,"ion-card-title",93),t._UZ(4,"ion-icon",51),t._uU(5," \u0645\u064a\u0632\u0627\u0646 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 "),t.qZA(),t.qZA(),t.qZA(),t.YNc(6,F,24,17,"ion-card",94),t.YNc(7,N,6,0,"div",62),t.qZA()),2&e){const n=t.oxw(2);t.xp6(6),t.Q6J("ngForOf",n.sortedAccounts),t.xp6(1),t.Q6J("ngIf",n.showEmpty&&!n.loading)}}function J(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"ion-card",15),t.TgZ(2,"ion-card-content",16),t.TgZ(3,"div",17),t.TgZ(4,"ion-label",18),t._uU(5,"\u062a\u0635\u0641\u064a\u0629 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a:"),t.qZA(),t.TgZ(6,"ion-segment",19),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw().segmentValue=r})("ionChange",function(r){return t.CHM(n),t.oxw().segmentChanged(r)}),t.TgZ(7,"ion-segment-button",20),t.TgZ(8,"div",21),t._UZ(9,"ion-icon",22),t.TgZ(10,"span"),t._uU(11,"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"ion-segment-button",23),t.TgZ(13,"div",21),t._UZ(14,"ion-icon",24),t.TgZ(15,"span"),t._uU(16,"\u0627\u0644\u0639\u0645\u0644\u0627\u0621"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"ion-segment-button",25),t.TgZ(18,"div",21),t._UZ(19,"ion-icon",26),t.TgZ(20,"span"),t._uU(21,"\u0627\u0644\u0645\u0648\u0631\u062f\u0648\u0646"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"ion-segment-button",27),t.TgZ(23,"div",21),t._UZ(24,"ion-icon",28),t.TgZ(25,"span"),t._uU(26,"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"ion-segment-button",29),t.TgZ(28,"div",21),t._UZ(29,"ion-icon",30),t.TgZ(30,"span"),t._uU(31,"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"ion-segment-button",31),t.TgZ(33,"div",21),t._UZ(34,"ion-icon",32),t.TgZ(35,"span"),t._uU(36,"\u0623\u062e\u0631\u0649"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",33),t.TgZ(38,"ion-item",34),t.TgZ(39,"ion-checkbox",35),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw().showOnlyWithBalance=r})("ionChange",function(){return t.CHM(n),t.oxw().balanceFilterChanged()}),t.qZA(),t.TgZ(40,"ion-label"),t._uU(41,"\u0639\u0631\u0636 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0630\u0627\u062a \u0627\u0644\u0631\u0635\u064a\u062f \u0641\u0642\u0637"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(42,_,23,8,"ion-card",36),t.YNc(43,B,41,14,"ion-card",37),t.YNc(44,I,8,2,"div",38),t.qZA()}if(2&e){const n=t.oxw();t.xp6(6),t.Q6J("ngModel",n.segmentValue),t.xp6(33),t.Q6J("ngModel",n.showOnlyWithBalance),t.xp6(3),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf","desktop"==n.device),t.xp6(1),t.Q6J("ngIf","mobile"==n.device)}}const z=[{path:"",component:(()=>{class e{constructor(n,o,r,m,j,V,$,H,W,G,L){this.platform=n,this.alertController=o,this.router=r,this.storage=m,this.modalController=j,this.loadingController=V,this.datePipe=$,this.api=H,this.toast=W,this.sortingService=G,this.exportService=L,this.accounts=[],this.filteredAccounts=[],this.sortedAccounts=[],this.currentSort=null,this.store_info=null,this.user_info=null,this.year=null,this.segmentValue="all",this.showOnlyWithBalance=!1,this.loading=!1,this.showEmpty=!1,this.device="",this.summary={total_accounts:0,grand_debit_total:0,grand_credit_total:0,difference:0},this.checkPlatform(),this.getAppInfo()}ngOnInit(){}ionViewDidEnter(){this.getAppInfo()}checkPlatform(){this.platform.is("desktop")?this.device="desktop":this.platform.is("mobile")&&(this.device="mobile")}getAppInfo(){this.storage.get("USER_INFO").then(n=>{n&&(this.user_info=n)}),this.storage.get("year").then(n=>{n&&(this.year=n)}),this.storage.get("STORE_INFO").then(n=>{n&&(this.store_info=n,this.loadBalanceSheet())})}loadBalanceSheet(){var n,o;!(null===(n=this.store_info)||void 0===n?void 0:n.id)||!(null===(o=this.year)||void 0===o?void 0:o.id)||(this.loading=!0,this.showEmpty=!1,this.api.getComprehensiveBalanceSheet(this.store_info.id,this.year.id).subscribe(r=>{this.loading=!1,r&&r.accounts?(this.accounts=r.accounts,this.summary=r.summary,this.applyFilters()):(this.showEmpty=!0,this.accounts=[])},r=>{console.error("Error loading balance sheet:",r),this.loading=!1,this.showEmpty=!0,this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0645\u064a\u0632\u0627\u0646 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629","danger")}))}segmentChanged(n){this.segmentValue=n.detail.value,this.applyFilters()}balanceFilterChanged(){this.applyFilters()}applyFilters(){let n=[...this.accounts];if("all"!==this.segmentValue)switch(this.segmentValue){case"customer":n=n.filter(o=>1==o.cat_id);break;case"supplier":n=n.filter(o=>2==o.cat_id);break;case"sales":n=n.filter(o=>8==o.ac_id);break;case"purchases":n=n.filter(o=>9==o.ac_id);break;case"other":n=n.filter(o=>![1,2,8,9].includes(o.ac_id))}this.showOnlyWithBalance&&(n=n.filter(o=>o.display_debit>0||o.display_credit>0)),this.filteredAccounts=n,this.calculateFilteredTotals(),this.applySorting()}calculateFilteredTotals(){this.summary={total_accounts:this.filteredAccounts.length,grand_debit_total:this.filteredAccounts.reduce((n,o)=>n+o.display_debit,0),grand_credit_total:this.filteredAccounts.reduce((n,o)=>n+o.display_credit,0),difference:0},this.summary.difference=this.summary.grand_debit_total-this.summary.grand_credit_total}formatBalance(n){return n||0===n?new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Math.abs(n)):"0.00"}getAccountTypeDisplay(n){return 1==n.ac_id?"\u0639\u0645\u064a\u0644":2==n.ac_id?"\u0645\u0648\u0631\u062f":8==n.ac_id?"\u0645\u0628\u064a\u0639\u0627\u062a":9==n.ac_id?"\u0645\u0634\u062a\u0631\u064a\u0627\u062a":n.sub_type}getBalanceStatusDisplay(n){return"debit"===n.balance_status?"\u0645\u062f\u064a\u0646":"credit"===n.balance_status?"\u062f\u0627\u0626\u0646":"\u0645\u062a\u0648\u0627\u0632\u0646"}getAbsoluteValue(n){return n||0===n?Math.abs(n):0}refresh(){this.loadBalanceSheet()}presentToast(n,o="primary"){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.toast.create({message:n,duration:2e3,color:o,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}applySorting(){this.sortedAccounts=this.currentSort?this.sortingService.sortData(this.filteredAccounts,this.currentSort.column,this.currentSort.direction):[...this.filteredAccounts]}sortBy(n){const o=this.sortingService.getNextSortDirection(n,this.currentSort);this.currentSort={column:n,direction:o},this.applySorting()}getSortIcon(n){return this.sortingService.getSortIcon(n,this.currentSort)}exportToPDF(){var n,o;return(0,a.mG)(this,void 0,void 0,function*(){if(!this.filteredAccounts||0===this.filteredAccounts.length)return void(yield this.presentToast("\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u062a\u0635\u062f\u064a\u0631","warning"));const r={title:this.exportService.generateDynamicTitle("balance-sheet2"),subtitle:this.generateSubtitle(),fileName:`balance-sheet-${this.datePipe.transform(new Date,"yyyy-MM-dd")}`,data:this.filteredAccounts,columns:this.getExportColumns(),userName:(null===(n=this.user_info)||void 0===n?void 0:n.full_name)||(null===(o=this.user_info)||void 0===o?void 0:o.user_name)||"\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",pageType:"balance-sheet2",currentDate:this.datePipe.transform(new Date,"yyyy-MM-dd")||""};yield this.exportService.exportToPDF(r)})}exportToExcel(){var n,o;return(0,a.mG)(this,void 0,void 0,function*(){if(!this.filteredAccounts||0===this.filteredAccounts.length)return void(yield this.presentToast("\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u062a\u0635\u062f\u064a\u0631","warning"));const r={title:this.exportService.generateDynamicTitle("balance-sheet2"),subtitle:this.generateSubtitle(),fileName:`balance-sheet-${this.datePipe.transform(new Date,"yyyy-MM-dd")}`,data:this.filteredAccounts,columns:this.getExportColumns(),userName:(null===(n=this.user_info)||void 0===n?void 0:n.full_name)||(null===(o=this.user_info)||void 0===o?void 0:o.user_name)||"\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",pageType:"balance-sheet2",currentDate:this.datePipe.transform(new Date,"yyyy-MM-dd")||""};yield this.exportService.exportToExcel(r)})}generateSubtitle(){let n="";return this.segmentValue&&"all"!==this.segmentValue&&(n=`\u0641\u0644\u062a\u0631: ${{all:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a",customer:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621",supplier:"\u0627\u0644\u0645\u0648\u0631\u062f\u0648\u0646",sales:"\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",purchases:"\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",other:"\u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0623\u062e\u0631\u0649"}[this.segmentValue]}`),this.showOnlyWithBalance&&(n=n?`${n} - \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0630\u0627\u062a \u0627\u0644\u0631\u0635\u064a\u062f \u0641\u0642\u0637`:"\u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0630\u0627\u062a \u0627\u0644\u0631\u0635\u064a\u062f \u0641\u0642\u0637"),n}getExportColumns(){return[{key:"sub_name",title:"\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628",width:25,type:"text"},{key:"cat_name",title:"\u0646\u0648\u0639 \u0627\u0644\u062d\u0633\u0627\u0628",width:15,type:"text"},{key:"opening_balance",title:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0627\u0641\u062a\u062a\u0627\u062d\u064a",width:15,type:"currency"},{key:"total_debit",title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0646",width:15,type:"currency"},{key:"total_credit",title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062f\u0627\u0626\u0646",width:15,type:"currency"},{key:"current_balance",title:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a",width:15,type:"currency"},{key:"balance_type",title:"\u0646\u0648\u0639 \u0627\u0644\u0631\u0635\u064a\u062f",width:10,type:"text"}]}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(i.t4),t.Y36(i.Br),t.Y36(f.F0),t.Y36(u.K),t.Y36(i.IN),t.Y36(i.HT),t.Y36(g.uU),t.Y36(p.r),t.Y36(i.yF),t.Y36(C.$),t.Y36(x.T))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-balance-sheet2"]],decls:12,vars:2,consts:[[1,"transparent-header"],[1,"transparent-toolbar"],["slot","start"],[1,"glass-menu-button"],[1,"glass-title"],["slot","end"],["fill","clear",3,"click"],["name","refresh-outline"],[1,"modern-content"],["class","loading-container",4,"ngIf"],["class","main-container",4,"ngIf"],[1,"loading-container"],["name","crescent"],[1,"loading-text"],[1,"main-container"],[1,"filter-card"],[1,"filter-content"],[1,"segment-container"],[1,"segment-label"],[1,"balance-segment",3,"ngModel","ngModelChange","ionChange"],["value","all"],[1,"segment-content"],["name","list-outline"],["value","customer"],["name","people-outline"],["value","supplier"],["name","business-outline"],["value","sales"],["name","trending-up-outline"],["value","purchases"],["name","trending-down-outline"],["value","other"],["name","folder-outline"],[1,"balance-filter"],["lines","none"],["slot","start",3,"ngModel","ngModelChange","ionChange"],["class","summary-card",4,"ngIf"],["class","table-card","color","primary",4,"ngIf"],["class","mobile-cards",4,"ngIf"],[1,"summary-card"],[1,"summary-content"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"summary-value","debit-total"],[1,"summary-value","credit-total"],["color","primary",1,"table-card"],[1,"table-header","ion-no-padding"],[1,"card-header-with-export"],[1,"table-title"],["name","analytics-outline","slot","start"],["class","account-count",4,"ngIf"],[3,"hasData","isLoading","exportPDF","exportExcel"],[1,"table-content"],[1,"table-container"],[1,"modern-table"],[1,"sortable-header",3,"click"],[1,"sort-icon",3,"name"],["class","table-row",4,"ngFor","ngForOf"],["class","skeleton-row",4,"ngIf"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"account-count"],[1,"table-row"],[1,"serial"],[1,"account-name"],[1,"account-code"],[1,"account-type"],[1,"type-badge",3,"ngClass"],[1,"opening-balance"],[1,"debit"],["class","amount debit-amount",4,"ngIf"],["class","amount zero-amount",4,"ngIf"],[1,"credit"],["class","amount credit-amount",4,"ngIf"],[1,"balance-status"],[1,"status-badge",3,"ngClass"],[1,"amount","debit-amount"],[1,"amount","zero-amount"],[1,"amount","credit-amount"],[1,"skeleton-row"],["animated","",2,"width","100%"],[1,"totals-row"],["colspan","5",1,"totals-label"],[1,"debit-total"],[1,"credit-total"],[1,"difference-cell"],[1,"amount"],[1,"empty-state"],["name","analytics-outline",1,"empty-icon"],[1,"mobile-cards"],["color","primary",1,"mobile-header-card"],[1,"mobile-title"],["class","mobile-account-card",4,"ngFor","ngForOf"],[1,"mobile-account-card"],[1,"mobile-content"],[1,"mobile-header"],[1,"account-info"],[1,"account-type-mobile"],[1,"mobile-balances"],[1,"balance-row"],[1,"balance-label"],[1,"balance-value"],["class","balance-row",4,"ngIf"],[1,"balance-value","debit-amount"],[1,"balance-value","credit-amount"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header",0),t.TgZ(1,"ion-toolbar",1),t.TgZ(2,"ion-buttons",2),t._UZ(3,"ion-menu-button",3),t.qZA(),t.TgZ(4,"ion-title",4),t._uU(5,"\u0645\u064a\u0632\u0627\u0646 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0648\u0627\u0644\u0623\u0631\u0635\u062f\u0629"),t.qZA(),t.TgZ(6,"ion-buttons",5),t.TgZ(7,"ion-button",6),t.NdJ("click",function(){return o.refresh()}),t._UZ(8,"ion-icon",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"ion-content",8),t.YNc(10,s,4,0,"div",9),t.YNc(11,J,45,5,"div",10),t.qZA()),2&n&&(t.xp6(10),t.Q6J("ngIf",!o.user_info||!o.store_info),t.xp6(1),t.Q6J("ngIf",o.user_info&&o.store_info))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.YG,i.gu,i.W2,g.O5,i.PQ,i.PM,i.FN,i.Q$,i.cJ,i.QI,b.JJ,b.On,i.GO,i.Ie,i.nz,i.w,i.Zi,i.Dq,d.a,g.sg,g.mk,i.CK],styles:['.modern-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, rgba(255, 255, 255, .1), rgba(255, 255, 255, .05) );--color: var(--ion-color-dark);min-height:100vh;padding:8px;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}.modern-content[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,rgba(74,144,226,.1),rgba(80,227,194,.1),rgba(245,166,35,.1));animation:gradientShift 15s ease infinite;z-index:-1}@keyframes gradientShift{0%,to{background:linear-gradient(45deg,rgba(74,144,226,.1),rgba(80,227,194,.1),rgba(245,166,35,.1))}50%{background:linear-gradient(225deg,rgba(245,166,35,.1),rgba(74,144,226,.1),rgba(80,227,194,.1))}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;gap:16px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:48px;height:48px;--color: var(--ion-color-primary)}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;margin:0}.main-container[_ngcontent-%COMP%]{width:100%;max-width:1400px;margin:0 auto;display:flex;flex-direction:column;gap:12px}.filter-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%], .table-card[_ngcontent-%COMP%], .mobile-header-card[_ngcontent-%COMP%], .mobile-account-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:16px;box-shadow:0 8px 32px #0000001a,inset 0 1px #fff3;margin:0;overflow:hidden;transition:all .3s cubic-bezier(.4,0,.2,1)}.filter-card[_ngcontent-%COMP%]:hover, .summary-card[_ngcontent-%COMP%]:hover, .table-card[_ngcontent-%COMP%]:hover, .mobile-header-card[_ngcontent-%COMP%]:hover, .mobile-account-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 48px #00000026,inset 0 1px #ffffff4d}.filter-content[_ngcontent-%COMP%]{padding:16px}.segment-container[_ngcontent-%COMP%]{margin-bottom:16px}.segment-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:var(--ion-color-dark);margin-bottom:12px}.balance-segment[_ngcontent-%COMP%]{border-radius:12px;background:rgba(255,255,255,.7);border:1px solid rgba(0,0,0,.1);overflow:hidden}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: var(--ion-color-primary);--color: var(--ion-color-dark);--color-checked: white;border-radius:8px;margin:4px;transition:all .3s ease;min-height:44px}.balance-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{box-shadow:0 4px 12px #4a90e24d;transform:translateY(-1px)}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:6px}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.balance-filter[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--color: var(--ion-color-dark);--padding-start: 0}.balance-filter[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}.balance-filter[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--color: var(--ion-color-primary);--color-checked: var(--ion-color-primary)}.summary-content[_ngcontent-%COMP%]{padding:16px}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));grid-gap:16px;gap:16px}.summary-item[_ngcontent-%COMP%]{text-align:center;padding:12px;background:rgba(255,255,255,.6);border-radius:12px;border:1px solid rgba(0,0,0,.05);transition:all .3s ease}.summary-item[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.8);transform:translateY(-1px);box-shadow:0 4px 16px #0000001a}.summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:13px;color:var(--ion-color-medium);margin-bottom:8px;font-weight:500}.summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--ion-color-dark);font-family:Courier New,monospace}.summary-item[_ngcontent-%COMP%]   .summary-value.debit-total[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.summary-item[_ngcontent-%COMP%]   .summary-value.credit-total[_ngcontent-%COMP%]{color:var(--ion-color-success)}.table-card[color=primary][_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary),var(--ion-color-primary-shade));color:#fff}.table-card[color=primary][_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600}.table-card[color=primary][_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.table-card[color=primary][_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]   .account-count[_ngcontent-%COMP%]{font-size:14px;color:#fffc;font-weight:400}.table-content[_ngcontent-%COMP%]{padding:0}.table-container[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:visible;border-radius:12px;background:rgba(255,255,255,.9);position:relative;margin-bottom:80px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(0,0,0,.1);border-radius:4px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(74,144,226,.6);border-radius:4px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:rgba(74,144,226,.8)}.modern-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0;font-size:14px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(74,144,226,.1),rgba(80,227,194,.1))}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;text-align:center;font-weight:600;color:var(--ion-color-dark);border-bottom:2px solid rgba(74,144,226,.2);white-space:nowrap;font-size:13px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{transition:all .2s ease;border-bottom:1px solid rgba(0,0,0,.05)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background:rgba(74,144,226,.05);transform:scale(1.001)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;vertical-align:middle;color:var(--ion-color-dark);font-size:13px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.serial[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-medium);width:60px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.account-name[_ngcontent-%COMP%]{text-align:right;font-weight:500;max-width:200px;word-break:break-word}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.account-code[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-family:Courier New,monospace}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.account-type[_ngcontent-%COMP%]{width:120px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.opening-balance[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.debit[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.credit[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;width:120px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:500}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .type-badge.customer-type[_ngcontent-%COMP%]{background:rgba(16,220,96,.1);color:var(--ion-color-success);border:1px solid rgba(16,220,96,.2)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .type-badge.supplier-type[_ngcontent-%COMP%]{background:rgba(245,166,35,.1);color:var(--ion-color-warning);border:1px solid rgba(245,166,35,.2)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .type-badge.sales-type[_ngcontent-%COMP%]{background:rgba(74,144,226,.1);color:var(--ion-color-primary);border:1px solid rgba(74,144,226,.2)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .type-badge.purchase-type[_ngcontent-%COMP%]{background:rgba(220,53,69,.1);color:var(--ion-color-danger);border:1px solid rgba(220,53,69,.2)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:500}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge.debit-status[_ngcontent-%COMP%]{background:rgba(220,53,69,.1);color:var(--ion-color-danger);border:1px solid rgba(220,53,69,.2)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge.credit-status[_ngcontent-%COMP%]{background:rgba(16,220,96,.1);color:var(--ion-color-success);border:1px solid rgba(16,220,96,.2)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:Courier New,monospace}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .amount.debit-amount[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:600}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .amount.credit-amount[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .amount.zero-amount[_ngcontent-%COMP%]{color:var(--ion-color-medium);opacity:.6}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .skeleton-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px}.modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:10}.modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(74,144,226,.95),rgba(80,227,194,.95));border-top:3px solid rgba(74,144,226,.8);box-shadow:0 -4px 20px #0000001a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:18px 12px;font-weight:700;font-size:14px;border:none;position:relative}.modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.totals-label[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:16px;text-shadow:0 1px 2px rgba(0,0,0,.2)}.modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.debit-total[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.credit-total[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.difference-cell[_ngcontent-%COMP%]{text-align:center}.modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.debit-total[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.credit-total[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.difference-cell[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:700;font-size:15px;color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.3);background:rgba(255,255,255,.1);padding:4px 8px;border-radius:6px;display:inline-block;min-width:80px}.mobile-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.mobile-header-card[color=primary][_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary),var(--ion-color-primary-shade))}.mobile-header-card[color=primary][_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .mobile-title[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600}.mobile-header-card[color=primary][_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .mobile-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.mobile-content[_ngcontent-%COMP%]{padding:16px}.mobile-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.mobile-header[_ngcontent-%COMP%]   .account-info[_ngcontent-%COMP%]{flex:1}.mobile-header[_ngcontent-%COMP%]   .account-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:600;color:var(--ion-color-dark)}.mobile-header[_ngcontent-%COMP%]   .account-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:var(--ion-color-medium);font-family:Courier New,monospace}.mobile-header[_ngcontent-%COMP%]   .account-type-mobile[_ngcontent-%COMP%]{flex-shrink:0}.mobile-balances[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.balance-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid rgba(0,0,0,.05)}.balance-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.balance-row[_ngcontent-%COMP%]   .balance-label[_ngcontent-%COMP%]{font-size:13px;color:var(--ion-color-medium);font-weight:500}.balance-row[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;font-family:Courier New,monospace;color:var(--ion-color-dark)}.balance-row[_ngcontent-%COMP%]   .balance-value.debit-amount[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.balance-row[_ngcontent-%COMP%]   .balance-value.credit-amount[_ngcontent-%COMP%]{color:var(--ion-color-success)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.8}@media (max-width: 768px){.modern-content[_ngcontent-%COMP%]{padding:6px}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]{padding:4px}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:12px}.summary-item[_ngcontent-%COMP%]{padding:8px}.summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:12px}.summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 480px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.balance-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   .segment-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}}.card-header-with-export[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:transparent;border-bottom:1px solid rgba(255,255,255,.1)}.card-header-with-export[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:#fff;display:flex;align-items:center;flex:1}.card-header-with-export[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:8px}.card-header-with-export[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]   .account-count[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);margin-right:8px}']}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(z)],f.Bz]}),e})();var Y=l(62279);let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,b.u5,i.Pc,Q,Y.m]]}),e})()},52562:(O,h,l)=>{l.d(h,{$:()=>b});var g=l(29863);let b=(()=>{class i{constructor(){}compareStrings(a,t){return a||t?a?t?a.localeCompare(t,"ar",{numeric:!0,sensitivity:"base",caseFirst:"lower"}):1:-1:0}compareNumbers(a,t){return(parseFloat(null==a?void 0:a.toString())||0)-(parseFloat(null==t?void 0:t.toString())||0)}compareDates(a,t){const u=new Date(a),p=new Date(t);return u.getTime()-p.getTime()}sortData(a,t,u){return a&&0!==a.length?[...a].sort((C,x)=>{let d=0;const s=C[t],_=x[t];return null==s&&null==_?0:null==s?"asc"===u?-1:1:null==_?"asc"===u?1:-1:(d=this.isDateColumn(t)||this.isDateValue(s)?this.compareDates(s,_):this.isNumericColumn(t)||this.isNumericValue(s)?this.compareNumbers(s,_):this.compareStrings(String(s),String(_)),"desc"===u?-d:d)}):a}isDateColumn(a){return["j_date","pay_date","date","created_at","updated_at"].includes(a)}isDateValue(a){return"string"==typeof a?/^\d{4}-\d{2}-\d{2}$|^\d{2}\/\d{2}\/\d{4}$/.test(a)||!isNaN(Date.parse(a)):a instanceof Date}isNumericColumn(a){return["amount","total","balance","price","quantity","qty","tot_pr","discount","pay","changee","sub_balance","current_balance","opening_balance","debit","credit","j_pay","perch_price","pay_price","id"].some(u=>a.toLowerCase().includes(u))}isNumericValue(a){return!isNaN(parseFloat(a))&&isFinite(a)}getSortIcon(a,t){return t&&t.column===a?"asc"===t.direction?"chevron-up-outline":"chevron-down-outline":"swap-vertical-outline"}getNextSortDirection(a,t){return t&&t.column===a&&"asc"===t.direction?"desc":"asc"}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);