"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8709],{88709:(A,m,s)=>{s.d(m,{r:()=>j});var u=s(70655),t=s(29863),h=s(91472),r=s(23349),_=s(69808),f=s(90849),g=s(34182);const b=["amountInput"];function v(i,c){if(1&i&&(t.TgZ(0,"span",39),t._uU(1),t.qZA()),2&i){const n=t.oxw(3);t.xp6(1),t.Oqu(n.formatCustomerBalance(n.getCustomerBalance()))}}function C(i,c){1&i&&(t.TgZ(0,"span",40),t._uU(1,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0631\u0635\u064a\u062f"),t.qZA())}function x(i,c){if(1&i&&(t.TgZ(0,"div",29),t.TgZ(1,"div",30),t.TgZ(2,"div",31),t.TgZ(3,"div",32),t._uU(4,"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"),t.qZA(),t.TgZ(5,"div",33),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",34),t._UZ(8,"ion-icon",35),t.YNc(9,v,2,1,"span",36),t.YNc(10,C,2,0,"span",37),t.qZA(),t.qZA(),t._UZ(11,"div",38),t.qZA()),2&i){const n=t.oxw(2);let e,o;t.xp6(6),t.Oqu(n.getCustomerName()),t.xp6(1),t.uIk("data-status",null==(e=n.getCustomerBalance())?null:e.status),t.xp6(2),t.Q6J("ngIf",n.getCustomerBalance()),t.xp6(1),t.Q6J("ngIf",!n.getCustomerBalance()),t.xp6(1),t.uIk("data-status",(null==(o=n.getCustomerBalance())?null:o.status)||"neutral")}}function M(i,c){1&i&&(t.TgZ(0,"div",41),t._UZ(1,"ion-icon",42),t.TgZ(2,"span"),t._uU(3,"\u0627\u0644\u0645\u0628\u0644\u063a \u0645\u0645\u0644\u0648\u0621 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u0645\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629\u060c \u064a\u0645\u0643\u0646 \u062a\u0639\u062f\u064a\u0644\u0647"),t.qZA(),t.qZA())}function y(i,c){if(1&i&&(t.TgZ(0,"div",43),t._UZ(1,"ion-icon",44),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&i){const n=t.oxw(2);t.xp6(3),t.Oqu(n.getAmountValidationError())}}function O(i,c){if(1&i&&(t.TgZ(0,"ion-select-option",45),t._uU(1),t.qZA()),2&i){const n=c.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.sub_name," ")}}function P(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",1),t.YNc(1,x,12,5,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"input",4),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().jType=o}),t.qZA(),t.TgZ(4,"div",5),t.TgZ(5,"ion-item",6,7),t._UZ(7,"ion-icon",8),t.TgZ(8,"ion-label",9),t._uU(9,"\u0627\u0644\u0645\u0628\u0644\u063a"),t.qZA(),t.TgZ(10,"ion-input",10,11),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().pay=o})("ionInput",function(o){return t.CHM(n),t.oxw().onAmountChange(o)}),t.qZA(),t.qZA(),t.YNc(12,M,4,0,"div",12),t.YNc(13,y,4,1,"div",13),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"ion-item",14),t._UZ(16,"ion-icon",15),t.TgZ(17,"ion-label",9),t._uU(18,"\u0627\u0644\u0645\u0635\u062f\u0631"),t.qZA(),t.TgZ(19,"ion-select",16),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().radioVal=o})("ionChange",function(o){return t.CHM(n),t.oxw().pickAccountBank(o)}),t.TgZ(20,"ion-select-option",17),t._uU(21,"\u0627\u0644\u062e\u0632\u064a\u0646\u0629"),t.qZA(),t.YNc(22,O,2,2,"ion-select-option",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"input",4),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().invoiceData.customerAccount=o}),t.qZA(),t.TgZ(24,"input",4),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().journal.j_date=o}),t.qZA(),t.TgZ(25,"div",19),t.TgZ(26,"ion-item",20),t._UZ(27,"ion-icon",21),t.TgZ(28,"ion-label",9),t._uU(29,"\u0627\u0644\u0628\u064a\u0627\u0646"),t.qZA(),t.TgZ(30,"ion-input",22),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().journal.j_details=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",23),t.TgZ(32,"div",24),t.TgZ(33,"ion-button",25),t.NdJ("click",function(){return t.CHM(n),t.oxw().save()}),t._UZ(34,"ion-icon",26),t._uU(35," \u062d\u0641\u0638 \u0627\u0644\u0642\u064a\u062f "),t.qZA(),t.TgZ(36,"ion-button",27),t.NdJ("click",function(){return t.CHM(n),t.oxw().cancel()}),t._UZ(37,"ion-icon",28),t._uU(38," \u0625\u0644\u063a\u0627\u0621 "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",null==n.invoiceData?null:n.invoiceData.customerAccount),t.xp6(2),t.Q6J("ngModel",n.jType),t.xp6(2),t.ekj("has-error",!n.isValidAmount()&&n.pay>0),t.xp6(2),t.Q6J("color",n.isValidAmount()||0===n.pay?"success":"danger"),t.xp6(3),t.Q6J("ngModel",n.pay),t.xp6(2),t.Q6J("ngIf",n.isValidAmount()||0===n.pay),t.xp6(1),t.Q6J("ngIf",!n.isValidAmount()&&n.pay>0),t.xp6(6),t.Q6J("ngModel",n.radioVal),t.xp6(3),t.Q6J("ngForOf",n.banksAccountArray),t.xp6(1),t.Q6J("ngModel",n.invoiceData.customerAccount),t.xp6(1),t.Q6J("ngModel",n.journal.j_date),t.xp6(6),t.Q6J("ngModel",n.journal.j_details),t.xp6(3),t.Q6J("disabled",!n.isFormValid())}}let j=(()=>{class i{constructor(n,e,o,a,l,d){this.api=n,this.alertController=e,this.loadingController=o,this.toast=a,this.datePipe=l,this.storage=d,this.journalSaved=new t.vpe,this.journalCancelled=new t.vpe,this.jType="2",this.radioVal="1",this.pay=0,this.selectedBankAccount=null,this.banksAccountArray=[],this.journal={},this.payInvo={},this.jdetail_from={},this.jdetail_to={},this.jdetail_fromArr=[],this.jdetail_toArr=[],this.selectedAccountBalance=null,this.sourceAccountBalance=null,this.loadingAccountBalance=!1,this.loadingSourceBalance=!1,this.initializeObjects()}isFormValid(){return!(!(this.jType&&+this.jType>0&&this.pay&&+this.pay>0&&this.isValidAmount()&&this.journal.j_details&&""!==this.journal.j_details.trim()&&this.journal.j_date)||"1"!==this.radioVal&&!this.selectedBankAccount)}isValidAmount(){var n,e;const o=(null===(n=this.invoiceData)||void 0===n?void 0:n.totalAfterDiscount)||(null===(e=this.invoiceData)||void 0===e?void 0:e.invoiceAmount)||0;return this.pay<=o}getAmountValidationError(){var n,e;const o=(null===(n=this.invoiceData)||void 0===n?void 0:n.totalAfterDiscount)||(null===(e=this.invoiceData)||void 0===e?void 0:e.invoiceAmount)||0;return this.pay>o?`\u0627\u0644\u0645\u0628\u0644\u063a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u062a\u062c\u0627\u0648\u0632 ${o.toLocaleString("en-US")}`:""}ngOnInit(){this.invoiceData&&(this.setupForInvoiceData(),this.getBanksAccount())}ngAfterViewInit(){setTimeout(()=>{this.amountInput&&this.amountInput.nativeElement&&this.amountInput.nativeElement.setFocus()},300)}initializeObjects(){this.selectedBankAccount={id:null,ac_id:null,sub_name:null,sub_type:null,sub_code:null,sub_balance:null,store_id:null,debit:null,credit:null,currentType:null},this.payInvo={rec_id:void 0,rec_ref:0,store_id:"",rec_date:"",user_id:"",ac_id:0,rec_detailes:"",rec_pay:0,rec_type:"",yearId:""},this.journal={j_id:void 0,j_ref:"",j_details:"",j_type:"",invo_ref:"",j_desc:"",j_date:"",store_id:"",user_id:"",j_pay:"",standard_details:"",yearId:""}}setupForInvoiceData(){var n;if(!this.invoiceData)return;this.jType="sales"===this.invoiceData.invoiceType?"2":"1",this.pay=this.invoiceData.totalAfterDiscount||this.invoiceData.invoiceAmount;const e="sales"===this.invoiceData.invoiceType?"\u062a\u062d\u0635\u064a\u0644":"\u062f\u0641\u0639",o="sales"===this.invoiceData.invoiceType?"\u0645\u0628\u064a\u0639\u0627\u062a":"\u0645\u0634\u062a\u0631\u064a\u0627\u062a",a=(null===(n=this.invoiceData.customerAccount)||void 0===n?void 0:n.sub_name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",l=this.invoiceData.invoiceDate||this.datePipe.transform(new Date,"dd-MM-yyyy"),d=(this.invoiceData.totalAfterDiscount||this.invoiceData.invoiceAmount).toLocaleString("en-US");this.journal.j_details=`${e} \u0641\u0627\u062a\u0648\u0631\u0629 ${o} ${a} \u0628\u062a\u0627\u0631\u064a\u062e ${l} \u0627\u062c\u0645\u0627\u0644\u064a ${d}`,this.payInvo.store_id=this.invoiceData.store_info.id,this.payInvo.yearId=this.invoiceData.year.id,this.payInvo.user_id=this.invoiceData.user_info.id,this.journal.store_id=this.invoiceData.store_info.id,this.journal.yearId=this.invoiceData.year.id,this.journal.user_id=this.invoiceData.user_info.id,this.journal.invo_ref=this.invoiceData.invoiceRef;let p=new Date;this.payInvo.rec_date=this.datePipe.transform(p,"yyyy-MM-dd"),this.journal.j_date=this.datePipe.transform(p,"yyyy-MM-dd"),this.generateRandom()}getBanksAccount(){!this.invoiceData||this.api.getAllAccounts(this.invoiceData.store_info.id,this.invoiceData.year.id).subscribe(n=>{n&&n.data&&(this.banksAccountArray=n.data.filter(a=>7==a.ac_id),console.log("Banks accounts loaded:",this.banksAccountArray))},n=>{console.log("Error loading accounts:",n)})}pickAccountBank(n){if(console.log("Bank selection:",n.target.value),"1"==n.target.value)this.selectedBankAccount={id:46,ac_id:7,sub_name:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",sub_type:"",sub_code:"",store_id:this.invoiceData.store_info.id,sub_balance:"",currentType:"",debit:"",credit:""},this.loadSourceBalance(46);else{let e=this.banksAccountArray.filter(o=>o.id==n.target.value);e.length>0&&(this.selectedBankAccount={id:e[0].id,ac_id:e[0].ac_id,sub_name:e[0].sub_name,sub_type:e[0].sub_type,sub_code:e[0].sub_code,store_id:e[0].store_id,sub_balance:e[0].sub_balance,currentType:"",debit:+e[0].debit,credit:+e[0].credit},this.loadSourceBalance(e[0].id))}}generateRandom(){let n=new Date,e=n.getMonth().toString()+n.getDay().toString()+n.getHours().toString()+n.getMinutes().toString()+n.getSeconds().toString()+n.getMilliseconds().toString();this.payInvo.rec_ref=this.invoiceData.store_info.store_ref+"INV"+e,this.journal.j_ref=this.invoiceData.store_info.store_ref+"JO"+e,this.journal.invo_ref=this.payInvo.rec_ref}prepare4save(){this.payInvo.rec_date=this.journal.j_date,this.payInvo.rec_date=this.datePipe.transform(this.payInvo.rec_date,"yyyy-MM-dd");let e=0,o=0;1==+this.jType?(e=+this.pay,this.journal.j_type="\u0633\u0646\u062f \u062f\u0641\u0639"):2==+this.jType&&(o=+this.pay,this.journal.j_type="\u0633\u0646\u062f \u0642\u0628\u0636"),this.journal.j_pay=+this.pay;let a="",l="";1==+this.jType?(1==+this.radioVal?(this.jdetail_to={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:46,j_desc:"",j_type:"\u0633\u0646\u062f \u062f\u0641\u0639",credit:this.pay,debit:0,store_id:this.invoiceData.store_info.id,yearId:this.invoiceData.year.id},l="\u0627\u0644\u062e\u0632\u064a\u0646\u0629"):(this.jdetail_to={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:this.selectedBankAccount.id,j_desc:"",j_type:"\u0633\u0646\u062f \u062f\u0641\u0639",credit:this.pay,debit:0,store_id:this.invoiceData.store_info.id,yearId:this.invoiceData.year.id},l=this.selectedBankAccount.sub_name),a=this.invoiceData.customerAccount.sub_name,this.jdetail_toArr.push(this.jdetail_to)):2==+this.jType&&(1==+this.radioVal?(this.jdetail_from={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:46,j_desc:"",j_type:"\u0633\u0646\u062f \u0642\u0628\u0636",credit:0,debit:this.pay,store_id:this.invoiceData.store_info.id,yearId:this.invoiceData.year.id},a="\u0627\u0644\u062e\u0632\u064a\u0646\u0629"):(this.jdetail_from={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:this.selectedBankAccount.id,j_desc:"",j_type:"\u0633\u0646\u062f \u0642\u0628\u0636",credit:0,debit:+this.pay,store_id:this.invoiceData.store_info.id,yearId:this.invoiceData.year.id},a=this.selectedBankAccount.sub_name),l=this.invoiceData.customerAccount.sub_name,this.jdetail_fromArr.push(this.jdetail_from));const d={id:"NULL",j_id:this.journal.j_id,j_ref:this.journal.j_ref,ac_id:this.invoiceData.customerAccount.id,j_desc:this.invoiceData.customerAccount.sub_type,j_type:this.journal.j_type,credit:1==+this.jType?o:0,debit:1==+this.jType?0:e,store_id:this.invoiceData.store_info.id,sub_code:this.invoiceData.customerAccount.sub_code,sub_name:this.invoiceData.customerAccount.sub_name,yearId:this.invoiceData.year.id};1==+this.jType?this.jdetail_fromArr.push(d):this.jdetail_toArr.push(d),this.journal.standard_details="\u0645\u0646 \u062d\u0633\u0627\u0628 "+a+" \u0627\u0644\u064a \u062d\u0633\u0627\u0628 "+l}save(){return(0,u.mG)(this,void 0,void 0,function*(){this.isFormValid()?(this.prepare4save(),yield this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a..."),this.saveJournal()):this.isValidAmount()?this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0643\u0645\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629","danger"):this.presentToast(this.getAmountValidationError(),"danger")})}saveJournal(){this.api.saveJournal(this.journal).subscribe(n=>{if("Post Not Created"!=n.message){for(let e=0;e<this.jdetail_fromArr.length;e++)this.jdetail_fromArr[e].j_id=n.message;for(let e=0;e<this.jdetail_toArr.length;e++)this.jdetail_toArr[e].j_id=n.message;this.saveJournalDetails()}else this.loadingController.dismiss(),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger")},n=>{this.loadingController.dismiss(),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger")})}saveJournalDetails(){this.jdetail_fromArr.length>0?this.api.saveJournalFrom(this.jdetail_fromArr).subscribe(n=>{"Post Not Created"!=n.message?this.jdetail_toArr.length>0?this.saveJournalTo():this.handleSaveSuccess():(this.loadingController.dismiss(),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger"))},n=>{this.loadingController.dismiss(),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger")}):this.jdetail_toArr.length>0&&this.saveJournalTo()}saveJournalTo(){this.api.saveJournalTo(this.jdetail_toArr).subscribe(n=>{"Post Not Created"!=n.message?this.handleSaveSuccess():(this.loadingController.dismiss(),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger"))},n=>{this.loadingController.dismiss(),this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","danger")})}handleSaveSuccess(){this.loadingController.dismiss(),this.presentToast("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0642\u064a\u062f \u0628\u0646\u062c\u0627\u062d","success"),this.journalSaved.emit(!0)}cancel(){this.journalCancelled.emit()}getCurrentAmount(){return this.pay||0}onAmountChange(n){this.pay=parseFloat(n.target.value)||0}getTransactionTypeText(){var n;return"sales"===(null===(n=this.invoiceData)||void 0===n?void 0:n.invoiceType)?"\u0633\u0646\u062f \u0642\u0628\u0636":"\u0633\u0646\u062f \u062f\u0641\u0639"}getCustomerName(){var n,e;return(null===(e=null===(n=this.invoiceData)||void 0===n?void 0:n.customerAccount)||void 0===e?void 0:e.sub_name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}getCustomerBalance(){var n;return(null===(n=this.invoiceData)||void 0===n?void 0:n.customerBalance)||null}formatCustomerBalance(n){return n?`${Math.abs(parseFloat(n.current_balance||0)).toFixed(2)} ${"debit"===n.status?"\u0645\u062f\u064a\u0646":"\u062f\u0627\u0626\u0646"}`:"0.00"}getCustomerBalanceColor(n){return n?"debit"===n.status?"success":"danger":"medium"}loadSourceBalance(n){!n||!this.invoiceData||(this.loadingSourceBalance=!0,this.sourceAccountBalance=null,this.api.getAccountBalance(n,this.invoiceData.store_info.id,this.invoiceData.year.id).subscribe(e=>{this.loadingSourceBalance=!1,e.success&&(this.sourceAccountBalance=e.data)},e=>{this.loadingSourceBalance=!1,this.sourceAccountBalance=null}))}formatBalance(n){return n?`${parseFloat(n.current_balance||0).toFixed(2)} ${"debit"===n.balance_type?"\u0645\u062f\u064a\u0646":"\u062f\u0627\u0626\u0646"}`:"0.00"}getBalanceColor(n){return n?"debit"===n.balance_type?"success":"danger":"medium"}presentToast(n,e){return(0,u.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:n,duration:2e3,color:e,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}presentLoadingWithOptions(n){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.loadingController.create({spinner:"bubbles",mode:"ios",message:n,translucent:!0,backdropDismiss:!1})).present()})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(h.r),t.Y36(r.Br),t.Y36(r.HT),t.Y36(r.yF),t.Y36(_.uU),t.Y36(f.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-invoice-journal-entry"]],viewQuery:function(n,e){if(1&n&&t.Gf(b,5),2&n){let o;t.iGM(o=t.CRH())&&(e.amountInput=o.first)}},inputs:{invoiceData:"invoiceData"},outputs:{journalSaved:"journalSaved",journalCancelled:"journalCancelled"},decls:1,vars:1,consts:[["class","journal-entry-main",4,"ngIf"],[1,"journal-entry-main"],["class","balance-header-card",4,"ngIf"],[1,"content-wrapper"],["type","hidden",3,"ngModel","ngModelChange"],[1,"form-section"],[1,"form-item","amount-item"],["amountItemRef",""],["name","cash-outline","slot","start",3,"color"],["slot","start",1,"inline-label"],["type","number","placeholder","0.00",1,"amount-input",3,"ngModel","ngModelChange","ionInput"],["amountInput",""],["class","info-note",4,"ngIf"],["class","error-note",4,"ngIf"],[1,"form-item"],["name","wallet-outline","slot","start","color","primary"],["placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0635\u062f\u0631","interface","action-sheet",3,"ngModel","ngModelChange","ionChange"],["value","1"],[3,"value",4,"ngFor","ngForOf"],[1,"form-section","last-field"],[1,"form-item","description-item"],["name","document-text-outline","slot","start","color","tertiary"],["placeholder","\u0648\u0635\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629...","readonly","true",3,"ngModel","ngModelChange"],[1,"inline-buttons-section"],[1,"buttons-row"],["fill","outline","color","primary",1,"primary-btn",3,"disabled","click"],["name","checkmark-circle-outline","slot","start"],["fill","outline",1,"secondary-btn",3,"click"],["name","close-circle-outline","slot","start"],[1,"balance-header-card"],[1,"balance-content"],[1,"balance-info"],[1,"balance-label"],[1,"customer-name"],[1,"balance-amount"],["name","wallet-outline",1,"balance-icon"],["class","amount-text",4,"ngIf"],["class","amount-text no-balance",4,"ngIf"],[1,"balance-indicator"],[1,"amount-text"],[1,"amount-text","no-balance"],[1,"info-note"],["name","information-circle-outline","color","medium"],[1,"error-note"],["name","warning-outline","color","danger"],[3,"value"]],template:function(n,e){1&n&&t.YNc(0,P,39,14,"div",0),2&n&&t.Q6J("ngIf",e.invoiceData)},directives:[_.O5,g.Fj,g.JJ,g.On,r.Ie,r.gu,r.Q$,r.pK,r.as,r.t9,r.QI,r.n0,_.sg,r.j9,r.YG],styles:['.journal-entry-main[_ngcontent-%COMP%]{width:100%;max-width:500px;min-width:320px;height:auto;max-height:85vh;background:#f8fafc;direction:rtl;overflow:hidden;display:flex;flex-direction:column;margin:0 auto}.balance-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff 0%,#f8fafc 100%);border-radius:0 0 20px 20px;padding:16px;margin-bottom:12px;box-shadow:0 4px 20px #00000014;border:1px solid #e2e8f0;border-top:none;position:relative;overflow:hidden}.balance-header-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#10b981,#059669)}.balance-header-card[_ngcontent-%COMP%]   .balance-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:2}.balance-header-card[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]{flex:1}.balance-header-card[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .balance-label[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;font-weight:500;margin-bottom:4px}.balance-header-card[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1f2937;line-height:1.3}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:rgba(255,255,255,.8);border-radius:16px;border:1px solid #e2e8f0;box-shadow:0 2px 8px #0000000d}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=debit][_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7 0%,#f0fdf4 100%);border-color:#bbf7d0}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=debit][_ngcontent-%COMP%]   .balance-icon[_ngcontent-%COMP%], .balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=debit][_ngcontent-%COMP%]   .amount-text[_ngcontent-%COMP%]{color:#059669}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=credit][_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2 0%,#fef7f7 100%);border-color:#fecaca}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=credit][_ngcontent-%COMP%]   .balance-icon[_ngcontent-%COMP%], .balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=credit][_ngcontent-%COMP%]   .amount-text[_ngcontent-%COMP%]{color:#dc2626}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=neutral][_ngcontent-%COMP%]{background:linear-gradient(135deg,#f1f5f9 0%,#f8fafc 100%);border-color:#cbd5e1}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=neutral][_ngcontent-%COMP%]   .balance-icon[_ngcontent-%COMP%], .balance-header-card[_ngcontent-%COMP%]   .balance-amount[data-status=neutral][_ngcontent-%COMP%]   .amount-text[_ngcontent-%COMP%]{color:#64748b}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[_ngcontent-%COMP%]   .balance-icon[_ngcontent-%COMP%]{font-size:1.2rem}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[_ngcontent-%COMP%]   .amount-text[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;white-space:nowrap}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[_ngcontent-%COMP%]   .amount-text.no-balance[_ngcontent-%COMP%]{font-style:italic;opacity:.8}.balance-header-card[_ngcontent-%COMP%]   .balance-indicator[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;width:4px;border-radius:0 2px 2px 0}.balance-header-card[_ngcontent-%COMP%]   .balance-indicator[data-status=debit][_ngcontent-%COMP%]{background:linear-gradient(180deg,#10b981,#059669)}.balance-header-card[_ngcontent-%COMP%]   .balance-indicator[data-status=credit][_ngcontent-%COMP%]{background:linear-gradient(180deg,#ef4444,#dc2626)}.balance-header-card[_ngcontent-%COMP%]   .balance-indicator[data-status=neutral][_ngcontent-%COMP%]{background:linear-gradient(180deg,#64748b,#475569)}.balance-header-card[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:-50px;width:100px;height:100px;background:radial-gradient(circle,rgba(16,185,129,.05) 0%,transparent 70%);border-radius:50%;z-index:1}.content-wrapper[_ngcontent-%COMP%]{padding:12px 16px 8px;width:100%;overflow-y:auto;max-height:calc(85vh - 100px);flex:1}.content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:2px}.content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.form-section[_ngcontent-%COMP%]{margin-bottom:16px;animation:slideInUp .4s ease-out}.form-section.last-field[_ngcontent-%COMP%]{margin-bottom:12px}.form-section[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:var(--ion-color-dark);margin-bottom:8px;font-size:1rem}.form-section[_ngcontent-%COMP%]   .inline-label[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-dark);font-size:.95rem;min-width:60px;max-width:80px;margin-left:12px;margin-right:8px;text-align:right;white-space:nowrap;flex-shrink:0}.form-item[_ngcontent-%COMP%]{--background: white;--border-radius: 16px;--padding-start: 16px;--padding-end: 16px;--min-height: 48px;border:2px solid #e2e8f0;box-shadow:0 2px 8px #0000000f;transition:all .3s ease;align-items:center}.form-item[_ngcontent-%COMP%]:hover, .form-item.item-has-focus[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.15)}.form-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:12px;font-size:1.2em}.form-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--color: var(--ion-color-dark);font-weight:500}.form-item.readonly-item[_ngcontent-%COMP%]{--background: #f1f5f9;border-color:#cbd5e1;opacity:.8}.form-item.readonly-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:500}.form-item.amount-item[_ngcontent-%COMP%]{border-color:#10b981;border-width:3px;box-shadow:0 4px 20px #10b98133;background:linear-gradient(135deg,#f0fdf4 0%,#ecfdf5 100%)}.form-item.amount-item[_ngcontent-%COMP%]:hover, .form-item.amount-item.item-has-focus[_ngcontent-%COMP%]{border-color:#059669;box-shadow:0 6px 30px #10b9814d;transform:translateY(-2px)}.form-item.amount-item[_ngcontent-%COMP%]   .inline-label[_ngcontent-%COMP%]{color:#059669;font-weight:700}.form-item.amount-item[_ngcontent-%COMP%]   .amount-input[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;text-align:right;--color: #059669;--placeholder-color: #86efac}.form-item.amount-item[_ngcontent-%COMP%]   .amount-input[_ngcontent-%COMP%]:focus{animation:amountPulse .6s ease-in-out}.form-item.amount-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-weight:600;color:#10b981;font-size:1.1em}.form-item.description-item[_ngcontent-%COMP%]{--min-height: auto}.form-item.description-item[_ngcontent-%COMP%]   .inline-label[_ngcontent-%COMP%]{color:var(--ion-color-tertiary);font-weight:600}.form-item.description-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:right}.form-item.description-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px;line-height:1.5}.info-note[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:rgba(var(--ion-color-primary-rgb),.05);border-radius:12px;display:flex;align-items:center;gap:8px;font-size:.85em;color:var(--ion-color-medium)}.info-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1em;flex-shrink:0}.info-note[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.4}.error-note[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:rgba(var(--ion-color-danger-rgb),.05);border-radius:12px;display:flex;align-items:center;gap:8px;font-size:.85em;color:var(--ion-color-danger)}.error-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1em;flex-shrink:0}.error-note[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.4}.inline-buttons-section[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px}.inline-buttons-section[_ngcontent-%COMP%]   .buttons-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between}.primary-btn[_ngcontent-%COMP%]{--border-color: var(--ion-color-primary);--color: var(--ion-color-primary);--border-radius: 14px;height:48px;font-weight:600;font-size:.95rem;flex:1;margin:0;box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.2)}.primary-btn[_ngcontent-%COMP%]:not([disabled]):hover{--background: rgba(var(--ion-color-primary-rgb), .1);transform:translateY(-1px);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.3)}.primary-btn[disabled][_ngcontent-%COMP%]{opacity:.5;--color: #9ca3af;--border-color: #9ca3af;transform:none;box-shadow:none}.primary-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1em;margin-left:6px}.secondary-btn[_ngcontent-%COMP%]{--color: #6b7280;--border-color: #d1d5db;--border-radius: 14px;height:48px;font-weight:500;font-size:.9rem;flex:1;margin:0;box-shadow:0 2px 8px #0000001a}.secondary-btn[_ngcontent-%COMP%]:hover{--color: var(--ion-color-danger);--border-color: var(--ion-color-danger);--background: rgba(var(--ion-color-danger-rgb), .05);transform:translateY(-1px);box-shadow:0 4px 16px rgba(var(--ion-color-danger-rgb),.2)}.secondary-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1em;margin-left:6px}@media (max-width: 768px){.balance-header-card[_ngcontent-%COMP%]{padding:16px;margin-bottom:12px;border-radius:0 0 20px 20px}.balance-header-card[_ngcontent-%COMP%]   .balance-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.balance-header-card[_ngcontent-%COMP%]   .balance-info[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:1rem}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[_ngcontent-%COMP%]{align-self:stretch;justify-content:center;padding:10px 14px}.balance-header-card[_ngcontent-%COMP%]   .balance-amount[_ngcontent-%COMP%]   .amount-text[_ngcontent-%COMP%]{font-size:.95rem}.content-wrapper[_ngcontent-%COMP%]{padding:12px 16px}.form-section[_ngcontent-%COMP%]{margin-bottom:16px}.form-section.last-field[_ngcontent-%COMP%]{margin-bottom:12px}.inline-buttons-section[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.inline-buttons-section[_ngcontent-%COMP%]   .buttons-row[_ngcontent-%COMP%]{gap:8px}.primary-btn[_ngcontent-%COMP%], .secondary-btn[_ngcontent-%COMP%]{height:48px;font-size:.9em}.primary-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .secondary-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1em;margin-left:4px}}@keyframes slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes amountPulse{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.form-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.inline-buttons-section[_ngcontent-%COMP%]{animation-delay:.4s;animation:slideInUp .4s ease-out}*[_ngcontent-%COMP%]{box-sizing:border-box}']}),i})()}}]);