"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4811],{34811:(Ve,Z,d)=>{d.r(Z),d.d(Z,{ItemStockPageModule:()=>Oe});var p=d(69808),m=d(34182),_=d(23349),S=d(43189),f=d(94030),g=d(70655),T=d(43489),b=d(16014);class C{constructor(a,e){this.dueTime=a,this.scheduler=e}call(a,e){return e.subscribe(new P(a,this.dueTime,this.scheduler))}}class P extends T.L{constructor(a,e,i){super(a),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(I,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:a}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(a)}}clearDebounce(){const a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)}}function I(o){o.debouncedNext()}var k=d(75778),M=d(5529),v=d(3671),x=d(15439),w=d(20683),t=d(29863),q=d(31111),O=d(63834),J=d(17158),Q=d(90849),U=d(91472),F=d(79002),N=d(6612),D=d(12317),L=d(90733),V=d(1212);const B=["actionPopover"],H=["popoverNotif33"],E=["exceltable"];function Y(o,a){1&o&&(t.TgZ(0,"ion-label"),t.TgZ(1,"ion-text"),t.TgZ(2,"strong"),t._uU(3,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 : "),t.qZA(),t.qZA(),t.qZA())}function W(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.ALo(2,"currencyDisplay"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.stockValuePayPrice))}}function $(o,a){1&o&&(t.TgZ(0,"ion-text"),t._UZ(1,"ion-skeleton-text",51),t.qZA())}function z(o,a){if(1&o&&(t.TgZ(0,"ion-label"),t.YNc(1,W,3,3,"ion-text",18),t.YNc(2,$,2,0,"ion-text",18),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0==e.loadingStockTotals),t.xp6(1),t.Q6J("ngIf",1==e.loadingStockTotals)}}function j(o,a){1&o&&(t.TgZ(0,"ion-label"),t.TgZ(1,"ion-text"),t.TgZ(2,"strong"),t._uU(3,"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 : "),t.qZA(),t.qZA(),t.qZA())}function R(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.ALo(2,"currencyDisplay"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.stockValuePerchPrice))}}function G(o,a){1&o&&(t.TgZ(0,"ion-text"),t._UZ(1,"ion-skeleton-text",51),t.qZA())}function K(o,a){if(1&o&&(t.TgZ(0,"ion-label"),t.YNc(1,R,3,3,"ion-text",18),t.YNc(2,G,2,0,"ion-text",18),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0==e.loadingStockTotals),t.xp6(1),t.Q6J("ngIf",1==e.loadingStockTotals)}}function X(o,a){if(1&o&&(t.TgZ(0,"ion-badge",52),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.filterState.brand.selectedBrands.length," ")}}function tt(o,a){if(1&o&&(t.TgZ(0,"ion-badge",52),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.filterState.model.selectedModels.length," ")}}function et(o,a){1&o&&(t.TgZ(0,"ion-badge",52),t._uU(1,"1"),t.qZA())}function it(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearAllFilters()}),t._UZ(1,"ion-icon",54),t._uU(2," \u0625\u0644\u063a\u0627\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0644\u0627\u062a\u0631 "),t.qZA()}}function nt(o,a){1&o&&t._UZ(0,"ion-spinner",55)}function ot(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",68),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).toggleBrandSelection(s)}),t.TgZ(1,"ion-checkbox",69),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.selected=n})("ionChange",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onBrandSelectionChange(s)}),t.qZA(),t.TgZ(2,"ion-label"),t._uU(3),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngModel",e.selected),t.xp6(2),t.Oqu(e.brand)}}function st(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",56),t.TgZ(1,"div",57),t.TgZ(2,"h4"),t._uU(3,"\u0641\u0644\u062a\u0631 \u0627\u0644\u0645\u0627\u0631\u0643\u0629"),t.qZA(),t.TgZ(4,"ion-button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().hideBrandFilter()}),t._UZ(5,"ion-icon",59),t.qZA(),t.qZA(),t.TgZ(6,"div",60),t.TgZ(7,"ion-item"),t.TgZ(8,"ion-input",61),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().brandSearchTerm=n})("ionInput",function(n){return t.CHM(e),t.oxw().onBrandSearchInput(n)}),t._UZ(9,"ion-icon",62),t.qZA(),t.qZA(),t.TgZ(10,"div",63),t.YNc(11,ot,4,2,"ion-item",64),t.qZA(),t.TgZ(12,"div",65),t.TgZ(13,"ion-button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearBrandFilter()}),t._uU(14," \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u062d\u062f\u064a\u062f "),t.qZA(),t.TgZ(15,"ion-button",67),t.NdJ("click",function(){return t.CHM(e),t.oxw().applyBrandFilter()}),t._uU(16," \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0641\u0644\u062a\u0631 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("ngModel",e.brandSearchTerm),t.xp6(3),t.Q6J("ngForOf",e.filteredAvailableBrands)}}function rt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",68),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).toggleModelSelection(s)}),t.TgZ(1,"ion-checkbox",69),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.selected=n})("ionChange",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onModelSelectionChange(s)}),t.qZA(),t.TgZ(2,"ion-label"),t._uU(3),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngModel",e.selected),t.xp6(2),t.Oqu(e.model)}}function at(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",56),t.TgZ(1,"div",57),t.TgZ(2,"h4"),t._uU(3,"\u0641\u0644\u062a\u0631 \u0627\u0644\u0645\u0648\u062f\u064a\u0644"),t.qZA(),t.TgZ(4,"ion-button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().hideModelFilter()}),t._UZ(5,"ion-icon",59),t.qZA(),t.qZA(),t.TgZ(6,"div",60),t.TgZ(7,"ion-item"),t.TgZ(8,"ion-input",70),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().modelSearchTerm=n})("ionInput",function(n){return t.CHM(e),t.oxw().onModelSearchInput(n)}),t._UZ(9,"ion-icon",62),t.qZA(),t.qZA(),t.TgZ(10,"div",63),t.YNc(11,rt,4,2,"ion-item",64),t.qZA(),t.TgZ(12,"div",65),t.TgZ(13,"ion-button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearModelFilter()}),t._uU(14," \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u062d\u062f\u064a\u062f "),t.qZA(),t.TgZ(15,"ion-button",67),t.NdJ("click",function(){return t.CHM(e),t.oxw().applyModelFilter()}),t._uU(16," \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0641\u0644\u062a\u0631 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("ngModel",e.modelSearchTerm),t.xp6(3),t.Q6J("ngForOf",e.filteredAvailableModels)}}function ct(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",56),t.TgZ(1,"div",57),t.TgZ(2,"h4"),t._uU(3,"\u0641\u0644\u062a\u0631 \u0627\u0644\u0643\u0645\u064a\u0629"),t.qZA(),t.TgZ(4,"ion-button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().hideQuantityFilter()}),t._UZ(5,"ion-icon",59),t.qZA(),t.qZA(),t.TgZ(6,"div",60),t.TgZ(7,"ion-radio-group",71),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterState.quantity.filterType=n})("ionChange",function(n){return t.CHM(e),t.oxw().onQuantityFilterChange(n)}),t.TgZ(8,"div",72),t.TgZ(9,"ion-item",73),t.NdJ("click",function(){return t.CHM(e),t.oxw().selectQuantityFilter("positive")}),t._UZ(10,"ion-icon",74),t.TgZ(11,"ion-label"),t.TgZ(12,"h3"),t._uU(13,"\u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631 (>0)"),t.qZA(),t.TgZ(14,"p"),t._uU(15,"\u0639\u0631\u0636 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u062a\u064a \u0644\u0647\u0627 \u0643\u0645\u064a\u0629 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631"),t.qZA(),t.qZA(),t._UZ(16,"ion-radio",75),t.qZA(),t.TgZ(17,"ion-item",73),t.NdJ("click",function(){return t.CHM(e),t.oxw().selectQuantityFilter("zero")}),t._UZ(18,"ion-icon",76),t.TgZ(19,"ion-label"),t.TgZ(20,"h3"),t._uU(21,"\u064a\u0633\u0627\u0648\u064a \u0635\u0641\u0631 (=0)"),t.qZA(),t.TgZ(22,"p"),t._uU(23,"\u0639\u0631\u0636 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u062a\u064a \u0644\u0647\u0627 \u0643\u0645\u064a\u0629 \u062a\u0633\u0627\u0648\u064a \u0635\u0641\u0631"),t.qZA(),t.qZA(),t._UZ(24,"ion-radio",77),t.qZA(),t.TgZ(25,"ion-item",73),t.NdJ("click",function(){return t.CHM(e),t.oxw().selectQuantityFilter("negative")}),t._UZ(26,"ion-icon",78),t.TgZ(27,"ion-label"),t.TgZ(28,"h3"),t._uU(29,"\u0623\u0642\u0644 \u0645\u0646 \u0635\u0641\u0631 (<0)"),t.qZA(),t.TgZ(30,"p"),t._uU(31,"\u0639\u0631\u0636 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u062a\u064a \u0644\u0647\u0627 \u0643\u0645\u064a\u0629 \u0623\u0642\u0644 \u0645\u0646 \u0635\u0641\u0631 (\u0633\u0627\u0644\u0628\u0629)"),t.qZA(),t.qZA(),t._UZ(32,"ion-radio",79),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",65),t.TgZ(34,"ion-button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearQuantityFilter()}),t._uU(35," \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u062d\u062f\u064a\u062f "),t.qZA(),t.TgZ(36,"ion-button",67),t.NdJ("click",function(){return t.CHM(e),t.oxw().applyQuantityFilter()}),t._uU(37," \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0641\u0644\u062a\u0631 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.filterState.quantity.filterType),t.xp6(2),t.ekj("selected","positive"===e.filterState.quantity.filterType),t.xp6(8),t.ekj("selected","zero"===e.filterState.quantity.filterType),t.xp6(8),t.ekj("selected","negative"===e.filterState.quantity.filterType)}}function lt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",80),t.TgZ(1,"ion-row",5),t.TgZ(2,"ion-col",6),t.TgZ(3,"div",81),t.TgZ(4,"div",82),t.TgZ(5,"ion-grid"),t.TgZ(6,"ion-row",83),t.TgZ(7,"ion-col",84),t.TgZ(8,"div",85),t.TgZ(9,"div",86),t._uU(10),t.qZA(),t.TgZ(11,"span",87),t._uU(12," \u0639\u0646\u0635\u0631 \u0645\u062d\u062f\u062f "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"ion-col",84),t.TgZ(14,"div",88),t.TgZ(15,"ion-button",89),t.NdJ("click",function(){return t.CHM(e),t.oxw().createPurchaseFromSelected()}),t._UZ(16,"ion-icon",90),t._uU(17," \u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629 \u0634\u0631\u0627\u0621 "),t.qZA(),t.TgZ(18,"ion-button",91),t.NdJ("click",function(){return t.CHM(e),t.oxw().createSalesFromSelected()}),t._UZ(19,"ion-icon",92),t._uU(20," \u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u064a\u0639 "),t.qZA(),t.TgZ(21,"ion-button",91),t.NdJ("click",function(){return t.CHM(e),t.oxw().createTsiaFromSelected()}),t._UZ(22,"ion-icon",92),t._uU(23," \u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a "),t.qZA(),t.TgZ(24,"ion-button",93),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearSelectionWithAnimation()}),t._UZ(25,"ion-icon",94),t._uU(26," \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u062d\u062f\u064a\u062f "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(10),t.hij(" ",e.selectedItemsList.length," ")}}function ut(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0635\u0646\u0627\u0641"),t.qZA())}function _t(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0628\u062d\u062b"),t.qZA())}function dt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u0645\u0641\u0644\u062a\u0631\u0629"),t.qZA())}const l=function(o,a){return{hideMe:o,showMe:a}};function gt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t.TgZ(2,"ion-checkbox",95),t.NdJ("ionChange",function(n){return t.CHM(e),t.oxw().toggleSelectAll(n)}),t.qZA(),t.qZA(),t.TgZ(3,"th"),t._uU(4," \u0627\u0644\u062a\u0633\u0644\u0633\u0644 "),t.TgZ(5,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("id")}),t._UZ(6,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(7,"th",98),t._uU(8," \u0627\u0644\u0635\u0646\u0641 "),t.TgZ(9,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("item_name")}),t._UZ(10,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(11,"th",98),t._uU(12,"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641 (English) "),t.TgZ(13,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("item_desc")}),t._UZ(14,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(15,"th",98),t._uU(16,"\u0627\u0633\u0645 \u0645\u0633\u062a\u0639\u0627\u0631 (Alias) "),t.TgZ(17,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("aliasEn")}),t._UZ(18,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(19,"th",98),t._uU(20,"\u0627\u0644\u0645\u0648\u062f\u064a\u0644 (model) "),t.TgZ(21,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("model")}),t._UZ(22,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(23,"th",98),t._uU(24,"\u0627\u0644\u0643\u0648\u062f (part no) "),t.TgZ(25,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("part_no")}),t._UZ(26,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(27,"th",98),t._uU(28,"\u0627\u0644\u0645\u0627\u0631\u0643\u0629 (brand) "),t.TgZ(29,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("brand")}),t._UZ(30,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(31,"th",98),t._uU(32,"\u0627\u0642\u0644 \u0643\u0645\u064a\u0629 (MSQ) "),t.TgZ(33,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("min_qty")}),t._UZ(34,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(35,"th",98),t._uU(36,"\u0627\u0644\u0648\u062d\u062f\u0647 (unit) "),t.TgZ(37,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("item_unit")}),t._UZ(38,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(39,"th",98),t._uU(40),t.TgZ(41,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("perch_price")}),t._UZ(42,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(43,"th",98),t._uU(44),t.TgZ(45,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("pay_price")}),t._UZ(46,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(47,"th",98),t._uU(48,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0641\u0627\u0626\u062f\u0629 (profit perc) "),t.TgZ(49,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("profit")}),t._UZ(50,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(51,"th",98),t._uU(52,"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 (in stock) "),t.TgZ(53,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("quantity")}),t._UZ(54,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(55,"th",98),t._uU(56),t.TgZ(57,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("total")}),t._UZ(58,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(59,"th",98),t._uU(60,"\u0627\u062e\u0631 \u0639\u0645\u0644\u064a\u0629 \u0628\u064a\u0639 "),t.TgZ(61,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw().sortData("lastSold")}),t._UZ(62,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(63,"th"),t._uU(64,"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0625\u0641\u062a\u062a\u0627\u062d\u064a"),t.qZA(),t.TgZ(65,"th",98),t.TgZ(66,"strong"),t._uU(67,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("checked",e.isAllSelected())("indeterminate",e.isSomeSelected()),t.xp6(4),t.Q6J("name",e.getSortIcon("id")),t.xp6(1),t.Q6J("ngClass",t.WLB(35,l,0==e.colSetting.item_name,1==e.colSetting.item_name)),t.xp6(3),t.Q6J("name",e.getSortIcon("item_name")),t.xp6(1),t.Q6J("ngClass",t.WLB(38,l,0==e.colSetting.item_desc,1==e.colSetting.item_desc)),t.xp6(3),t.Q6J("name",e.getSortIcon("item_desc")),t.xp6(1),t.Q6J("ngClass",t.WLB(41,l,0==e.colSetting.aliasEn,1==e.colSetting.aliasEn)),t.xp6(3),t.Q6J("name",e.getSortIcon("aliasEn")),t.xp6(1),t.Q6J("ngClass",t.WLB(44,l,0==e.colSetting.model,1==e.colSetting.model)),t.xp6(3),t.Q6J("name",e.getSortIcon("model")),t.xp6(1),t.Q6J("ngClass",t.WLB(47,l,0==e.colSetting.part_no,1==e.colSetting.part_no)),t.xp6(3),t.Q6J("name",e.getSortIcon("part_no")),t.xp6(1),t.Q6J("ngClass",t.WLB(50,l,0==e.colSetting.brand,1==e.colSetting.brand)),t.xp6(3),t.Q6J("name",e.getSortIcon("brand")),t.xp6(1),t.Q6J("ngClass",t.WLB(53,l,0==e.colSetting.min_qty,1==e.colSetting.min_qty)),t.xp6(3),t.Q6J("name",e.getSortIcon("min_qty")),t.xp6(1),t.Q6J("ngClass",t.WLB(56,l,0==e.colSetting.item_unit,1==e.colSetting.item_unit)),t.xp6(3),t.Q6J("name",e.getSortIcon("item_unit")),t.xp6(1),t.Q6J("ngClass",t.WLB(59,l,0==e.colSetting.perch_price,1==e.colSetting.perch_price)),t.xp6(1),t.hij("\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 (",e.getCurrencySymbol(),") "),t.xp6(2),t.Q6J("name",e.getSortIcon("perch_price")),t.xp6(1),t.Q6J("ngClass",t.WLB(62,l,0==e.colSetting.pay_price,1==e.colSetting.pay_price)),t.xp6(1),t.hij("\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0647 (",e.getCurrencySymbol(),") "),t.xp6(2),t.Q6J("name",e.getSortIcon("pay_price")),t.xp6(1),t.Q6J("ngClass",t.WLB(65,l,0==e.colSetting.profit,1==e.colSetting.profit)),t.xp6(3),t.Q6J("name",e.getSortIcon("profit")),t.xp6(1),t.Q6J("ngClass",t.WLB(68,l,0==e.colSetting.instock,1==e.colSetting.instock)),t.xp6(3),t.Q6J("name",e.getSortIcon("quantity")),t.xp6(1),t.Q6J("ngClass",t.WLB(71,l,0==e.colSetting.total,1==e.colSetting.total)),t.xp6(1),t.hij("\u0627\u0644\u0645\u062c\u0645\u0648\u0639 (",e.getCurrencySymbol(),") "),t.xp6(2),t.Q6J("name",e.getSortIcon("total")),t.xp6(1),t.Q6J("ngClass",t.WLB(74,l,0==e.colSetting.lastSold,1==e.colSetting.lastSold)),t.xp6(3),t.Q6J("name",e.getSortIcon("lastSold")),t.xp6(3),t.Q6J("ngClass",t.WLB(77,l,0==e.colSetting.edit,1==e.colSetting.edit))}}function ht(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_name)}}function pt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.item_name=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.item_name)}}function mt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_desc)}}function ft(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.item_desc=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.item_desc)}}function xt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.aliasEn)}}function Zt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.aliasEn=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.aliasEn)}}function At(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.model)}}function St(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.model=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.model)}}function Tt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.part_no)}}function bt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.part_no=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.part_no)}}function yt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.brand)}}function Ct(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.brand=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.brand)}}function Pt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.min_qty)}}function It(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.min_qty=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.min_qty)}}function kt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_unit)}}function Mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.item_unit=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.item_unit)}}function vt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.ALo(2,"currencyDisplay"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,e.perch_price,"SDG",!1))}}function wt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.perch_price=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.perch_price)}}function qt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.ALo(2,"currencyDisplay"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,e.pay_price,"SDG",!1))}}function Ot(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.pay_price=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.pay_price)}}function Jt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw().editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedItem2.quantity=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.quantity)}}function Qt(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.firstQuantity," ")}}const A=function(o,a){return{red:o,darko:a}};function Ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",99),t.NdJ("dblclick",function(){const n=t.CHM(e),s=n.index,r=n.$implicit;return t.oxw().prClick(s,r)}),t.TgZ(1,"td"),t.TgZ(2,"ion-checkbox",100),t.NdJ("ionChange",function(n){const r=t.CHM(e).$implicit;return t.oxw().toggleItemSelection(r,n)}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",98),t.YNc(6,ht,2,1,"ion-text",18),t.YNc(7,pt,2,1,"ion-item",18),t.qZA(),t.TgZ(8,"td",98),t.YNc(9,mt,2,1,"ion-text",18),t.YNc(10,ft,2,1,"ion-item",18),t.qZA(),t.TgZ(11,"td",98),t.YNc(12,xt,2,1,"ion-text",18),t.YNc(13,Zt,2,1,"ion-item",18),t.qZA(),t.TgZ(14,"td",98),t.YNc(15,At,2,1,"ion-text",18),t.YNc(16,St,2,1,"ion-item",18),t.qZA(),t.TgZ(17,"td",98),t.YNc(18,Tt,2,1,"ion-text",18),t.YNc(19,bt,2,1,"ion-item",18),t.qZA(),t.TgZ(20,"td",98),t.YNc(21,yt,2,1,"ion-text",18),t.YNc(22,Ct,2,1,"ion-item",18),t.qZA(),t.TgZ(23,"td",98),t.YNc(24,Pt,2,1,"ion-text",18),t.YNc(25,It,2,1,"ion-item",18),t.qZA(),t.TgZ(26,"td",98),t.YNc(27,kt,2,1,"ion-text",18),t.YNc(28,Mt,2,1,"ion-item",18),t.qZA(),t.TgZ(29,"td",98),t.YNc(30,vt,3,5,"ion-text",18),t.YNc(31,wt,2,1,"ion-item",18),t.qZA(),t.TgZ(32,"td",98),t.YNc(33,qt,3,5,"ion-text",18),t.YNc(34,Ot,2,1,"ion-item",18),t.qZA(),t.TgZ(35,"td",98),t._uU(36),t.qZA(),t.TgZ(37,"td",98),t._uU(38),t.qZA(),t.TgZ(39,"td",98),t._uU(40),t.ALo(41,"currencyDisplay"),t.qZA(),t.TgZ(42,"td",98),t._uU(43),t.qZA(),t.TgZ(44,"td"),t.YNc(45,Jt,2,1,"ion-item",18),t.YNc(46,Qt,2,1,"ion-text",18),t.qZA(),t.TgZ(47,"td",98),t.TgZ(48,"ion-button",101),t.NdJ("click",function(n){const r=t.CHM(e).$implicit;return t.oxw().presentActionPopover(n,r)}),t._UZ(49,"ion-icon",102),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit,i=a.index,n=t.oxw();t.Q6J("ngClass",t.WLB(49,A,e.quantity<0,e.quantity>0)),t.xp6(2),t.Q6J("checked",n.isItemSelected(e)),t.xp6(2),t.Oqu(e.id),t.xp6(1),t.Q6J("ngClass",t.WLB(52,l,0==n.colSetting.item_name,1==n.colSetting.item_name)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(55,l,0==n.colSetting.item_desc,1==n.colSetting.item_desc)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(58,l,0==n.colSetting.aliasEn,1==n.colSetting.aliasEn)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(61,l,0==n.colSetting.model,1==n.colSetting.model)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(64,l,0==n.colSetting.part_no,1==n.colSetting.part_no)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(67,l,0==n.colSetting.brand,1==n.colSetting.brand)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(70,l,0==n.colSetting.min_qty,1==n.colSetting.min_qty)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(73,l,0==n.colSetting.item_unit,1==n.colSetting.item_unit)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(76,l,0==n.colSetting.perch_price,1==n.colSetting.perch_price)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(79,l,0==n.colSetting.pay_price,1==n.colSetting.pay_price)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(82,l,0==n.colSetting.profit,1==n.colSetting.profit)),t.xp6(1),t.hij(" ",n.calculateProfit(e).toFixed(2)," "),t.xp6(1),t.Q6J("ngClass",t.WLB(85,l,0==n.colSetting.instock,1==n.colSetting.instock)),t.xp6(1),t.Oqu(e.quantity),t.xp6(1),t.Q6J("ngClass",t.WLB(88,l,0==n.colSetting.total,1==n.colSetting.total)),t.xp6(1),t.Oqu(t.Dn7(41,45,+e.quantity*+e.perch_price,"SDG",!1)),t.xp6(2),t.Q6J("ngClass",t.WLB(91,l,0==n.colSetting.lastSold,1==n.colSetting.lastSold)),t.xp6(1),t.Oqu(e.lastSoldDate),t.xp6(2),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngClass",t.WLB(94,l,0==n.colSetting.edit,1==n.colSetting.edit)),t.xp6(1),t.MGl("id","action-trigger-",i,"")}}function Ft(o,a){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._UZ(2,"ion-skeleton-text",51),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"ion-skeleton-text",51),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"ion-skeleton-text",51),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"ion-skeleton-text",51),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"ion-skeleton-text",51),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"ion-skeleton-text",51),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"ion-skeleton-text",51),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"ion-skeleton-text",51),t.qZA(),t.TgZ(17,"td"),t._UZ(18,"ion-skeleton-text",51),t.qZA(),t.TgZ(19,"td"),t._UZ(20,"ion-skeleton-text",51),t.qZA(),t.TgZ(21,"td"),t._UZ(22,"ion-skeleton-text",51),t.qZA(),t.TgZ(23,"td"),t._UZ(24,"ion-skeleton-text",51),t.qZA(),t.TgZ(25,"td"),t._UZ(26,"ion-skeleton-text",51),t.qZA(),t.TgZ(27,"td"),t._UZ(28,"ion-skeleton-text",51),t.qZA(),t.TgZ(29,"td"),t._UZ(30,"ion-skeleton-text",51),t.qZA(),t.TgZ(31,"td"),t._UZ(32,"ion-skeleton-text",51),t.qZA(),t.TgZ(33,"td"),t._UZ(34,"ion-skeleton-text",51),t.qZA(),t.TgZ(35,"td"),t._UZ(36,"ion-skeleton-text",51),t.qZA(),t.qZA())}function Nt(o,a){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._UZ(2,"ion-skeleton-text",51),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"ion-skeleton-text",51),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"ion-skeleton-text",51),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"ion-skeleton-text",51),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"ion-skeleton-text",51),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"ion-skeleton-text",51),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"ion-skeleton-text",51),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"ion-skeleton-text",51),t.qZA(),t.TgZ(17,"td"),t._UZ(18,"ion-skeleton-text",51),t.qZA(),t.TgZ(19,"td"),t._UZ(20,"ion-skeleton-text",51),t.qZA(),t.TgZ(21,"td"),t._UZ(22,"ion-skeleton-text",51),t.qZA(),t.TgZ(23,"td"),t._UZ(24,"ion-skeleton-text",51),t.qZA(),t.TgZ(25,"td"),t._UZ(26,"ion-skeleton-text",51),t.qZA(),t.TgZ(27,"td"),t._UZ(28,"ion-skeleton-text",51),t.qZA(),t.TgZ(29,"td"),t._UZ(30,"ion-skeleton-text",51),t.qZA(),t.TgZ(31,"td"),t._UZ(32,"ion-skeleton-text",51),t.qZA(),t.TgZ(33,"td"),t._UZ(34,"ion-skeleton-text",51),t.qZA(),t.TgZ(35,"td"),t._UZ(36,"ion-skeleton-text",51),t.qZA(),t.TgZ(37,"td"),t._UZ(38,"ion-skeleton-text",51),t.qZA(),t.qZA())}function Dt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u062c\u0627\u0631\u064a \u0627\u0644\u0628\u062d\u062b..."),t.qZA())}function Lt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u062c\u0627\u0631\u064a \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0641\u0644\u0627\u062a\u0631..."),t.qZA())}function Vt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a..."),t.qZA())}function Bt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641..."),t.qZA())}function Ht(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."),t.qZA())}function Et(o,a){if(1&o&&(t.TgZ(0,"div",104),t.TgZ(1,"div",105),t._UZ(2,"ion-spinner",106),t.TgZ(3,"p",107),t.YNc(4,Dt,2,0,"span",18),t.YNc(5,Lt,2,0,"span",18),t.YNc(6,Vt,2,0,"span",18),t.YNc(7,Bt,2,0,"span",18),t.YNc(8,Ht,2,0,"span",18),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.showSearchView&&e.currentSearchTerm&&e.currentSearchTerm.trim().length>0),t.xp6(1),t.Q6J("ngIf",e.hasActiveFilters()&&!e.showSearchView),t.xp6(1),t.Q6J("ngIf",e.showPaginatedView&&(e.paginationLoading||e.loadingTot)),t.xp6(1),t.Q6J("ngIf",e.showAllItemsView&&e.loadingAllItems),t.xp6(1),t.Q6J("ngIf",!(e.showSearchView||e.hasActiveFilters()||e.showPaginatedView||e.showAllItemsView))}}function Yt(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij('\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u0644\u0644\u0628\u062d\u062b \u0639\u0646 "',e.currentSearchTerm,'"')}}function Wt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0639\u0646\u0627\u0635\u0631 \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0641\u0644\u0627\u062a\u0631 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"),t.qZA())}function $t(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0635\u0646\u0627\u0641"),t.qZA())}function zt(o,a){if(1&o&&(t.TgZ(0,"div",108),t.TgZ(1,"p",109),t.YNc(2,Yt,2,1,"span",18),t.YNc(3,Wt,2,0,"span",18),t.YNc(4,$t,2,0,"span",18),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.showSearchView&&e.currentSearchTerm&&e.currentSearchTerm.trim().length>0),t.xp6(1),t.Q6J("ngIf",e.hasActiveFilters()&&!e.showSearchView),t.xp6(1),t.Q6J("ngIf",!e.showSearchView&&!e.hasActiveFilters())}}function jt(o,a){if(1&o&&(t.TgZ(0,"div",110),t.TgZ(1,"ion-card"),t.TgZ(2,"ion-card-content"),t.TgZ(3,"ion-grid"),t.TgZ(4,"ion-row"),t.TgZ(5,"ion-col",111),t.TgZ(6,"h4"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"ion-col",111),t.TgZ(9,"h3"),t._uU(10,"\u0639\u062f\u062f \u0627\u0644\u0646\u062a\u0627\u0626\u062c"),t.qZA(),t.TgZ(11,"p",112),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"ion-col",111),t.TgZ(14,"h3"),t._uU(15,"\u0625\u062c\u0645\u0627\u0644\u064a \u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"),t.qZA(),t.TgZ(16,"p",112),t._uU(17),t.ALo(18,"currencyDisplay"),t.qZA(),t.qZA(),t.TgZ(19,"ion-col",111),t.TgZ(20,"h3"),t._uU(21,"\u0625\u062c\u0645\u0627\u0644\u064a \u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"),t.qZA(),t.TgZ(22,"p",112),t._uU(23),t.ALo(24,"currencyDisplay"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(7),t.hij('\u0627\u0644\u0628\u062d\u062b \u0639\u0646: "',e.currentSearchTerm,'"'),t.xp6(5),t.Oqu(e.searchStockTotals.items_count),t.xp6(5),t.Oqu(t.lcZ(18,4,e.searchStockTotals.store_tot)),t.xp6(6),t.Oqu(t.lcZ(24,6,e.searchStockTotals.perch_tot))}}function Rt(o,a){if(1&o&&(t.TgZ(0,"div",110),t.TgZ(1,"ion-card"),t.TgZ(2,"ion-card-content"),t.TgZ(3,"ion-grid"),t.TgZ(4,"ion-row"),t.TgZ(5,"ion-col",111),t.TgZ(6,"h3"),t._uU(7,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0635\u0646\u0627\u0641"),t.qZA(),t.TgZ(8,"p",112),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"ion-col",111),t.TgZ(11,"h3"),t._uU(12,"\u0625\u062c\u0645\u0627\u0644\u064a \u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"),t.qZA(),t.TgZ(13,"p",112),t._uU(14),t.ALo(15,"currencyDisplay"),t.qZA(),t.qZA(),t.TgZ(16,"ion-col",111),t.TgZ(17,"h3"),t._uU(18,"\u0625\u062c\u0645\u0627\u0644\u064a \u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"),t.qZA(),t.TgZ(19,"p",112),t._uU(20),t.ALo(21,"currencyDisplay"),t.qZA(),t.qZA(),t.TgZ(22,"ion-col",111),t.TgZ(23,"h3"),t._uU(24,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0643\u0645\u064a\u0629"),t.qZA(),t.TgZ(25,"p",112),t._uU(26),t.ALo(27,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(9),t.Oqu(e.allItemsStockTotals.items_count),t.xp6(5),t.Oqu(t.lcZ(15,4,e.allItemsStockTotals.store_tot)),t.xp6(6),t.Oqu(t.lcZ(21,6,e.allItemsStockTotals.perch_tot)),t.xp6(6),t.Oqu(t.xi3(27,8,e.allItemsStockTotals.quantity,"1.2-2"))}}function Gt(o,a){1&o&&t._UZ(0,"ion-icon",118)}function Kt(o,a){1&o&&t._UZ(0,"ion-spinner",119)}function Xt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",113),t.TgZ(1,"ion-button",114),t.NdJ("click",function(){return t.CHM(e),t.oxw().loadMoreItems()}),t.YNc(2,Gt,1,0,"ion-icon",115),t.YNc(3,Kt,1,0,"ion-spinner",116),t.TgZ(4,"ion-label",117),t._uU(5),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.paginationLoading),t.xp6(1),t.Q6J("ngIf",!e.paginationLoading),t.xp6(1),t.Q6J("ngIf",e.paginationLoading),t.xp6(2),t.hij(" ",e.paginationLoading?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"\u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0632\u064a\u062f"," ")}}function te(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-content"),t.TgZ(1,"ion-list"),t.TgZ(2,"ion-item",120),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.editItem(n.selectedActionItem)}),t._UZ(3,"ion-icon",121),t.TgZ(4,"ion-label"),t._uU(5,"\u062a\u0639\u062f\u064a\u0644"),t.qZA(),t.qZA(),t.TgZ(6,"ion-item",120),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.viewItemReport(n.selectedActionItem)}),t._UZ(7,"ion-icon",122),t.TgZ(8,"ion-label"),t._uU(9,"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0635\u0646\u0641"),t.qZA(),t.qZA(),t.TgZ(10,"ion-item",120),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.deleteItem(n.selectedActionItem)}),t._UZ(11,"ion-icon",123),t.TgZ(12,"ion-label"),t._uU(13,"\u062d\u0630\u0641"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function ee(o,a){1&o&&(t.TgZ(0,"div",124),t.TgZ(1,"div",105),t._UZ(2,"ion-spinner",106),t.TgZ(3,"p",107),t._uU(4,"\u062c\u0627\u0631\u064a \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0641\u0644\u0627\u062a\u0631..."),t.qZA(),t.qZA(),t.qZA())}function ie(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t.TgZ(2,"ion-checkbox",95),t.NdJ("ionChange",function(n){return t.CHM(e),t.oxw(2).toggleSelectAll(n)}),t.qZA(),t.qZA(),t.TgZ(3,"th"),t._uU(4,"\u0627\u0644\u062a\u0633\u0644\u0633\u0644 "),t.TgZ(5,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("id")}),t._UZ(6,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(7,"th",98),t._uU(8,"\u0627\u0644\u0635\u0646\u0641 "),t.TgZ(9,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("item_name")}),t._UZ(10,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(11,"th",98),t._uU(12,"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641 (English) "),t.TgZ(13,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("item_desc")}),t._UZ(14,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(15,"th",98),t._uU(16,"\u0627\u0633\u0645 \u0645\u0633\u062a\u0639\u0627\u0631 (Alias) "),t.TgZ(17,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("aliasEn")}),t._UZ(18,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(19,"th",98),t._uU(20,"\u0631\u0642\u0645 \u0627\u0644\u062c\u0632\u0621 "),t.TgZ(21,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("part_no")}),t._UZ(22,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(23,"th",98),t._uU(24,"\u0627\u0644\u0628\u0631\u0627\u0646\u062f "),t.TgZ(25,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("brand")}),t._UZ(26,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(27,"th",98),t._uU(28,"\u0627\u0644\u0645\u0648\u062f\u064a\u0644 "),t.TgZ(29,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("model")}),t._UZ(30,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(31,"th",98),t._uU(32,"\u0627\u0644\u0648\u062d\u062f\u0629 "),t.TgZ(33,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("item_unit")}),t._UZ(34,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(35,"th",98),t._uU(36,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 "),t.TgZ(37,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("perch_price")}),t._UZ(38,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(39,"th",98),t._uU(40,"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0647 "),t.TgZ(41,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("pay_price")}),t._UZ(42,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(43,"th",98),t._uU(44,"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 "),t.TgZ(45,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("quantity")}),t._UZ(46,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(47,"th",98),t._uU(48,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 "),t.TgZ(49,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("total")}),t._UZ(50,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(51,"th",98),t._uU(52,"\u0627\u062e\u0631 \u0639\u0645\u0644\u064a\u0629 \u0628\u064a\u0639 "),t.TgZ(53,"ion-button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sortData("lastSold")}),t._UZ(54,"ion-icon",97),t.qZA(),t.qZA(),t.TgZ(55,"th"),t._uU(56,"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0625\u0641\u062a\u062a\u0627\u062d\u064a"),t.qZA(),t.TgZ(57,"th",98),t.TgZ(58,"strong"),t._uU(59,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("checked",e.isAllSelected())("indeterminate",e.isSomeSelected()),t.xp6(4),t.Q6J("name",e.getSortIcon("id")),t.xp6(1),t.Q6J("ngClass",t.WLB(28,l,0==e.colSetting.item_name,1==e.colSetting.item_name)),t.xp6(3),t.Q6J("name",e.getSortIcon("item_name")),t.xp6(1),t.Q6J("ngClass",t.WLB(31,l,0==e.colSetting.item_desc,1==e.colSetting.item_desc)),t.xp6(3),t.Q6J("name",e.getSortIcon("item_desc")),t.xp6(1),t.Q6J("ngClass",t.WLB(34,l,0==e.colSetting.aliasEn,1==e.colSetting.aliasEn)),t.xp6(3),t.Q6J("name",e.getSortIcon("aliasEn")),t.xp6(1),t.Q6J("ngClass",t.WLB(37,l,0==e.colSetting.part_no,1==e.colSetting.part_no)),t.xp6(3),t.Q6J("name",e.getSortIcon("part_no")),t.xp6(1),t.Q6J("ngClass",t.WLB(40,l,0==e.colSetting.brand,1==e.colSetting.brand)),t.xp6(3),t.Q6J("name",e.getSortIcon("brand")),t.xp6(1),t.Q6J("ngClass",t.WLB(43,l,0==e.colSetting.model,1==e.colSetting.model)),t.xp6(3),t.Q6J("name",e.getSortIcon("model")),t.xp6(1),t.Q6J("ngClass",t.WLB(46,l,0==e.colSetting.item_unit,1==e.colSetting.item_unit)),t.xp6(3),t.Q6J("name",e.getSortIcon("item_unit")),t.xp6(1),t.Q6J("ngClass",t.WLB(49,l,0==e.colSetting.perch_price,1==e.colSetting.perch_price)),t.xp6(3),t.Q6J("name",e.getSortIcon("perch_price")),t.xp6(1),t.Q6J("ngClass",t.WLB(52,l,0==e.colSetting.pay_price,1==e.colSetting.pay_price)),t.xp6(3),t.Q6J("name",e.getSortIcon("pay_price")),t.xp6(1),t.Q6J("ngClass",t.WLB(55,l,0==e.colSetting.instock,1==e.colSetting.instock)),t.xp6(3),t.Q6J("name",e.getSortIcon("quantity")),t.xp6(1),t.Q6J("ngClass",t.WLB(58,l,0==e.colSetting.total,1==e.colSetting.total)),t.xp6(3),t.Q6J("name",e.getSortIcon("total")),t.xp6(1),t.Q6J("ngClass",t.WLB(61,l,0==e.colSetting.lastSold,1==e.colSetting.lastSold)),t.xp6(3),t.Q6J("name",e.getSortIcon("lastSold")),t.xp6(3),t.Q6J("ngClass",t.WLB(64,l,0==e.colSetting.edit,1==e.colSetting.edit))}}function ne(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_name)}}function oe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.item_name=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.item_name)}}function se(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_desc)}}function re(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.item_desc=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.item_desc)}}function ae(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.aliasEn)}}function ce(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.aliasEn=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.aliasEn)}}function le(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.part_no)}}function ue(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.part_no=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.part_no)}}function _e(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.brand)}}function de(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.brand=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.brand)}}function ge(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.model)}}function he(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.model=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.model)}}function pe(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item_unit)}}function me(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.item_unit=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.item_unit)}}function fe(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.ALo(2,"currencyDisplay"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,e.perch_price,"SDG",!1))}}function xe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.perch_price=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.perch_price)}}function Ze(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.ALo(2,"currencyDisplay"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,e.pay_price,"SDG",!1))}}function Ae(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.pay_price=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.pay_price)}}function Se(o,a){if(1&o&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.firstQuantity)}}function Te(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",103),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw(),s=n.index,r=n.$implicit;return t.oxw(2).editCell(s,r)})("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedItem2.quantity=n}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.selectedItem2.quantity)}}const be=function(o){return{negative:o}};function ye(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",99),t.NdJ("dblclick",function(){const n=t.CHM(e),s=n.index,r=n.$implicit;return t.oxw(2).prClick(s,r)}),t.TgZ(1,"td"),t.TgZ(2,"ion-checkbox",100),t.NdJ("ionChange",function(n){const r=t.CHM(e).$implicit;return t.oxw(2).toggleItemSelection(r,n)}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",98),t.YNc(6,ne,2,1,"ion-text",18),t.YNc(7,oe,2,1,"ion-item",18),t.qZA(),t.TgZ(8,"td",98),t.YNc(9,se,2,1,"ion-text",18),t.YNc(10,re,2,1,"ion-item",18),t.qZA(),t.TgZ(11,"td",98),t.YNc(12,ae,2,1,"ion-text",18),t.YNc(13,ce,2,1,"ion-item",18),t.qZA(),t.TgZ(14,"td",98),t.YNc(15,le,2,1,"ion-text",18),t.YNc(16,ue,2,1,"ion-item",18),t.qZA(),t.TgZ(17,"td",98),t.YNc(18,_e,2,1,"ion-text",18),t.YNc(19,de,2,1,"ion-item",18),t.qZA(),t.TgZ(20,"td",98),t.YNc(21,ge,2,1,"ion-text",18),t.YNc(22,he,2,1,"ion-item",18),t.qZA(),t.TgZ(23,"td",98),t.YNc(24,pe,2,1,"ion-text",18),t.YNc(25,me,2,1,"ion-item",18),t.qZA(),t.TgZ(26,"td",98),t.YNc(27,fe,3,5,"ion-text",18),t.YNc(28,xe,2,1,"ion-item",18),t.qZA(),t.TgZ(29,"td",98),t.YNc(30,Ze,3,5,"ion-text",18),t.YNc(31,Ae,2,1,"ion-item",18),t.qZA(),t.TgZ(32,"td",98),t.TgZ(33,"ion-text",98),t._uU(34),t.qZA(),t.qZA(),t.TgZ(35,"td",98),t.TgZ(36,"ion-text"),t._uU(37),t.ALo(38,"currencyDisplay"),t.qZA(),t.qZA(),t.TgZ(39,"td",98),t.TgZ(40,"ion-text"),t._uU(41),t.qZA(),t.qZA(),t.TgZ(42,"td"),t.YNc(43,Se,2,1,"ion-text",18),t.YNc(44,Te,2,1,"ion-item",18),t.qZA(),t.TgZ(45,"td",98),t.TgZ(46,"ion-button",101),t.NdJ("click",function(n){const r=t.CHM(e).$implicit;return t.oxw(2).presentActionPopover(n,r)}),t._UZ(47,"ion-icon",102),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit,i=a.index,n=t.oxw(2);t.Q6J("ngClass",t.WLB(45,A,e.quantity<0,e.quantity>0)),t.xp6(2),t.Q6J("checked",n.isItemSelected(e)),t.xp6(2),t.Oqu(e.id),t.xp6(1),t.Q6J("ngClass",t.WLB(48,l,0==n.colSetting.item_name,1==n.colSetting.item_name)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(51,l,0==n.colSetting.item_desc,1==n.colSetting.item_desc)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(54,l,0==n.colSetting.aliasEn,1==n.colSetting.aliasEn)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(57,l,0==n.colSetting.part_no,1==n.colSetting.part_no)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(60,l,0==n.colSetting.brand,1==n.colSetting.brand)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(63,l,0==n.colSetting.model,1==n.colSetting.model)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(66,l,0==n.colSetting.item_unit,1==n.colSetting.item_unit)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(69,l,0==n.colSetting.perch_price,1==n.colSetting.perch_price)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(72,l,0==n.colSetting.pay_price,1==n.colSetting.pay_price)),t.xp6(1),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(75,l,0==n.colSetting.instock,1==n.colSetting.instock)),t.xp6(1),t.Q6J("ngClass",t.VKq(78,be,e.quantity<0)),t.xp6(1),t.Oqu(e.quantity),t.xp6(1),t.Q6J("ngClass",t.WLB(80,l,0==n.colSetting.total,1==n.colSetting.total)),t.xp6(2),t.Oqu(t.Dn7(38,41,e.stockValuePayPrice,"SDG",!1)),t.xp6(2),t.Q6J("ngClass",t.WLB(83,l,0==n.colSetting.lastSold,1==n.colSetting.lastSold)),t.xp6(2),t.Oqu(e.lastSoldDate),t.xp6(2),t.Q6J("ngIf",n.showMe!=i),t.xp6(1),t.Q6J("ngIf",n.showMe==i),t.xp6(1),t.Q6J("ngClass",t.WLB(86,l,0==n.colSetting.edit,1==n.colSetting.edit)),t.xp6(1),t.MGl("id","action-trigger-",i,"")}}function Ce(o,a){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",126),t._UZ(2,"ion-spinner",106),t.TgZ(3,"p"),t._uU(4,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641..."),t.qZA(),t.qZA(),t.qZA())}function Pe(o,a){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",126),t.TgZ(2,"p"),t._uU(3,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0635\u0646\u0627\u0641 \u0644\u0644\u0639\u0631\u0636"),t.qZA(),t.qZA(),t.qZA())}function Ie(o,a){if(1&o&&(t.TgZ(0,"div",40),t.TgZ(1,"table",125),t.YNc(2,ie,60,67,"tr",18),t.YNc(3,ye,48,89,"tr",42),t.YNc(4,Ce,5,0,"tr",18),t.YNc(5,Pe,4,0,"tr",18),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.colSetting),t.xp6(1),t.Q6J("ngForOf",e.allItemsData),t.xp6(1),t.Q6J("ngIf",e.loadingAllItems),t.xp6(1),t.Q6J("ngIf",!e.loadingAllItems&&0===e.allItemsData.length)}}const ke=[{path:"",component:(()=>{class o{constructor(e,i,n,s,r,c,u,h,Je,Qe,Ue,Fe,Ne,De){this.router=e,this.file=i,this.fileOpener=n,this.behavApi=s,this.storage=r,this.alertController=c,this.modalController=u,this.loadingController=h,this.datePipe=Je,this.api=Qe,this.toast=Ue,this.exportService=Fe,this.currencyService=Ne,this.cdr=De,this.isActionPopoverOpen=!1,this.selectedActionItem=null,this.isOpen=!1,this.isClearing=!1,this.notifArr=[],this.showNotif=!1,this.LogHistoryLocalArr=[],this.logHistoryArr=[],this.isOpenNotif=!1,this.newNotif=!1,this.currentSort={column:"",direction:null},this.items=[],this.itemsAll=[],this.searcResult=[],this.searchMode=!1,this.searchTerm="",this.isCreatingSales=!1,this.store_tot=0,this.cost_tot=0,this.store_fltTot=0,this.loading=!1,this.loadingTot=!1,this.partnoFilterArray=[],this.filterArrayOrign=[],this.sortingArrayOrign=[],this.filterArray=[],this.brandFilterArray=[],this.brandList=[],this.modelList=[],this.itemsLocal=[],this.showMe=null,this.filterMode=!1,this.exportMode=!1,this.showBrand=!1,this.showMdel=!1,this.selectedItemsList=[],this.fileName="items.xlsx",this.currentPage=1,this.itemsPerPage=20,this.totalItems=0,this.totalPages=0,this.pageSizeOptions=[10,20,50,100],this.availableBrands=[],this.availableModels=[],this.filteredAvailableBrands=[],this.filteredAvailableModels=[],this.brandSearchTerm="",this.modelSearchTerm="",this.paginatedItems=[],this.paginationCurrentPage=1,this.paginationPageSize=20,this.paginationHasMore=!1,this.paginationLoading=!1,this.paginationSearchTerm="",this.paginationFilters={},this.searchSubject=new M.xQ,this.showPaginatedView=!1,this.paginationStockTotals={store_tot:0,cost_tot:0,items_count:0},this.showAllItemsView=!1,this.allItemsData=[],this.loadingAllItems=!1,this.allItemsStockTotals={store_tot:0,cost_tot:0,items_count:0},this.showSearchView=!1,this.searchData=[],this.loadingSearch=!1,this.searchStockTotals={store_tot:0,cost_tot:0,items_count:0},this.currentSearchTerm="",this.stockValuePayPrice=0,this.stockValuePerchPrice=0,this.loadingStockTotals=!1,this.store_info={id:"",store_ref:"",store_name:"",location:""},this.selectedItem={id:null,item_name:"",model:"",part_no:"",min_qty:0,brand:"",pay_price:0,perch_price:0,item_unit:"",item_desc:"",item_parcode:"",aliasEn:""},this.selectedItem2={id:null,item_name:"",model:"",part_no:"",min_qty:0,brand:"",pay_price:0,perch_price:0,item_unit:"",item_desc:"",item_parcode:"",aliasEn:""},this.colSetting={id:!0,item_name:!0,model:!0,part_no:!0,min_qty:!0,brand:!0,pay_price:!0,perch_price:!0,item_unit:!0,item_desc:!0,item_parcode:!0,profit:!0,instock:!0,total:!0,lastSold:!0,edit:!0,delete:!0,aliasEn:!0},this.getAppInfo(),this.filterState={brand:{isActive:!1,isVisible:!1,selectedBrands:[]},model:{isActive:!1,isVisible:!1,selectedModels:[]},quantity:{isActive:!1,isVisible:!1,minQuantity:0,maxQuantity:0,filterType:"range"}},this.searchSubject.pipe(function y(o,a=b.P){return e=>e.lift(new C(o,a))}(300),(0,k.x)()).subscribe(Le=>{this.paginationSearchTerm=Le,this.resetPaginationAndReload()})}onKeydownHandler(e){this.hideMe("3")}toggleItemSelection(e,i){i.detail.checked?this.isItemSelected(e)||this.selectedItemsList.push(e):this.selectedItemsList=this.selectedItemsList.filter(n=>n.id!==e.id)}isItemSelected(e){return this.selectedItemsList.some(i=>i.id===e.id)}toggleSelectAll(e){this.getCurrentViewData().forEach(e.detail.checked?n=>{this.isItemSelected(n)||this.selectedItemsList.push(n)}:n=>{this.selectedItemsList=this.selectedItemsList.filter(s=>s.id!==n.id)})}isAllSelected(){const e=this.getCurrentViewData();return e.length>0&&e.every(i=>this.isItemSelected(i))}isSomeSelected(){const e=this.getCurrentViewData(),i=e.filter(n=>this.isItemSelected(n));return i.length>0&&i.length<e.length}toggleSelectAllFiltered(e){this.filterArray.forEach(e.detail.checked?i=>{this.isItemSelected(i)||this.selectedItemsList.push(i)}:i=>{this.selectedItemsList=this.selectedItemsList.filter(n=>n.id!==i.id)})}isAllFilteredSelected(){return this.filterArray.length>0&&this.filterArray.every(e=>this.isItemSelected(e))}isSomeFilteredSelected(){return this.selectedItemsList.length>0&&!this.isAllFilteredSelected()}toggleSelectAllSearch(e){this.itemsAll.filter(n=>{var s,r,c,u;return(null===(s=n.item_name)||void 0===s?void 0:s.toLowerCase().includes(this.searchTerm.toLowerCase()))||(null===(r=n.item_desc)||void 0===r?void 0:r.toLowerCase().includes(this.searchTerm.toLowerCase()))||(null===(c=n.part_no)||void 0===c?void 0:c.toLowerCase().includes(this.searchTerm.toLowerCase()))||(null===(u=n.brand)||void 0===u?void 0:u.toLowerCase().includes(this.searchTerm.toLowerCase()))}).forEach(e.detail.checked?n=>{this.isItemSelected(n)||this.selectedItemsList.push(n)}:n=>{this.selectedItemsList=this.selectedItemsList.filter(s=>s.id!==n.id)})}isAllSearchSelected(){const e=this.itemsAll.filter(i=>{var n,s,r,c;return(null===(n=i.item_name)||void 0===n?void 0:n.toLowerCase().includes(this.searchTerm.toLowerCase()))||(null===(s=i.item_desc)||void 0===s?void 0:s.toLowerCase().includes(this.searchTerm.toLowerCase()))||(null===(r=i.part_no)||void 0===r?void 0:r.toLowerCase().includes(this.searchTerm.toLowerCase()))||(null===(c=i.brand)||void 0===c?void 0:c.toLowerCase().includes(this.searchTerm.toLowerCase()))});return e.length>0&&e.every(i=>this.isItemSelected(i))}isSomeSearchSelected(){return this.selectedItemsList.length>0&&!this.isAllSearchSelected()}clearSelection(){this.selectedItemsList=[]}getCurrentViewData(){return this.showSearchView?this.searchData||[]:this.showAllItemsView?this.allItemsData||[]:this.filterMode||this.hasActiveFilters()?this.filterArray||[]:this.paginatedItems&&this.paginatedItems.length>0?this.paginatedItems:this.items||[]}clearSelectionWithAnimation(){this.isClearing=!0;const e=document.querySelector(".selected-items-bar");e&&e.classList.add("fade-out"),setTimeout(()=>{this.selectedItemsList=[],this.isClearing=!1},300)}createPurchaseFromSelected(){return(0,g.mG)(this,void 0,void 0,function*(){if(0===this.selectedItemsList.length)return void(yield this.toast.create({message:"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0639\u0646\u0627\u0635\u0631 \u0623\u0648\u0644\u0627\u064b",duration:2e3,color:"warning"})).present();const e=this.selectedItemsList.map(i=>({id:i.id,item_name:i.item_name,item_desc:i.item_desc,part_no:i.part_no,brand:i.brand,model:i.model,item_unit:i.item_unit,perch_price:i.perch_price||0,pay_price:i.pay_price||0,qty:i.quantity<0?Math.abs(i.quantity):0===i.quantity?1:i.quantity,tot:i.perch_price||0,availQty:i.quantity||0,aliasEn:i.aliasEn}));this.router.navigate(["folder/purchase"],{queryParams:{status:"newInvoFromItemsPage",selectedItemsList:JSON.stringify(e)}}),this.clearSelection()})}createTsiaFromSelected(){return(0,g.mG)(this,void 0,void 0,function*(){if(0===this.selectedItemsList.length)return void(yield this.toast.create({message:"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0639\u0646\u0627\u0635\u0631 \u0623\u0648\u0644\u0627\u064b",duration:2e3,color:"warning",cssClass:"warning-toast"})).present();const e=this.selectedItemsList.map(i=>({id:i.id,item_name:i.item_name,item_desc:i.item_desc,part_no:i.part_no,brand:i.brand,model:i.model,item_unit:i.item_unit,perch_price:i.perch_price||0,pay_price:i.pay_price||0,qty:i.quantity,tot:i.pay_price||0,availQty:i.quantity||0,aliasEn:i.aliasEn}));yield this.router.navigate(["folder/tswia"],{queryParams:{status:"newInvoFromItemsPage",selectedItemsList:JSON.stringify(e)}}),this.clearSelection()})}createSalesFromSelected(){return(0,g.mG)(this,void 0,void 0,function*(){if(0===this.selectedItemsList.length)return void(yield this.toast.create({message:"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0639\u0646\u0627\u0635\u0631 \u0623\u0648\u0644\u0627\u064b",duration:2e3,color:"warning",cssClass:"warning-toast"})).present();const e=this.selectedItemsList.map(i=>({id:i.id,item_name:i.item_name,item_desc:i.item_desc,part_no:i.part_no,brand:i.brand,model:i.model,item_unit:i.item_unit,perch_price:i.perch_price||0,pay_price:i.pay_price||0,qty:i.quantity<0?Math.abs(i.quantity):0===i.quantity?1:i.quantity,tot:i.pay_price||0,availQty:i.quantity||0,aliasEn:i.aliasEn}));yield this.router.navigate(["folder/sales"],{queryParams:{status:"newInvoFromItemsPage",selectedItemsList:JSON.stringify(e)}}),this.clearSelection()})}presentActionPopover(e,i){return(0,g.mG)(this,void 0,void 0,function*(){console.log("presentActionPopover called with item:",i),console.log("item.id in presentActionPopover:",null==i?void 0:i.id),this.selectedActionItem=i,this.actionPopover.event=e,this.isActionPopoverOpen=!0})}viewItemReport(e){this.isActionPopoverOpen=!1;let i={queryParams:{item:JSON.stringify(e)}};this.router.navigate(["folder/items-report"],i)}editItem(e){if(this.isActionPopoverOpen=!1,console.log("editItem called with item:",e),console.log("item.id:",null==e?void 0:e.id),!e)return void this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0639\u0646\u0635\u0631 \u0627\u0644\u0645\u062d\u062f\u062f","danger");const i=e.id||e.item_id;if(!i)return console.error("Item ID not found. Item properties:",Object.keys(e)),void this.presentToast("\u0645\u0639\u0631\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f","danger");this.presentModal(i,"edit")}deleteItemPop(e){return(0,g.mG)(this,void 0,void 0,function*(){this.isActionPopoverOpen=!1,yield(yield this.alertController.create({header:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0639\u0646\u0635\u0631\u061f",buttons:[{text:"\u0625\u0644\u063a\u0627\u0621",role:"cancel"},{text:"\u062d\u0630\u0641",handler:()=>{this.deleteItem(e),console.log("Delete item:",e)}}]})).present()})}deleteItem(e){this.selectedItem=e,e.salesQuantity>0||e.perchQuantity>0?this.presentToast("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0635\u0646\u0641 , \u062a\u0648\u062c\u062f \u0643\u0645\u064a\u0627\u062a \u0641\u064a \u0627\u0644\u0645\u062e\u0632\u0648\u0646    ","danger"):this.delete()}delete(){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.deleteItems(this.selectedItem.id).subscribe(e=>{"Post Not Deleted"!=e.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d","success"),this.updateItemArrays(this.selectedItem.id,"delete")):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}findItemById(e){if(console.log("findItemById called with id:",e),console.log("Current view states:",{showSearchView:this.showSearchView,showAllItemsView:this.showAllItemsView,filterMode:this.filterMode,hasActiveFilters:this.hasActiveFilters()}),this.showSearchView&&this.searchData&&this.searchData.length>0){console.log("Searching in searchData, length:",this.searchData.length);const i=this.searchData.find(n=>n.id==e);if(i)return console.log("Found in searchData:",i),i}if(this.showAllItemsView&&this.allItemsData&&this.allItemsData.length>0){console.log("Searching in allItemsData, length:",this.allItemsData.length);const i=this.allItemsData.find(n=>n.id==e);if(i)return console.log("Found in allItemsData:",i),i}if((this.filterMode||this.hasActiveFilters())&&this.filterArray&&this.filterArray.length>0){console.log("Searching in filterArray, length:",this.filterArray.length);const i=this.filterArray.find(n=>n.id==e);if(i)return console.log("Found in filterArray:",i),i}if(this.paginatedItems&&this.paginatedItems.length>0){console.log("Searching in paginatedItems, length:",this.paginatedItems.length);const i=this.paginatedItems.find(n=>n.id==e);if(i)return console.log("Found in paginatedItems:",i),i}if(this.items&&this.items.length>0){console.log("Searching in items, length:",this.items.length);const i=this.items.find(n=>n.id==e);if(i)return console.log("Found in items:",i),i}if(this.itemsAll&&this.itemsAll.length>0){console.log("Searching in itemsAll, length:",this.itemsAll.length);const i=this.itemsAll.find(n=>n.id==e);if(i)return console.log("Found in itemsAll:",i),i}return console.log("Item not found in any array"),null}presentModal(e,i){var n,s;return(0,g.mG)(this,void 0,void 0,function*(){if("null"!=e&&"edit"==i){const c=this.findItemById(e);if(!c)return void this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0639\u0646\u0635\u0631 \u0627\u0644\u0645\u062d\u062f\u062f","danger");this.selectedItem={id:c.id,item_desc:c.item_desc,model:c.model,item_name:c.item_name,min_qty:c.min_qty,part_no:c.part_no,brand:c.brand,item_unit:c.item_unit,item_parcode:c.item_parcode,pay_price:c.pay_price,perch_price:c.perch_price,aliasEn:c.aliasEn},this.firstq={id:c.id,item_id:c.id,store_id:null===(n=this.store_info)||void 0===n?void 0:n.id,quantity:c.firstQuantity||0,fq_year:null===(s=this.year)||void 0===s?void 0:s.id,pay_price:c.pay_price,perch_price:c.perch_price}}const r=yield this.modalController.create({component:v.X,componentProps:{item:this.selectedItem,firstq:this.firstq,colSetting:this.colSetting,filterArrayOrign:this.filterArrayOrign,filterArray:this.filterArray,brandList:this.brandList,modelList:this.modelList,status:i}});return r.onDidDismiss().then(c=>{null!==c&&this.doAfterDissmiss(c)}),yield r.present()})}didDissmis(){this.isOpenNotif=!1}presentPopover(e){this.popoverNotif33.event=e,this.isOpenNotif=!0,this.showNotif=!1}prClick(e,i){this.showMe==e?console.log(e):(this.showMe=e,this.selectedItem2={id:i.id,item_name:i.item_name,model:i.model,part_no:i.part_no,min_qty:i.min_qty,brand:i.brand,pay_price:i.pay_price,perch_price:i.perch_price,item_unit:i.item_unit,item_desc:i.item_desc,item_parcode:i.item_parcode,aliasEn:i.aliasEn,quantity:i.firstQuantity})}hideMe(e){this.showMe=null,this.selectedItem2={id:null,item_name:"",model:"",part_no:"",min_qty:0,brand:"",pay_price:0,perch_price:0,item_unit:"",item_desc:"",item_parcode:"",aliasEn:"",quantity:0}}update(e){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ...");const i=Object.assign({},e[0]);"imageUrl"in i&&delete i.imageUrl,"tax"in i&&delete i.tax,this.api.updateItem(i).subscribe(n=>{"Post Not Updated"!=n.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success"),this.saveLogHistory(e[0],void 0,"update"),this.resetPaginationAndReload()):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},n=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}doit(){}editCell(e,i){if(this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.selectedItem2.perch_price>0&&this.selectedItem2.pay_price>0&&""!=this.selectedItem2.item_name){const n=Object.assign({},this.selectedItem2);"imageUrl"in n&&delete n.imageUrl,"tax"in n&&delete n.tax,this.api.updateItem(n).subscribe(s=>{"Post Not Updated"!=s.message?(this.updateFirstq(i),this.loadingController.dismiss(),this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success")):(this.presentToast("\u0644\u0645 \u064a\u062a\u0645  \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()),this.hideMe(e)},s=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss(),this.hideMe(e)},()=>{this.hideMe(e),this.loadingController.dismiss()})}else this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644 ","danger"),this.loadingController.dismiss()}updateFirstq(e){console.log(e),this.api.updatfiratqtynew({item_id:e.id,quantity:this.selectedItem2.quantity,pay_price:e.pay_price,perch_price:e.perch_price,store_id:this.store_info.id}).subscribe(n=>{"Post Not Updated"!=n.message?this.updateItemArrays(e.id):(this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0625\u0641\u062a\u062a\u0627\u062d\u064a\u0629 , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss())},n=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}payChange(e,i){console.log(i),this.selectedItem2.perch_price=+i.pay_price-.15*+i.pay_price}updateItemArrays(e,i){if("delete"==i){const n=this.items.findIndex(r=>r.id===e);-1!==n&&this.items.splice(n,1);const s=this.itemsAll.findIndex(r=>r.id===e);if(-1!==s&&this.itemsAll.splice(s,1),this.paginatedItems&&this.paginatedItems.length>0){const r=this.paginatedItems.findIndex(c=>c.id===e);-1!==r&&this.paginatedItems.splice(r,1)}if(this.searchData&&this.searchData.length>0){const r=this.searchData.findIndex(c=>c.id===e);-1!==r&&this.searchData.splice(r,1)}if(this.allItemsData&&this.allItemsData.length>0){const r=this.allItemsData.findIndex(c=>c.id===e);-1!==r&&this.allItemsData.splice(r,1)}if(this.filterArray&&this.filterArray.length>0){const r=this.filterArray.findIndex(c=>c.id===e);-1!==r&&this.filterArray.splice(r,1)}this.storage.set("itemsLocal",this.items).then(r=>{})}else this.api.getItemById(e).subscribe(n=>{if(console.log("data in updateItemArrays",n),n){console.log(n.data[0]," emArrays");const s=n.data[0],r=this.items.findIndex(u=>u.id===e);-1!==r&&(this.items[r]=Object.assign(Object.assign({},this.items[r]),s));const c=this.itemsAll.findIndex(u=>u.id===e);if(-1!==c&&(this.itemsAll[c]=Object.assign(Object.assign({},this.itemsAll[c]),s)),this.paginatedItems&&this.paginatedItems.length>0){const u=this.paginatedItems.findIndex(h=>h.id===e);-1!==u&&(this.paginatedItems[u]=Object.assign(Object.assign({},this.paginatedItems[u]),s))}if(this.searchData&&this.searchData.length>0){const u=this.searchData.findIndex(h=>h.id===e);-1!==u&&(this.searchData[u]=Object.assign(Object.assign({},this.searchData[u]),s))}if(this.allItemsData&&this.allItemsData.length>0){const u=this.allItemsData.findIndex(h=>h.id===e);-1!==u&&(this.allItemsData[u]=Object.assign(Object.assign({},this.allItemsData[u]),s))}if(this.filterArray&&this.filterArray.length>0){const u=this.filterArray.findIndex(h=>h.id===e);-1!==u&&(this.filterArray[u]=Object.assign(Object.assign({},this.filterArray[u]),s))}this.calculateTotalValue(this.itemsAll),console.log(this.itemsAll,"all items"),this.storage.set("itemsLocal",this.itemsAll).then(u=>{})}},n=>{console.error(n)},()=>{this.loadingController.dismiss()})}doAfterDissmiss(e){"edit"==e.role?this.update(e.data):"save"==e.role?this.save(e.data):"dele"==e.role?this.delete():"price"==e.role&&"plus"==e.data.status?this.incresePrice(e.data):"price"==e.role&&"minus"==e.data.status?this.decreasePrice(e.data):"settings"==e.role?this.setColSetting(e.data):"filter"==e.role&&("filter"==e.data[4]?(this.applyFilter(e.data),this.filterArray=e.data[1],this.store_fltTot=e.data[1].reduce((i,n)=>i+ +n.perch_price*+n.quantity,0)):"clear"==e.data[4]&&this.removeFilter())}ngOnInit(){this.initializeCurrency()}ngOnDestroy(){this.currencySubscription&&this.currencySubscription.unsubscribe()}initializeCurrency(){return(0,g.mG)(this,void 0,void 0,function*(){yield this.currencyService.initializeCurrency(),yield this.currencyService.loadSupportedCurrencies(),this.store_info&&this.year&&(yield this.currencyService.loadRatesByYear(this.store_info.id,this.year.id)),this.currencySubscription=this.currencyService.getCurrentCurrency().subscribe(e=>{this.cdr.detectChanges()})})}initializeFilterOptions(){if(this.filterArrayOrign&&this.filterArrayOrign.length>0){const e=Array.from(new Set(this.filterArrayOrign.map(n=>n.brand)));this.availableBrands=e.map(n=>({brand:n,selected:!1}));const i=Array.from(new Set(this.filterArrayOrign.map(n=>n.model)));this.availableModels=i.map(n=>({model:n,selected:!1}))}}onBrandSelectionChange(e){if(e.selected)this.filterState.brand.selectedBrands.includes(e.brand)||this.filterState.brand.selectedBrands.push(e.brand);else{const i=this.filterState.brand.selectedBrands.indexOf(e.brand);i>-1&&this.filterState.brand.selectedBrands.splice(i,1)}this.updateFilterState()}toggleBrandSelection(e){e.selected=!e.selected,this.onBrandSelectionChange(e)}applyBrandFilter(){this.filterState.brand.isActive=this.filterState.brand.selectedBrands.length>0,this.filterState.brand.isVisible=!1,this.applyAllFilters()}clearBrandFilter(){this.availableBrands.forEach(e=>e.selected=!1),this.filterState.brand.selectedBrands=[],this.filterState.brand.isActive=!1,this.filterState.brand.isVisible=!1,this.applyAllFilters()}onModelSelectionChange(e){if(e.selected)this.filterState.model.selectedModels.includes(e.model)||this.filterState.model.selectedModels.push(e.model);else{const i=this.filterState.model.selectedModels.indexOf(e.model);i>-1&&this.filterState.model.selectedModels.splice(i,1)}this.updateFilterState()}toggleModelSelection(e){e.selected=!e.selected,this.onModelSelectionChange(e)}applyModelFilter(){this.filterState.model.isActive=this.filterState.model.selectedModels.length>0,this.filterState.model.isVisible=!1,this.applyAllFilters()}clearModelFilter(){this.availableModels.forEach(e=>e.selected=!1),this.filterState.model.selectedModels=[],this.filterState.model.isActive=!1,this.filterState.model.isVisible=!1,this.applyAllFilters()}onQuantityFilterTypeChange(e){this.filterState.quantity.filterType=e.target.value}selectQuantityFilter(e){this.filterState.quantity.filterType=e,this.filterState.quantity.isActive=!0,this.updateFilterState()}applyQuantityFilter(){this.filterState.quantity.isActive=!0,this.filterState.quantity.isVisible=!1,this.applyAllFilters()}clearQuantityFilter(){this.filterState.quantity.isActive=!1,this.filterState.quantity.isVisible=!1,this.filterState.quantity.minQuantity=0,this.filterState.quantity.maxQuantity=0,this.applyAllFilters()}applyAllFilters(){this.filterState.brand.isActive||this.filterState.model.isActive||this.filterState.quantity.isActive?(this.loadFilteredItems(),this.filterMode=!0):(this.filterArray=this.filterArrayOrign&&Array.isArray(this.filterArrayOrign)?[...this.filterArrayOrign]:[],this.filterMode=!1)}clearAllFilters(){this.clearBrandFilter(),this.clearModelFilter(),this.clearQuantityFilter(),this.hideAllFilters()}updateFilterState(){this.filterState.brand.isActive=this.filterState.brand.selectedBrands.length>0,this.filterState.model.isActive=this.filterState.model.selectedModels.length>0}hasActiveFilters(){return this.filterState.brand.isActive||this.filterState.model.isActive||this.filterState.quantity.isActive}ionViewDidEnter(){}ionViewDidLeave(){}getAppInfo(){this.storage.get("USER_INFO").then(e=>{e&&(this.user_info=e)}),this.storage.get("year").then(e=>{e&&(this.year=e)}),this.storage.get("STORE_INFO").then(e=>{this.loading=!0,e&&(this.store_info=e,this.showPaginatedView=!0,this.loadItemsWithPagination(),this.loadStockTotals(),this.loadBrandsFromBackend(),this.loadModelsFromBackend())}),this.storage.get("colSetting").then(e=>{e&&(this.colSetting=e)})}presentLoadingWithOptions(e){return(0,g.mG)(this,void 0,void 0,function*(){const i=yield this.loadingController.create({spinner:"bubbles",mode:"ios",duration:5e3,message:e,translucent:!0,backdropDismiss:!1});yield i.present(),yield i.onDidDismiss()})}getStockItems(){console.log("data inrange"),this.loading=!0,this.api.readStockInrange((this.currentPage-1)*this.itemsPerPage+1,this.currentPage*this.itemsPerPage).subscribe(n=>{console.log("data inrange",n),this.items=n.data,this.totalItems=this.items[0].totalCount,this.sortingArrayOrign=this.items,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage),this.prepareFilters(),this.colSetting||this.setColSetting()},n=>{},()=>{this.loading=!1})}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadItemsWithPagination())}prevPage(){this.currentPage>1&&(this.currentPage--,this.loadItemsWithPagination())}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadItemsWithPagination())}changeItemsPerPage(e){this.itemsPerPage=parseInt(e.detail.value),this.currentPage=1,this.resetPaginationAndReload()}getPageNumbers(){const e=[];let n=Math.max(1,this.currentPage-Math.floor(2.5)),s=n+5-1;s>this.totalPages&&(s=this.totalPages,n=Math.max(1,s-5+1));for(let r=n;r<=s;r++)e.push(r);return e}refresh(){this.resetPaginationAndReload()}refreshToInitialState(){this.searchTerm="",this.paginationSearchTerm="",this.brandSearchTerm="",this.modelSearchTerm="",this.searchMode=!1,this.clearAllFilters(),this.filterState={brand:{isActive:!1,isVisible:!1,selectedBrands:[]},model:{isActive:!1,isVisible:!1,selectedModels:[]},quantity:{isActive:!1,isVisible:!1,minQuantity:0,maxQuantity:0,filterType:"range"}},this.availableBrands=[],this.availableModels=[],this.filteredAvailableBrands=[],this.filteredAvailableModels=[],this.selectedItemsList=[],this.paginationFilters={},this.filterMode=!1,this.searcResult=[],this.filterArray=[],this.showAllItemsView=!1,this.allItemsData=[],this.allItemsStockTotals={store_tot:0,cost_tot:0,items_count:0},this.showSearchView=!1,this.searchData=[],this.searchStockTotals={store_tot:0,cost_tot:0,items_count:0},this.currentSearchTerm="",this.resetPaginationAndReloadWithTotals(),this.presentToast("\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u062c\u0645\u064a\u0639 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","success")}getAllStockItems(){console.log("getAllStockItems"),this.itemsAll=[],this.loadingTot=!0,this.api.getAllStockItemsWithouteCounts(this.store_info.id,this.year.id).subscribe(e=>{console.log("data inrange",e);let n=e.data;this.itemsAll=n,this.itemsAll.forEach(s=>{+s.availQty-+s.qtyReal<0?s.perchQuantity=+s.perchQuantity+Math.abs(+s.availQty-+s.qtyReal):+s.availQty-+s.qtyReal>0&&(s.salesQuantity=+s.availQty-+s.qtyReal+ +s.salesQuantity),s.quantity=+s.firstQuantity+ +s.perchQuantity-+s.salesQuantity,s.stockValuePayPrice=+s.quantity*+s.pay_price,s.stockValuePerchPrice=+s.quantity*+s.perch_price}),this.calculateTotalValue(this.itemsAll),this.storage.set("itemsLocal",n).then(s=>{}),this.loadingTot=!0,this.items=this.itemsAll,this.filterArray=this.itemsAll,this.filterArrayOrign=this.itemsAll,this.sortingArrayOrign=this.itemsAll,this.currentSort.column&&this.currentSort.direction&&(this.filterArray=this.sortArray([...this.filterArray],this.currentSort.column,this.currentSort.direction),this.items=this.sortArray([...this.items],this.currentSort.column,this.currentSort.direction)),this.initializeFilterOptions(),this.colSetting||this.setColSetting()},e=>{this.loadingTot=!1},()=>{this.loadingTot=!1})}calculateTotalValue(e){this.store_tot=e.reduce((i,n)=>i+ +Math.abs(n.stockValuePayPrice),0),this.cost_tot=e.reduce((i,n)=>i+ +Math.abs(n.stockValuePerchPrice),0)}setColSetting(e){e&&(this.colSetting=e,this.storage.set("colSetting",this.colSetting).then(i=>{}))}prepareFilters(){const e=this.items.map(r=>r.brand),i=this.items.filter(({brand:r},c)=>!e.includes(r,c+1));for(let r=0;r<i.length;r++){const c=i[r];""!=c.brand&&(this.brandList.push({brand:c.brand,selected:!1}),this.availableBrands.push({brand:c.brand,selected:!1}))}const n=this.items.map(r=>r.model),s=this.items.filter(({model:r},c)=>!n.includes(r,c+1));for(let r=0;r<s.length;r++){const c=s[r];""!=c.model&&(this.modelList.push({model:c.model,selected:!1}),this.availableModels.push({model:c.model,selected:!1}))}this.filterArrayOrign=this.items,this.filterArray=this.filterArrayOrign}sortData(e){this.currentSort.column===e?this.currentSort.direction="asc"===this.currentSort.direction?"desc":"asc":(this.currentSort.column=e,this.currentSort.direction="asc"),this.applySortToAllViews(e,this.currentSort.direction)}applySortToAllViews(e,i){this.items&&this.items.length>0&&(this.items=this.sortArray([...this.items],e,i)),this.paginatedItems&&this.paginatedItems.length>0&&(this.paginatedItems=this.sortArray([...this.paginatedItems],e,i)),this.allItemsData&&this.allItemsData.length>0&&(this.allItemsData=this.sortArray([...this.allItemsData],e,i)),this.searchData&&this.searchData.length>0&&(this.searchData=this.sortArray([...this.searchData],e,i)),this.filterArray&&this.filterArray.length>0&&(this.filterArray=this.sortArray([...this.filterArray],e,i))}sortArray(e,i,n){return e.sort((s,r)=>{let c=this.getSortValue(s,i),u=this.getSortValue(r,i);return null==c&&(c=""),null==u&&(u=""),this.isNumericColumn(i)?(c=+c||0,u=+u||0):(c=String(c).toLowerCase(),u=String(u).toLowerCase()),c<u?"asc"===n?-1:1:c>u?"asc"===n?1:-1:0})}getSortValue(e,i){switch(i){case"id":return e.id;case"item_name":return e.item_name;case"item_desc":return e.item_desc;case"aliasEn":return e.aliasEn;case"model":return e.model;case"part_no":return e.part_no;case"brand":return e.brand;case"min_qty":return e.min_qty;case"item_unit":return e.item_unit;case"perch_price":return e.perch_price;case"pay_price":return e.pay_price;case"profit":return this.calculateProfit(e);case"quantity":return e.quantity;case"total":return e.stockValuePayPrice;case"lastSold":return e.lastSoldDate;default:return""}}isNumericColumn(e){return["id","min_qty","perch_price","pay_price","profit","quantity","total"].includes(e)}calculateProfit(e){const i=+e.pay_price,n=+e.perch_price;return i&&n&&0!==n?(i-n)/n*100:0}getSortIcon(e){return this.currentSort.column!==e?"swap-vertical-outline":"asc"===this.currentSort.direction?"chevron-up-outline":"chevron-down-outline"}applyFilter(e){this.filterMode=!0,this.modelList=e[2],this.brandList=e[3],this.modelList.forEach(i=>{1==i.selected&&(this.showMdel=!0)}),this.brandList.forEach(i=>{1==i.selected&&(this.showBrand=!0)})}setFilter(){this.filterArray=this.items;let e=[];for(let i=0;i<this.brandList.length;i++){const n=this.brandList[i];if(1==n.selected){let s=[];s=this.filterArray.filter(r=>r.brand==n.brand),s.length>0&&s.forEach(r=>{e.push(r)})}}for(let i=0;i<this.modelList.length;i++){const n=this.modelList[i];if(1==n.selected){let s=[];s=this.filterArray.filter(r=>r.model==n.model),s.length>0&&s.forEach(r=>{e.push(r)})}}this.filterArray=e,this.currentSort.column&&this.currentSort.direction&&(this.filterArray=this.sortArray([...this.filterArray],this.currentSort.column,this.currentSort.direction)),this.store_fltTot=e.reduce((i,n)=>i+ +n.perch_price*+n.quantity,0)}removeFilter(e){this.presentLoadingWithOptions("...."),"model"==e?(this.modelList.forEach(s=>{s.selected=!1}),this.setFilter()):"brand"==e?(this.brandList.forEach(s=>{s.selected=!1}),this.setFilter()):(this.modelList.forEach(s=>{s.selected=!1}),this.brandList.forEach(s=>{s.selected=!1}),this.setFilter());let i=0;for(let s=0;s<this.brandList.length;s++)1==this.brandList[s].selected&&(i+=1);this.showBrand=i>0;let n=0;for(let s=0;s<this.modelList.length;s++)1==this.modelList[s].selected&&(n+=1);this.showMdel=n>0,0==i&&0==n&&(this.filterArray=this.items,this.filterMode=!1),this.currentSort.column&&this.currentSort.direction&&(this.filterArray=this.sortArray([...this.filterArray],this.currentSort.column,this.currentSort.direction)),this.store_fltTot=this.filterArray.reduce((s,r)=>s+ +r.perch_price*+r.quantity,0),this.loadingController.dismiss()}filterItems(e){this.searcResult=this.itemsAll.filter(i=>i.item_name.toLowerCase().includes(e.toLowerCase()))}searching(e){this.searchTerm.length>0?(this.searchMode=!0,console.log(e,this.itemsAll)):this.searchMode=!1}cancelSearch(){this.searchMode=!1,this.searcResult=[]}presentToast(e,i){return(0,g.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:e,duration:2e3,color:i,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}save(e){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ...");const i=Object.assign({},e[0]);"imageUrl"in i&&delete i.imageUrl,"tax"in i&&delete i.tax,this.api.saveItem(i).subscribe(n=>{"Post Not Created"!=n.message?(this.firstq={id:null,item_id:n.message,store_id:this.store_info.id,quantity:e[1].quantity,pay_price:e[0].pay_price,perch_price:e[0].perch_price,fq_year:"2022"},this.saveFierstQty(e[0])):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},n=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}saveFierstQty(e){return(0,g.mG)(this,void 0,void 0,function*(){this.api.saveFirstQty(this.firstq).subscribe(i=>{"Post Not Created"!=i.message&&(this.firstq.id=i.message),this.saveLogHistory(e,this.firstq,"insert"),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638","success")},i=>{this.presentToast("1\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger"),this.loadingController.dismiss()},()=>{this.loadingController.dismiss()})})}generateRandom(e){let i=new Date,n=i.getMonth().toString()+i.getDay().toString()+i.getHours().toString()+i.getMinutes().toString()+i.getSeconds().toString()+i.getMilliseconds().toString()+e;return this.store_info.store_ref+n}prepareLogHistory(e,i,n){this.logHistoryArr=[];let s=new Date,r="";return"insert"==n?(r="insert firstq",e.id=i.item_id,this.logHistoryArr.push({id:this.firstq.id,logRef:this.generateRandom(r),userId:this.user_info.id,typee:r,datee:x(s).locale("en").format("YYYY-MM-DD HH:mm:ss"),logStatus:0,logToken:JSON.stringify(i),yearId:this.year.id,store_id:this.store_info.id}),r="insert item",this.logHistoryArr.push({id:null,logRef:this.generateRandom(r),userId:this.user_info.id,typee:r,datee:x(s).locale("en").format("YYYY-MM-DD HH:mm:ss"),logStatus:0,logToken:JSON.stringify(e),yearId:this.year.id,store_id:this.store_info.id})):("update"==n?r="update item":"delete"==n&&(r="delete item"),this.logHistoryArr.push({id:null,logRef:this.generateRandom(r),userId:this.user_info.id,typee:r,datee:x(s).locale("en").format("YYYY-MM-DD HH:mm:ss"),logStatus:0,logToken:JSON.stringify(e),yearId:this.year.id,store_id:this.store_info.id})),this.logHistoryArr}saveLogHistory(e,i,n){let s=this.prepareLogHistory(e,i,n);this.api.saveLogHistoryMulti(s[0],s[1],n).subscribe(r=>{"Post Not Created"!=r.message?(this.resetPaginationAndReload(),this.logHistoryArr=[]):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},r=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}saveItemStock(){return(0,g.mG)(this,void 0,void 0,function*(){this.api.saveItemStock(this.itemSstock).subscribe(e=>{this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success")},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})})}incresePrice(e){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 ..."),this.api.increasePrice(e.payval,e.perchval).subscribe(i=>{"Post Not Updated"!=i.message?this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success"):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},i=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}decreasePrice(e){this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 ..."),this.api.decreasePrice(e.payval,e.perchval).subscribe(i=>{"Post Not Updated"!=i.message?(this.presentToast("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d","success"),this.resetPaginationAndReload()):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},i=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}calculateTotals(){this.store_tot=0,this.cost_tot=0,this.itemsAll.forEach(e=>{this.store_tot+=e.stockValuePayPrice,this.cost_tot+=e.stockValuePerchPrice})}loadItemsWithPagination(){console.log("loadItemsWithPagination"),!this.paginationLoading&&(this.paginationLoading=!0,console.log("loadItemsWithPagination - no filters applied"),this.api.getStockItemsWithPagination(this.store_info.id,this.paginationCurrentPage,this.paginationPageSize).subscribe(e=>{var i;console.log("Paginated items response:",e),e&&e.data&&(this.paginatedItems=1===this.paginationCurrentPage?e.data:[...this.paginatedItems,...e.data],1===this.paginationCurrentPage&&this.currentSort.column&&this.currentSort.direction&&(this.paginatedItems=this.sortArray([...this.paginatedItems],this.currentSort.column,this.currentSort.direction)),this.paginationHasMore=(null===(i=e.pagination)||void 0===i?void 0:i.hasMore)||!1,e.totals&&(this.paginationStockTotals=e.totals)),this.paginationLoading=!1},e=>{console.error("Error loading paginated items:",e),this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","danger"),this.paginationLoading=!1}))}loadMoreItems(){this.paginationHasMore&&!this.paginationLoading&&(this.paginationCurrentPage++,this.loadItemsWithPagination())}resetPaginationAndReload(){this.paginationCurrentPage=1,this.paginatedItems=[],this.paginationHasMore=!1,this.loadItemsWithPagination()}resetPaginationAndReloadWithTotals(){this.paginationCurrentPage=1,this.paginatedItems=[],this.paginationHasMore=!1,this.loadItemsWithPagination(),this.loadStockTotals()}onPaginationSearchChange(e){this.searchSubject.next(e.target.value||"")}setPaginationFilter(e,i){this.paginationFilters[e]=i,this.resetPaginationAndReload()}clearPaginationFilters(){this.paginationFilters={},this.resetPaginationAndReload()}togglePaginatedView(){this.showPaginatedView=!this.showPaginatedView,this.resetPaginationAndReload()}loadStockTotals(){console.log("Loading stock totals..."),!this.loadingStockTotals&&(this.loadingStockTotals=!0,this.api.getStockTotals(this.store_info.id,this.year.id).subscribe(e=>{console.log("Stock totals response:",e),e&&e.data?(this.stockValuePayPrice=parseFloat(e.data.stockValuePayPrice)||0,this.stockValuePerchPrice=parseFloat(e.data.stockValuePerchPrice)||0):(this.stockValuePayPrice=0,this.stockValuePerchPrice=0),this.loadingStockTotals=!1},e=>{console.error("Error loading stock totals:",e),this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062e\u0632\u0648\u0646","danger"),this.loadingStockTotals=!1,this.stockValuePayPrice=0,this.stockValuePerchPrice=0}))}loadFilteredItems(){console.log("loadFilteredItems"),this.loading=!0;const e={brand:this.filterState.brand.selectedBrands.join(",")||"",model:this.filterState.model.selectedModels.join(",")||"",quantity_filter:this.filterState.quantity.isActive?this.filterState.quantity.filterType:""};console.log("loadFilteredItems - filters:",e),this.api.getFilteredStockItems(this.store_info.id,this.year.id,e).subscribe(i=>{console.log("Filtered items response:",i),i&&i.data?(this.filterArray=i.data,this.currentSort.column&&this.currentSort.direction&&(this.filterArray=this.sortArray([...this.filterArray],this.currentSort.column,this.currentSort.direction)),this.store_tot=0,this.cost_tot=0,this.filterArray.forEach(n=>{this.store_tot+=n.stockValuePayPrice||0,this.cost_tot+=n.stockValuePerchPrice||0})):(this.filterArray=[],this.store_tot=0,this.cost_tot=0),this.loading=!1},i=>{console.error("Error loading filtered items:",i),this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0641\u0644\u062a\u0631\u0629","danger"),this.loading=!1,this.filterArray=[],this.store_tot=0,this.cost_tot=0})}loadBrandsFromBackend(){var e,i;(null===(e=this.store_info)||void 0===e?void 0:e.id)&&(null===(i=this.year)||void 0===i?void 0:i.id)?this.api.getUniqueBrands(this.store_info.id,this.year.id).subscribe(n=>{n&&n.data&&(this.availableBrands=n.data.map(s=>({brand:s.brand,selected:!1,count:s.count||0})),this.filteredAvailableBrands=[...this.availableBrands])},n=>{console.error("Error loading brands:",n)}):console.log("Store info or year not available yet")}loadModelsFromBackend(){var e,i;if(!(null===(e=this.store_info)||void 0===e?void 0:e.id)||!(null===(i=this.year)||void 0===i?void 0:i.id))return void console.log("Store info or year not available yet");const n=this.filterState.brand.selectedBrands.join(",");this.api.getUniqueModels(this.store_info.id,this.year.id,n).subscribe(s=>{s&&s.data&&(this.availableModels=s.data.map(r=>({model:r.model,selected:!1,count:r.count||0})),this.filteredAvailableModels=[...this.availableModels])},s=>{console.error("Error loading models:",s)})}onBrandSearchInput(e){const i=e.target.value.toLowerCase();this.brandSearchTerm=i,this.filteredAvailableBrands=i.trim()?this.availableBrands.filter(n=>n.brand.toLowerCase().includes(i)):[...this.availableBrands]}onModelSearchInput(e){const i=e.target.value.toLowerCase();this.modelSearchTerm=i,this.filteredAvailableModels=i.trim()?this.availableModels.filter(n=>n.model.toLowerCase().includes(i)):[...this.availableModels]}toggleBrandFilter(){this.hideAllFilters(),this.filterState.brand.isVisible=!this.filterState.brand.isVisible,this.filterState.brand.isVisible&&this.loadBrandsFromBackend()}toggleModelFilter(){this.hideAllFilters(),this.filterState.model.isVisible=!this.filterState.model.isVisible,this.filterState.model.isVisible&&this.loadModelsFromBackend()}toggleQuantityFilter(){this.hideAllFilters(),this.filterState.quantity.isVisible=!this.filterState.quantity.isVisible}hideBrandFilter(){this.filterState.brand.isVisible=!1}hideModelFilter(){this.filterState.model.isVisible=!1}hideQuantityFilter(){this.filterState.quantity.isVisible=!1}hideAllFilters(){this.filterState.brand.isVisible=!1,this.filterState.model.isVisible=!1,this.filterState.quantity.isVisible=!1}onQuantityFilterChange(e){this.filterState.quantity.filterType=e.detail.value}toggleAllItemsView(){this.showAllItemsView=!this.showAllItemsView,this.showAllItemsView?(this.resetFiltersAndSearch(),this.loadAllItems()):this.showPaginatedView=!0}resetFiltersAndSearch(){this.hasActiveFilters()&&this.clearAllFilters(),(this.showSearchView||this.searchTerm)&&this.clearSearch(),this.filterMode=!1,this.showSearchView=!1,this.showPaginatedView=!1}loadAllItems(){var e;(null===(e=this.store_info)||void 0===e?void 0:e.id)?(this.loadingAllItems=!0,this.allItemsData=[],this.api.getAllStockItems(this.store_info.id).subscribe({next:i=>{console.log("All items data:",i),i&&i.data?(this.allItemsData=i.data,this.allItemsData.forEach(n=>{+n.availQty-+n.qtyReal<0?n.perchQuantity=+n.perchQuantity+Math.abs(+n.availQty-+n.qtyReal):+n.availQty-+n.qtyReal>0&&(n.salesQuantity=+n.availQty-+n.qtyReal+ +n.salesQuantity),n.quantity=+n.firstQuantity+ +n.perchQuantity-+n.salesQuantity,n.stockValuePayPrice=+n.quantity*+n.pay_price,n.stockValuePerchPrice=+n.quantity*+n.perch_price}),this.allItemsStockTotals=i.totals||{store_tot:0,cost_tot:0,items_count:0},this.currentSort.column&&this.currentSort.direction&&(this.allItemsData=this.sortArray([...this.allItemsData],this.currentSort.column,this.currentSort.direction)),this.presentToast(`\u062a\u0645 \u062a\u062d\u0645\u064a\u0644 ${this.allItemsData.length} \u0635\u0646\u0641 \u0628\u0646\u062c\u0627\u062d`,"success")):(this.allItemsData=[],this.allItemsStockTotals={store_tot:0,cost_tot:0,items_count:0},this.presentToast("\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0635\u0646\u0627\u0641","warning")),this.loadingAllItems=!1},error:i=>{console.error("Error loading all items:",i),this.loadingAllItems=!1,this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0623\u0635\u0646\u0627\u0641","danger")}})):this.presentToast("\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062a\u062c\u0631 \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631\u0629","danger")}returnToPaginationView(){this.showAllItemsView=!1,this.showPaginatedView=!0,this.allItemsData=[],this.allItemsStockTotals={store_tot:0,cost_tot:0,items_count:0}}onSearchChange(e){const i=e.detail.value||e.target.value;this.searchTerm=i,i&&i.trim().length>=2?this.performSearch(i.trim()):0===i.trim().length&&this.clearSearch()}performSearch(e){var i;!(null===(i=this.store_info)||void 0===i?void 0:i.id)||!e||e.trim().length<2||(console.log("Starting search for:",e),this.showSearchView=!0,this.showAllItemsView=!1,this.showPaginatedView=!1,this.searchMode=!1,this.loadingSearch=!0,this.currentSearchTerm=e,this.searchData=[],console.log("Search view state:",{showSearchView:this.showSearchView,showAllItemsView:this.showAllItemsView,showPaginatedView:this.showPaginatedView,searchMode:this.searchMode}),this.api.searchStockItems(this.store_info.id,e).subscribe({next:n=>{console.log("Search results:",n),n&&n.data?(this.searchData=n.data,this.searchData.forEach(s=>{+s.availQty-+s.qtyReal<0?s.perchQuantity=+s.perchQuantity+Math.abs(+s.availQty-+s.qtyReal):+s.availQty-+s.qtyReal>0&&(s.salesQuantity=+s.availQty-+s.qtyReal+ +s.salesQuantity),s.quantity=+s.firstQuantity+ +s.perchQuantity-+s.salesQuantity,s.stockValuePayPrice=+s.quantity*+s.pay_price,s.stockValuePerchPrice=+s.quantity*+s.perch_price}),this.searchStockTotals=n.totals||{store_tot:0,cost_tot:0,items_count:0},this.currentSort.column&&this.currentSort.direction&&(this.searchData=this.sortArray([...this.searchData],this.currentSort.column,this.currentSort.direction)),this.searchData.length>0?this.presentToast(`\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 ${this.searchData.length} \u0635\u0646\u0641`,"success"):this.presentToast(`\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u0644\u0644\u0628\u062d\u062b \u0639\u0646 "${e}"`,"warning")):(this.searchData=[],this.searchStockTotals={store_tot:0,cost_tot:0,items_count:0},this.presentToast(`\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u0644\u0644\u0628\u062d\u062b \u0639\u0646 "${e}"`,"warning")),this.loadingSearch=!1,console.log("Search completed. Final state:",{showSearchView:this.showSearchView,searchDataLength:this.searchData.length,loadingSearch:this.loadingSearch})},error:n=>{console.error("Error searching items:",n),this.loadingSearch=!1,this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0628\u062d\u062b","danger")}}))}clearSearch(){console.log("Clearing search..."),this.showSearchView=!1,this.showPaginatedView=!0,this.searchData=[],this.searchStockTotals={store_tot:0,cost_tot:0,items_count:0},this.currentSearchTerm="",this.searchTerm="",console.log("Search cleared. New state:",{showSearchView:this.showSearchView,showPaginatedView:this.showPaginatedView})}formatBalance(e){return e||0===e?new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Math.abs(e)):"0.00"}hasDataForExport(){return this.showAllItemsView?this.allItemsData&&this.allItemsData.length>0||!1:this.showSearchView&&this.currentSearchTerm&&this.currentSearchTerm.trim().length>0?this.searchData&&this.searchData.length>0||!1:this.hasActiveFilters()?this.filterArray&&this.filterArray.length>0||!1:this.showPaginatedView?this.paginatedItems&&this.paginatedItems.length>0||this.items&&this.items.length>0||!1:this.items&&this.items.length>0||!1}getCurrentTableData(){return this.showAllItemsView?this.allItemsData||[]:this.showSearchView&&this.currentSearchTerm&&this.currentSearchTerm.trim().length>0?this.searchData||[]:this.hasActiveFilters()?this.filterArray||[]:this.showPaginatedView?this.paginatedItems||[]:this.items||[]}getDataForExport(){return this.showAllItemsView?this.allItemsData||[]:this.showSearchView&&this.currentSearchTerm&&this.currentSearchTerm.trim().length>0?this.searchData||[]:this.hasActiveFilters()?this.filterArray||[]:this.showPaginatedView&&this.paginatedItems&&this.paginatedItems.length>0?this.paginatedItems:this.items||[]}exportToPDF(){var e,i;return(0,g.mG)(this,void 0,void 0,function*(){const n=this.getDataForExport();if(!n||0===n.length)return void(yield this.presentToast("\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u062a\u0635\u062f\u064a\u0631","warning"));const s=n.map(u=>Object.assign(Object.assign({},u),{currentQuantity:u.quantity||0,item_parcode:u.pay_price||0,item_Sell_price:u.perch_price||0}));let r="all";this.filterMode||this.hasActiveFilters()?r="filtered":this.searchTerm&&""!==this.searchTerm.trim()&&(r="search"),yield(yield this.modalController.create({component:w.e,componentProps:{printData:s,exportMode:r,userName:(null===(e=this.user_info)||void 0===e?void 0:e.full_name)||(null===(i=this.user_info)||void 0===i?void 0:i.user_name)||"\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"},cssClass:"print-modal"})).present()})}exportToExcel(){var e,i;return(0,g.mG)(this,void 0,void 0,function*(){const n=this.getDataForExport();if(!n||0===n.length)return void(yield this.presentToast("\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u062a\u0635\u062f\u064a\u0631","warning"));const s={title:this.exportService.generateDynamicTitle("item-stock"),subtitle:this.generateSubtitle(),fileName:`item-stock-${this.datePipe.transform(new Date,"yyyy-MM-dd")}`,data:n,columns:this.getExportColumns(),userName:(null===(e=this.user_info)||void 0===e?void 0:e.full_name)||(null===(i=this.user_info)||void 0===i?void 0:i.user_name)||"\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",pageType:"item-stock",currentDate:this.datePipe.transform(new Date,"yyyy-MM-dd")||""};yield this.exportService.exportToExcel(s)})}generateSubtitle(){let e="";if(this.hasActiveFilters()){const i=[];this.filterState.brand.selectedBrands&&this.filterState.brand.selectedBrands.length>0&&i.push(`\u0645\u0627\u0631\u0643\u0629: ${this.filterState.brand.selectedBrands.join(", ")}`),this.filterState.model.selectedModels&&this.filterState.model.selectedModels.length>0&&i.push(`\u0645\u0648\u062f\u064a\u0644: ${this.filterState.model.selectedModels.join(", ")}`),this.filterState.quantity.isActive&&("min"===this.filterState.quantity.filterType?i.push(`\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649: ${this.filterState.quantity.minQuantity}`):"max"===this.filterState.quantity.filterType?i.push(`\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649: ${this.filterState.quantity.maxQuantity}`):"range"===this.filterState.quantity.filterType&&i.push(`\u0646\u0637\u0627\u0642 \u0627\u0644\u0643\u0645\u064a\u0629: ${this.filterState.quantity.minQuantity} - ${this.filterState.quantity.maxQuantity}`)),i.length>0&&(e=`\u0641\u0644\u062a\u0631: ${i.join(" - ")}`)}return this.searchTerm&&(e=e?`${e} - \u0627\u0644\u0628\u062d\u062b: ${this.searchTerm}`:`\u0627\u0644\u0628\u062d\u062b: ${this.searchTerm}`),this.showAllItemsView?e=e?`${e} - \u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641`:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641":this.showSearchView&&(e=e?`${e} - \u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0628\u062d\u062b`:"\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0628\u062d\u062b"),e}getExportColumns(){const e=[];return e.push({key:"serialNumber",title:"\u0627\u0644\u062a\u0633\u0644\u0633\u0644",width:8,type:"number"}),this.colSetting.item_name&&e.push({key:"item_name",title:"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641",width:25,type:"text"}),this.colSetting.item_desc&&e.push({key:"item_desc",title:"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641 (English)",width:25,type:"text"}),this.colSetting.aliasEn&&e.push({key:"aliasEn",title:"\u0627\u0633\u0645 \u0645\u0633\u062a\u0639\u0627\u0631 (Alias)",width:20,type:"text"}),this.colSetting.model&&e.push({key:"model",title:"\u0627\u0644\u0645\u0648\u062f\u064a\u0644",width:15,type:"text"}),this.colSetting.part_no&&e.push({key:"part_no",title:"\u0627\u0644\u0643\u0648\u062f (part no)",width:15,type:"text"}),this.colSetting.brand&&e.push({key:"brand",title:"\u0627\u0644\u0645\u0627\u0631\u0643\u0629",width:15,type:"text"}),this.colSetting.min_qty&&e.push({key:"min_qty",title:"\u0627\u0642\u0644 \u0643\u0645\u064a\u0629 (MSQ)",width:12,type:"number"}),this.colSetting.item_unit&&e.push({key:"item_unit",title:"\u0627\u0644\u0648\u062d\u062f\u0647",width:10,type:"text"}),this.colSetting.perch_price&&e.push({key:"perch_price",title:"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621",width:12,type:"currency"}),this.colSetting.pay_price&&e.push({key:"pay_price",title:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0647",width:12,type:"currency"}),this.colSetting.profit&&e.push({key:"profitPercentage",title:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0641\u0627\u0626\u062f\u0629",width:12,type:"number"}),this.colSetting.instock&&e.push({key:"quantity",title:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646",width:12,type:"number"}),this.colSetting.total&&e.push({key:"stockValue",title:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639",width:15,type:"currency"}),this.colSetting.lastSold&&e.push({key:"lastSoldDate",title:"\u0627\u062e\u0631 \u0639\u0645\u0644\u064a\u0629 \u0628\u064a\u0639",width:15,type:"text"}),e.push({key:"firstQuantity",title:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0625\u0641\u062a\u062a\u0627\u062d\u064a",width:15,type:"number"}),e}getCurrencySymbol(){return this.currencyService.getCurrentCurrencySymbol()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.F0),t.Y36(q.$),t.Y36(O.u),t.Y36(J.h),t.Y36(Q.K),t.Y36(_.Br),t.Y36(_.IN),t.Y36(_.HT),t.Y36(p.uU),t.Y36(U.r),t.Y36(_.yF),t.Y36(F.T),t.Y36(N.i),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-item-stock"]],viewQuery:function(e,i){if(1&e&&(t.Gf(B,5),t.Gf(H,5),t.Gf(E,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.actionPopover=n.first),t.iGM(n=t.CRH())&&(i.popoverNotif33=n.first),t.iGM(n=t.CRH())&&(i.exceltable=n.first)}},hostBindings:function(e,i){1&e&&t.NdJ("keydown.escape",function(s){return i.onKeydownHandler(s)},!1,t.evT)},decls:103,vars:41,consts:[["slot","start"],["slot","end"],["fill","clear",3,"click"],["name","refresh-outline","slot","icon-only"],[1,"custContent"],["dir","rtl"],["size","12"],[1,"ion-no-margin"],["size","5"],["lines","none"],["showCancelButton","never","placeholder","\u0628\u062d\u0640\u0640\u062b",3,"ngModel","ngModelChange","ionChange"],["size","7"],["fill","outline","color","primary","shape","round",3,"click"],["name","settings-outline","color","primary"],["color","dark"],["name","create-outline","color","primary"],["name","add-circle-outline","color","primary"],["size","3",1,"ion-text-end"],[4,"ngIf"],["size","3",1,"ion-text-start"],[1,"filter-bar","ion-margin-top"],[1,"filter-buttons",2,"display","flex","justify-content","space-between","align-items","center"],[2,"display","flex","gap","8px","flex-wrap","wrap"],["fill","outline","color","primary","shape","round","size","small"],["name","filter-outline","color","success"],[1,"ion-margin-start","ion-margin-end"],["fill","outline","size","small",3,"click"],["name","pricetag-outline","slot","start"],["color","primary",4,"ngIf"],["name","car-outline","slot","start"],["name","layers-outline","slot","start"],["fill","clear","size","small","color","medium",3,"click",4,"ngIf"],["fill","outline","shape","round","size","small",3,"color","disabled","click"],["slot","start",3,"name"],["name","crescent","slot","end","size","small",4,"ngIf"],["class","filter-panel",4,"ngIf"],["class","selected-items-bar",4,"ngIf"],[1,"ion-no-padding"],[1,"card-header-with-export"],[3,"hasData","isLoading","exportPDF","exportExcel"],[1,"table-container"],[1,"table"],[3,"ngClass","dblclick",4,"ngFor","ngForOf"],["class","loading-container",4,"ngIf"],["class","no-data-container",4,"ngIf"],["class","totals-summary ion-padding",4,"ngIf"],["class","load-more-container",4,"ngIf"],[3,"isOpen","didDismiss"],["actionPopover",""],["class","filter-loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["animated","",2,"width","100%"],["color","primary"],["fill","clear","size","small","color","medium",3,"click"],["name","close-circle-outline","slot","start"],["name","crescent","slot","end","size","small"],[1,"filter-panel"],[1,"filter-panel-header"],["fill","clear","size","small",3,"click"],["name","close","slot","icon-only"],[1,"filter-panel-content"],["placeholder","\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0627\u0631\u0643\u0627\u062a...","clearInput","true",3,"ngModel","ngModelChange","ionInput"],["name","search-outline","slot","start"],[1,"filter-options"],["lines","none","button","",3,"click",4,"ngFor","ngForOf"],[1,"filter-panel-actions"],["fill","outline","color","medium",3,"click"],["fill","solid",3,"click"],["lines","none","button","",3,"click"],["slot","start",3,"ngModel","ngModelChange","ionChange"],["placeholder","\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0648\u062f\u064a\u0644\u0627\u062a...","clearInput","true",3,"ngModel","ngModelChange","ionInput"],[3,"ngModel","ngModelChange","ionChange"],[1,"quantity-filter-options"],["button","",1,"quantity-option-item",3,"click"],["name","trending-up-outline","color","success","slot","start"],["slot","end","value","positive"],["name","remove-outline","color","warning","slot","start"],["slot","end","value","zero"],["name","trending-down-outline","color","danger","slot","start"],["slot","end","value","negative"],[1,"selected-items-bar"],[1,"selected-items-card"],[1,"selected-items-content"],[1,"ion-align-items-center"],["size","12","size-md","6"],[1,"selected-count"],[1,"count-badge"],[1,"selected-text"],[1,"action-buttons"],[1,"action-btn","primary-action",3,"click"],["name","add-circle-outline"],[1,"action-btn","primary-action","sales-btn",3,"click"],["name","receipt-outline"],[1,"action-btn","secondary-action",3,"click"],["name","close-outline"],[3,"checked","indeterminate","ionChange"],["color","success","fill","clear","size","small",1,"ion-no-margin","ion-no-padding",3,"click"],[3,"name"],[3,"ngClass"],[3,"ngClass","dblclick"],[3,"checked","ionChange"],["fill","clear","size","small",3,"id","click"],["name","ellipsis-vertical","color","medium"],[3,"ngModel","keyup.enter","ngModelChange"],[1,"loading-container"],[1,"loading-content"],["name","crescent","color","primary"],[1,"loading-text"],[1,"no-data-container"],[1,"no-data-text"],[1,"totals-summary","ion-padding"],["size","3",1,"ion-text-center"],[1,"total-value"],[1,"load-more-container"],["fill","outline","color","primary",3,"disabled","click"],["name","refresh-outline",4,"ngIf"],["name","crescent",4,"ngIf"],[1,"ion-margin-start"],["name","refresh-outline"],["name","crescent"],["button","",3,"click"],["name","create-outline","color","success","slot","start"],["name","analytics-outline","color","primary","slot","start"],["name","trash","color","danger","slot","start"],[1,"filter-loading-container"],["id","exceltable",1,"table"],["colspan","16",1,"ion-text-center","ion-padding"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"app-currency-switcher"),t.TgZ(6,"ion-button",2),t.NdJ("click",function(){return i.refreshToInitialState()}),t._UZ(7,"ion-icon",3),t.qZA(),t.qZA(),t.TgZ(8,"ion-title"),t._uU(9,"\u0627\u0644\u0623\u0635\u0646\u0640\u0640\u0627\u0641"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"ion-content",4),t.TgZ(11,"ion-grid"),t.TgZ(12,"ion-row",5),t.TgZ(13,"ion-col",6),t.TgZ(14,"ion-card",7),t.TgZ(15,"ion-grid"),t.TgZ(16,"ion-row"),t.TgZ(17,"ion-col",8),t.TgZ(18,"ion-item",9),t.TgZ(19,"ion-searchbar",10),t.NdJ("ngModelChange",function(s){return i.searchTerm=s})("ionChange",function(s){return i.onSearchChange(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"ion-col",11),t.TgZ(21,"ion-item",9),t.TgZ(22,"ion-buttons",1),t.TgZ(23,"ion-button",12),t.NdJ("click",function(){return i.presentModal("null","settings")}),t._UZ(24,"ion-icon",13),t.TgZ(25,"ion-label"),t.TgZ(26,"ion-text",14),t._uU(27," \u0625\u062e\u0641\u0627\u0621 \u0627\u0644\u0623\u0639\u0645\u062f\u0629"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"ion-button",12),t.NdJ("click",function(){return i.presentModal("null","price")}),t._UZ(29,"ion-icon",15),t.TgZ(30,"ion-label"),t.TgZ(31,"ion-text",14),t._uU(32,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0623\u0633\u0639\u0627\u0631"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"ion-button",12),t.NdJ("click",function(){return i.presentModal("null","save")}),t._UZ(34,"ion-icon",16),t.TgZ(35,"ion-label"),t.TgZ(36,"ion-text",14),t._uU(37,"\u0635\u0646\u0641 \u062c\u062f\u064a\u062f"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"ion-grid"),t.TgZ(39,"ion-row",5),t.TgZ(40,"ion-col",17),t.YNc(41,Y,4,0,"ion-label",18),t.qZA(),t.TgZ(42,"ion-col",19),t.YNc(43,z,3,2,"ion-label",18),t.qZA(),t.TgZ(44,"ion-col",17),t.YNc(45,j,4,0,"ion-label",18),t.qZA(),t.TgZ(46,"ion-col",19),t.YNc(47,K,3,2,"ion-label",18),t.qZA(),t.qZA(),t.TgZ(48,"div",20),t.TgZ(49,"div",21),t.TgZ(50,"div",22),t.TgZ(51,"ion-button",23),t._UZ(52,"ion-icon",24),t.TgZ(53,"ion-label",25),t.TgZ(54,"ion-text",14),t._uU(55," \u0641\u0644\u062a\u0631 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"ion-button",26),t.NdJ("click",function(){return i.toggleBrandFilter()}),t._UZ(57,"ion-icon",27),t._uU(58," Brand(\u0627\u0644\u0645\u0627\u0631\u0643\u0629) "),t.YNc(59,X,2,1,"ion-badge",28),t.qZA(),t.TgZ(60,"ion-button",26),t.NdJ("click",function(){return i.toggleModelFilter()}),t._UZ(61,"ion-icon",29),t._uU(62," Model (\u0627\u0644\u0645\u0648\u062f\u064a\u0644) "),t.YNc(63,tt,2,1,"ion-badge",28),t.qZA(),t.TgZ(64,"ion-button",26),t.NdJ("click",function(){return i.toggleQuantityFilter()}),t._UZ(65,"ion-icon",30),t._uU(66," Quantity (\u0627\u0644\u0643\u0645\u064a\u0629) "),t.YNc(67,et,2,0,"ion-badge",28),t.qZA(),t.YNc(68,it,3,0,"ion-button",31),t.qZA(),t.TgZ(69,"div"),t.TgZ(70,"ion-button",32),t.NdJ("click",function(){return i.toggleAllItemsView()}),t._UZ(71,"ion-icon",33),t.TgZ(72,"ion-label"),t._uU(73),t.qZA(),t.YNc(74,nt,1,0,"ion-spinner",34),t.qZA(),t.qZA(),t.qZA(),t.YNc(75,st,17,2,"div",35),t.YNc(76,at,17,2,"div",35),t.YNc(77,ct,38,7,"div",35),t.qZA(),t.YNc(78,lt,27,1,"div",36),t.qZA(),t.TgZ(79,"ion-card"),t.TgZ(80,"ion-card-header",37),t.TgZ(81,"div",38),t.TgZ(82,"ion-card-title"),t.YNc(83,ut,2,0,"span",18),t.YNc(84,_t,2,0,"span",18),t.YNc(85,dt,2,0,"span",18),t.qZA(),t.TgZ(86,"app-export-buttons",39),t.NdJ("exportPDF",function(){return i.exportToPDF()})("exportExcel",function(){return i.exportToExcel()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"div",40),t.TgZ(88,"table",41),t.YNc(89,gt,68,80,"tr",18),t.YNc(90,Ut,50,97,"tr",42),t.YNc(91,Ft,37,0,"tr",18),t.YNc(92,Nt,39,0,"tr",18),t.qZA(),t.qZA(),t.YNc(93,Et,9,5,"div",43),t.YNc(94,zt,5,3,"div",44),t.YNc(95,jt,25,8,"div",45),t.YNc(96,Rt,28,11,"div",45),t.YNc(97,Xt,6,4,"div",46),t.TgZ(98,"ion-popover",47,48),t.NdJ("didDismiss",function(){return i.isActionPopoverOpen=!1}),t.YNc(100,te,14,0,"ng-template"),t.qZA(),t.qZA(),t.YNc(101,ee,5,0,"div",49),t.YNc(102,Ie,6,4,"div",50),t.qZA()),2&e&&(t.xp6(19),t.Q6J("ngModel",i.searchTerm),t.xp6(22),t.Q6J("ngIf",0==i.filterMode),t.xp6(2),t.Q6J("ngIf",0==i.filterMode),t.xp6(2),t.Q6J("ngIf",0==i.filterMode&&""==i.searchTerm),t.xp6(2),t.Q6J("ngIf",0==i.filterMode&&""==i.searchTerm),t.xp6(9),t.ekj("filter-active",i.filterState.brand.isActive),t.xp6(3),t.Q6J("ngIf",i.filterState.brand.selectedBrands.length>0),t.xp6(1),t.ekj("filter-active",i.filterState.model.isActive),t.xp6(3),t.Q6J("ngIf",i.filterState.model.selectedModels.length>0),t.xp6(1),t.ekj("filter-active",i.filterState.quantity.isActive),t.xp6(3),t.Q6J("ngIf",i.filterState.quantity.isActive),t.xp6(1),t.Q6J("ngIf",i.hasActiveFilters()),t.xp6(2),t.s9C("color",i.showAllItemsView?"success":"primary"),t.Q6J("disabled",i.loadingAllItems),t.xp6(1),t.s9C("name",i.showAllItemsView?"checkmark-circle-outline":"list-outline"),t.xp6(2),t.Oqu(i.showAllItemsView?"\u0639\u0631\u0636 \u0645\u0631\u0642\u0645":"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641"),t.xp6(1),t.Q6J("ngIf",i.loadingAllItems),t.xp6(1),t.Q6J("ngIf",i.filterState.brand.isVisible),t.xp6(1),t.Q6J("ngIf",i.filterState.model.isVisible),t.xp6(1),t.Q6J("ngIf",i.filterState.quantity.isVisible),t.xp6(1),t.Q6J("ngIf",i.selectedItemsList.length>0),t.xp6(5),t.Q6J("ngIf",!i.showSearchView&&!i.hasActiveFilters()),t.xp6(1),t.Q6J("ngIf",i.showSearchView&&i.currentSearchTerm&&i.currentSearchTerm.trim().length>0),t.xp6(1),t.Q6J("ngIf",i.hasActiveFilters()&&!i.showSearchView),t.xp6(1),t.Q6J("hasData",i.hasDataForExport())("isLoading",i.loading||i.loadingTot&&!i.showPaginatedView||i.showPaginatedView&&i.paginationLoading&&1===i.paginationCurrentPage||i.showAllItemsView&&i.loadingAllItems||i.showSearchView&&i.loadingSearch),t.xp6(3),t.Q6J("ngIf",i.colSetting),t.xp6(1),t.Q6J("ngForOf",i.getCurrentTableData()),t.xp6(1),t.Q6J("ngIf",1==i.loadingTot),t.xp6(1),t.Q6J("ngIf",1==i.loadingTot),t.xp6(1),t.Q6J("ngIf",i.loading||i.showPaginatedView&&i.paginationLoading&&1===i.paginationCurrentPage||i.loadingTot&&!i.showPaginatedView),t.xp6(1),t.Q6J("ngIf",!(i.loading||i.loadingTot&&!i.showPaginatedView||i.showPaginatedView&&i.paginationLoading&&1===i.paginationCurrentPage||0!==i.getCurrentTableData().length)),t.xp6(1),t.Q6J("ngIf",i.showSearchView&&i.currentSearchTerm&&i.currentSearchTerm.trim().length>0&&!i.loadingSearch&&i.searchData.length>0),t.xp6(1),t.Q6J("ngIf",i.showAllItemsView&&!i.loadingAllItems),t.xp6(1),t.Q6J("ngIf",i.paginationHasMore&&!i.filterMode&&!i.showSearchView&&!i.showAllItemsView||i.hasActiveFilters()&&i.filterArray.length>0&&!i.showAllItemsView&&!i.showSearchView),t.xp6(1),t.Q6J("isOpen",i.isActionPopoverOpen),t.xp6(3),t.Q6J("ngIf",i.loading&&i.filterMode&&i.exportMode),t.xp6(1),t.Q6J("ngIf",1==i.filterMode&&!i.loading&&1==i.exportMode))},directives:[_.Gu,_.sr,_.Sm,_.fG,D.d,_.YG,_.gu,_.wd,_.W2,_.jY,_.Nd,_.wI,_.PM,_.Ie,_.VI,_.j9,m.JJ,m.On,_.Q$,_.yW,p.O5,_.Zi,_.Dq,L.a,p.sg,_.d8,_.CK,_.yp,_.PQ,_.pK,_.nz,_.w,_.se,_.QI,_.B7,_.U5,p.mk,_.FN,_.q_],pipes:[V.v,p.JJ],styles:['ion-content[_ngcontent-%COMP%]{--padding-top: 8px;--padding-bottom: 8px;--padding-start: 8px;--padding-end: 8px}.category-filter-card[_ngcontent-%COMP%]{margin-bottom:8px}.category-filter-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px}.category-segment[_ngcontent-%COMP%]{--background: var(--ion-color-light)}.category-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: var(--ion-color-dark);--color-checked: var(--ion-color-primary-contrast);--background-checked: var(--ion-color-primary);--indicator-color: transparent;--border-radius: 8px;margin:2px;min-height:36px}.category-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;white-space:nowrap}.category-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.filter-bar[_ngcontent-%COMP%]{background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-medium);padding:12px 16px;position:sticky;top:0;z-index:100;box-shadow:0 2px 4px #0000001a}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:8px}.filter-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 20px;--padding-start: 12px;--padding-end: 12px;height:36px;font-size:14px;font-weight:500;position:relative;transition:all .3s ease}.filter-buttons[_ngcontent-%COMP%]   ion-button.filter-active[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast);--border-color: var(--ion-color-primary);box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.3);transform:translateY(-1px)}.filter-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;min-width:18px;height:18px;font-size:11px;border-radius:9px}.filter-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:4px}.filter-panel[_ngcontent-%COMP%]{background:white;border:1px solid var(--ion-color-medium);border-radius:12px;box-shadow:0 4px 16px #0000001a;margin-top:8px;overflow:hidden;animation:slideDown .3s ease-out}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.filter-panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-medium)}.filter-panel-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--ion-color-dark)}.filter-panel-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--color: var(--ion-color-medium)}.filter-panel-content[_ngcontent-%COMP%]{padding:16px}.filter-options[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;margin-bottom:16px}.filter-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--min-height: 40px}.filter-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-right:12px;--size: 18px;--checkmark-width: 2px}.filter-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-dark)}.quantity-inputs[_ngcontent-%COMP%]   .ion-item[_ngcontent-%COMP%]{margin-bottom:8px}.quantity-inputs[_ngcontent-%COMP%]   .ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:var(--ion-color-medium)}.quantity-inputs[_ngcontent-%COMP%]   .ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 0;font-size:14px}.filter-panel-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;padding-top:12px;border-top:1px solid var(--ion-color-light)}.filter-panel-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;--padding-start: 16px;--padding-end: 16px;height:36px;font-size:14px;font-weight:500}@media (max-width: 768px){.filter-buttons[_ngcontent-%COMP%]{justify-content:flex-start}.filter-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:12px;height:32px;--padding-start: 8px;--padding-end: 8px}.filter-panel-actions[_ngcontent-%COMP%]{flex-direction:column}.filter-panel-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}}@media (prefers-color-scheme: dark){.filter-bar[_ngcontent-%COMP%]{background:var(--ion-color-dark);border-bottom-color:var(--ion-color-medium)}.filter-panel[_ngcontent-%COMP%]{background:var(--ion-color-dark);border-color:var(--ion-color-medium)}.filter-panel-header[_ngcontent-%COMP%]{background:var(--ion-color-step-50);border-bottom-color:var(--ion-color-medium)}.filter-panel-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--ion-color-light)}}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--ion-color-light);border-radius:2px}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--ion-color-medium);border-radius:2px}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--ion-color-dark)}.showMe[_ngcontent-%COMP%]{color:#000}.hideMe[_ngcontent-%COMP%]{display:none}.custInput[_ngcontent-%COMP%]{border-style:solid;border-color:var(--ion-color-light);border-radius:5px}.cust-card[_ngcontent-%COMP%]{border-radius:5px}.custContent[_ngcontent-%COMP%]{white-space:nowrap}.custRow[_ngcontent-%COMP%]{margin-top:5rem}.custCol[_ngcontent-%COMP%]{overflow-x:auto;height:400px}.table-container[_ngcontent-%COMP%]{margin:0;padding:0;overflow-x:auto;width:100%}.table[_ngcontent-%COMP%]{text-align:center;width:100%;min-width:1200px;margin:12px 0;border-collapse:collapse;background:white}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;border-bottom:2px solid var(--ion-color-primary);font-weight:700;padding:8px 4px}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#ddd}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:center;padding:4px;font-size:16px;font-weight:700;color:#000}.selected-items-bar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;margin:8px 0;animation:slideDown .3s ease-out}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-card[_ngcontent-%COMP%]{border-radius:16px;border:2px solid var(--ion-color-success);background:linear-gradient(135deg,rgba(var(--ion-color-success-rgb),.08) 0%,rgba(var(--ion-color-success-rgb),.04) 100%);box-shadow:0 4px 12px rgba(var(--ion-color-success-rgb),.15);margin:0;transition:all .3s cubic-bezier(.4,0,.2,1)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(var(--ion-color-success-rgb),.25)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]{padding:12px 16px}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{background:var(--ion-color-success);color:#fff;border-radius:12px;padding:4px 12px;font-size:.875rem;font-weight:600;min-width:24px;text-align:center;animation:pulse .5s ease-in-out}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]   .selected-text[_ngcontent-%COMP%]{color:var(--ion-color-success-shade);font-weight:600;font-size:.95rem}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--border-radius: 20px;--padding-start: 16px;--padding-end: 16px;--padding-top: 8px;--padding-bottom: 8px;height:36px;font-size:.875rem;font-weight:500;transition:all .2s ease;position:relative;overflow:hidden}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000026}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000040}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action[_ngcontent-%COMP%]:hover:before{left:100%}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action.purchase-btn[_ngcontent-%COMP%]{--background: var(--ion-color-success);--color: white;box-shadow:0 2px 8px rgba(var(--ion-color-success-rgb),.3)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action.purchase-btn[_ngcontent-%COMP%]:hover{--background: var(--ion-color-success-shade);box-shadow:0 4px 12px rgba(var(--ion-color-success-rgb),.4)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action.sales-btn[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: white;box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.3)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action.sales-btn[_ngcontent-%COMP%]:hover{--background: var(--ion-color-primary-shade);box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.4)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.secondary-action[_ngcontent-%COMP%]{--background: transparent;--color: var(--ion-color-success);--border-color: var(--ion-color-success);--border-style: solid;--border-width: 1.5px}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.secondary-action[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-color-success-rgb), .1);transform:translateY(-1px)}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;margin-inline-end:6px}.selected-items-bar.sales-mode[_ngcontent-%COMP%]   .selected-items-card[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.08) 0%,rgba(var(--ion-color-primary-rgb),.04) 100%);box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.15)}.selected-items-bar.sales-mode[_ngcontent-%COMP%]   .selected-items-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px rgba(var(--ion-color-primary-rgb),.25)}.selected-items-bar.sales-mode[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{background:var(--ion-color-primary)}.selected-items-bar.sales-mode[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]   .selected-text[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade)}@keyframes slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.selected-items-bar.fade-out[_ngcontent-%COMP%]{animation:slideUp .3s ease-in forwards}@keyframes slideUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}@media (max-width: 768px){.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;gap:6px}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;min-width:unset}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary-action[_ngcontent-%COMP%]{order:1}.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.secondary-action[_ngcontent-%COMP%]{order:3}}@media (min-width: 769px) and (max-width: 1024px){.selected-items-bar[_ngcontent-%COMP%]   .selected-items-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;min-width:140px}}.action-btn.loading[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.action-btn.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top-color:currentColor;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.quantity-filter-options[_ngcontent-%COMP%]{padding:0}.quantity-option-item[_ngcontent-%COMP%]{--border-radius: 8px;margin-bottom:8px;border:1px solid var(--ion-color-light-shade);transition:all .2s ease}.quantity-option-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light-tint);border-color:var(--ion-color-medium)}.quantity-option-item.selected[_ngcontent-%COMP%]{--background: var(--ion-color-primary-tint);border-color:var(--ion-color-primary)}.quantity-option-item.selected[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}.quantity-option-item.selected[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{--color-checked: var(--ion-color-primary)}.quantity-option-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-end:12px;font-size:20px}.quantity-option-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:15px;font-weight:500;color:var(--ion-color-dark)}.quantity-option-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:var(--ion-color-medium);line-height:1.3}.quantity-option-item[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{--color: var(--ion-color-medium);margin:0}.filter-loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px 20px;min-height:200px}.filter-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.filter-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: var(--ion-color-primary);width:32px;height:32px}.filter-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium);font-size:14px;text-align:center}.filter-popover[_ngcontent-%COMP%]{--min-width: 320px;--max-width: 400px;--max-height: 500px}.popover-content[_ngcontent-%COMP%]{padding:0}.popover-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-medium)}.popover-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--ion-color-dark)}.popover-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--color: var(--ion-color-medium);height:32px}.popover-search[_ngcontent-%COMP%]{padding:16px 20px 8px;border-bottom:1px solid var(--ion-color-light)}.popover-search[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--border-radius: 8px;--background: var(--ion-color-light-tint);--color: var(--ion-color-dark);--placeholder-color: var(--ion-color-medium);--icon-color: var(--ion-color-medium);--clear-button-color: var(--ion-color-medium);font-size:14px}.popover-options[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;padding:8px 0}.popover-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 20px;--padding-end: 20px;--inner-padding-end: 0;--min-height: 44px}.popover-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-inline-end:12px;--size: 18px;--checkmark-width: 2px}.popover-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-dark)}.popover-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);margin-top:2px}.popover-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light-tint)}.popover-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;padding:16px 20px;border-top:1px solid var(--ion-color-light)}.popover-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;--padding-start: 16px;--padding-end: 16px;height:36px;font-size:14px;font-weight:500}.popover-actions[_ngcontent-%COMP%]   ion-button.clear-btn[_ngcontent-%COMP%]{--background: transparent;--color: var(--ion-color-medium);--border-color: var(--ion-color-medium);--border-style: solid;--border-width: 1px}.popover-actions[_ngcontent-%COMP%]   ion-button.apply-btn[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: white}.popover-options[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.popover-options[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--ion-color-light);border-radius:2px}.popover-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--ion-color-medium);border-radius:2px}.popover-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--ion-color-dark)}.totals-summary[_ngcontent-%COMP%]{margin-top:16px}.totals-summary[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--border-radius: 12px;box-shadow:0 4px 8px #0000001a}.totals-summary[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:20px}.totals-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--ion-color-dark);margin-bottom:8px}.totals-summary[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--ion-color-primary);margin:0}.load-more-container[_ngcontent-%COMP%]{padding:16px;text-align:center}.card-header-with-export[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:linear-gradient(135deg,var(--ion-color-primary),var(--ion-color-primary-shade))}.print-modal[_ngcontent-%COMP%]{--width: 90%;--height: 90%;--max-width: 1200px;--max-height: 90vh}.card-header-with-export[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1);border-radius:12px 12px 0 0}.card-header-with-export[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:#fff}']}),o})()}];let Me=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(ke)],f.Bz]}),o})();var ve=d(78565),we=d(62279),qe=d(12598);let Oe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,m.u5,_.Pc,S.h,ve.G,we.m,Me,qe.ItemStockPrintPageModule]]}),o})()}}]);