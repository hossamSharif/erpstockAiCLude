"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9289],{39289:(_t,f,c)=>{c.r(f),c.d(f,{TswiaPageModule:()=>ot});var _=c(69808),g=c(34182),r=c(23349),m=c(94030),h=c(70655),T=c(4441),y=c(79208),Z=c(36387),A=c(5022),x=c(15439),t=c(29863),I=c(17158),b=c(65465),v=c(90849),w=c(91472),q=c(742);const C=["dst"],M=["dstPop12"],L=["qtyId12"],P=["popInput"],S=["popover"],N=["popoverNotif7"];function Q(n,a){if(1&n&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.notifArr.length)}}function O(n,a){1&n&&(t.TgZ(0,"ion-text",8),t._uU(1,"\u0645\u062a\u0635\u0644"),t.qZA())}function R(n,a){1&n&&(t.TgZ(0,"ion-text",8),t._uU(1,"\u063a\u064a\u0631 \u0645\u062a\u0635\u0644"),t.qZA())}function F(n,a){if(1&n&&(t.TgZ(0,"ion-item"),t.TgZ(1,"ion-grid"),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",20),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",21),t.TgZ(6,"ion-text",22),t._uU(7),t.ALo(8,"dateAgo"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(4),t.hij(" ",e.desc," "),t.xp6(3),t.Oqu(t.lcZ(8,2,e.datee))}}function J(n,a){if(1&n&&(t.TgZ(0,"ion-list",18),t.YNc(1,F,9,4,"ion-item",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.LogHistoryLocalArr)}}function k(n,a){if(1&n&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",15),t._uU(2," \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a "),t.qZA(),t.qZA(),t.TgZ(3,"ion-content",16),t.YNc(4,J,2,1,"ion-list",17),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.LogHistoryLocalArr.length>0)}}function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row",16),t.TgZ(2,"ion-col",23),t.TgZ(3,"ion-card",24),t.TgZ(4,"ion-grid",24),t.TgZ(5,"ion-row"),t.TgZ(6,"ion-col",25),t.TgZ(7,"ion-item",26),t.TgZ(8,"ion-input",27),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().payInvo.payComment=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"ion-col",21),t.TgZ(10,"ion-item",28),t.TgZ(11,"input",29),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().payInvo.pay_date=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(8),t.Q6J("ngModel",e.payInvo.payComment),t.xp6(3),t.Q6J("ngModel",e.payInvo.pay_date)}}function U(n,a){1&n&&(t.TgZ(0,"ion-text"),t._uU(1,"(\u0639\u0631\u0628\u064a)"),t.qZA())}function Y(n,a){1&n&&(t.TgZ(0,"ion-text"),t._uU(1,"(ENG)"),t.qZA())}function D(n,a){1&n&&(t.TgZ(0,"ion-list",18),t.TgZ(1,"ion-label"),t._UZ(2,"ion-spinner",59),t.qZA(),t.qZA())}const E=function(n,a){return{red:n,darko:a}};function G(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",61),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(4).selectFromPop(o)}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("ngClass",t.WLB(2,E,0==e.quantity,e.quantity>0)),t.xp6(1),t.hij(" ",e.item_name," ")}}function B(n,a){if(1&n&&(t.TgZ(0,"ion-list"),t.YNc(1,G,2,5,"ion-item",60),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.searchResult)}}function z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",16),t.TgZ(2,"ion-item"),t.TgZ(3,"ion-input",54,55),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw(2).searchTerm=s})("ionChange",function(s){return t.CHM(e),t.oxw(2).searchItem(s)}),t.qZA(),t.TgZ(5,"ion-button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clear()}),t._UZ(6,"ion-icon",57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-content",58),t.YNc(8,D,3,0,"ion-list",17),t.YNc(9,B,2,1,"ion-list",4),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.searchTerm),t.xp6(5),t.Q6J("ngIf",0==e.searchResult.length&&""==e.searchTerm),t.xp6(1),t.Q6J("ngIf",e.searchResult.length>0)}}function $(n,a){if(1&n&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.qtyReal)}}function j(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",65),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(2).editCell(s)})("ngModelChange",function(s){return t.CHM(e),t.oxw().$implicit.qtyReal=s})("ionBlur",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(2).editCell(s)}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.qtyReal)}}function V(n,a){if(1&n&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.availQty-e.qtyReal)}}function W(n,a){if(1&n&&(t.TgZ(0,"ion-text"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.pay_price)}}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-input",65),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(2).editCell(s)})("ngModelChange",function(s){return t.CHM(e),t.oxw().$implicit.perch_price=s})("ionBlur",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(2).editCell(s)}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.perch_price)}}function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",62),t.NdJ("dblclick",function(){const o=t.CHM(e).index;return t.oxw(2).qtyClick(o)}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"ion-text"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.YNc(9,$,2,1,"ion-text",4),t.YNc(10,j,2,1,"ion-item",4),t.qZA(),t.TgZ(11,"td"),t.YNc(12,V,2,1,"ion-text",4),t.qZA(),t.TgZ(13,"td"),t.YNc(14,W,2,1,"ion-text",4),t.YNc(15,K,2,1,"ion-item",4),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t.TgZ(19,"ion-button",63),t.NdJ("click",function(){const o=t.CHM(e).index;return t.oxw(2).deleteItem(o)}),t._UZ(20,"ion-icon",64),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=a.$implicit,i=a.index,s=t.oxw(2);t.xp6(2),t.Oqu(+i),t.xp6(2),t.Oqu(e.item_name),t.xp6(3),t.Oqu(e.availQty),t.xp6(2),t.Q6J("ngIf",s.showMe!=i),t.xp6(1),t.Q6J("ngIf",s.showMe==i),t.xp6(2),t.Q6J("ngIf",s.showMe!=i),t.xp6(2),t.Q6J("ngIf",s.showMe!=i),t.xp6(1),t.Q6J("ngIf",s.showMe==i),t.xp6(2),t.Oqu(e.tot)}}function tt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-grid",30),t.TgZ(1,"ion-row",31),t.TgZ(2,"ion-col",32),t.TgZ(3,"ion-grid"),t.TgZ(4,"ion-row"),t.TgZ(5,"ion-col",23),t.TgZ(6,"ion-card"),t.TgZ(7,"ion-grid"),t.TgZ(8,"ion-row"),t.TgZ(9,"ion-col",33),t.TgZ(10,"ion-label",34),t.TgZ(11,"strong"),t._uU(12,"\u0627\u0644\u0635\u0646\u0641"),t.qZA(),t.YNc(13,U,2,0,"ion-text",4),t.YNc(14,Y,2,0,"ion-text",4),t.TgZ(15,"ion-text"),t._uU(16),t.qZA(),t.qZA(),t.TgZ(17,"ion-item",26),t.TgZ(18,"ion-input",35,36),t.NdJ("click",function(s){return t.CHM(e),t.oxw().presentPopover(s)})("ngModelChange",function(s){return t.CHM(e),t.oxw().selectedItem.item_name=s}),t.qZA(),t.qZA(),t.TgZ(20,"ion-popover",12,37),t.NdJ("didDismiss",function(){return t.CHM(e),t.oxw().didDissmis()}),t.YNc(22,z,10,3,"ng-template"),t.qZA(),t.qZA(),t.TgZ(23,"ion-col",38),t.TgZ(24,"ion-label",34),t.TgZ(25,"strong"),t._uU(26,"\u0627\u0644\u0643\u0645\u064a\u0629 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"),t.qZA(),t.qZA(),t.TgZ(27,"ion-item",26),t.TgZ(28,"ion-input",39),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().selectedItem.availQty=s})("ionChange",function(s){return t.CHM(e),t.oxw().qtyRealhange(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"ion-col",38),t.TgZ(30,"ion-label",34),t.TgZ(31,"strong"),t._uU(32,"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0641\u0639\u0644\u064a\u0629"),t.qZA(),t.qZA(),t.TgZ(33,"ion-item",26),t.TgZ(34,"ion-input",40,41),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().addTolist()})("ionFocus",function(s){return t.CHM(e),t.oxw().isFocused(s)})("ngModelChange",function(s){return t.CHM(e),t.oxw().selectedItem.qtyReal=s})("ionChange",function(s){return t.CHM(e),t.oxw().qtyRealhange(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"ion-col",38),t.TgZ(37,"ion-label",34),t.TgZ(38,"strong"),t._uU(39," \u0641\u0631\u0642 \u0627\u0644\u0643\u0645\u064a\u0629 "),t.qZA(),t.qZA(),t.TgZ(40,"ion-item",26),t._UZ(41,"ion-input",42),t.qZA(),t.qZA(),t.TgZ(42,"ion-col",38),t.TgZ(43,"ion-label",34),t.TgZ(44,"strong"),t._uU(45,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),t.qZA(),t.qZA(),t.TgZ(46,"ion-item",26),t.TgZ(47,"ion-input",43),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().addTolist()})("ngModelChange",function(s){return t.CHM(e),t.oxw().selectedItem.perch_price=s})("ionChange",function(s){return t.CHM(e),t.oxw().pricehange(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"ion-col",38),t.TgZ(49,"ion-label",34),t.TgZ(50,"strong"),t._uU(51,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),t.qZA(),t.qZA(),t.TgZ(52,"ion-item",26),t.TgZ(53,"ion-input",44),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().selectedItem.tot=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"ion-col",45),t.TgZ(55,"ion-button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().addTolist()}),t.TgZ(56,"ion-label",18),t._uU(57," +"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"ion-row"),t.TgZ(59,"ion-col",23),t.TgZ(60,"ion-card"),t.TgZ(61,"table",47),t.TgZ(62,"tr"),t.TgZ(63,"th"),t._uU(64,"no"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"\u0627\u0644\u0635\u0646\u0641"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"\u0627\u0644\u0643\u0645\u064a\u0629 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"\u0627\u0644\u0643\u0645\u064a\u0629\u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(71,"th"),t._uU(72,"\u0641\u0631\u0642 \u0627\u0644\u0643\u0645\u064a\u0629"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0647"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),t.qZA(),t._UZ(77,"th"),t.qZA(),t.YNc(78,X,21,9,"tr",48),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"ion-col",49),t.TgZ(80,"ion-card"),t.TgZ(81,"ion-grid"),t.TgZ(82,"ion-row",50),t.TgZ(83,"ion-col",33),t.TgZ(84,"ion-label",34),t.TgZ(85,"strong"),t._uU(86,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a"),t.qZA(),t.qZA(),t.TgZ(87,"ion-item",26),t.TgZ(88,"ion-input",51),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().payInvo.tot_pr=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(89,"ion-col",52),t.TgZ(90,"ion-card"),t.TgZ(91,"ion-grid"),t.TgZ(92,"ion-row",50),t.TgZ(93,"ion-col",53),t.TgZ(94,"ion-button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(95,"ion-label",18),t._uU(96," \u062d\u0641\u0640\u0640\u0638"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(13),t.Q6J("ngIf",0==e.searchLang),t.xp6(1),t.Q6J("ngIf",1==e.searchLang),t.xp6(2),t.Oqu(+e.selectedItemSales29),t.xp6(2),t.Q6J("ngModel",e.selectedItem.item_name),t.xp6(2),t.Q6J("isOpen",e.isOpen),t.xp6(8),t.Q6J("readonly",!0)("ngModel",e.selectedItem.availQty),t.xp6(6),t.Q6J("ngModel",e.selectedItem.qtyReal),t.xp6(7),t.Q6J("readonly",!0)("value",e.selectedItem.availQty-e.selectedItem.qtyReal),t.xp6(6),t.Q6J("ngModel",e.selectedItem.perch_price),t.xp6(6),t.Q6J("readonly",!0)("ngModel",e.selectedItem.tot),t.xp6(25),t.Q6J("ngForOf",e.itemList),t.xp6(10),t.Q6J("ngModel",e.payInvo.tot_pr)("readonly",!0)}}const et=function(n,a){return{warn:n,dark:a}},it=[{path:"",component:(()=>{class n{constructor(e,i,s,o,u,p,d,at,rt,ct,lt,ut){this.behavApi=e,this._location=i,this.route=s,this.renderer=o,this.modalController=u,this.alertController=p,this.authenticationService=d,this.storage=at,this.loadingController=rt,this.datePipe=ct,this.api=lt,this.toast=ut,this.notifArr=[],this.showNotif=!1,this.LogHistoryLocalArr=[],this.logHistoryArr=[],this.isOpenNotif=!1,this.newNotif=!1,this.isOpen=!1,this.sub_account=[],this.sub_accountLocalSales=[],this.sub_accountSales=[],this.initialInvoices=[],this.items=[],this.itemsLocal=[],this.itemList=[],this.salesLocal=[],this.sales=[],this.purchLocal=[],this.purchase=[],this.randomsNumber=[],this.sub_nameNew="",this.discountPerc=0,this.radioVal=0,this.radioVal2=0,this.printMode=!1,this.printArr=[],this.offline=!1,this.color="dark",this.showMe=null,this.status="new",this.searchLang=0,this.searchTerm="",this.aliasTerm="",this.searchResult=[],this.aliasResult=[],this.finalResult=[],this.pendingItemsFromStock=[],this.statusFromRoute="",this.selectedAccount={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:"",cat_name:"",cat_id:"",phone:"",address:"",currentCustumerStatus:0},this.route.queryParams.subscribe(l=>{l&&l.payInvo?(this.status="initial",this.payInvo=JSON.parse(l.payInvo),this.user_info=JSON.parse(l.user_info),this.store_info=JSON.parse(l.store_info),this.itemList=JSON.parse(l.itemList),this.prepareOffline(),this.getAppInfoCase2()):"newInvoFromItemsPage"===l.status&&l.selectedItemsList&&(console.log("New invoice from items page"),this.statusFromRoute=l.status,this.pendingItemsFromStock=JSON.parse(l.selectedItemsList),console.log("Received items from stock page:",this.pendingItemsFromStock))}),this.printArr.push({payInvo:"",itemList:"",selectedAccount:"",sub_nameNew:"",userInfo:"",sub_balanse:0,balanceStatus:""}),this.selectedItem={id:void 0,dateCreated:"",pay_ref:"",item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,availQty:0,aliasEn:"",qtyReal:0}}changeMode(){1==this.offline?(this.offline=!1,this.color="primary"):0==this.offline&&(this.offline=!0,this.color="dark"),this.storage.set("offline",this.offline).then(e=>{})}ionViewDidLeave(){this.subiscribtionNotif.unsubscribe()}ionViewDidEnter(){}ngOnInit(){this.prepareOffline(),"new"==this.status?this.getAppInfo():"initial"==this.status&&(this.getAppInfoCase2(),this.radioVal2=0)}getItemLocalOff(){this.storage.get("itemsLocal").then(e=>{e&&(this.itemsLocal=e,this.items=this.itemsLocal,this.items.forEach(i=>{+i.tswiaQuantity>0?i.salesQuantity=+i.salesQuantity+ +i.tswiaQuantity:+i.tswiaQuantity<0&&(i.perchQuantity=+i.perchQuantity+Math.abs(+i.tswiaQuantity)),i.quantity=+i.perchQuantity+ +i.firstQuantity-+i.salesQuantity}),this.searchResult=this.items)})}presentPopover(e){this.popover.event=e,this.isOpen=!0,this.clear(),this.searchResult=this.items,setTimeout(()=>{this.setFocusOnInput("popInput")},2e3)}didDissmis(){this.isOpen=!1,this.setFocusOnInput("qtyId12")}searchItem(e){this.searchResult=[],this.aliasTerm=e.target.value;const i=new y.g,s=new Z.V,o=new A.C;let u;u=0==this.searchLang?i.transform(this.items,e.target.value):o.transform(this.items,e.target.value);const p=s.transform(this.items,this.aliasTerm);u.length>0&&u.forEach(d=>{this.searchResult.push(d)}),p.length>0&&p.forEach(d=>{this.searchResult.push(d)})}clear(e){e?this.selectedItem={id:void 0,dateCreated:"",pay_ref:this.payInvo.pay_ref,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,availQty:0,aliasEn:"",qtyReal:0}:this.searchTerm=""}getStockItems(){this.storage.get("year").then(e=>{e&&(this.year=e,0==this.offline?this.api.stockItems(1,this.year.id).subscribe(i=>{this.items=i.data,this.items.forEach(o=>{+o.tswiaQuantity>0?o.salesQuantity=+o.salesQuantity+ +o.tswiaQuantity:+o.tswiaQuantity<0&&(o.perchQuantity=+o.perchQuantity+Math.abs(+o.tswiaQuantity)),o.quantity=+o.perchQuantity+ +o.firstQuantity-+o.salesQuantity}),this.storage.set("itemsLocal",this.items).then(o=>{}),this.searchResult=this.items},i=>{},()=>{}):(this.items=this.itemsLocal,this.items.forEach(i=>{+i.tswiaQuantity>0?i.salesQuantity=+i.salesQuantity+ +i.tswiaQuantity:+i.tswiaQuantity<0&&(i.perchQuantity=+i.perchQuantity+Math.abs(+i.tswiaQuantity)),i.quantity=+i.perchQuantity+ +i.firstQuantity-+i.salesQuantity}),this.searchResult=this.items))})}presentAlertConfirm(e){return(0,h.mG)(this,void 0,void 0,function*(){let i="\u0647\u0644 \u062a\u0631\u064a\u062f \u0637\u0628\u0627\u0639\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u061f ";e&&(i="\u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0633\u062c\u0644 \u061f "),yield(yield this.alertController.create({cssClass:"my-custom-class",header:"\u062a\u0623\u0643\u064a\u062f!",mode:"ios",message:i,buttons:[{text:"\u0625\u0644\u063a\u0627\u0621",role:"cancel",cssClass:"secondary",id:"cancel-button",handler:o=>{}},{text:"\u0645\u0648\u0627\u0641\u0642",id:"confirm-button",handler:()=>{e?this.deleteSalesInvoInit():this.presentModal(this.printArr,"sales")}}]})).present()})}Print(e){this.printMode=!0;var i=window.open("","PRINT","height=400,width=600");return i.document.write("<html><head>"),i.document.write('<style type="text/css">'),i.document.write(".sumsDiv{border-style: solid;border-color: gray;border-width: .5px;} .flr{ display: block; float: right; } .show{ } .hide{width:0px;height:0px} .w45 {width:45%} .w50 {width:50%} .w100 {width:100%} td, th {border: 1px solid #dddddd;text-align: center;padding: 8px;} tr:nth-child(even) {background-color: #dddddd;} .table{text-align: center;width: 100%; margin: 12px;}.ion-margin{ margin: 10px; } .ion-margin-top{ margin-top: 10px; } .rtl {  direction: rtl; } .ion-text-center{ text-align: center; } .ion-text-end{ text-align: left; } .ion-text-start{ text-align: right; }"),i.document.write("</style></head><body>"),i.document.write(document.getElementById(e).innerHTML),i.document.write("</body></html>"),i.document.close(),i.focus(),i.print(),i.close(),this.printMode=!1,!0}getOffliemode(){this.storage.get("offline").then(e=>{this.offline=e,1==this.offline?this.color="dark":0==this.offline?this.color="primary":this.SetOffliemode()})}SetOffliemode(){this.storage.set("offline",!1).then(e=>{this.offline=e,this.color="primary"})}getAppInfo(){this.getOffliemode(),this.storage.get("USER_INFO").then(e=>{e&&(this.user_info=e)}),this.storage.get("year").then(e=>{e&&(this.year=e)}),this.storage.get("STORE_INFO").then(e=>{e&&(this.store_info=e,this.getItemLocalOff(),this.prepareInvo())}),this.storage.get("initialInvoices").then(e=>{e&&(this.initialInvoices=e)}),this.storage.get("LogHistoryLocal").then(e=>{e&&(this.LogHistoryLocalArr=e)}),this.storage.get("searchLang").then(e=>{e&&(this.searchLang=e)})}getAppInfoCase2(){this.getOffliemode(),this.storage.get("USER_INFO").then(e=>{e&&(this.user_info=e)}),this.storage.get("year").then(e=>{e&&(this.year=e)}),this.storage.get("STORE_INFO").then(e=>{e&&(this.store_info=e),this.storage.get("year").then(i=>{i&&(this.year=i)})}),this.storage.get("LogHistoryLocal").then(e=>{e&&(this.LogHistoryLocalArr=e)}),this.storage.get("searchLang").then(e=>{e&&(this.searchLang=e)})}prepareOffline(){this.storage.get("salesLocal").then(e=>{e&&(this.salesLocal=e)}),this.storage.get("sales").then(e=>{e&&(this.sales=e)}),this.storage.get("itemsLocal").then(e=>{e&&(this.itemsLocal=e,this.items=this.itemsLocal)}),this.storage.get("sub_accountLocalSales").then(e=>{e&&(this.sub_accountLocalSales=e)}),this.storage.get("sub_accountSales").then(e=>{e&&(this.sub_accountSales=e,this.getSubBalance())})}radioChange(e){}recalSubBalance(){this.sub_account.forEach(e=>{e.sub_balance=0;let i=+e.changeeTot+ +e.fromDebitTot,s=+e.purchChangeeTot+ +e.toCreditTot;i==s?(e.sub_balance=0,e.currentCustumerStatus=""):i>s?(e.sub_balance=(+i-+s).toFixed(2),e.currentCustumerStatus="debit",+this.selectedAccount.id==+e.id&&(this.selectedAccount.sub_balance=e.sub_balance,this.selectedAccount.currentCustumerStatus=e.currentCustumerStatus)):s>i&&(e.sub_balance=(+s-+i).toFixed(2),e.currentCustumerStatus="credit",+this.selectedAccount.id==+e.id&&(this.selectedAccount.sub_balance=e.sub_balance,this.selectedAccount.currentCustumerStatus=e.currentCustumerStatus))})}getSubBalance(){this.sub_account.forEach(e=>{e.sub_balance=0;let i=+e.changeeTot+ +e.fromDebitTot,s=+e.purchChangeeTot+ +e.toCreditTot;i==s?(e.sub_balance=0,this.currentCustumerStatus=""):i>s?(e.sub_balance=(+i-+s).toFixed(2),this.currentCustumerStatus="debit"):s>i&&(e.sub_balance=(+s-+i).toFixed(2),this.currentCustumerStatus="credit")})}radioChange2(e,i){"from"==i&&(1==e.target.value&&"initial"==this.status?(this.status="toFinal",this.payInvo.yearId=this.year.id,this.itemList.length>0&&this.itemList.forEach(s=>{s.yearId=this.year.id})):0==e.target.value&&"toFinal"==this.status&&(this.status="initial"))}prepareInvo(){this.selectedAccount={id:"",ac_id:"",sub_name:"",sub_type:"",sub_code:"",sub_balance:"",store_id:"",cat_id:"",cat_name:"",phone:"",address:"",currentCustumerStatus:0},this.sub_nameNew="",this.radioVal=0,this.radioVal2=0,this.payInvo={pay_id:void 0,pay_ref:0,store_id:"",tot_pr:0,pay_date:"",pay_time:"",user_id:"",yearId:this.year.id,payComment:""},this.discountPerc=0;let e=new Date;this.payInvo.pay_date=this.datePipe.transform(e,"yyyy-MM-dd"),this.payInvo.pay_time=this.datePipe.transform(e,"HH:mm:ss"),this.generateRandom(),this.payInvo.store_id=this.store_info.id,this.payInvo.user_id=this.user_info.id,this.payInvo.yearId=this.year.id,this.itemList=[],"newInvoFromItemsPage"===this.statusFromRoute&&this.pendingItemsFromStock.length>0&&(this.pendingItemsFromStock.forEach(i=>{this.itemList.push({id:"NULL",pay_ref:this.payInvo.pay_ref,item_name:i.item_name,pay_price:i.pay_price,quantity:+i.qty,tot:((+i.qty-0)*+i.perch_price).toFixed(2),store_id:+this.store_info.id,yearId:+this.year.id,item_id:+i.id,dateCreated:this.datePipe.transform(e,"dd-MM-YYYY"),perch_price:i.perch_price,availQty:+i.qty,qtyReal:0})}),this.statusFromRoute="",this.pendingItemsFromStock=[],this.getTotal())}setFocusOnInput(e){"dst"==e?this.nameField.nativeElement.focus():"dstPop"==e?(this.dstPop12.setFocus(),this.isOpen=!0,this.clear(),this.searchResult=this.items,setTimeout(()=>{this.popInput.setFocus()},1500)):"qtyId12"==e?this.qtyId12.setFocus():"popInput"==e&&this.popInput.setFocus()}isFocused(e){}presentPopoverNotif(e){this.notifArr=[],this.showNotif=!1,this.popoverNotif7.event=e,this.isOpenNotif=!0}didDissmisNotif(){this.isOpenNotif=!1}getItems(){0==this.offline?this.api.getItems().subscribe(e=>{this.items=e.data},e=>{}):this.items=this.itemsLocal}getSalesAccount(){0==this.offline?this.api.getSalesAccounts(this.store_info.id,this.year.id).subscribe(e=>{this.sub_account=e.data,this.getSubBalance(),this.addSubaccountLocal()},e=>{}):this.MixSubaccountSalesOffline()}addSubaccountLocal(){if(this.sub_account){if(this.sub_accountLocalSales)for(let e=0;e<this.sub_accountLocalSales.length;e++)this.sub_account.push(this.sub_accountLocalSales[e])}else this.sub_accountLocalSales&&(this.sub_account=this.sub_accountLocalSales)}MixSubaccountSalesOffline(){if(this.sub_account=[],this.sub_accountLocalSales)for(let e=0;e<this.sub_accountLocalSales.length;e++)this.sub_account.push(this.sub_accountLocalSales[e]);if(this.sub_accountSales)for(let e=0;e<this.sub_accountSales.length;e++)this.sub_account.push(this.sub_accountSales[e])}generateRandom(){let e=new Date,i=e.getMonth().toString()+e.getDay().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString()+e.getMilliseconds().toString();this.payInvo.pay_ref=this.store_info.store_ref+i}pickAccount(e){let i=this.sub_account.filter(s=>s.sub_name==e.target.value);i.length>0?this.selectedAccount={id:i[0].id,ac_id:i[0].ac_id,sub_name:i[0].sub_name,sub_type:i[0].sub_type,sub_code:i[0].sub_code,store_id:i[0].store_id,sub_balance:i[0].sub_balance,cat_id:i[0].cat_id,cat_name:i[0].cat_name,phone:i[0].phone,address:i[0].address,currentCustumerStatus:i[0].currentCustumerStatus}:(this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 ","danger"),this.selectedItem.item_name="")}selectFromPop(e){this.selectedItem={id:e.id,dateCreated:e.dateCreated,pay_ref:this.payInvo.pay_ref,item_desc:e.item_desc,item_name:e.item_name,item_unit:e.item_unit,parcode:e.parcode,pay_price:e.pay_price,perch_price:e.perch_price,qty:"",tot:e.pay_price,availQty:e.quantity,aliasEn:e.aliasEn,qtyReal:0},this.selectedItemSales29=e.sales29,this.searchTerm=e.item_name,this.didDissmis()}pickDetail(e){let i=[];i=this.items.filter(1==this.searchLang?s=>s.item_desc==e.target.value:s=>s.item_name==e.target.value),i.length>0?(this.selectedItem={id:i[0].id,dateCreated:i[0].dateCreated,pay_ref:this.payInvo.pay_ref,item_desc:i[0].item_desc,item_name:i[0].item_name,item_unit:i[0].item_unit,parcode:i[0].parcode,pay_price:i[0].pay_price,perch_price:i[0].perch_price,qty:"",tot:i[0].perch_price,availQty:i[0].availQty,aliasEn:i[0].aliasEn,qtyReal:i[0].qtyReal},this.setFocusOnInput("qtyId12")):(this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641 ","danger"),this.selectedItem.item_name="",this.selectedItem.item_desc="")}generateRandom2(e){let i=new Date,s=i.getMonth().toString()+i.getDay().toString()+i.getHours().toString()+i.getMinutes().toString()+i.getSeconds().toString()+i.getMilliseconds().toString()+e;return this.store_info.store_ref+s}qtyRealhange(e){this.selectedItem.tot=(this.selectedItem.availQty-this.selectedItem.qtyReal)*this.selectedItem.perch_price}pricehange(e){this.selectedItem.tot=(this.selectedItem.availQty-this.selectedItem.qtyReal)*this.selectedItem.perch_price}payChange(e){}discountChange(e){}discountPerChange(e){}deleteItem(e){this.itemList.splice(e,1),this.getTotal()}presentToast(e,i){return(0,h.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:e,duration:2e3,color:i,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})}getTotal(){let e=this.itemList.reduce((i,s)=>i+ +s.tot,0);this.payInvo.tot_pr=e.toFixed(2)}refresh(e){"account"==e?this.getSalesAccount():this.getStockItems()}addTolist(){if(""==this.selectedItem.item_name||""==this.selectedItem.id)this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0635\u0646\u0641 \u0648\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0645\u064a\u0629","danger");else if(this.selectedItem.qtyReal==this.selectedItem.availQty)this.presentToast(" \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0645\u062a\u0633\u0627\u0648\u064a\u0629 , \u0644\u0627 \u064a\u0645\u0643\u0646 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631  ","danger");else{let e=[];if(this.itemList.length>0&&(e=this.itemList.filter(i=>i.item_name==this.selectedItem.item_name&&i.perch_price==this.selectedItem.perch_price)),0==e.length){let i=new Date,s=this.datePipe.transform(i,"dd-MM-YYYY");this.itemList.push({id:"NULL",pay_ref:this.selectedItem.pay_ref,item_name:this.selectedItem.item_name,pay_price:this.selectedItem.pay_price,quantity:+this.selectedItem.qty,tot:this.selectedItem.tot,store_id:+this.store_info.id,yearId:+this.year.id,item_id:+this.selectedItem.id,dateCreated:s,perch_price:this.selectedItem.perch_price,availQty:this.selectedItem.availQty,qtyReal:this.selectedItem.qtyReal})}else{this.selectedItem.qtyReal=e[0].qtyReal+this.selectedItem.qtyReal;let i=this.itemList.map(s=>s.item_name).indexOf(this.selectedItem.item_name);this.itemList[i].tot=(this.selectedItem.availQty-this.selectedItem.qtyReal)*+this.selectedItem.perch_price}this.selectedItem={id:void 0,dateCreated:"",pay_ref:this.payInvo.pay_ref,item_desc:"",item_name:"",item_unit:"",parcode:0,pay_price:0,perch_price:0,qty:0,tot:0,availQty:0,aliasEn:"",qtyReal:""},this.getTotal(),this.setFocusOnInput("dstPop12")}}qtyClick(e){this.showMe=e}hideMe(e){this.showMe=null}editCell(e){+this.itemList[e].qtyReal>0&&+this.itemList[e].perch_price>0?(this.itemList[e].tot=(this.itemList[e].availQty-this.itemList[e].qtyReal)*+this.itemList[e].perch_price,this.hideMe(e),this.getTotal()):this.presentToast("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644 ","danger")}validate(){return 0==this.itemList.length||""==this.payInvo.pay_ref?(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0635\u0646\u0627\u0641 \u0627\u0644\u064a \u0627\u0644\u0642\u0627\u0626\u0645\u0629","danger"),!1):""!=this.payInvo.pay_date&&null!=this.payInvo.pay_date||(this.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u062d\u062f\u064a\u062f \u0627\u0644\u062a\u0627\u0631\u064a\u062e ","danger"),!1)}saveIntial(){}saveInvoInit(){}deleteInitial(){this.initialInvoices.length>0&&(this.initialInvoices=this.initialInvoices.filter(e=>e.payInvo.pay_ref!=this.payInvo.pay_ref)),this.storage.set("initialInvoices",this.initialInvoices).then(e=>{this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d","success"),this.status="new",this.prepareInvo()})}deleteSalesInvoInit(){"toFinal"!=this.status&&this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),this.api.deleteSalesInvoInit(this.payInvo.pay_id).subscribe(e=>{"Post Not Deleted"!=e.message?this.deleteSalesitemListInit():this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}deleteSalesitemListInit(){this.api.deleteSalesitemListInit(this.payInvo.pay_ref).subscribe(e=>{"Post Not Deleted"!=e.message?"toFinal"!=this.status&&(this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d","success"),this.prepareInvo()):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}save(){this.payInvo.pay_date=this.datePipe.transform(this.payInvo.pay_date,"yyyy-MM-dd"),1==this.validate()&&(this.presentLoadingWithOptions("\u062c\u0627\u0631\u064a \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a ..."),1==this.offline?this.saveInvoLocal():this.saveInvo())}back(){this._location.back()}updateInitInvo(){this.api.updateInitSalesInvo(this.payInvo).subscribe(e=>{this.deleteSalesitemListInit4update()},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger").then(()=>{this.loadingController.dismiss()})})}deleteSalesitemListInit4update(){this.api.deleteSalesitemListInit(this.payInvo.pay_ref).subscribe(e=>{"Post Not Deleted"!=e.message?this.saveitemListinit():this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger").then(()=>{this.loadingController.dismiss()})},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger").then(()=>{this.loadingController.dismiss()})})}preparenewaccount(){}saveSubAccount(){}saveSubAccountInit(){}saveSubAccountlocal(){this.preparenewaccount(),this.sub_account||(this.sub_account=[]),this.sub_account.push(this.selectedAccount),this.sub_accountLocalSales.push(this.selectedAccount),this.storage.set("sub_accountLocalSales",this.sub_accountLocalSales).then(e=>{this.saveInvoLocal()})}saveInvo(){this.api.saveTswiaInvo(this.payInvo).subscribe(e=>{this.saveitemList()},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}saveInvoLocal(){this.salesLocal.push({payInvo:this.payInvo,itemList:this.itemList}),this.storage.set("salesLocal",this.salesLocal).then(e=>{this.printArr=[],this.printArr.push({payInvo:this.payInvo,itemList:this.itemList,selectedAccount:this.selectedAccount,sub_nameNew:this.sub_nameNew,user_name:this.user_info.full_name,sub_balanse:this.selectedAccount.sub_balance,balanceStatus:this.selectedAccount.currentCustumerStatus}),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success")})}saveitemListinit(){this.api.saveSalesitemListInit(this.itemList).subscribe(e=>{this.recalSubBalance(),this.printArr=[],this.recalSubBalance(),this.printArr.push({payInvo:this.payInvo,itemList:this.itemList,selectedAccount:this.selectedAccount,sub_nameNew:this.sub_nameNew,user_name:this.user_info.full_name,sub_balanse:this.selectedAccount.sub_balance,balanceStatus:this.selectedAccount.currentCustumerStatus}),this.presentAlertConfirm(),this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success"),this.prepareInvo(),this.status="new"},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}saveitemList(){this.api.saveTswiaitemList(this.itemList).subscribe(e=>{this.printArr=[],this.printArr.push({payInvo:this.payInvo,itemList:this.itemList,selectedAccount:this.selectedAccount,sub_nameNew:this.sub_nameNew,user_name:this.user_info.full_name,sub_balanse:this.selectedAccount.sub_balance,balanceStatus:this.selectedAccount.currentCustumerStatus});let i=[];i.push({payInvo:this.payInvo,itemList:this.itemList}),this.logHistoryArr.push({id:null,logRef:this.generateRandom2("insert tswia"),userId:this.user_info.id,typee:"insert tswia",datee:x(new Date).locale("en").format("YYYY-MM-DD HH:mm:ss"),logStatus:0,logToken:JSON.stringify(i[0]),yearId:this.year.id,store_id:this.store_info.id}),this.performSync()},e=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},()=>{this.loadingController.dismiss()})}performSync(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.saveLogHistory(),yield this.getStockItems()})}deleteInitInvo(){}saveLogHistory(){let e,i,s;this.logHistoryArr.length>1?(s=this.logHistoryArr[1],i=this.logHistoryArr[0],e="new account"):(s=this.logHistoryArr[0],e=void 0),this.api.saveLogHistoryMultiSales(s,i,e).subscribe(o=>{"Post Not Created"!=o.message?(this.logHistoryArr=[],this.presentToast("\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d","success"),this.prepareInvo()):this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")},o=>{this.presentToast("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a , \u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")})}presentModal(e,i){return(0,h.mG)(this,void 0,void 0,function*(){this.recalSubBalance();const s=yield this.modalController.create({component:T.n,componentProps:{printArr:this.printArr,page:i}});return s.onDidDismiss().then(o=>{null!==o&&this.prepareInvo()}),yield s.present()})}presentLoadingWithOptions(e){return(0,h.mG)(this,void 0,void 0,function*(){const i=yield this.loadingController.create({spinner:"bubbles",mode:"ios",duration:5e3,message:e,translucent:!0,backdropDismiss:!1});yield i.present(),yield i.onDidDismiss()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.h),t.Y36(_.Ye),t.Y36(m.gz),t.Y36(t.Qsj),t.Y36(r.IN),t.Y36(r.Br),t.Y36(b.u),t.Y36(v.K),t.Y36(r.HT),t.Y36(_.uU),t.Y36(w.r),t.Y36(r.yF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tswia"]],viewQuery:function(e,i){if(1&e&&(t.Gf(C,5),t.Gf(M,5),t.Gf(L,5),t.Gf(P,5),t.Gf(S,5),t.Gf(N,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.nameField=s.first),t.iGM(s=t.CRH())&&(i.dstPop12=s.first),t.iGM(s=t.CRH())&&(i.qtyId12=s.first),t.iGM(s=t.CRH())&&(i.popInput=s.first),t.iGM(s=t.CRH())&&(i.popover=s.first),t.iGM(s=t.CRH())&&(i.popoverNotif7=s.first)}},decls:30,vars:11,consts:[["slot","start"],["slot","end"],[1,"poRel"],[1,"posAb","noti"],[4,"ngIf"],[3,"click"],["name","notifications-outline",1,"dark",3,"ngClass"],["fill","clear",3,"click"],["color","dark"],["fill","clear",1,"ion-margin",3,"click"],["name","wifi-outline",2,"font-size","20px",3,"color"],["color","dark",4,"ngIf"],[3,"isOpen","didDismiss"],["popoverNotif7",""],["class","ion-margin-top",4,"ngIf"],["dir","rtl",1,"ion-text-center"],["dir","rtl"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","9"],["size","3"],["color","primary"],["size","12"],[1,"ion-no-padding","ion-no-margin"],["size","3","offset","6",1,"ion-text-start"],[1,"custInput"],["placeholder","\u0623\u0643\u062a\u0628 \u062a\u0639\u0644\u064a\u0642\u0627",3,"ngModel","ngModelChange"],["lines","none"],["type","date","id","startingDate","name","startingDate",2,"width","100%",3,"ngModel","ngModelChange"],[1,"ion-margin-top"],["dir","rtl",1,"ion-justify-content-center"],["size","12",1,"ion-no-padding"],["size","4"],[1,"ion-padding"],[3,"ngModel","click","ngModelChange"],["dstPop12",""],["popover",""],["size","2"],[3,"readonly","ngModel","ngModelChange","ionChange"],["select-all","",3,"ngModel","keyup.enter","ionFocus","ngModelChange","ionChange"],["qtyId12",""],[3,"readonly","value"],[3,"ngModel","keyup.enter","ngModelChange","ionChange"],[3,"readonly","ngModel","ngModelChange"],["size","2",1,"ion-padding"],["expand","block","routerDirection","root","color","success",3,"click"],[1,"table"],[3,"dblclick",4,"ngFor","ngForOf"],["size","10",1,"ion-no-padding"],[1,"ion-justify-content-center"],[3,"ngModel","readonly","ngModelChange"],["size","4",1,"ion-no-padding"],["size","5"],[3,"ngModel","ngModelChange","ionChange"],["popInput",""],["fill","clear","slot","end",3,"click"],["name","close","color","danger"],["dir","rtl",1,"ion-padding"],["name","lines-sharp"],["button","","class","darko",3,"ngClass","click",4,"ngFor","ngForOf"],["button","",1,"darko",3,"ngClass","click"],[3,"dblclick"],["fill","clear","size","small",3,"click"],["name","trash","color","danger"],[3,"ngModel","keyup.enter","ngModelChange","ionBlur"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"\u062c\u0631\u062f \u0648\u062a\u0633\u0648\u064a\u0629 "),t.qZA(),t.TgZ(6,"ion-buttons",1),t.TgZ(7,"div",2),t.TgZ(8,"div",3),t.TgZ(9,"ion-label"),t.YNc(10,Q,2,1,"ion-text",4),t.qZA(),t.qZA(),t.TgZ(11,"div",5),t.NdJ("click",function(o){return i.presentPopoverNotif(o)}),t._UZ(12,"ion-icon",6),t.qZA(),t.qZA(),t.TgZ(13,"ion-button",7),t.NdJ("click",function(o){return i.presentPopoverNotif(o)}),t.TgZ(14,"ion-label"),t.TgZ(15,"ion-text",8),t._uU(16,"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"ion-button",9),t.NdJ("click",function(){return i.changeMode()}),t.TgZ(18,"ion-label"),t._UZ(19,"ion-icon",10),t.qZA(),t.TgZ(20,"ion-label"),t.YNc(21,O,2,0,"ion-text",11),t.qZA(),t.TgZ(22,"ion-label"),t.YNc(23,R,2,0,"ion-text",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"ion-popover",12,13),t.NdJ("didDismiss",function(){return i.didDissmisNotif()}),t.YNc(26,k,5,1,"ng-template"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"ion-content"),t.YNc(28,H,12,2,"ion-grid",4),t.YNc(29,tt,97,16,"ion-grid",14),t.qZA()),2&e&&(t.xp6(10),t.Q6J("ngIf",1==i.showNotif&&i.notifArr.length>0),t.xp6(2),t.Q6J("ngClass",t.WLB(8,et,1==i.showNotif&&i.notifArr.length>0,0==i.showNotif)),t.xp6(7),t.Q6J("color",i.color),t.xp6(2),t.Q6J("ngIf","primary"==i.color),t.xp6(2),t.Q6J("ngIf","dark"==i.color),t.xp6(1),t.Q6J("isOpen",i.isOpenNotif),t.xp6(4),t.Q6J("ngIf",i.user_info&&i.store_info),t.xp6(1),t.Q6J("ngIf",i.user_info&&i.store_info))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.Q$,_.O5,r.gu,_.mk,r.YG,r.yW,r.d8,r.W2,r.q_,_.sg,r.Ie,r.jY,r.Nd,r.wI,r.PM,r.pK,r.j9,g.JJ,g.On,g.Fj,r.PQ],pipes:[q.R],styles:[".custInput[_ngcontent-%COMP%]{border-style:solid;border-color:var(--ion-color-light);border-radius:5px}.cust-card[_ngcontent-%COMP%]{border-radius:5px}.show[_ngcontent-%COMP%]{visibility:visible}.hide[_ngcontent-%COMP%]{visibility:hidden}.custRow[_ngcontent-%COMP%]{margin-top:5rem}.bnone[_ngcontent-%COMP%]{border:none}.red[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.darko[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-popover[_ngcontent-%COMP%]{--offset-y: -30px }.custInp[_ngcontent-%COMP%]{border-right-style:solid;border-right-width:.5px;text-align:center}.table[_ngcontent-%COMP%]{text-align:center;width:100%;margin:12px}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#ddd}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:center;padding:8px;font-size:16px;font-weight:700;color:#000}td[_ngcontent-%COMP%]:nth-child(2), th[_ngcontent-%COMP%]:nth-child(2){text-align:right;padding-right:12px}"]}),n})()}];let st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(it)],m.Bz]}),n})();var nt=c(78565);let ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.ez,g.u5,nt.G,r.Pc,st]]}),n})()}}]);