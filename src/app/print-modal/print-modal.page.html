
<!-- var dd = {
	content: [
	    {
			columns: [
			    {
					width: '*',
				     text:''
				},
			    {
					width:'auto' ,
					text:'BANSI GIRISH JAYANTILAL IMPORT & EXPORT ENTERPRISES',
					alignment:'center'
 				},
 				{
					width: '*',
				     text:''
				},
			],
			margin:[0,0,10,10]
			
		 },   	
	    	{
			columns: [
			    {
					width: '*',
				     text:''
				},
			    {
					width:'auto' ,
					text:' Exclusive agent for brands (POWERMAX , SIMBA , GIRISH )',
					alignment:'center'
 				},
 				{
					width: '*',
				     text:''
				}
			],
				margin:[0,0,10,10]
			
		}, 
		 	{
			columns: [
			    {
					width: '*',
				     text:''
				},
			    {
					width:'auto' ,
					text:' فاتورة مبيعات',
					alignment:'center'
 				},
 				{
					width: '*',
				     text:''
				}
			],
				margin:[0,10,0,10]
			
		},
		{
			columns: [
				{
					width: 90,
					text:'التاريخ :'
				},
				{
					width: '*',
				     text:''
				},
				{
					width: 90,
					text:''
 				},
 				{
					width: '*',
					text: 'العميل:'
				},
			],
				margin:[0,20,0,10]
			
		
		}, 
		{
		 	columns: [
				{
					width: 90,
					text:'رقم الهاتف :'
				},
				{
					width: '*',
				     text:''
				},
				{
					width: 90,
					text:''
 				},
 				{
					width: '*',
					text: 'المكان :'
				},
			],
				margin:[0,10,0,10]
		},
		{
		  table: {
				body: [
					['المجموع', 'Column 2', 'Column 3' , 'Column 3', 'Column 3'],
					['One value goes here', 'Another one here', 'OK?', 'Another one here', 'OK?', 'Another one here', 'OK?']
				]
			},
			margin:[0,10,0,10]
		},
		{
			columns: [
			    {
					width: '*',
				     text:''
				},
			    {
					width:'auto' ,
					text:'kj;lkjd;qwljwfweww',
					alignment:'center'
 				},
 				{
					width: '*',
				     text:''
				}
			],
				margin:[0,10,0,10]
			
		},
		
	  ]
	
} -->
<ion-content  style="max-width : 30px" *ngIf="mode == 'pos'">
  <!-- Loading indicator for images -->
  <div *ngIf="!imagesLoaded" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000;">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p style="margin-top: 16px; font-size: 14px; color: #666;">جاري تحضير الصور للطباعة...</p>
    <p style="font-size: 12px; color: #999;">Preparing images for printing...</p>
  </div>
  <div class="ion-padding" >
      <div   #printarea1  id="printarea1" >
        <div style="width : 100px ; height: 100px ;margin-left: 20%" >
           <img alt="" [src]="printArr[0].company.logoUrl">  
         </div>
        <h4 class="ion-text-center">{{printArr[0].company.engName}} </h4>
        <h4 class="ion-text-center">{{printArr[0].company.arName}} </h4>
        <h4 class="ion-text-center"><ion-label>الرقم الضريبي / VAT NO :</ion-label><ion-text>{{printArr[0].company.vatNo}}</ion-text> </h4>
        
        <h3 class="ion-text-center" *ngIf="page=='sales' || page=='sales_record' || page=='pos-sales'"> فاتورة ضريبية مبسطة  </h3> 
        <h3 class="ion-text-center" *ngIf="page=='sales' || page=='sales_record' || page=='pos-sales'"> simple vat invoice </h3> 

        <div class="ion-margin-top rtl"  *ngIf="printArr && page!='perchOrderEn' && page!='perchOrderAr' && page!='perchOrderAr-record'  && page!='perchOrderEn-record'">
          <div class="w100 rtl" style="display:inline-block ;">
            <div class=" rtl flr ion-margin" style="width: 100%; position: relative; float: right; text-align:right;">
               <ion-label><ion-text>التاريخ / date: </ion-text> 
                <ion-text>{{getInvoiceDate()}} {{getInvoiceTime()}}</ion-text>
               </ion-label>
            </div>
            <div class=" rtl flr ion-margin" style="width: 100%; position: relative; float: right; text-align:right;">
              <ion-label><ion-text>  اسم المستخدم  / user name:</ion-text>  <ion-text>{{printArr[0].user_name }} </ion-text> </ion-label>  
            </div>
          </div>

          
            <div class="ion-margin rtl"  >
              <div class="ion-margin">
                <table class="table" >
                <thead>
                  <tr>
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">الصنف  item</th>
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">الكمية  QTY</th> 
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">سعر  unit price </th> 
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">الخصم   discount </th>
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">نسبة الضريبة   VAT%</th> 
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">قيمة الضريبة   VAT </th> 
                  <th class="th" style="border-bottom: .5px solid #dddddd ;">   صافي القيمة  total </th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of printArr[0].itemList ; let i = index"> 
                    <td class="td" style="border: none;">{{item.item_name}}</td>
                    <td class="td"  style="border: none;"> {{item.quantity}}</td>
                    <td  class="td" style="border: none;">  {{formatNumberWithSeparators(item.pay_price)}} </td> 
                    <td  class="td" style="border: none;">  {{formatNumberWithSeparators(item.discount)}} </td> 
                    <td  class="td" style="border: none;">  {{item.tax}} </td> 
                    <td class="td" style="border: none;">{{formatNumberWithSeparators(+item.pay_price + (+item.tax/100 * +item.pay_price))}}</td>
                    <td  class="td" style="border: none;">  {{formatNumberWithSeparators(item.tot)}} </td> 
                  </tr> 
                  <tr>
                    <td ></td>
                    <td ></td>
                    <td ></td>
                    <td></td>
                    <td></td>
                    <td class="td" style="border: none;">{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</td>
                  </tr>
                </tbody>
              </table> 
              </div> 
            </div>
            
            <div *ngIf="printArr" class="w100 rtl ion-margin"> 
              <div class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
                <div class="rtl ion-text-center" style=" width:20% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>صافي المبلغ  / total  </ion-label>
                </div>
                <div class="rtl ion-text-center "  style="width:30% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label> {{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</ion-label>
                </div>
              </div>
              <div  class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
                <div class="rtl ion-text-center" style=" width:20% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>   نسبة الضريبة % / VAT%</ion-label>
                </div>
                <div class="rtl ion-text-center "  style="width:30% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>  {{formatNumberWithSeparators(printArr[0].payInvo.discount)}} </ion-label>
                </div>
              </div>
              <div  class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
                <div class="rtl ion-text-center" style=" width:20% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label> قيمة الضريبة / VAT </ion-label>
                </div>
                <div class="rtl ion-text-center "  style="width:30% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>  {{formatNumberWithSeparators(printArr[0].payInvo.discount)}} </ion-label>
                </div>
              </div> 

              <div   class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
                <div class="rtl ion-text-center" style=" width:20% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label> صافي المبلغ شامل الضريبة / total include VAT   </ion-label>
                </div>
                <div class="rtl ion-text-center "  style="width:30% ;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label> {{formatNumberWithSeparators(printArr[0].payInvo.tot_pr - +printArr[0].payInvo.discount)}}   </ion-label>
                </div>
              </div> 
           </div>
            
           <div *ngIf="printArr">
              <!-- <qrcode [qrdata]="printArr[0].qrcodedata" size="256" level="'M'"></qrcode>   -->
           </div>
           <div *ngIf="printArr" class="w100 rtl ion-margin"> 
            
            <h6 class="ion-text-center"><ion-label>  Thank You For Visit    </ion-label> </h6>
            <h6 class="ion-text-center"><ion-label>    شكرا لزيارتكم  </ion-label> </h6>
          </div>
          <div *ngIf="printArr" class="w100 rtl ion-margin"> 
            
            <h6 class="ion-text-center"><ion-label>    : {{printArr[0].company.address}} </ion-label> </h6>
          </div>

          <div *ngIf="printArr" class="w100 rtl ion-margin"> 
           
            <h6 class="ion-text-center"><ion-label>  الهاتف / phone  : {{printArr[0].company.phone - printArr[0].company.phone2 }}     </ion-label> </h6>
             
          </div>
        </div>  
      </div>
  </div>  
</ion-content>


<!-- NEW ENHANCED PRINTING STYLE -->
<ion-content *ngIf="mode == 'enhanced'">
  <!-- Loading indicator for images -->
  <div *ngIf="!imagesLoaded" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000;">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p style="margin-top: 16px; font-size: 14px; color: #666;">جاري تحضير الصور للطباعة...</p>
    <p style="font-size: 12px; color: #999;">Preparing images for printing...</p>
  </div>

  <!-- Currency Information Header -->
  <div class="currency-info" style="font-size: 0.8em; margin: 10px 20px; border-bottom: 1px solid #ccc; padding-bottom: 5px; text-align: center;" *ngIf="currentCurrency !== 'SDG'">
    <p>العملة المحددة: {{currentCurrency}} - سعر الصرف: {{exchangeRate | number:'1.2-6'}}</p>
    <p>جميع القيم معروضة بالعملة المحددة مع القيمة بالجنيه السوداني</p>
  </div>
  
  <div style="padding: 13px;">
    <div #printarea1 id="printarea1">
      <!-- Header with Images and Title -->
      <div style="display: table; width: 100%; margin-bottom: 12px;">
        <div style="display: table-cell; width: 150px; text-align: left; vertical-align: middle;">
          <img [src]="vehicleBase64 || getVehicleImagePath()" style="width: 120px; height: 80px; object-fit: contain;" alt="Vehicle">
        </div>
        <div style="display: table-cell; text-align: center; vertical-align: middle;">
          <h2 style="margin: 5px 0 0 0; font-size: 30px;">   <strong>GVS</strong>      </h2>
          <h1 style="margin: 0; padding: 10px; background-color: #f0f0f0; display: inline-block; font-size: 30px;" 
            *ngIf="page=='sales' || page=='sales_record'">  بيان</h1>
        </div>
        <div style="display: table-cell; width: 150px; text-align: right; vertical-align: middle;">
          <img [src]="logoBase64 || 'assets/imgs/logo.png'" style="width: 120px; height: 80px; object-fit: contain;" alt="Logo">
        </div>
      </div>

     

      <!-- General Information Section - RTL -->
      <div *ngIf="printArr" style="margin-bottom: 13px;margin-top: 20px; border: 1px solid #ccc; padding: 15px; direction: rtl;">
        <div style="font-size: 14px; margin-right: 10px;">
          <!-- First Row -->
          <div style="margin-bottom: 8px; border-bottom: 1px dotted #ccc; padding-bottom: 8px;">
            <span style="display: inline-block; width: 48%; text-align: right;">
              <strong>التاريخ: </strong>{{printArr[0].payInvo.pay_date}}
            </span>
            <span style="display: inline-block; width: 48%; text-align: right;">
              <strong *ngIf="page=='sales' || page=='sales_record'">العميل: </strong>
              <strong *ngIf="page=='perch' || page=='perch_record'">المورد: </strong>
              <span *ngIf="printArr[0].sub_nameNew.length == 0 && (page =='sales' || page =='perch')">
                {{printArr[0].selectedAccount.sub_name}}
              </span>
              <span *ngIf="printArr[0].sub_nameNew.length == 0 && (page =='sales_record' || page =='perch_record')">
                {{printArr[0].selectedAccount}}
              </span>
              <span *ngIf="printArr[0].sub_nameNew.length > 0">{{printArr[0].sub_nameNew}}</span>
            </span>
          </div>
          <!-- Second Row -->
          <div style="margin-bottom: 8px;">
            <span style="display: inline-block; width: 48%; text-align: right;" *ngIf="printArr[0].selectedAccount.address && printArr[0].selectedAccount.address.trim() != ''">
              <strong>العنوان: </strong>{{printArr[0].selectedAccount.address}}
            </span>
            <span style="display: inline-block; width: 48%; text-align: right;" *ngIf="printArr[0].selectedAccount.phone && printArr[0].selectedAccount.phone.trim() != ''">
              <strong>الهاتف: </strong>{{printArr[0].selectedAccount.phone}}
            </span>
          </div> 
        </div>
      </div>

      <!-- Items Table - RTL -->
      <div *ngIf="printArr" style="margin-bottom: 20px; direction: rtl;">
        <table style="width: 100%; border-collapse: collapse; font-size: 12px; direction: rtl;">
          <thead>
            <tr style="background-color: #d3d3d3;">
              <th style="border: 1px solid #000; padding: 10px; text-align: center;">التسلسل</th>
              <th style="border: 1px solid #000; padding: 10px; text-align: center;">الصنف</th>
              <th style="border: 1px solid #000; padding: 10px; text-align: center;">الكمية</th>
              <th style="border: 1px solid #000; padding: 10px; text-align: center;" *ngIf="page=='sales' || page=='sales_record'">
                سعر الوحدة 
              </th>
              <th style="border: 1px solid #000; padding: 10px; text-align: center;" *ngIf="page=='perch' || page=='perch_record'">
                سعر الشراء 
              </th>
              <th style="border: 1px solid #000; padding: 10px; text-align: center;">المجموع </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of printArr[0].itemList; let i = index">
              <td style="border: 1px solid #000; padding: 3px; text-align: center;font-size: 16px;">{{i+1}}</td>
              <td style="border: 1px solid #000; padding: 3px; text-align: right;font-size: 16px;">{{item.item_name}}</td>
              <td style="border: 1px solid #000; padding: 3px; text-align: center;font-size: 16px;">{{item.quantity}}</td>
              <td style="border: 1px solid #000; padding: 3px; text-align: center;font-size: 16px;" *ngIf="page=='sales' || page=='sales_record'">
                {{formatNumberWithSeparators(item.pay_price)}}
              </td>
              <td style="border: 1px solid #000; padding: 3px; text-align: center;font-size: 16px;" *ngIf="page=='perch' || page=='perch_record'">
                {{formatNumberWithSeparators(item.perch_price)}}
              </td>
              <td style="border: 1px solid #000; padding: 3px; text-align: center;font-size: 16px;">{{formatNumberWithSeparators(item.tot)}}</td>
            </tr>
            <!-- Totals Row -->
            <!-- <tr style="background-color: #f0f0f0; font-weight: bold;">
                <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;"></td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;"></td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;">{{printArr[0].itemList.length}}</td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;" *ngIf="page=='sales' || page=='sales_record' || page=='perch' || page=='perch_record'"></td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;">{{formatDualCurrency(printArr[0].payInvo.tot_pr)}}</td>
            </tr> -->
          </tbody>
        </table>
      </div>

      <!-- Totals Section - RTL with Values After Colon -->
      <div *ngIf="printArr" style="margin-top: 20px; border: 1px solid #ccc; padding: 15px; direction: rtl;">
        <div style="font-size: 14px; margin-right: 10px;">
          <!-- All totals in one row -->
          <div style="margin-bottom: 8px; border-bottom: 1px dotted #ccc; padding-bottom: 8px;">
            <span style="display: inline-block; width: 32%; text-align: right;">
              <strong>إجمالي المبلغ : </strong>{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}
            </span>
            <span style="display: inline-block; width: 32%; text-align: right;" *ngIf="+printArr[0].payInvo.discount > 0">
              <strong>الخصم : </strong>{{formatNumberWithSeparators(printArr[0].payInvo.discount)}}
            </span>
            <span style="display: inline-block; width: 32%; text-align: right;" *ngIf="+printArr[0].payInvo.discount > 0">
              <strong>الإجمالي بعد الخصم : </strong>{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr - +printArr[0].payInvo.discount)}}
            </span>
            <!-- Hidden pay amount for enhanced mode -->
          </div>
        </div>
      </div>

      <!-- User Information - RTL -->
      <div *ngIf="printArr" style="margin-top: 20px; text-align: right; font-size: 12px; direction: rtl;">
        <p><strong>اسم المستخدم:</strong> {{printArr[0].payInvo.user_name}}</p>
      </div>

      <!-- Footer -->
      <!-- <div style="margin-top: 30px; text-align: center; font-size: 12px; border-top: 1px solid #ccc; padding-top: 10px;">
        <p style="margin: 5px 0;"><strong>شكراً لزيارتكم</strong></p>
        <p style="margin: 5px 0;">{{printArr[0].company?.address || 'العنوان غير متوفر'}}</p>
        <p style="margin: 5px 0;">الهاتف: {{printArr[0].company?.phone || 'غير متوفر'}}</p>
      </div> -->

    </div>
  </div>
</ion-content>

<ion-content *ngIf="mode != 'pos' && mode != 'enhanced'">
  <!-- Loading indicator for images -->
  <div *ngIf="!imagesLoaded" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000;">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p style="margin-top: 16px; font-size: 14px; color: #666;">جاري تحضير الصور للطباعة...</p>
    <p style="font-size: 12px; color: #999;">Preparing images for printing...</p>
  </div>
  <div class="ion-padding"  >
      <div   #printarea1  id="printarea1" >
        <h4 class="ion-text-center">GVS FOR IMPORT AND EXPORT </h4>
        <h4 class="ion-text-center">جي في اس للإستيراد والتصدير </h4>
        <h4 class="ion-text-center"  *ngIf="page=='sales' || page=='sales_record' || page=='perch' || page=='perch_record' ||  page=='perchOrderAr' || page=='perchOrderAr-record'">POWERMAX , SIMBA , GIRISH الوكيل الحصري لماركات  </h4>
        <h4 class="ion-text-center"  *ngIf=" page=='perchOrderEn' || page=='perchOrderEn-record'"> Exclusive agent for brands (POWERMAX , SIMBA , GIRISH )  </h4>
       
        <h3 class="ion-text-center" *ngIf="page=='sales' || page=='sales_record'"> فاتورة مبيعات  </h3> 
        <h3 class="ion-text-center"  *ngIf="page=='perch' || page=='perch_record'"> فاتورة مشتريات  </h3> 
        <h3 class="ion-text-center"  *ngIf="page=='sales_returns' || page=='sales_return_record'"> فاتورة مرتجعة مبيعات  </h3> 
        <h3 class="ion-text-center"  *ngIf="page=='perchOrderEn' || page=='perchOrderEn-record'">  Purchase Order  </h3> 
        <h3 class="ion-text-center"  *ngIf="page=='perchOrderAr' || page==' perchOrderAr-record'"> امر شراء    </h3> 
        
        
        
        <div class="ion-margin-top rtl"  *ngIf="printArr && page!='perchOrderEn' && page!='perchOrderAr' && page!='perchOrderAr-record'  && page!='perchOrderEn-record'">
          <div class="w100 rtl" style="display:inline-block ;">
            <div class=" rtl flr ion-margin" style="width: 30%; position: relative; float: left; text-align:left;">
              <ion-label>التاريخ :</ion-label> {{printArr[0].payInvo.pay_date}}
            </div>
          
            <div class="ion-margin " *ngIf="page=='sales' || page=='sales_record'" style=" width: 60%; position: relative; float: right;">
              <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='sales' ">العميل :
                {{printArr[0].selectedAccount.sub_name}}</ion-label>
              <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='sales_record' ">العميل :
                {{printArr[0].selectedAccount}}</ion-label>
              <ion-label *ngIf="printArr[0].sub_nameNew.length>0">العميل : {{printArr[0].sub_nameNew}}</ion-label>
            </div>
  
            <div class="ion-margin " *ngIf="page =='perch' || page=='perch_record'"  style=" width: 60%; position: relative; float: right;">
              <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='perch' ">المورد :
                {{printArr[0].selectedAccount.sub_name}}</ion-label>
              <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='perch_record' ">المورد :
                {{printArr[0].selectedAccount}}</ion-label>
              <ion-label *ngIf="printArr[0].sub_nameNew.length>0">المورد : {{printArr[0].sub_nameNew}}</ion-label>
            </div>
          </div>

          <div class="w100 rtl" style="display:inline-block ;">
            <div class="ion-margin" *ngIf="(page=='sales' || page=='sales_record') && printArr[0].selectedAccount.address && printArr[0].selectedAccount.address.trim() != ''" style="width: 30%; position: relative; float: right ; text-align:right;"> 
              <ion-label>المكان : {{printArr[0].selectedAccount.address}}</ion-label>
            </div>

            <div *ngIf="(page=='sales' || page=='sales_record') && printArr[0].selectedAccount.phone && printArr[0].selectedAccount.phone.trim() != ''" class="rtl ion-margin" style="width: 30%; position: relative; float: left; text-align:left;">
              <ion-label>  رقم الهاتف   :  {{printArr[0].selectedAccount.phone}} </ion-label> 
            </div> 
             <!--   -->
          </div> 


            

            <div class="ion-margin rtl"  >
              <div class="ion-margin">
                <table class="table five-column" >
                <thead>
                  <tr>
                  <th class="th">التسلسل</th>
                  <th class="th">الصنف</th>
                  <th class="th">الكمية</th>
                  <th  *ngIf="page=='perch' || page=='perch_record'" class="th">
                    سعر الشراء 
                  </th>
                  <th *ngIf="page=='sales' || page=='sales_record'" class="th">
                    سعر الوحده 
                  </th>
                  <th class="th">المجموع </th>
                  </tr>
                </thead>
                <tbody>
                  <tr   *ngFor="let item of printArr[0].itemList ; let i = index">
                    <td class="td">{{i+1}}</td>
                    <td class="td">{{item.item_name}}</td>
                   <td class="td"> {{item.quantity}}</td>
                   <td *ngIf="page=='sales' || page=='sales_record'" class="td">
                    {{formatNumberWithSeparators(item.pay_price)}}
                  </td>
                   <td  *ngIf="page=='perch' || page=='perch_record'" class="td">
                    {{formatNumberWithSeparators(item.perch_price)}}
                  </td>
                   <td class="td">{{formatNumberWithSeparators(item.tot)}}</td>
                  </tr> 
                  <tr>
                    <td ></td>
                    <td ></td>
                    <td></td>
                    <td></td>
                    <td class="td">{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</td>
                  </tr>
                </tbody>
              </table> 
              </div> 
            </div>

            <div *ngIf="printArr" class="w100 rtl ion-margin"> 
              <!-- All totals in one row -->
              <div class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
                <div class="rtl ion-text-center" style=" width:15% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>إجمالي المبلغ  </ion-label>
                </div>
                <div class="rtl ion-text-center "  style="width:18% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label> {{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</ion-label>
                </div>
                <div *ngIf="+printArr[0].payInvo.discount>0" class="rtl ion-text-center" style=" width:12% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>الخصــم  </ion-label>
                </div>
                <div *ngIf="+printArr[0].payInvo.discount>0" class="rtl ion-text-center "  style="width:15% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>{{formatNumberWithSeparators(printArr[0].payInvo.discount)}}</ion-label>
                </div>
                <div *ngIf="+printArr[0].payInvo.discount>0" class="rtl ion-text-center" style=" width:15% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>الإجمالي بعدالخصم</ion-label>
                </div>
                <div *ngIf="+printArr[0].payInvo.discount>0" class="rtl ion-text-center "  style="width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr - +printArr[0].payInvo.discount)}}</ion-label>
                </div>
              </div>
              <!-- Hidden pay amount section for regular mode -->
              <!-- Hidden remaining amount section for regular mode -->
             
              <!-- <div   class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
                <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>  الرصيد الحالي    </ion-label>
                  <ion-label *ngIf = "printArr[0].balanceStatus == 'debit'"> <strong>( عليه ) </strong></ion-label>
                  <ion-label *ngIf = "printArr[0].balanceStatus == 'credit'">  <strong>( له ) </strong>  </ion-label>
                </div>
                <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                  <ion-label>  {{formatBalance(printArr[0].sub_balanse)}} ج.س</ion-label>
                </div>
              </div> -->

              <!-- "sub_balanse": this.selectedAccount.sub_balance,
              "balanceStatus": this.currentCustumerStatus -->
          
              <div class="rtl ion-margin" style="width: 30%; position: relative; float: left; text-align:left;">
                <ion-label> اسم المستخدم :  {{printArr[0].payInvo.user_name}} </ion-label> 
              </div>
           </div>
        </div>


      <!-- purchase orders arabic -->


      <div class="ion-margin-top rtl"  *ngIf="printArr && ( page=='perchOrderAr' || page=='perchOrderAr-record')">
        <div class="w100 rtl" style="display:inline-block ;">
          <div class=" rtl flr ion-margin" style="width: 30%; position: relative; float: left; text-align:left;">
            <ion-label>التاريخ :</ion-label> {{printArr[0].payInvo.pay_date}}
          </div>
        
          <div class="ion-margin" style=" width: 60%; position: relative; float: right;">
            <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='perchOrderAr' ">المورد :
              {{printArr[0].selectedAccount.sub_name}}</ion-label>
            <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='perchOrderAr-record' ">المورد :
              {{printArr[0].selectedAccount}}</ion-label>
            <ion-label *ngIf="printArr[0].sub_nameNew.length>0">المورد : {{printArr[0].sub_nameNew}}</ion-label>
          </div>
        </div>

        <div class="w100 rtl" style="display:inline-block ;">
          <div class="ion-margin" *ngIf="printArr[0].selectedAccount.address && printArr[0].selectedAccount.address.trim() != ''" style="width: 30%; position: relative; float: right ; text-align:right;"> 
            <ion-label>العنوان : {{printArr[0].selectedAccount.address}}</ion-label>
          </div>

          <div class="rtl ion-margin" *ngIf="printArr[0].selectedAccount.phone && printArr[0].selectedAccount.phone.trim() != ''" style="width: 30%; position: relative; float: left; text-align:left;">
            <ion-label>  رقم الهاتف   :  {{printArr[0].selectedAccount.phone}} </ion-label> 
          </div> 
           <!--   -->
        </div> 

          <div class="ion-margin rtl"  >
            <div class="ion-margin">
              <table class="table five-column" >
              <thead>
                <tr>
                <th class="th">التسلسل</th>
                <th class="th">الصنف</th>
                <th class="th">الكمية</th>
                <th  class="th">
                  سعر الشراء 
                </th>
                
                <th class="th">المجموع </th>
                </tr>
              </thead>
              <tbody>
                <tr   *ngFor="let item of printArr[0].itemList ; let i = index">
                  <td class="td">{{i+1}}</td>
                  <td class="td">{{item.item_name}}</td>
                 <td class="td"> {{item.quantity}}</td>
                 
                 <td   class="td">
                  {{formatNumberWithSeparators(item.perch_price)}}
                </td>
                 <td class="td">{{formatNumberWithSeparators(item.tot)}}</td>
                </tr> 
                <tr>
                  <td ></td>
                  <td ></td>
                  <td></td>
                  <td></td>
                  <td class="td">{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</td>
                </tr>
              </tbody>
            </table> 
            </div> 
          </div>

          <div *ngIf="printArr" class="w100 rtl ion-margin"> 
            <div class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
              <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                <ion-label>إجمالي المبلغ </ion-label>
              </div>
              <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                <ion-label> {{formatCurrencyWithSeparators(printArr[0].payInvo.tot_pr)}}</ion-label>
              </div>
            </div>

            
            <!-- <div *ngIf="+printArr[0].payInvo.discount>0" class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
              <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                <ion-label>   الخصــم </ion-label>
              </div>
              <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                <ion-label>  {{formatCurrencyWithSeparators(printArr[0].payInvo.discount)}}  </ion-label>
              </div>
            </div>  
            <div *ngIf="+printArr[0].payInvo.discount>0" class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
              <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                <ion-label> الإجمالي بعدالخصم    </ion-label>
              </div>
              <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
                <ion-label> {{formatCurrencyWithSeparators(printArr[0].payInvo.tot_pr - +printArr[0].payInvo.discount)}}  </ion-label>
              </div>
            </div> -->
            <!-- "sub_balanse": this.selectedAccount.sub_balance,
            "balanceStatus": this.currentCustumerStatus -->
        
            <div class="rtl ion-margin" style="margin-top:20px;width: 30%; position: relative; float: right; text-align:right;">
              <ion-label> تعليق:  {{printArr[0].payInvo.payComment}} </ion-label> 
            </div>
         </div>
      </div>

 <!-- purchase orders english-->


 <div class="ion-margin-top"  *ngIf="printArr && (page=='perchOrderEn' || page=='perchOrderEn-record')">
  <div class="w100" style="display:inline-block ;">
    <div class="flr ion-margin" style="width: 30%; position: relative; float: right; text-align:right;">
      <ion-label>Date :</ion-label> {{printArr[0].payInvo.pay_date}}
    </div>
  
    <div class="ion-margin" style=" width: 60%; position: relative; float: left;">
      <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='perchOrderEn' ">Supplier :
        {{printArr[0].selectedAccount.sub_name}}</ion-label>
      <ion-label *ngIf="printArr[0].sub_nameNew.length == 0 && page =='perchOrderEn-record' ">Supplier :
        {{printArr[0].selectedAccount}}</ion-label>
      <ion-label *ngIf="printArr[0].sub_nameNew.length>0">Supplier : {{printArr[0].sub_nameNew}}</ion-label>
    </div>
  </div>

  <div class="w100 rtl" style="display:inline-block ;">
    <div class="ion-margin" *ngIf="printArr[0].selectedAccount.address && printArr[0].selectedAccount.address.trim() != ''" style="width: 30%; position: relative; float: right ; text-align:right;"> 
      <ion-label>Address : {{printArr[0].selectedAccount.address}}</ion-label>
    </div>

    <div class="rtl ion-margin" *ngIf="printArr[0].selectedAccount.phone && printArr[0].selectedAccount.phone.trim() != ''" style="width: 30%; position: relative; float: left; text-align:left;">
      <ion-label> Phone No  :  {{printArr[0].selectedAccount.phone}} </ion-label> 
    </div> 
     <!--   -->
  </div> 

    <div class="ion-margin rtl"  >
      <div class="ion-margin">
        <table class="table five-column" >
        <thead>
          <tr>
          <th class="th">No</th>
          <th class="th">Item</th>
          <th class="th">Qty</th>
          <th   class="th">
            Purchace price 
          </th>
          
          <th class="th">Total </th>
          </tr>
        </thead>
        <tbody>
          <tr   *ngFor="let item of printArr[0].itemList ; let i = index">
            <td class="td">{{i+1}}</td>
            <td class="td">{{item.item_desc}}</td>
           <td class="td"> {{item.quantity}}</td>
           
           <td   class="td">
            {{formatNumberWithSeparators(item.perch_price)}}
          </td>
           <td class="td">{{formatNumberWithSeparators(item.tot)}}</td>
          </tr> 
          <tr>
            <td ></td>
            <td ></td>
            <td></td>
            <td></td>
            <td class="td">{{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</td>
          </tr>
        </tbody>
      </table> 
      </div> 
    </div>

    <div *ngIf="printArr" class="w100 rtl ion-margin"> 
      <div class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
        <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
          <ion-label>  Total  </ion-label>
        </div>
        <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
          <ion-label> {{formatNumberWithSeparators(printArr[0].payInvo.tot_pr)}}</ion-label>
        </div>
      </div>

      
      <!-- <div *ngIf="+printArr[0].payInvo.discount>0" class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
        <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
          <ion-label>   الخصــم </ion-label>
        </div>
        <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
          <ion-label>  {{formatCurrencyWithSeparators(printArr[0].payInvo.discount)}}</ion-label>
        </div>
      </div>  
      <div *ngIf="+printArr[0].payInvo.discount>0" class="w100 rtl" style="display:inline-block ;margin-right: 16px;">
        <div class="rtl ion-text-center" style=" width:20% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
          <ion-label> الإجمالي بعدالخصم    </ion-label>
        </div>
        <div class="rtl ion-text-center "  style="width:30% ;border: .5px solid #dddddd;text-align: center;padding: 8px; position: relative; float: right;">
          <ion-label> {{formatCurrencyWithSeparators(printArr[0].payInvo.tot_pr - +printArr[0].payInvo.discount)}}</ion-label>
        </div>
      </div> -->
      <!-- "sub_balanse": this.selectedAccount.sub_balance,
      "balanceStatus": this.currentCustumerStatus -->
  
      <div class="rtl ion-margin" style="margin-top:20px;width: 30%; position: relative; float: right; text-align:right;">
        <ion-label> Comment:  {{printArr[0].payInvo.payComment}} </ion-label> 
      </div>
   </div>
</div>

      </div>
      
      <!-- Exchange Rate Footer -->
      <div class="exchange-rate-footer" style="font-size: 0.7em; text-align: center; border-top: 1px solid #ccc; padding-top: 5px; margin-top: 20px;" *ngIf="getExchangeRateFooter()">
        {{getExchangeRateFooter()}}
      </div>
  </div>  
</ion-content>
