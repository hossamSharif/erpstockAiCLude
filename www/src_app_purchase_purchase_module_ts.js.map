{"version":3,"file":"src_app_purchase_purchase_module_ts.js","mappings":"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","sources":["./src/app/purchase/pipe.ts","./src/app/purchase/pipe2.ts","./src/app/purchase/pipe3.ts","./src/app/purchase/purchase-routing.module.ts","./src/app/purchase/purchase.module.ts","./src/app/purchase/purchase.page.ts"],"sourcesContent":["import { Pipe} from '@angular/core';\n@Pipe({ name: 'filterByName', pure: true })\nexport class FilterPipe{\n  transform(items: any[], args: any): any {\n    let filter = args.toString();\n    if(filter !== undefined && filter.length !== null){\n        if(filter.length === 0 || items.length ===0){\n            return items;\n        }else{\n         /// old way   return filter ? items.filter(item=> item.item_name.toLocaleLowerCase().indexOf(filter) != -1 ) : items;\n         return filter ? items.filter(item => {\n              filter = filter.toLocaleLowerCase();\n              // Search across multiple attributes\n              return (\n                (item.item_name && item.item_name.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.brand && item.brand.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.pay_price && item.pay_price.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.perch_price && item.perch_price.toLocaleLowerCase().indexOf(filter) !== -1) || \n                (item.model && item.model.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.parcode && item.parcode.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.part_no && item.part_no.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.item_desc && item.item_desc.toLocaleLowerCase().indexOf(filter) !== -1) ||\n                (item.aliasEn && item.aliasEn.toLocaleLowerCase().indexOf(filter) !== -1)\n              );\n            }) : items;\n        }\n        \n    }\n  } \n}","import { Pipe} from '@angular/core';\n@Pipe({ name: 'filterByAlias', pure: true })\nexport class FilterPipe2{ \n  transform(items: any[], args: any): any {\n    let filter = args.toString();\n    if(filter !== undefined && filter.length !== null){\n        if(filter.length === 0 || items.length ===0){\n            return items;\n        }else{\n            return filter ? items.filter(item => item.aliasEn.toLocaleLowerCase().indexOf(filter) != -1  ) : items;\n        }\n    }\n  }\n}","import { Pipe} from '@angular/core';\n@Pipe({ name: 'filterByEnName', pure: true })\nexport class FilterPipe3{\n  transform(items: any[], args: any): any {\n    let filter = args.toString();\n    if(filter !== undefined && filter.length !== null){\n        if(filter.length === 0 || items.length ===0){\n            return items;\n        }else{\n            return filter ? items.filter(item=> item.item_desc.toLocaleLowerCase().indexOf(filter) != -1 ) : items;\n        }\n    }\n  } \n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PurchasePage } from './purchase.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PurchasePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PurchasePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PurchasePageRoutingModule } from './purchase-routing.module';\n\nimport { PurchasePage } from './purchase.page'; \nimport { ShareModule } from '../shareModule/share-module/share-module.module';\nimport { SharedModule } from '../module/shared/shared.module';\nimport { FilterPipe } from './pipe';\nimport { FilterPipe2 } from './pipe2';\nimport { FilterPipe3 } from './pipe3';\n \n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    SharedModule,\n    ShareModule, \n    IonicModule,\n    PurchasePageRoutingModule\n  ],\n  exports: [],\n  declarations: [PurchasePage, FilterPipe, FilterPipe2, FilterPipe3]\n})\nexport class PurchasePageModule {}\n","import { Component, OnInit, ViewChild, ElementRef ,Renderer2,Input} from '@angular/core';\nimport { ServicesService } from \"../stockService/services.service\";\nimport { Observable, Subscription } from 'rxjs';\nimport { AlertController, IonInput, LoadingController, ModalController, ToastController } from '@ionic/angular';\nimport { DatePipe, Location } from '@angular/common';\nimport { Storage } from '@ionic/storage';\nimport { AuthServiceService } from '../auth/auth-service.service';\nimport { PrintModalPage } from '../print-modal/print-modal.page';\nimport { ItemModalPage } from '../item-modal/item-modal.page';\nimport { PriceAdjustmentDialogComponent } from '../component/price-adjustment-dialog/price-adjustment-dialog.component';\nimport { InvoiceJournalEntryComponent, InvoiceJournalData } from '../component/invoice-journal-entry/invoice-journal-entry.component';\nimport { FilterPipe } from './pipe';\nimport { FilterPipe2 } from './pipe2';\nimport { FilterPipe3 } from './pipe3';\nimport { ActivatedRoute } from '@angular/router';\nimport { StockServiceService } from '../syncService/stock-service.service';\nimport * as momentObj from 'moment';\n@Component({\n  selector: 'app-purchase',\n  templateUrl: './purchase.page.html',\n  styleUrls: ['./purchase.page.scss'],\n})\nexport class PurchasePage implements OnInit {\n  @ViewChild(\"dstP\") nameField: ElementRef;\n  @ViewChild('qtyIdP') qtyIdP; \n  @ViewChild('dstPop2') dstPop2; \n  @ViewChild('popInput2') popInput2; \n  @ViewChild('popover2') popover2;\n  @ViewChild('popoverNotif3') popoverNotif3;\n\n discountType: string = 'percentage'; // 'percentage' or 'amount'\n  discountAmount: number = 0;\n  calculatedDiscountPerc: number = 0;\n  calculatedDiscountAmount: number = 0;\n\n\n\n  isOpenNotif = false ;\n  newNotif = false ; \nsub_account:Array<any> =[]\nsub_accountLocalPurch:Array<any> =[]\nitems:Array<any> =[]\nisOpen = false; \nnotifArr:Array<any> =[]\nLogHistoryLocalArr:Array<any> =[]\nlogHistoryArr:Array<any>=[]; \n  subiscribtionNotif:Subscription\n  showNotif = false\nsub_accountPurch:Array<any> =[]\nsortedItemList:Array<any> =[]\nisItemListSorted:boolean = false\nsearchTerm:string = ''\nhighlightedIndex:number = -1\nsearchMatches:number[] = []\nloadingItems :boolean = false\nshowBackButton: boolean = false\ncolor :any ='dark'\nitemsLocal:Array<any> =[]\nitemList:Array<any> =[]\npurchLocal:Array<any> =[] \npurchase:Array<any> =[]\nrandomsNumber:Array<any> =[]\nstore_info : {id:any , location :any ,store_name:any , store_ref:any }\nuser_info : {id:any ,user_name:any ,store_id :any,full_name:any,password:any}\nsub_nameNew :any = \"\"\nselectedItem : {id:any ,pay_ref:any,item_name:any,pay_price:any,perch_price:any,item_unit:any,item_desc:any,parcode:any,qty:any,tot:any ,dateCreated:any,aliasEn:any};\nselectedAccount : {id:any ,ac_id:any,sub_name:any,sub_type:any,sub_code:any,sub_balance:any,store_id:any,cat_id:any,cat_name:any,phone:any,address:any};\npayInvo : {pay_id:any ,pay_ref:any ,store_id:any,tot_pr:any,pay:any,pay_date:any,pay_time:any,user_id:any,cust_id:any,pay_method:any,discount:any ,changee:any,sub_name:any,payComment:any,nextPay:any, yearId:any};\n\n// Category properties\ndiscountPerc :any = 0\nradioVal : any = 0\nprintMode :boolean = false\noffline: boolean = false;\nprintArr:Array<any> =[]\nfirstq : {id:any ,item_id:any , store_id:any , quantity :any ,\tfq_year:any ,\tpay_price:any ,\tperch_price:any ,item_name:any }\nshowMe :any =null\ngetItemLoader:boolean = false\nsearchLang :any = 0\naliasTerm :any =\"\"\nsearchResult :Array<any> =[]\naliasResult :Array<any> =[]\nstatus:any = 'new'\nyear : {id:any ,yearDesc:any ,yearStart :any,yearEnd:any}\npendingItemsFromStock: Array<any> = [];\n  statusFromRoute: string = '';\n  \n  // New workflow properties\n  showJournalEntryModal: boolean = false;\n  invoiceJournalData: InvoiceJournalData = null;\n  customerBalance: any = null;\n\ncurrenQty:any = 0\nfirstQty:any = 0\nperchTotQty:any = 0\npayTotQty:any = 0\nperchTot :any = 0\nqtyReal:any = 0\navailQty :any = 0\n// اي طريقة دفع ح يكون في حساب مقابل ليها مثلا الكاش ح يتورد في حساب الخزينة وبنكك في حساب بنك الخرطوم اما الشيك فحيكون بالاجل و ح ينزل في  سجل الشيكات ويتحول الي حساب المعين سواء كان اتورد في حساب بنكي او اتسحب كاش واتورد فيحساب الخزينة \nconstructor( private behavApi:StockServiceService ,private route: ActivatedRoute,private renderer : Renderer2,private modalController: ModalController,private alertController: AlertController, private authenticationService: AuthServiceService,private storage: Storage,private loadingController:LoadingController, private datePipe:DatePipe,private api:ServicesService,private toast :ToastController, private _location: Location) {\n \n  this.selectedAccount = {id:\"\" ,ac_id:\"\",sub_name:\"\",sub_type:\"\",sub_code:\"\",sub_balance:\"\",store_id:\"\",cat_name:\"\",cat_id:\"\",phone:\"\",address:\"\"};\n\n  this.selectedItem = {\n    id:undefined,\n    dateCreated:\"\",\n    pay_ref:\"\",\n    item_desc:\"\",\n    item_name:\"\",\n    item_unit:\"\",\n    parcode:0,\n    pay_price:0,\n    perch_price:0,\n    qty:0,\n    tot:0,\n    aliasEn:\"\"\n  }\n  this.route.queryParams.subscribe(params => {\n    //console.log(params.payInvo,'jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj')\n    if (params && params.payInvo) {\n      this.status = 'initial'\n      this.payInvo = JSON.parse(params.payInvo);  \n      this.user_info = JSON.parse(params.user_info);\n      this.store_info = JSON.parse(params.store_info);\n      this.itemList = JSON.parse(params.itemList);\n       \n       \n      this.getAppInfoCase2()\n    } else if (params['status'] === 'newInvoFromItemsPage' && params['selectedItemsList']) {\n      console.log('New invoice from items page');\n      this.statusFromRoute = params['status'];\n      this.pendingItemsFromStock = JSON.parse(params['selectedItemsList']);\n      this.showBackButton = true; // Show back button when coming from items page\n      console.log('Received items from stock page:', this.pendingItemsFromStock);\n      this.showPriceAdjustmentDialog('initial');\n    } \n  });\n\n\n     this.printArr.push({\n    'payInvo': \"\",\n    'itemList':\"\",\n     'selectedAccount' :\"\",\n      'sub_nameNew' : \"\"\n  }) \n  }\n\n\n  refresh(para ?){\n    \n     // this.getItems()\n     this.getAllStockItemsWithouteCounts()\n     // this.getStockItems()\n    \n    \n  }\n\n\n\n\n  getAllStockItemsWithouteCounts() {\n    this.storage.get('year').then((response) => {\n     if (response) {\n      this.year = response\n      //console.log('this.year.id',this.year.id)\n      if (this.offline == false) {\n        this.loadingItems = true\n        this.api.getAllStockItemsWithouteCounts(1,this.year.id).subscribe(data => {\n           console.log(data)\n          let res = data\n          this.items = res['data'] \n          this.loadingItems = false\n          this.storage.set('itemsLocal' , this.items).then((response) => {\n             \n          });  \n         \n        }, (err) => {\n          this.loadingItems = false\n          //console.log(err);\n        },\n          () => {\n            this.loadingItems = false\n          }\n        )\n      } else {\n        this.items = this.itemsLocal\n        // this.items.forEach(element => {\n        //   if(+element.tswiaQuantity > 0){\n        //     element.salesQuantity = +element.salesQuantity + +element.tswiaQuantity \n\n        //   }else if(+element.tswiaQuantity < 0){\n        //     element.perchQuantity = +element.perchQuantity + Math.abs(+element.tswiaQuantity) \n        //   }\n\n        //   element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n        // });\n        this.searchResult = this.items\n      }\n      } \n  }); \n  }\n\n\n\n\nasync presentAlertConfirm() {\n  const alert = await this.alertController.create({\n    cssClass: 'my-custom-class',\n    header: 'تأكيد!',\n    mode:'ios' ,\n    message: 'هل تريد طباعة فاتورة ؟ ',\n    buttons: [\n      {\n        text: 'إلغاء',\n        role: 'cancel',\n        cssClass: 'secondary',\n        id: 'cancel-button',\n        handler: (blah) => {\n          //console.log('Confirm Cancel: blah'); \n          this.prepareInvo()\n        }\n      }, {\n        text: 'موافق',\n        id: 'confirm-button',\n        handler: () => {\n          this.presentModal(this.printArr , 'perch')\n        }\n      }\n    ]\n  });\n\n  await alert.present();\n}\n\nasync priceChangeAlertConfirm() {\n  const alert = await this.alertController.create({\n    cssClass: 'my-custom-class',\n    header: 'تأكيد!',\n    mode:'ios' ,\n    message: 'هل تريد تعديل اسعار البيع والشراء',\n    buttons: [\n      {\n        text: 'إلغاء',\n        role: 'cancel',\n        cssClass: 'secondary',\n        id: 'cancel-button',\n        handler: (blah) => {\n          //console.log('Confirm Cancel: blah'); \n          this.addTolist() \n        }\n      }, {\n        text: 'موافق',\n        id: 'confirm-button',\n        handler: () => {\n           this.updateItemDetail()\n        }\n      }\n    ]\n  }); \n  await alert.present();\n}\n\n\nupdateItemDetail(){\n  this.presentLoadingWithOptions('جاري تعديل البيانات ...') \n  this.logHistoryArr.push(\n    {\n      \"id\":null,\n      \"logRef\":this.generateRandom2('update item'),\n      \"userId\":this.user_info.id,\n      \"typee\":'update item',\n      \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n      \"logStatus\":0,\n      \"logToken\":JSON.stringify(this.selectedItem)  ,\n      \"yearId\":this.year.id,\n      \"store_id\":this.store_info.id\n    }\n  )\n\n  this.api.updateItem(this.selectedItem).subscribe(data => {\n  //console.log(data)\n  if (data['message'] != 'Post Not Updated') {\n   this.presentToast('تم التعديل بنجاح' , 'success')\n   this.performSync2()\n  }else{\n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n  }\n \n}, (err) => {\n  //console.log(err);\n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n},() => {\n this.loadingController.dismiss()\n}) \n}\n\n\n\nPrint(elem){ \n    this.printMode = true \n    var mywindow = window.open('', 'PRINT', 'height=400,width=600'); \n    mywindow.document.write('<html><head>'); \n    mywindow.document.write('<style type=\"text/css\">')\n    mywindow.document.write('.flr{ display: block; float: right; } .show{ } .hide{width:0px;height:0px} .w45 {width:45%} .w50 {width:50%} .w100 {width:100%} td, th {border: 1px solid #dddddd;text-align: center;padding: 8px;} tr:nth-child(even) {background-color: #dddddd;} .table{text-align: center;width: 100%; margin: 12px;}.ion-margin{ margin: 10px; } .ion-margin-top{ margin-top: 10px; } .rtl {  direction: rtl; } .ion-text-center{ text-align: center; } .ion-text-end{ text-align: left; } .ion-text-start{ text-align: right; }')\n    mywindow.document.write('</style></head><body>');\n    mywindow.document.write(document.getElementById(elem).innerHTML);\n    mywindow.document.write('</body></html>');\n    mywindow.document.close(); // necessary for IE >= 10\n    mywindow.focus(); // necessary for IE >= 10*/ \n    mywindow.print();\n    mywindow.close();\n    this.printMode = false  \n    return true;  \n}\n\nngOnInit() { \n  // Check category visibility setting\n  \n  if(this.status == 'new'){\n    this.getAppInfo()  \n   }else if(this.status == 'initial'){\n    this.getAppInfoCase2() \n   }  \n  \n \n}\n\nasync showPriceAdjustmentDialog(mode: 'initial' | 'edit' = 'initial') {\n  let itemsToPass = [];\n  let isInitialMode = false;\n  \n  if (mode === 'initial') {\n    // Case 1: Initial load with pendingItemsFromStock\n    if (!this.pendingItemsFromStock || this.pendingItemsFromStock.length === 0) {\n      return;\n    }\n    itemsToPass = this.pendingItemsFromStock;\n    isInitialMode = true;\n  } else {\n    // Case 2: Edit current itemList\n    if (!this.itemList || this.itemList.length === 0) {\n      return;\n    }\n    // Convert itemList to format expected by modal\n    itemsToPass = this.itemList.map(item => ({\n      id: item.item_id,\n      item_name: item.item_name,\n      qty: item.quantity, // quantity → qty for modal\n      perch_price: item.perch_price,\n      pay_price: item.pay_price,\n      item_unit: item.item_unit || '',\n      part_no: item.part_no || '',\n      brand: item.brand || '',\n      model: item.model || '',\n      aliasEn: item.aliasEn || ''\n    }));\n    isInitialMode = false;\n  }\n  \n  try {\n    const modal = await this.modalController.create({\n      component: PriceAdjustmentDialogComponent,\n      componentProps: {\n        itemsList: itemsToPass,\n        mode: 'purchase'\n      },\n      cssClass: 'price-adjustment-modal'\n    });\n\n    modal.onDidDismiss().then((data) => {\n      if (data.data) {\n        // User applied price adjustments\n        if (isInitialMode) {\n          this.handleInitialModeResult(data.data);\n        } else {\n          this.handleEditModeResult(data.data);\n        }\n      } else {\n        // User cancelled\n        if (isInitialMode) {\n          this.addItemsFromStockToPurchase();\n        }\n        // For edit mode, do nothing if cancelled\n      }\n    });\n\n    await modal.present();\n    \n  } catch (error) {\n    console.error('Error creating modal:', error);\n    if (isInitialMode) {\n      this.addItemsFromStockToPurchase();\n    }\n  }\n}\n\nhandleInitialModeResult(updatedItems: any[]) {\n  // Case 1: Clear itemList and add updated items from pendingItemsFromStock\n  this.itemList = []; // Clear existing items\n  \n  // Update pendingItemsFromStock with new prices\n  this.pendingItemsFromStock = updatedItems;\n  \n  // Add items to itemList\n  this.addItemsFromStockToPurchase();\n  \n  // Reset pendingItemsFromStock\n  this.pendingItemsFromStock = [];\n  \n  // Recalculate totals\n  this.recalculateTotals();\n}\n\nhandleEditModeResult(updatedItems: any[]) {\n  // Case 2: Update existing itemList with new prices\n  if (!updatedItems || updatedItems.length === 0) return;\n\n  // Update the itemList with new prices instead of recreating it\n  updatedItems.forEach(updatedItem => {\n    const itemIndex = this.itemList.findIndex(item => \n      item.item_id === updatedItem.id && item.item_name === updatedItem.item_name\n    );\n    \n    if (itemIndex !== -1) {\n      // Update the perch_price and recalculate total\n      this.itemList[itemIndex].perch_price = parseFloat(updatedItem.perch_price) || 0;\n      this.itemList[itemIndex].tot = (this.itemList[itemIndex].quantity * this.itemList[itemIndex].perch_price).toFixed(2);\n    }\n  });\n  \n  // Recalculate totals\n  this.recalculateTotals();\n  \n  this.presentToast('تم تعديل الأسعار بنجاح', 'success');\n}\n\nrecalculateTotals() {\n  // Recalculate tot_pr and changee using getTotal() - preserve existing pay amount\n  this.getTotal(); // This updates payInvo.tot_pr, payInvo.changee based on itemList totals and existing pay amount\n}\n\naddItemsFromStockToPurchase() {\n  // Add items from pendingItemsFromStock to itemList following prepareInvo() pattern\n  let d = new Date();\n  \n  this.pendingItemsFromStock.forEach(item => {\n    this.itemList.push({\n      \"id\": 'NULL',\n      \"pay_ref\": this.payInvo.pay_ref,\n      \"item_name\": item.item_name,\n      \"pay_price\": item.pay_price,\n      \"quantity\": +item.qty, // Convert qty to quantity\n      \"tot\": (+item.qty * +item.perch_price).toFixed(2),\n      \"store_id\": +this.store_info.id,\n      \"yearId\": +this.year.id,\n      \"item_id\": +item.id,\n      \"dateCreated\": this.datePipe.transform(d, 'dd-MM-YYYY'),\n      \"perch_price\": item.perch_price\n    });\n  });\n  \n  // Clear pending items\n  this.pendingItemsFromStock = [];\n  \n  // Recalculate totals using existing method\n  this.getTotal();\n}\n\n// Public method to open price adjustment dialog for editing current itemList\nopenPriceAdjustmentDialog() {\n  this.showPriceAdjustmentDialog('edit');\n}\n\n\n\n \n\n\n \n \n\n \n\ngetAppInfo(){ \n   \n   this.storage.get('USER_INFO').then((response) => {\n    if (response) {\n      this.user_info = response\n      //console.log(this.user_info) \n    }\n  });\n  this.storage.get('year').then((response) => {\n    if (response) {\n      this.year = response \n    } \n  });\n  this.storage.get('STORE_INFO').then((response) => {\n    if (response) {\n      this.store_info = response \n      this.prepareInvo()\n    }\n  });\n\n  this.storage.get('itemsLocal').then((response) => {\n    if (response) {\n       this.items = response\n    }\n  });\n  \n}\n\n\ngetAppInfoCase2(){  \n  \n   this.storage.get('USER_INFO').then((response) => {\n    if (response) {\n      this.user_info = response\n      //console.log(this.user_info) \n    }\n  });\n  this.storage.get('year').then((response) => {\n    if (response) {\n      this.year = response \n      this.payInvo.yearId = this.year.id\n      this.itemList.forEach(element => {\n        element.yearId =this.year.id\n      });\n    } \n  });\n\n   \n  this.storage.get('STORE_INFO').then((response) => {\n    if (response) {\n      this.store_info = response\n      \n      \n    }   \n  });  \n\n  this.storage.get('itemsLocal').then((response) => {\n    if (response) {\n       this.items = response\n    }\n  });\n  \n}\n \n\n\nradioChange(ev){\n  //console.log(ev.target.value) \n }\n\n presentPopover(e?: Event) {\n  //console.log('preent me', e)\n   this.popover2.event = e;\n   this.isOpen = true;\n   this.clear()\n   this.searchResult = this.items\n   setTimeout(() => {\n   this.setFocusOnInput('popInput2')\n   }, 2000);\n }\n\n presentPopoverNotif(e?: Event) {\n  //console.log('preent me', e)\n   this.notifArr = []\n   this.showNotif = false\n   this.popoverNotif3.event = e;\n   this.isOpenNotif = true;  \n }\n didDissmisNotif(){\n  this.isOpenNotif = false\n  //console.log('dismissOver') \n}\n didDissmis(){\n  this.isOpen = false\n  this.getItemPaysByItemId()\n  this.setFocusOnInput('qtyIdP')\n}\n\n\n  searchItem(ev){\n      this.searchResult = []\n      this.aliasTerm = ev.target.value \n      const filterPipe = new FilterPipe;   \n      let  fiteredArr :any = filterPipe.transform(this.items,ev.target.value); \n      if(fiteredArr.length>0){\n        fiteredArr.forEach(element => {\n          this.searchResult.push( element)\n        });\n      }    //console.log('search',this.searchResult)\n    }\n\n\ngetItemPaysByItemId(){  \n   \n  this.api.getItemQtyPaysByItemId(this.store_info.id ,this.selectedItem.id,this.year.id).subscribe(data =>{\n     console.log('getItemPaysByItemId',data)\n     let res = data\n     if(res['message'] != 'No record Found'){\n       this.payTotQty = res['data'][0].salesQuantity \n     }\n       this.getQtyPurchByItemId() \n    \n   }, (err) => {\n   //console.log(err);\n   this.presentToast('1خطا في الإتصال حاول مرة اخري' , 'danger')\n  \n },\n ()=>{\n })  \n }\n\n getQtyPurchByItemId(){ \n  this.api.getQtyPurchByItemId(this.store_info.id ,this.selectedItem.id,this.year.id).subscribe(data =>{\n     //console.log('purch',data)\n     let res = data\n     if(res['message'] != 'No record Found'){\n       this.perchTotQty = res['data'][0].perchQuantity \n       this.firstQty =    res['data'][0].firstQuantity \n     } \n     this.getQtyTswiaByItemId() \n   }, (err) => {\n   //console.log(err);\n   this.presentToast('  خطا في الإتصال حاول مرة اخري' , 'danger')\n },\n ()=>{\n  \n })  \n }\n\n\n getQtyTswiaByItemId(){  \n  this.api.getQtyTswiaByItemId(this.store_info.id ,this.selectedItem.id,this.year.id).subscribe(data =>{\n     console.log('getQtyTswiaByItemId',data)\n     let res = data\n     if(res['message'] != 'No record Found'){\n      this.availQty = res['data'][0].availQty   \n      this.qtyReal = res['data'][0].qtyReal   \n     } \n     this.getQtyTotalItemId()  \n   }, (err) => {\n   //console.log(err);\n   this.presentToast('  خطا في الإتصال حاول مرة اخري' , 'danger')\n },\n ()=>{\n\n })  \n }\n\n getQtyTotalItemId(){  \n  //console.log('perchTotQty',this.perchTotQty ,this.payTotQty )\n  //تجميع الكيات السالبة وتحويلها لموجب لإضافتها للمشتريات\n  if( (+this.availQty  - +this.qtyReal) < 0 ){ \n    this.perchTotQty = +this.perchTotQty +  Math.abs((+this.availQty  - +this.qtyReal))  \n  }else if((+this.availQty  - +this.qtyReal) > 0 ){\n    this.payTotQty = +this.payTotQty + (+this.availQty  - +this.qtyReal)  \n  } \n  this.availQty = + this.perchTotQty  - +  this.payTotQty\n  console.log(this.payTotQty , this.payTotQty)\n} \n\nclear(item_name?){\n if(item_name){\n  this.selectedItem = {\n    id: undefined,\n    dateCreated: \"\", \n    pay_ref:this.payInvo.pay_ref,\n    item_desc: \"\",\n    item_name: \"\",\n    item_unit: \"\",\n    parcode: 0,\n    pay_price: 0,\n    perch_price: 0,\n    qty: 0,\n    tot: 0, \n    aliasEn:\"\"\n  }\n }else{\n  this.searchTerm = \"\" \n }\n}\n\n\nprepareInvo(){ \n  this.selectedAccount = {id:\"\" ,ac_id:\"\",sub_name:\"\",sub_type:\"\",sub_code:\"\",sub_balance:\"\",store_id:\"\",cat_name:\"\",cat_id:\"\",phone:\"\",address:\"\"};\n  this.sub_nameNew = \"\"\n  this.radioVal = 0\n  this.payInvo ={pay_id:undefined ,pay_ref:0 ,store_id:\"\",tot_pr:0,pay:0,pay_date:\"\",pay_time:\"\",user_id:\"\",cust_id:null,pay_method:\"\",discount:0 ,changee:0,sub_name:\"\",payComment:\"\",nextPay:null,yearId:\"\"};\n  this.discountPerc = 0\n  // Clear discount related variables\n  this.discountType = 'percentage';\n  this.discountAmount = 0;\n  this.calculatedDiscountPerc = 0;\n  this.calculatedDiscountAmount = 0;\n  let d = new Date\n// this.payInvo.pay_date  = d.getMonth().toString() + \"/\"+ d.getDay().toString()+ \"/\"+ d.getFullYear().toString() \n this.payInvo.pay_date = this.datePipe.transform(d, 'yyyy-MM-dd')\n \n this.payInvo.pay_time = this.datePipe.transform(d, 'HH:mm:ss') \n this.generateRandom()  \n this.payInvo.store_id =this.store_info.id\n this.payInvo.yearId =this.year.id\n this.payInvo.user_id = this.user_info.id\n //console.log( this.payInvo) \n \n // Clear itemList and related arrays\n this.itemList = []\n this.sortedItemList = []\n this.isItemListSorted = false\n \n // Clear search related variables\n this.searchTerm = ''\n this.searchMatches = []\n this.highlightedIndex = -1\n \n //check if there is pending items from stock page or from sales \n  if (this.statusFromRoute === 'newInvoFromItemsPage' && this.pendingItemsFromStock.length > 0) {\n      //console.log('Pending items from stock page:', this.pendingItemsFromStock);\n      this.pendingItemsFromStock.forEach(item => {\n      this.itemList.push({\n      \"id\" : 'NULL',\n      \"pay_ref\" :this.payInvo.pay_ref,\n      \"item_name\" :item.item_name,\n      \"pay_price\" :item.pay_price,\n      \"quantity\" : +item.qty,\n      \"tot\" :(+item.qty * +item.perch_price).toFixed(2),\n      \"store_id\" :+this.store_info.id, \n      \"yearId\" :+this.year.id, \n      \"item_id\" : +item.id,\n      \"dateCreated\" : this.datePipe.transform(d, 'dd-MM-YYYY'),\n      \"perch_price\":item.perch_price \n        });\n      });\n       this.statusFromRoute = '';\n       this.pendingItemsFromStock = []; // Reset status after processing\n       this.getTotal()\n       console.log('itemlist after the get the')\n    }\n    this.getSalesAccount()  \n     //this.setFocusOnInput('dstP')\n}\n\n\n  \n\nsetFocusOnInput(Input) {\n  //console.log('setFocusOnInput')\n  if (Input == 'dstP') { \n    this.nameField.nativeElement.focus(); \n   } else if(Input == 'dstPop2') {\n    this.dstPop2.setFocus();\n    this.isOpen = true;\n    this.clear()\n    this.searchResult = this.items\n    setTimeout(() => {\n        this.popInput2.setFocus(); \n    }, 1500);\n  \n   }else if(Input == 'qtyIdP') {\n    this.qtyIdP.setFocus();  \n   }else if(Input == 'popInput2'){\n    this.popInput2.setFocus();  \n   }\n}\n\ngetStockItems(pickName?) {\n  this.storage.get('year').then((response) => {\n    if (response) {\n      this.year = response \n      if (this.offline == false) {\n        this.loadingItems = true\n        this.api.getAllStockItemsWithouteCounts(1,this.year.id).subscribe(data => {\n          //console.log(data)\n          let res = data\n          this.items = res['data']\n    \n          this.items.forEach(element => {\n            if(+element.tswiaQuantity > 0){\n              element.salesQuantity = +element.salesQuantity + +element.tswiaQuantity \n    \n            }else if(+element.tswiaQuantity < 0){\n              element.perchQuantity = +element.perchQuantity + Math.abs(+element.tswiaQuantity) \n            }\n    \n            element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n          });\n          \n          this.searchResult = this.items\n          if(pickName){\n            this.pickDetail(pickName , 'afterSave') \n          }\n          this.storage.set('itemsLocal' , this.items).then((response) => {\n             \n          }); \n         \n        }, (err) => {\n          //console.log(err);\n        },\n          () => {\n            this.loadingItems = false\n          }\n        )\n      } else {\n        this.items = this.itemsLocal\n        this.items.forEach(element => {\n          element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n        });\n        this.searchResult = this.items\n      }\n    } \n  }); \n}\n\nsumStockItems(pickName?) {\n  if (this.offline == false) {\n    this.api.stockItems(1,this.year.id).subscribe(data => {\n      //console.log(data)\n      let res = data\n      let arr = res['data']\n      for (let index = 0; index < this.items.length; index++) {\n        const element = this.items[index];\n        let flt = arr.filter(x=>x.id == element.id)\n        if(flt.length>0){\n          element.perchQuantity =  +element.perchQuantity + +flt[0].perchQuantity\n        //  element.firstQuantity =  +element.firstQuantity + +flt[0].firstQuantity\n          element.salesQuantity =  +element.salesQuantity + +flt[0].salesQuantity\n        }\n      } \n      this.items.forEach(element => {\n        if(+element.tswiaQuantity > 0){\n          element.salesQuantity = +element.salesQuantity + +element.tswiaQuantity \n\n        }else if(+element.tswiaQuantity < 0){\n          element.perchQuantity = +element.perchQuantity + Math.abs(+element.tswiaQuantity) \n        }\n\n        element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n      });\n      this.searchResult = this.items\n      if(pickName){\n        this.pickDetail(pickName , 'afterSave') \n      }\n    }, (err) => {\n      //console.log(err);\n    },\n      () => {\n      }\n    )\n  } else {\n    this.items = this.itemsLocal\n    this.items.forEach(element => {\n      element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n    });\n    this.searchResult = this.items\n  }\n\n}\n\ngetStockItemsAfterUpdate() {\n  let fl : Array<any>=[]\n      if(this.searchLang == 1){\n        fl= this.items.filter(x=>x.item_desc == this.selectedItem.item_desc)\n       //console.log('hyrr',fl);\n     }else{\n        fl= this.items.filter(x=>x.item_name == this.selectedItem.item_name)\n       //console.log(fl);\n     }\n        \n    let qt = +this.selectedItem.qty\n    let perch = +this.selectedItem.perch_price\n    let pay = +this.selectedItem.pay_price\n\n    //console.log(fl);\n    this.selectedItem = {\n      id:fl[0]['id'],\n      dateCreated:fl[0]['dateCreated'],\n      pay_ref:this.payInvo.pay_ref,\n      item_desc:fl[0]['item_desc'],\n      item_name:fl[0]['item_name'],\n      item_unit:fl[0]['item_unit'],\n      parcode:fl[0]['parcode'],\n      pay_price:pay,\n      perch_price:perch,\n      qty:qt,\n      tot:  (qt * +fl[0]['perch_price']).toFixed(2), \n      aliasEn:fl[0]['aliasEn']\n    }\n    \n   \n  ///\n   \n    this.getItemLoader =true\n\n     let index = this.items.map(e => e.id).indexOf(this.selectedItem.id);\n    console.log('item inex',this.items[index])\n    if(index != -1){\n      this.items[index].pay_price = this.selectedItem.pay_price\n      this.items[index].perch_price = this.selectedItem.perch_price\n    } \n      this.searchResult = this.items\n      console.log('index',this.items)\n      \n       this.storage.set('itemsLocal' , this.items).then((response) => {\n             this.getItemLoader =false\n        });\n///\n\n this.addTolist()\n\n    // this.api.getAllStockItemsWithouteCounts(1,this.year.id).subscribe(data => {\n    //   //console.log(data)\n    //   let res = data\n    //   this.items = res['data']\n    //   // this.items.forEach(element => {\n    //   //   if(+element.tswiaQuantity > 0){\n    //   //     element.salesQuantity = +element.salesQuantity + +element.tswiaQuantity \n\n    //   //   }else if(+element.tswiaQuantity < 0){\n    //   //     element.perchQuantity = +element.perchQuantity + Math.abs(+element.tswiaQuantity) \n    //   //   }\n\n    //   //   element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n    //   // });\n    //   this.searchResult = this.items\n    //   //console.log('searchResult after Update',this.searchResult)\n    //   this.getItemLoader =false\n    //   this.storage.set('itemsLocal', this.items).then((response) => {\n    //   //console.log('resoponse set', response)\n    //   this.storage.get('itemsLocal').then((response2) => {\n    //     if (response) {\n    //       this.itemsLocal = response2 \n    //       this.searchResult = [] \n    //        this.items = this.itemsLocal  \n    //        this.searchResult = this.items\n    //     //   this.loadingController.dismiss() \n    //     }\n    //   }); \n    // });  \n\n\n      \n    //   // this.sumStockItemsAfterUpdate()\n    // }, (err) => {\n    //   //console.log(err);\n    //   this.getItemLoader =false\n    // },\n    //   () => {\n    //   }\n    // )\n  \n}\n\nsumStockItemsAfterUpdate() { \n  if (this.offline == false) {\n    this.getItemLoader =true\n    this.api.stockItems(1,this.year.id).subscribe(data => {\n      //console.log(data)\n      let res = data\n      let arr = res['data']\n      for (let index = 0; index < this.items.length; index++) {\n        const element = this.items[index];\n        let flt = arr.filter(x=>x.id == element.id)\n        if(flt.length>0){\n          element.perchQuantity =  +element.perchQuantity + +flt[0].perchQuantity\n         // element.firstQuantity =  +element.firstQuantity + +flt[0].firstQuantity\n          element.salesQuantity =  +element.salesQuantity + +flt[0].salesQuantity\n        }\n      }   \n      this.items.forEach(element => {\n        if(+element.tswiaQuantity > 0){\n          element.salesQuantity = +element.salesQuantity + +element.tswiaQuantity \n\n        }else if(+element.tswiaQuantity < 0){\n          element.perchQuantity = +element.perchQuantity + Math.abs(+element.tswiaQuantity) \n        }\n\n        element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n      });\n      this.searchResult = this.items\n      //console.log('searchResult after Update',this.searchResult)\n      this.getItemLoader =false\n      this.storage.set('itemsLocal', this.items).then((response) => {\n      //console.log('resoponse set', response)\n      this.storage.get('itemsLocal').then((response2) => {\n        if (response) {\n          this.itemsLocal = response2 \n          this.searchResult = [] \n           this.items = this.itemsLocal\n           this.searchResult = this.items\n        //   this.loadingController.dismiss() \n        }\n      }); \n    });  \n    }, (err) => {\n      //console.log(err);\n      this.getItemLoader =false\n    },\n      () => {\n      }\n    )\n  } else {\n    this.items = this.itemsLocal\n    this.items.forEach(element => {\n      element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n    });\n    this.searchResult = this.items\n  } \n}\n\nafterSync(flt){\n  //push flt to local after chanch the logStatus to 1\n  flt.forEach(element => {\n   if(this.LogHistoryLocalArr.some(e => e.logRef === element.logRef) == false) {\n     this.LogHistoryLocalArr.push(element)\n   }else{\n    //get index of it and replace it with value from flt\n    let index = this.LogHistoryLocalArr.findIndex(x => x.logRef === element.logRef);\n    if(index != -1){\n      this.LogHistoryLocalArr[index] = element\n    }\n   }\n    \n  });\n\n   //set loghistory locally  \n //console.log ('finish ' ,  this.LogHistoryLocalArr)\n this.storage.set('LogHistoryLocal',this.LogHistoryLocalArr).then((response) => {\n        \n }) \n}\n\nqtyClick(i){\n  //console.log(i)\n  this.showMe = i\n}\n\nhideMe(i){\n  this.showMe = null \n}\n\neditCell(i){\n  const displayList = this.getDisplayItemList();\n  const itemToEdit = displayList[i];\n  \n  // Find the corresponding item in the original itemList\n  const originalIndex = this.itemList.findIndex(item => \n    item.item_name === itemToEdit.item_name && \n    item.perch_price === itemToEdit.perch_price\n  );\n  \n  if (originalIndex !== -1 && +displayList[i].quantity > 0 && +displayList[i].perch_price > 0) {\n    // Update both the display list and original list\n    displayList[i].tot = +displayList[i].quantity * displayList[i].perch_price;\n    this.itemList[originalIndex].quantity = displayList[i].quantity;\n    this.itemList[originalIndex].perch_price = displayList[i].perch_price;\n    this.itemList[originalIndex].tot = displayList[i].tot;\n    \n    // Reset discount but preserve pay amount\n    this.discountPerc = 0\n    this.payInvo.discount = 0\n    this.hideMe(i)\n    this.getTotal() \n  } else {\n    this.presentToast(\"خطأ في الإدخال \", \"danger\")\n  }\n}\n \n\nionViewDidEnter(){\n  setTimeout(() => {\n    // //check all changes in case notif arr >0 \n    //  this.subiscribtionNotif = this.behavApi.currentNotif.subscribe(notif=>{\n    //   //console.log('notif page currentNotif behavApiRespnse',notif) \n    //    if(notif.length == 0){\n    //     this.notifArr = []\n    //    }else{\n    //     this.notifArr =  notif[0]  \n    //    }\n\n    //   if(this.notifArr.length> 0){ \n    //     this.showNotif = true\n    //     this.itemsLocal = notif[1] \n    //     this.items =  this.itemsLocal\n    //     this.searchResult = this.items\n    //     // this.sub_accountSales = notif[2] \n    //     // //console.log(this.sub_accountLocalSales)  \n    //     this.storage.get('LogHistoryLocal').then((response) => { \n    //       if (response) {\n    //         this.LogHistoryLocalArr = response  \n    //       } \n    //     });\n    //    // this.getSubBalance()\n    //   } else {\n    //     //console.log('no updates')\n    //     this.showNotif = false  \n    //   } \n    //   })\n    }, 10000); \n} \n\n\n\nasync presentModal2(id?, status?) {\n  // if (id !='null' && status == 'edit') {\n  //    let fl= this.items.filter(x=>x.id == id)\n  // //console.log(fl);\n\n  // this.selectedItem = {\n  //   id:fl[0]['id'],\n  //   item_desc:fl[0]['item_desc'],\n  //   model:fl[0]['model'],\n  //   item_name:fl[0]['item_name'],\n  //   min_qty:fl[0]['min_qty'],\n  //   part_no:fl[0]['part_no'],\n  //   brand:fl[0]['brand'],\n  //   item_unit:fl[0]['item_unit'],\n  //   item_parcode:fl[0]['item_parcode'],\n  //   pay_price:fl[0]['pay_price'],\n  //   perch_price:fl[0]['perch_price']\n  // }\n\n   \n  // }\n \n\n  const modal = await this.modalController.create({\n    component: ItemModalPage ,\n    componentProps: {\n      \"item\": this.selectedItem,\n      \"status\": status\n    }\n  });\n  \n  modal.onDidDismiss().then((dataReturned) => {\n    if (dataReturned !== null) {\n      //console.log(dataReturned )\n      this.doAfterDissmiss(dataReturned)\n    }\n  });\n\n  return await modal.present(); \n}\n\ngetItems(pickName?) {\n  if (this.offline == false) {\n    this.api.getItems().subscribe(data => {\n      //console.log(data)\n      let res = data\n      this.items = res['data']\n      this.searchResult = this.items\n      if(pickName){\n        this.pickDetail(pickName , 'afterSave') \n      }\n    }, (err) => {\n      //console.log(err);\n    })\n  } else {\n    this.items = this.itemsLocal \n    this.searchResult = this.items\n  }\n}\n\ngetSalesAccount(){\n  if (this.offline == false) {\n    this.api.getPerchAccounts(this.store_info.id ,this.year.id).subscribe(data =>{\n       let res = data\n       this.sub_account = res ['data']\n       console.log('acccccc',this.sub_account)\n        this.addSubaccountLocal()\n     }, (err) => {\n     //console.log(err);\n   }) \n  }else{\n    this.MixSubaccountSalesOffline()\n   } \n } \n\naddSubaccountLocal(){\n  if (this.sub_account) {\n    if (this.sub_accountLocalPurch) {\n      for (let i = 0; i < this.sub_accountLocalPurch.length; i++) {\n        const element = this.sub_accountLocalPurch[i];\n        this.sub_account.push(element)\n      }\n    }\n  } else{\n    if (this.sub_accountLocalPurch) {\n      this.sub_account = this.sub_accountLocalPurch \n    }\n  } \n}\n\nMixSubaccountSalesOffline(){\n  this.sub_account=[] \n    if (this.sub_accountLocalPurch) {\n      for (let i = 0; i < this.sub_accountLocalPurch.length; i++) {\n        const element = this.sub_accountLocalPurch[i];\n        this.sub_account.push(element)\n      }\n    }\n    if (this.sub_accountPurch) {\n      for (let i = 0; i < this.sub_accountPurch.length; i++) {\n        const element = this.sub_accountPurch[i];\n        this.sub_account.push(element)\n      }\n    } \n  }\n\ngenerateRandom():any{\nlet da = new Date \n//console.log(da)\nlet randomsNumber = da.getMonth().toString() + da.getDay().toString() + da.getHours().toString()+ da.getMinutes().toString()+da.getSeconds().toString()+da.getMilliseconds().toString()\nthis.payInvo.pay_ref = this.store_info.store_ref + randomsNumber\n//console.log(randomsNumber)\n//console.log(this.payInvo.pay_ref)  \n}\n\n\nselectFromPop(item){\n   console.log(item)\n  this.selectedItem = {\n    id:item.id,\n    dateCreated:item.dateCreated,\n    pay_ref:this.payInvo.pay_ref,\n    item_desc:item.item_desc,\n    item_name:item.item_name,\n    item_unit:item.item_unit,\n    parcode:item.parcode,\n    pay_price:item.pay_price,\n    perch_price:item.perch_price,\n    qty:\"\",\n    tot:item.perch_price, \n    aliasEn:item.aliasEn\n  } \n    this.searchTerm = item.item_name\n    //console.log( this.selectedItem); \n    this.didDissmis()\n    \n  }\n\npickDetail(ev , notev?){\n  let evVal \n  if(notev){\n   evVal = ev\n   this.searchLang = 0\n  }else{\n  evVal = ev.target.value\n  }\n  //console.log('evVal',evVal);\n  let fl : Array<any>=[]\n  if(this.searchLang == 1){\n    fl= this.items.filter(x=>x.item_desc == evVal)\n   //console.log('hyrr',fl);\n }else{\n    fl= this.items.filter(x=>x.item_name == evVal)\n   //console.log(fl);\n }\n\n  \n//console.log(fl);\nthis.selectedItem = {\n  id:fl[0]['id'],\n  dateCreated:fl[0]['dateCreated'],\n  pay_ref:this.payInvo.pay_ref,\n  item_desc:fl[0]['item_desc'],\n  item_name:fl[0]['item_name'],\n  item_unit:fl[0]['item_unit'],\n  parcode:fl[0]['parcode'],\n  pay_price:fl[0]['pay_price'],\n  perch_price:fl[0]['perch_price'],\n  qty:0,\n  tot:fl[0]['perch_price'],\n   aliasEn:fl[0]['aliasEn']\n}\n//console.log( this.selectedItem);\nthis.setFocusOnInput('qtyIdP')\n\n}\n\nqtyhange(ev){\n//console.log(ev);\nthis.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2)\n}\n\n\npayPricehange(ev){\n  if((+this.selectedItem.perch_price >= +this.selectedItem.pay_price) && (+this.selectedItem.perch_price > 0 && +this.selectedItem.pay_price >0)){\n    this.presentToast('سعر الشراء اعلي من سعر البيع ' , 'warning')\n  }\n//console.log(ev);\nthis.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2)\n}\n\nperchPricehange(ev){\n  if((this.selectedItem.perch_price >= this.selectedItem.pay_price) &&  this.selectedItem.perch_price > 0 && this.selectedItem.pay_price >0){\n    this.presentToast('سعر الشراء اعلي من سعر البيع ' , 'warning')\n  }\n//console.log(ev);\nthis.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2)\n}\n\npayChange(ev){\n//console.log(ev); \nthis.payInvo.changee = +( this.payInvo.tot_pr - +this.payInvo.discount) - ev.target.value \n}\n\n\nonDiscountTypeChange(event: any) {\n    this.discountType = event.detail.value;\n    // Reset discount values when switching types\n    this.discountPerc = 0;\n    this.discountAmount = 0;\n    this.payInvo.discount = 0;\n    this.calculatedDiscountPerc = 0;\n    this.calculatedDiscountAmount = 0;\n    this.calculateChange();\n  }\n\n  onPercentageDiscountChange(event: any) {\n    this.discountPerc = event.target.value || 0;\n    if (this.payInvo.tot_pr > 0) {\n      // Calculate discount amount based on percentage\n      this.calculatedDiscountAmount = (+this.payInvo.tot_pr * +this.discountPerc / 100);\n      this.payInvo.discount = this.calculatedDiscountAmount.toFixed(2);\n      this.calculateChange();\n    }\n  }\n\n   onAmountDiscountChange(event: any) {\n    this.discountAmount = event.target.value || 0;\n    if (this.payInvo.tot_pr > 0 && this.discountAmount > 0) {\n      // Calculate discount percentage based on amount\n      this.calculatedDiscountPerc = ((+this.discountAmount / +this.payInvo.tot_pr) * 100);\n      this.payInvo.discount = this.discountAmount;\n      this.calculateChange();\n    } else {\n      this.calculatedDiscountPerc = 0;\n      this.payInvo.discount = 0;\n      this.calculateChange();\n    }\n  }\n\n  calculateChange() {\n    this.payInvo.changee = +(this.payInvo.tot_pr - +this.payInvo.discount) - this.payInvo.pay;\n  }\n\n\n    getTotal() {\n    let sum = this.itemList.reduce((acc, obj) => { return acc + +obj.tot; }, 0);\n    this.payInvo.tot_pr = sum - +this.payInvo.discount;\n    this.payInvo.changee = +(sum - +this.payInvo.discount) - this.payInvo.pay;\n    this.payInvo.tot_pr = this.payInvo.tot_pr.toFixed(2);\n    this.payInvo.changee = this.payInvo.changee.toFixed(2);\n    \n    // Recalculate discount labels when total changes\n    if (this.discountType === 'percentage' && this.discountPerc > 0) {\n      this.calculatedDiscountAmount = (sum * +this.discountPerc / 100);\n    } else if (this.discountType === 'amount' && this.discountAmount > 0) {\n      this.calculatedDiscountPerc = ((+this.discountAmount / sum) * 100);\n    }\n  }\n\n// getTotal(){\n// let sum = this.itemList.reduce( (acc, obj)=> { return acc + +obj.tot; }, 0);\n// //console.log('sum', sum)\n// this.payInvo.tot_pr = sum - +this.payInvo.discount\n// this.payInvo.changee = +(sum - +this.payInvo.discount) - this.payInvo.pay\n// this.payInvo.tot_pr = this.payInvo.tot_pr.toFixed(2)\n// this.payInvo.changee = this.payInvo.changee.toFixed(2)\n// } \n\n\n\ndiscountChange(ev){\n  //console.log('discountChange' ,ev); \n  this.discountPerc = ((+this.payInvo.discount /+this.payInvo.tot_pr) * 100 )\n  this.payInvo.changee = +( this.payInvo.tot_pr - ev.target.value) - this.payInvo.pay\n}\n\ndiscountPerChange(ev){\n  //console.log('discountPerChange',ev);\n  this.payInvo.discount = (+this.payInvo.tot_pr * +this.discountPerc/100).toFixed(2)\n  this.payInvo.changee = +( this.payInvo.tot_pr -  this.payInvo.discount ) - this.payInvo.pay\n}\ndeleteItem(index){\n//console.log( index); \nconst displayList = this.getDisplayItemList();\nconst itemToDelete = displayList[index];\n\n// Find the item in the original itemList and remove it\nconst originalIndex = this.itemList.findIndex(item => \n  item.item_name === itemToDelete.item_name && \n  item.perch_price === itemToDelete.perch_price &&\n  item.quantity === itemToDelete.quantity\n);\n\nif (originalIndex !== -1) {\n  this.itemList.splice(originalIndex, 1);\n}\n\n// Reset discount but preserve pay amount\nthis.discountPerc = 0\nthis.payInvo.discount = 0 \nthis.getTotal()\nthis.updateSortedList()\n}\n\n\nasync presentToast(msg,color?) {\nconst toast = await this.toast.create({\n  message: msg,\n  duration: 2000,\n  color:color,\n  cssClass:'cust_Toast',\n  mode:'ios',\n  position:'top' \n});\ntoast.present();\n}\n\n\n\nchechPrice(cases?){\n  if (this.selectedItem.item_name == \"\" || this.selectedItem.id == \"\" || +this.selectedItem.qty == 0) {\n    this.presentToast('الرجاء اختيار الصنف وتحديد الكمية', 'danger')\n  } else {\n    if (cases == 'check'){\n        if(+this.selectedItem.perch_price >= +this.selectedItem.pay_price){\n          this.priceChangeAlertConfirm()\n        }else{\n          this.addTolist()\n        }\n      }else if(cases == 'uncheck'){\n      ///update item => getiTEmstock and sysnc=> reselectItem => addtolist\\\n      this.updateItemDetail()\n      }  \n  }\n \n}\n\n///\n  onItemSelected(selectedItem: any) {\n    console.log('Item selected:', selectedItem);\n    // You can perform any additional logic when an item is selected\n    // For example, update availability or perform validations\n  }\n\n  onItemAdded(selectedItem: any) {\n    console.log('Item to be added:', selectedItem);\n   \n    // Check if item already exists in the list\n    let existingItem = this.itemList.find(item => \n      item.item_name === selectedItem.item_name && \n      item.perch_price === selectedItem.perch_price\n    );\n\n    if (existingItem) {\n      // Update existing item quantity\n      let newQty = +existingItem.quantity + +selectedItem.qty;\n      \n    \n      \n      existingItem.quantity = newQty;\n      existingItem.tot = (newQty * +existingItem.perch_price).toFixed(2);\n    } else {\n      // Add new item to list\n      let d = new Date();\n      let r = this.datePipe.transform(d, 'dd-MM-YYYY');\n\n      this.itemList.push({\n        \"id\": 'NULL',\n        \"pay_ref\": this.payInvo.pay_ref,\n        \"item_name\": selectedItem.item_name,\n        \"pay_price\": selectedItem.pay_price,\n        \"quantity\": +selectedItem.qty,\n        \"tot\": (selectedItem.qty * +selectedItem.perch_price).toFixed(2),\n        \"store_id\": +this.store_info.id,\n        \"yearId\": +this.year.id,\n        \"item_id\": +selectedItem.id,\n        \"dateCreated\": r,\n        \"perch_price\": selectedItem.perch_price\n      });\n    }\n\n    \n    this.getTotal();\n    this.updateSortedList();\n    \n    // this.presentToast('تم إضافة الصنف بنجاح', 'success');\n  }\n\n\naddTolist() { \n  if (this.selectedItem.item_name == \"\" || this.selectedItem.id == \"\" || +this.selectedItem.qty == 0) {\n    this.presentToast('الرجاء ادختيار الصنف وتحديد الكمية', 'danger')\n  } else {\n    let fl: any = []\n    if (this.itemList.length > 0) {\n      fl = this.itemList.filter(x => x.item_name == this.selectedItem.item_name &&  x.perch_price == this.selectedItem.perch_price)\n    }\n    if (fl.length == 0) {\n      let d =   new Date\n      let r= this.datePipe.transform(d, 'dd-MM-YYYY')\n    \n      this.itemList.push({\n      \"id\" : 'NULL',\n      \"pay_ref\" :this.selectedItem.pay_ref,\n      \"item_name\" :this.selectedItem.item_name,\n      \"pay_price\" :this.selectedItem.pay_price,\n      \"quantity\" : +this.selectedItem.qty,\n      \"tot\" :(+this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2),\n      \"store_id\" :+this.store_info.id, \n      \"yearId\" :+this.year.id, \n      \"item_id\" : +this.selectedItem.id,\n      \"dateCreated\" : r,\n      \"perch_price\":this.selectedItem.perch_price\n      })\n    } else {\n      //console.log(this.itemList);\n      //console.log(fl[0].quantity);\n      //console.log(+this.selectedItem.qty);\n\n      this.selectedItem.qty = +fl[0].quantity + +this.selectedItem.qty\n      let index = this.itemList.map(e => e.item_name).indexOf(this.selectedItem.item_name);\n      this.itemList[index].quantity = +this.selectedItem.qty\n      this.itemList[index].tot = (+this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2)\n     // this.itemList[index].tot.toFixed(2)\n     \n    }\n\n      this.selectedItem = {\n        id: undefined,\n        dateCreated: \"\", \n        pay_ref:this.payInvo.pay_ref,\n        item_desc: \"\",\n        item_name: \"\",\n        item_unit: \"\",\n        parcode: 0,\n        pay_price: 0,\n        perch_price: 0,\n        qty: 0,\n        tot: 0,\n        aliasEn:\"\"\n      }\n      this.discountPerc = 0\n      this.payInvo.discount = 0\n      \n      this.getTotal()\n      this.updateSortedList()\n      this.setFocusOnInput('dstPop2')\n    }\n\n}\n\nvalidate():boolean{\n \n  \nif (this.itemList.length == 0  || this.payInvo.pay_ref == \"\" ) {\n  this.presentToast('الرجاء ادخال اصناف الي القائمة','danger')\n  return false\n}  \n else if(+this.payInvo.cust_id == 0 ) {\n  this.presentToast('الرجاء إختيار حساب العميل','danger')\n  return false\n}\nelse if(this.payInvo.pay_date == \"\" || this.payInvo.pay_date == undefined) {\n  this.presentToast('الرجاء تحديد التاريخ ','danger')\n  return false\n}else if(this.payInvo.changee < 0 ) {\n  this.presentToast('الرجاء مراجعة المبلغ المستلم والخصم  ','danger')\n  return false\n} \n else {\n  return true\n}\n}\n\nsave() { \n  let d : Date = this.payInvo.pay_date \n  \n  this.payInvo.pay_date = this.datePipe.transform(d, 'yyyy-MM-dd')\n  \n  \n    if (this.validate() == true) {\n       this.presentLoadingWithOptions('جاري حفظ البيانات ...')\n       this.saveInvo()    \n        \n    }  \n}\n\n\n\npickAccount(ev){\n  let fl= this.sub_account.filter(x=>x.sub_name == ev.target.value)\n  //console.log(fl);\n  if (fl.length > 0) {\n  this.selectedAccount = {\n    id:fl[0]['id'],\n    ac_id:fl[0]['ac_id'],\n    sub_name:fl[0]['sub_name'],\n    sub_type:fl[0]['sub_type'],\n    sub_code:fl[0]['sub_code'], \n    store_id:fl[0]['store_id'],\n    sub_balance:fl[0]['sub_balance'],\n    cat_id:fl[0]['cat_id'],\n    cat_name:fl[0]['cat_name'],\n    phone:fl[0]['phone'],\n    address:fl[0]['address'] \n  }\n  //console.log( this.selectedAccount);\n  this.payInvo.cust_id = this.selectedAccount.id\n  this.payInvo.sub_name = this.selectedAccount.sub_name\n  //  this.setFocusOnInput()\n}else{\n    this.presentToast('خطأ في اسم الحساب ', 'danger') \n    this.selectedItem.item_name =\"\"\n  }\n  }\n\npreparenewaccount(){ \n  if (this.selectedAccount.sub_name.length>0 && this.selectedAccount.id == null) {\n    // this.selectedAccount.sub_name = this.payInvo.sub_name  \n  } else {\n     //console.log('slwcted from drop' ) \n      this.selectedAccount.sub_name = this.sub_nameNew\n      this.payInvo.sub_name  =this.selectedAccount.sub_name  \n}\n  this.selectedAccount.id=null  \n  this.selectedAccount.ac_id = 2\n  this.selectedAccount.sub_type=\"credit\"\n  this.selectedAccount.sub_code=null\n  this.selectedAccount.sub_balance=\"0\"\n  this.selectedAccount.cat_id = 2\n  this.selectedAccount.cat_name = 'الموردين'\n  this.selectedAccount.store_id=this.store_info.id  \n  //console.log('preparenewaccount' , this.selectedAccount)\n}\n\n\nsaveSubAccount(){\n//console.log('crea accoun')      \nthis.preparenewaccount()\nthis.api.saveSubAccount(this.selectedAccount).subscribe(data => {\n//console.log(data)\nif (data['message'] != 'Post Not Created') {\n  this.payInvo.cust_id =  data['message'] \n   //حالة الحساب موجود محلي والحفظ انلاين يسحب من المحلي ويضاف سsalesaccount   \n   if(this.radioVal == 0 && this.selectedAccount.id == null && this.offline == false) {\n    this.sub_accountLocalPurch = this.sub_accountLocalPurch.filter(x=>x.sub_name != this.selectedAccount.sub_name)\n    //console.log('imhereeeeeeeeeeeeeeeeee')\n    this.storage.set('sub_accountLocalPurch', this.sub_accountLocalPurch).then((response) => {\n    //console.log('resoponse set', this.sub_accountLocalPurch)\n    this.selectedAccount.id = this.payInvo.cust_id\n    this.sub_accountPurch.push(this.selectedAccount)\n    this.storage.set('sub_accountPurch', this.sub_accountPurch).then((response) => {\n\n    })\n   });\n  }\n\n\n  this.logHistoryArr.push(\n    {\n      \"id\":null,\n      \"logRef\":this.generateRandom2('insert supplier'),\n      \"userId\":this.user_info.id,\n      \"typee\":'insert supplier',\n      \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n      \"logStatus\":0,\n      \"logToken\":JSON.stringify(this.selectedAccount)  ,\n      \"yearId\":this.year.id,\n      \"store_id\":this.store_info.id\n    }\n  )\n  this.saveInvo()\n}else {\n   this.presentToast('لم يتم انشاء حساب للمورد , خطا في الإتصال حاول مرة اخري' , 'danger')\n} \n  }, (err) => {\n//console.log(err);\nthis.presentToast('لم يتم انشاء حساب للمورد , خطا في الإتصال حاول مرة اخري' , 'danger')\n },()=>{\n this.loadingController.dismiss()\n })\n}\n\n\nsaveSubAccountlocal(){\n  //console.log('crea accoun')\n  this.preparenewaccount()\n// add new account to acount list tobe available in next load\nif (!this.sub_account) {\n  this.sub_account = [] \n }  \n\n this.sub_account.push(\n  this.selectedAccount\n )\n  this.sub_accountLocalPurch.push(\n    this.selectedAccount\n  )\n  this.storage.set('sub_accountLocalPurch', this.sub_accountLocalPurch).then((response) => {\n    //console.log('resoponse set', this.sub_accountLocalPurch)\n   // this.payInvo.cust_id =  data['message']\n    this.saveInvoLocal()\n  });\n }\n\n saveInvoLocal() {\n  //console.log('resoponse set', this.payInvo.sub_name)\n // this.payInvo.sub_name = this.selectedAccount.sub_name\n  this.purchLocal.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  })\n  this.storage.set('purchLocal', this.purchLocal).then((response) => {\n    //console.log('resoponse set', response)\n    this.printArr = []\n  this.printArr.push({\n    'payInvo': this.payInvo,\n    'itemList':this.itemList,\n    'selectedAccount' : this.selectedAccount,\n    'sub_nameNew' : this.sub_nameNew\n  }) \n  //console.log(this.printArr)\n    this.presentAlertConfirm()\n    this.presentToast('تم الحفظ بنجاح', 'success')\n  });\n}\n\nsaveInvo(){\n  // Optimized: Save invoice and items together in single API call\n  const invoiceWithItems = {\n    invoice: this.payInvo,\n    items: this.itemList\n  };\n  \n  this.api.savePerchInvoWithItems(invoiceWithItems).subscribe(\n    (response: any) => {\n      this.handleSaveSuccess();\n    }, \n    (err) => {\n      this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n    }\n  );\n}\n\nprivate handleSaveSuccess() {\n  \n  // Prepare print array\n  this.printArr = [];\n  this.printArr.push({\n    'payInvo': this.payInvo,\n    'itemList': this.itemList,\n    'selectedAccount': this.selectedAccount,\n    'sub_nameNew': this.sub_nameNew\n  });\n\n  // Update local purchase storage\n  this.purchase = this.purchase.filter(item => item.payInvo.pay_ref != this.payInvo.pay_ref);\n  this.purchase.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  });\n  \n  this.storage.set('purchase', this.purchase).then((response) => {\n    // Purchase saved to local storage\n  });\n\n  // Prepare log history\n  let arr: Array<any> = [];\n  arr.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  });\n  \n  this.logHistoryArr.push({\n    \"id\": null,\n    \"logRef\": this.generateRandom2('insert purchase'),\n    \"userId\": this.user_info.id,\n    \"typee\": 'insert purchase',\n    \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n    \"logStatus\": 0,\n    \"logToken\": JSON.stringify(arr[0]),\n    \"yearId\": this.year.id,\n    \"store_id\": this.store_info.id\n  });\n\n  this.presentToast('تم الحفظ بنجاح', 'success');\n  \n  // Show journal entry confirmation for all purchase invoices\n  this.presentJournalEntryConfirmation();\n  \n  // Dismiss loading\n  this.loadingController.dismiss();\n}\n\nsaveitemList(){  \nthis.api.savePerchitemList(this.itemList).subscribe(data=>{ \n  //console.log(data) \n  this.printArr = []\n  this.printArr.push({\n    'payInvo': this.payInvo,\n    'itemList':this.itemList,\n    'selectedAccount' : this.selectedAccount,\n    'sub_nameNew' : this.sub_nameNew\n  }) \n  //console.log(this.printArr)\n  this.purchase = this.purchase.filter(item => item.payInvo.pay_ref != this.payInvo.pay_ref);\n       //console.log(' case ffff ' ,this.purchase)\n       this.purchase.push({\n        \"payInvo\": this.payInvo,\n        \"itemList\": this.itemList \n      }) \n      this.storage.set('purchase', this.purchase).then((response) => {\n      //console.log('purchase', response) \n      })\n\n\n      let arr:Array<any> = []\n      arr.push({\n        \"payInvo\": this.payInvo,\n        \"itemList\": this.itemList \n      })\n      this.logHistoryArr.push(\n        {\n          \"id\":null,\n          \"logRef\":this.generateRandom2('insert purchase'),\n          \"userId\":this.user_info.id,\n          \"typee\":'insert purchase',\n          \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n          \"logStatus\":0,\n          \"logToken\":JSON.stringify(arr[0]),\n          \"yearId\":this.year.id,\n          \"store_id\":this.store_info.id\n        }\n        )\n      this.presentAlertConfirm() \n      this.presentToast('تم الحفظ بنجاح' , 'success')\n      \n      // Navigate back if coming from items page\n      if (this.showBackButton) {\n        setTimeout(() => {\n          this.goBack();\n        }, 1500); // Give time for toast to show\n      }\n}, (err) => {\n  //console.log(err);\n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n}, () => {\n  this.loadingController.dismiss()\n}\n)      \n}\n\n\ngenerateRandom2(role):any{\n  let da = new Date \n  //console.log(da)\n  let randomsNumber = da.getMonth().toString() + da.getDay().toString() + da.getHours().toString()+ da.getMinutes().toString()+da.getSeconds().toString()+da.getMilliseconds().toString() + role\n  return this.store_info.store_ref + randomsNumber \n}\n\n \n\n\n  saveLogHistory(){  \n    //let mdata =  this.prepareLogHistory(itemData , firstq , role) \n    //console.log('this.logHistoryArr[0]',this.logHistoryArr[0])\n     let role\n     let cust\n     let invo \n     if (this.logHistoryArr.length > 1) {\n      invo = this.logHistoryArr[1]\n      cust = this.logHistoryArr[0]\n      role = 'new account'\n     } else {\n      invo = this.logHistoryArr[0]\n      role = undefined\n     }\n    this.api.saveLogHistoryMultiSales(invo ,cust,role).subscribe(data => {\n     //console.log(data)\n     if (data['message'] != 'Post Not Created') { \n      this.logHistoryArr = []\n      this.presentAlertConfirm() \n      this.presentToast('تم الحفظ بنجاح' , 'success') \n     }else{\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n     }\n   }, (err) => {\n     //console.log(err);\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   }) \n  }\n\n\n  saveLogHistoryForInsertItem(){  \n    //let mdata =  this.prepareLogHistory(itemData , firstq , role) \n    //console.log('this.logHistoryArr[0]',this.logHistoryArr[0])\n    \n     let firstq\n     let item \n     if (this.logHistoryArr.length > 1) {\n      item = this.logHistoryArr[1]\n      firstq = this.logHistoryArr[0] \n     }  \n    this.api.saveLogHistoryMulti(item ,firstq,'insert').subscribe(data => {\n     //console.log(data)\n     if (data['message'] != 'Post Not Created') { \n     this.logHistoryArr = []\n     \n     }else{\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n     }\n   }, (err) => {\n     //console.log(err);\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   }) \n  }\n\n  saveLogHistoryForUpdateItem(){  \n    //let mdata =  this.prepareLogHistory(itemData , firstq , role) \n    //console.log('this.logHistoryArr[0]',this.logHistoryArr[0])\n     let role\n     let cust\n     let invo \n     \n    this.api.saveLogHistoryMulti(this.logHistoryArr[0] ,undefined,'update').subscribe(data => {\n     //console.log(data)\n     if (data['message'] != 'Post Not Created') { \n     this.logHistoryArr = []\n     }else{\n       this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n     }\n   }, (err) => {\n     //console.log(err);\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   }) \n  }\n\n\nasync presentModal(printArr , page) { \nconst modal = await this.modalController.create({\n  component: PrintModalPage ,\n  componentProps: {\n    \"printArr\": this.printArr,\n    \"page\": page\n  }\n});\n\nmodal.onDidDismiss().then((dataReturned) => {\n  if (dataReturned !== null) {\n    //console.log(dataReturned )\n   this.prepareInvo()\n  }\n});\n\nreturn await modal.present(); \n}\n\nasync presentLoadingWithOptions(msg?) {\nconst loading = await this.loadingController.create({\n  spinner: 'bubbles',\n  mode:'ios',\n  duration: 5000,\n  message: msg,\n  translucent: true,\n // cssClass: 'custom-class custom-loading',\n  backdropDismiss: false\n});\nawait loading.present();\n\nconst { role, data } = await loading.onDidDismiss();\n//console.log('Loading dismissed with role:', role);\n}\n//\ndoAfterDissmiss(data){\n  if (data.role == 'save' ) {\n    //console.log('edit' ,data.data)\n    this.saveItem(data.data )  \n  } \n}\n\nsaveItem(mdata){ \n  //prepare log history\n  // this.logHistoryArr.push(\n  //   {\n  //     \"id\":null,\n  //     \"logRef\":this.generateRandom2('insert item'),\n  //     \"userId\":this.user_info.id,\n  //     \"typee\":'insert item',\n  //     \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n  //     \"logStatus\":0,\n  //     \"logToken\":JSON.stringify(mdata[0]),\n  //     \"yearId\":this.year.id,\n  //     \"store_id\":this.store_info.id\n  //   }\n  //   )\n console.log('mdata[0]',mdata[0])\n this.presentLoadingWithOptions('جاري حفظ البيانات ...')\n this.api.saveitemMulti(mdata[0]).subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Created') {\n      let item_id = data['message']\n     this.firstq = {id:null ,item_id:item_id, store_id:this.store_info.id , quantity :mdata[1].quantity ,pay_price:mdata[0].pay_price,perch_price:mdata[0].perch_price ,fq_year:'2022' ,item_name:mdata[0].item_name}\n     this.saveFierstQty(mdata ) \n   }else{\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n   }\n  \n }, (err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n }) \n}\n\nasync saveFierstQty(meta){  \nthis.api.saveFirstQty(this.firstq).subscribe(data=>{ \n //console.log(data)  \n  //this.getItems(item_name\n  this.logHistoryArr.push(\n    {\n      \"id\":null,\n      \"logRef\":this.generateRandom2('insert firstq'),\n      \"userId\":this.user_info.id,\n      \"typee\":'insert firstq',\n      \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n      \"logStatus\":0,\n      \"logToken\":JSON.stringify(this.firstq),\n      \"yearId\":this.year.id,\n      \"store_id\":this.store_info.id\n    }\n    )\n\n    \n  // this.performSyncItem()\n    // update selected item from meta data \n    this.selectedItem = {\n      id:this.firstq.item_id,\n      dateCreated:\"\",\n      pay_ref:this.payInvo.pay_ref,\n      item_desc:meta[0].item_desc,\n      item_name:meta[0].item_name,\n      item_unit:meta[0].item_unit,\n      parcode:meta[0].parcode,\n      pay_price:meta[0].pay_price,\n      perch_price:meta[0].perch_price,\n      qty:1,\n      tot:meta[0].perch_price,\n      aliasEn:meta[0].aliasEn\n    }\n     this.setFocusOnInput('qtyIdP')\n     this.getItemLoader =true \n     \n  // push meta data to items array\n  this.items.push({\n    \"aliasEn\":meta[0].aliasEn,   \n    \"availQty\":meta[1].quantity,\n    \"brand\":meta[0].brand,\n    \"firstQuantity\":meta[1].quantity,\n    \"id\":this.firstq.item_id,\n    \"item_desc\":meta[0].item_desc,\n    \"item_name\":meta[0].item_name,\n    \"item_parcode\":meta[0].item_parcode,\n    \"item_unit\":meta[0].item_unit,\n    \"min_qty\":meta[0].min_qty,\n    \"model\":meta[0].model,\n    \"part_no\":meta[0].part_no,\n    \"pay_price\":meta[0].pay_price,\n    \"perch_price\":meta[0].perch_price,\n    \"qtyReal\":0, \n    \"salesQuantity\":0,\n    \"totalCount\":0,\n    \"tswiaQuantity\":0\n  })\n     \n      this.searchResult = this.items\n      console.log('index',this.items)\n       this.storage.set('itemsLocal' , this.items).then((response) => {\n             this.getItemLoader = false\n        });\n\n \n     \n}, (err) => {\n //console.log(err);\n this.presentToast('1لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n this.loadingController.dismiss()\n}, () => {\n this.loadingController.dismiss()\n}\n)      \n}\n\nasync  performSync(){\n   await this.saveLogHistory() \n    await this.getStockItems( ) \n  }\n\n  ionViewDidLeave(){\n    //console.log('ionViewWillLeave') \n   // this.subiscribtionNotif.unsubscribe()\n  } \n  \nasync  performSyncItem(item_name?){\n // await this.saveLogHistoryForInsertItem()\n  if(item_name){\n    await this.getStockItems(item_name)\n  }else{ \n    await  this.getAllStockItemsWithouteCounts() \n  } \n}\n\n  async  performSync2(){\n    //await this.saveLogHistoryForUpdateItem()\n   // await this.getAllStockItemsWithouteCounts()\n    //update item in items array \n   \n    await this.getStockItemsAfterUpdate()   \n  }\n\n  sortItemListAlphabetically() {\n    if (!this.itemList || this.itemList.length === 0) {\n      return;\n    }\n    \n    if (this.isItemListSorted) {\n      // If already sorted, restore original order\n      this.sortedItemList = [...this.itemList];\n      this.isItemListSorted = false;\n    } else {\n      // Sort alphabetically by item_name\n      this.sortedItemList = [...this.itemList].sort((a, b) => {\n        const nameA = a.item_name ? a.item_name.toString().toLowerCase() : '';\n        const nameB = b.item_name ? b.item_name.toString().toLowerCase() : '';\n        return nameA.localeCompare(nameB, 'ar', { numeric: true });\n      });\n      this.isItemListSorted = true;\n    }\n  }\n\n  // New methods for journal entry workflow\n  async presentJournalEntryConfirmation() {\n    const totalAfterDiscount = (+this.payInvo.tot_pr - +this.payInvo.discount);\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'تأكيد دفع المبلغ',\n      mode: 'ios',\n      message: `هل تريد دفع مبلغ ${totalAfterDiscount.toFixed(2)} للمورد الآن؟`,\n      buttons: [\n        {\n          text: 'لا، انتقل للطباعة مباشرة',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            this.presentAlertConfirm();\n            this.cleanupAfterInvoice();\n          }\n        },\n        {\n          text: 'نعم، دفع المبلغ',\n          handler: () => {\n            this.showJournalEntryDialog();\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n  showJournalEntryDialog() {\n    \n    const totalAfterDiscount = (+this.payInvo.tot_pr - +this.payInvo.discount);\n    \n    this.invoiceJournalData = {\n      invoiceAmount: totalAfterDiscount,\n      totalAfterDiscount: totalAfterDiscount,\n      customerAccount: this.selectedAccount,\n      customerBalance: this.customerBalance,\n      invoiceRef: this.payInvo.pay_ref,\n      invoiceType: 'purchase',\n      invoiceDate: this.payInvo.pay_date,\n      store_info: this.store_info,\n      user_info: this.user_info,\n      year: this.year\n    };\n    \n    this.showJournalEntryModal = true;\n  }\n\n  onJournalSaved(success: boolean) {\n    this.showJournalEntryModal = false;\n    \n    if (success) {\n      this.presentToast('تم حفظ قيد اليومية بنجاح', 'success');\n    }\n    \n    // Show print confirmation\n    setTimeout(() => {\n      this.presentAlertConfirm();\n    }, 500);\n    \n    this.cleanupAfterInvoice();\n  }\n\n  onJournalCancelled() {\n    this.showJournalEntryModal = false;\n    \n    // Show print confirmation\n    setTimeout(() => {\n      this.presentAlertConfirm();\n    }, 500);\n    \n    this.cleanupAfterInvoice();\n  }\n\n  private cleanupAfterInvoice() {\n    this.prepareInvo();\n    this.status = 'new';\n    \n    // Navigate back if coming from items page\n    if (this.showBackButton) {\n      setTimeout(() => {\n        this.goBack();\n      }, 1500);\n    }\n  }\n\n  goBack() {\n    this._location.back();\n  }\n\n  getDisplayItemList() {\n    return this.sortedItemList.length > 0 ? this.sortedItemList : this.itemList;\n  }\n\n  updateSortedList() {\n    if (this.isItemListSorted) {\n      this.sortItemListAlphabetically();\n    } else {\n      this.sortedItemList = [...this.itemList];\n    }\n  }\n\n  onSearchTermChange() {\n    this.searchMatches = [];\n    this.highlightedIndex = -1;\n    \n    if (this.searchTerm.trim() === '') {\n      return;\n    }\n    \n    const displayList = this.getDisplayItemList();\n    const searchTermLower = this.searchTerm.toLowerCase().trim();\n    \n    displayList.forEach((item, index) => {\n      if (item.item_name && item.item_name.toLowerCase().includes(searchTermLower)) {\n        this.searchMatches.push(index);\n      }\n    });\n    \n    if (this.searchMatches.length > 0) {\n      this.highlightedIndex = 0;\n      this.scrollToHighlightedItem();\n    }\n  }\n\n  navigateSearch(direction: 'next' | 'prev') {\n    if (this.searchMatches.length === 0) return;\n    \n    if (direction === 'next') {\n      this.highlightedIndex = (this.highlightedIndex + 1) % this.searchMatches.length;\n    } else {\n      this.highlightedIndex = this.highlightedIndex <= 0 ? this.searchMatches.length - 1 : this.highlightedIndex - 1;\n    }\n    \n    this.scrollToHighlightedItem();\n  }\n\n  scrollToHighlightedItem() {\n    if (this.highlightedIndex >= 0 && this.searchMatches.length > 0) {\n      const targetIndex = this.searchMatches[this.highlightedIndex];\n      setTimeout(() => {\n        const tableContainer = document.querySelector('.table-container');\n        const targetRow = document.querySelector(`tr[data-index=\"${targetIndex}\"]`);\n        if (tableContainer && targetRow) {\n          targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n      }, 100);\n    }\n  }\n\n  isHighlighted(index: number): boolean {\n    return this.searchMatches.includes(index) && this.searchMatches[this.highlightedIndex] === index;\n  }\n\n  isSearchMatch(index: number): boolean {\n    return this.searchMatches.includes(index);\n  }\n\n  clearSearch() {\n    this.searchTerm = '';\n    this.searchMatches = [];\n    this.highlightedIndex = -1;\n  }\n\n  getSearchResultText(): string {\n    if (this.searchTerm.trim() === '') return '';\n    if (this.searchMatches.length === 0) return 'لا توجد نتائج';\n    return `${this.highlightedIndex + 1} من ${this.searchMatches.length}`;\n  }\n\n  highlightText(text: string, searchTerm: string): string {\n    if (!text || !searchTerm.trim()) {\n      return text || '';\n    }\n    \n    const regex = new RegExp(`(${searchTerm.trim()})`, 'gi');\n    return text.replace(regex, '<mark>$1</mark>');\n  }\n\n  // Handle account selection from AccountSelectorComponent\n  onAccountSelected(account: any) {\n    if (account) {\n      this.selectedAccount = {\n        id: account.id,\n        ac_id: account.ac_id,\n        sub_name: account.sub_name,\n        sub_type: account.sub_type,\n        sub_code: account.sub_code,\n        sub_balance: account.sub_balance,\n        store_id: account.store_id,\n        cat_name: account.cat_name,\n        cat_id: account.cat_id,\n        phone: account.phone,\n        address: account.address\n      };\n      \n      // Update invoice with selected account\n      this.payInvo.cust_id = account.id;\n      this.payInvo.sub_name = account.sub_name;\n      \n      console.log('Account selected in purchase:', this.selectedAccount);\n    }\n  }\n\n  // Handle account balance loaded\n  onAccountBalanceLoaded(balance: any) {\n    if (balance && this.selectedAccount) {\n      // Store the balance for invoice journal entry\n      this.customerBalance = balance;\n      console.log('Account balance loaded in purchase:', balance);\n    }\n  }\n\n  // Format balance display with number separators\n  formatBalance(balance: number): string {\n    if (!balance && balance !== 0) return '0.00';\n    return new Intl.NumberFormat('en-US', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(Math.abs(balance));\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}