{"version":3,"file":"src_app_purchase-record_purchase-record_module_ts.js","mappings":"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","sources":["./src/app/purchase-record/purchase-record-routing.module.ts","./src/app/purchase-record/purchase-record.module.ts","./src/app/purchase-record/purchase-record.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PurchaseRecordPage } from './purchase-record.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PurchaseRecordPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PurchaseRecordPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PurchaseRecordPageRoutingModule } from './purchase-record-routing.module';\n\nimport { PurchaseRecordPage } from './purchase-record.page';\nimport { SharedModule } from '../module/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PurchaseRecordPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [PurchaseRecordPage ]\n})\nexport class PurchaseRecordPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ServicesService } from \"../stockService/services.service\";\nimport { Observable } from 'rxjs';\nimport {  LoadingController,Platform, ModalController, ToastController, PopoverController } from '@ionic/angular';\nimport { DatePipe } from '@angular/common'; \nimport { Storage } from '@ionic/storage';\nimport { NavigationExtras, Router } from '@angular/router'\nimport { PrintModalPage } from '../print-modal/print-modal.page';\nimport { ActionPopoverComponent } from '../component/action-popover/action-popover.component';\nimport { InvoicePriceConfigDialogComponent } from '../component/invoice-price-config-dialog/invoice-price-config-dialog.component';\nimport { CategoriesPage } from '../categories/categories.page';\nimport { SortingService, SortConfig } from '../services/sorting.service';\nimport { ExportService, ExportConfig, ExportColumn } from '../services/export.service';\n \n@Component({\n  selector: 'app-purchase-record',\n  templateUrl: './purchase-record.page.html',\n  styleUrls: ['./purchase-record.page.scss'],\n})\nexport class PurchaseRecordPage implements OnInit {\n  payArray:Array<any> =[]\n  sortedPayArray:Array<any> =[] // Sorted invoices for display\n  currentSort: SortConfig | null = null\n  printArr:Array<any> =[]\n  sub_account:Array<any> =[]\n  sub_accountLocalPurch:Array<any> =[]\n  selectedAccount : {id:any ,ac_id:any,sub_name:any,sub_type:any,sub_code:any,sub_balance:any,store_id:any ,cat_id:any,cat_name:any,currentCustumerStatus:any};\n  sub_accountPurch:Array<any> =[]\n  store_info : {id:any , location :any ,store_name:any , store_ref:any }\n  user_info : {id:any ,user_name:any ,store_id :any,full_name:any,password:any}\n  printMode :boolean =false\n  itemList :Array<any> =[]\n  loadingDetails:boolean =false\n  paInvo :any\n  dateFrom :any;\n  dateTo :any;\n  radioVal : any = 0\n  startingDate :any\n  endDate :any \n  loading:boolean = false\n  showEmpty :boolean = false\n  offline: boolean = false;\n  purchLocal:Array<any> =[]\n  purchase:Array<any> =[]\n  purchOffline:Array<any> =[]\n  device:any =''\n   slideOpts = {\n    slidesPerView: 3,\n    coverflowEffect: {\n      rotate: 50,\n      stretch: 0,\n      depth: 100,\n      modifier: 1,\n      slideShadows: true,\n    }\n  }\n  color :any ='dark'\n  sums : {pay:any ,change:any,discount:any,tot:any,totAfterDiscout:any}\n  year : {id:any ,yearDesc:any ,yearStart :any,yearEnd:any}\n  constructor(private popoverController: PopoverController ,private platform :Platform ,private rout : Router,private storage: Storage,private modalController: ModalController,private loadingController:LoadingController, private datePipe:DatePipe,private api:ServicesService,private toast :ToastController, private sortingService: SortingService, private exportService: ExportService) { \n  this.selectedAccount = {id:\"\" ,ac_id:\"\",sub_name:\"\",sub_type:\"\",sub_code:\"\",sub_balance:\"\",store_id:\"\",cat_name:\"\",cat_id:\"\",currentCustumerStatus:0};\n    this.sums = {pay:0 ,change:0,discount:0,tot:0,totAfterDiscout:0}\n    this.checkPlatform()\n    this.getAppInfo()\n    this.prepareOffline()\n    let d = new Date\n    this.startingDate = this.datePipe.transform(d, 'yyyy-MM-dd')\n    this.endDate = this.datePipe.transform(d, 'yyyy-MM-dd')\n  }\n\n  checkPlatform(){\n    if (this.platform.is('desktop')) { \n      this.device = 'desktop'\n      //console.log('I am an desktop device!');\n     }else if(this.platform.is('mobile')){\n      this.device = 'mobile'\n      //console.log('I am an mobile device!'); \n     }\n  }\n  \n  ngOnInit() {\n    this.payArray =[]\n    this.sortedPayArray =[]\n    this.currentSort = null\n    // Check category visibility setting\n   // this.isCategoryVisibilityEnabled = CategoriesPage.isCategoryVisibilityEnabled();\n    //console.log('ngOnInit')\n    this.getAppInfo() \n    this.prepareOffline()\n  }\n\n\n  ionViewDidEnter(){\n    this.payArray =[]\n    this.sortedPayArray =[]\n    this.purchLocal =[]\n    this.purchOffline =[]\n    this.purchase =[]\n    this.storage.get('STORE_INFO').then((response) => {\n      if (response) {\n        this.store_info = response \n         this.search() \n      }\n      }); \n    //console.log('ionViewDidEnter')\n   // this.search()\n   }\n\n\n   async presentActionPopover(ev: any, pay: any, sub_name: any) {\n  const popover = await this.popoverController.create({\n    component: ActionPopoverComponent,\n    event: ev,\n    translucent: true,\n    cssClass: 'action-popover-rtl'\n  });\n\n  popover.onDidDismiss().then((result) => {\n    if (result.data) {\n      switch (result.data.action) {\n        case 'print':\n          this.printInvo('', pay);\n          break;\n        case 'edit':\n          this.getPayInvoDetail(pay, sub_name, '');\n          break;\n        case 'copySales':\n          this.copyAsInvoice(pay, 'sales');\n          break;\n        case 'copyPurchase':\n          this.copyAsInvoice(pay, 'purchase');\n          break;\n      }\n    }\n  });\n\n  return await popover.present();\n}\n\ncopyAsInvoice(pay: any, type: 'sales' | 'purchase') {\n  console.log('pay pefor call' , pay )\n  this.presentLoadingWithOptions('جاري نسخ الفاتورة...');\n  \n  // Determine which method to call based on offline status and pay_id\n  if (this.offline == false && pay.pay_id != undefined) {\n    this.api.getPerchInvoDetail(this.store_info.id, pay.pay_ref, this.year.id).subscribe(data => {\n      let res = data;\n      console.log('res after call',res);\n      this.loadingController.dismiss();\n      this.showPriceConfigDialog(res['data'], type);\n    }, (err) => {\n      this.loadingController.dismiss();\n      this.presentToast('خطا في الإتصال حاول مرة اخري', 'danger');\n    });\n  } else if (this.offline == false && pay.pay_id == undefined) {\n    this.loadingController.dismiss();\n    let flt: Array<any> = [];\n    flt = this.purchLocal.filter(x => x.payInvo.pay_ref == pay.pay_ref);\n    if (flt.length > 0) {\n      this.showPriceConfigDialog(flt[0].itemList, type);\n    }\n  } else if (this.offline == true && pay.pay_id != undefined) {\n    this.loadingController.dismiss();\n    let flt: Array<any> = [];\n    flt = this.purchase.filter(x => x.payInvo.pay_ref == pay.pay_ref);\n    if (flt.length > 0) {\n      this.showPriceConfigDialog(flt[0].itemList, type);\n    }\n  } else if (this.offline == true && pay.pay_id == undefined) {\n    this.loadingController.dismiss();\n    let flt: Array<any> = [];\n    flt = this.purchLocal.filter(x => x.payInvo.pay_ref == pay.pay_ref);\n    if (flt.length > 0) {\n      this.showPriceConfigDialog(flt[0].itemList, type);\n    }\n  }\n}\n\nasync showPriceConfigDialog(itemList: any[], type: 'sales' | 'purchase') {\n  // For purchase type, skip dialog and navigate directly\n  if (type === 'purchase') {\n    this.navigateToInvoicePage(itemList, type);\n    return;\n  }\n\n  // For sales type, show the dialog\n  const modal = await this.modalController.create({\n    component: InvoicePriceConfigDialogComponent,\n    componentProps: {\n      itemList: itemList,\n      invoiceType: type,\n      context: 'purchase-record'\n    },\n    cssClass: 'invoice-price-config-modal'\n  });\n\n  modal.onDidDismiss().then((result) => {\n    if (result.data) {\n      // User confirmed configuration, use configured items\n      this.navigateToInvoicePage(result.data, type);\n    }\n    // If result.data is null/undefined, user cancelled - don't navigate anywhere\n  });\n\n  return await modal.present();\n}\n\nprivate navigateToInvoicePage(itemList: any[], type: 'sales' | 'purchase') {\n   const salesitems = itemList.map(item => ({\n    id: item.item_id,\n      item_id: item.item_id,\n      item_name: item.item_name,\n      item_desc: item.item_desc,\n      part_no: item.part_no,\n      brand: item.brand,\n      model: item.model,\n      item_unit: item.item_unit,\n      perch_price: item.perch_price || 0,\n      pay_price: item.pay_price || 0,\n      qty: item.quantity ,\n      tot: (item.perch_price * item.quantity).toFixed(2)  || 0,\n      availQty: item.quantity || 0,\n      aliasEn: item.aliasEn\n      }));\n\n      const purchitems = itemList.map(item => ({\n      id: item.item_id,\n      item_id: item.item_id, \n      item_name: item.item_name,\n      item_desc: item.item_desc,\n      part_no: item.part_no,\n      brand: item.brand,\n      model: item.model,\n      item_unit: item.item_unit,\n      perch_price: item.perch_price || 0,\n      pay_price: item.pay_price || 0,\n      qty: item.quantity ,\n      tot: (item.perch_price * item.quantity).toFixed(2)  || 0,\n      availQty: item.quantity || 0,\n      aliasEn: item.aliasEn\n      }));\n\n  \n\n  if (type === 'sales') { \n    let navigationExtras: NavigationExtras = {  \n    queryParams: {\n        status: 'newInvoFromItemsPage',\n        selectedItemsList: JSON.stringify(salesitems) \n    }\n  };\n      this.rout.navigate(['folder/sales'], navigationExtras); \n  } else {  \n     let navigationExtras: NavigationExtras = {  \n    queryParams: {\n        status: 'newInvoFromItemsPage',\n        selectedItemsList: JSON.stringify(purchitems) \n    }\n  };\n      this.rout.navigate(['folder/purchase'], navigationExtras); \n  }\n}\n\n    clear(){\n      this.selectedAccount = {id:\"\" ,ac_id:\"\",sub_name:\"\",sub_type:\"\",sub_code:\"\",sub_balance:\"\",store_id:\"\",cat_name:\"\",cat_id:\"\",currentCustumerStatus:0};\n      this.payArray = []\n        this.sortedPayArray = []\n      this.purchLocal = []\n      this.showEmpty = false\n      this.loading = false\n    }\n    \n   changeMode(){\n    if(this.offline == true){\n      this.offline = false\n      this.color = 'primary' \n    }else if(this.offline == false){\n      this.offline = true\n      this.color = 'dark'\n    }\n    this.storage.set('offline',this.offline).then((response) => { \n      //console.log('mooooode',this.offline)  \n  });\n    }\n\n\n\n  getPayDetailsForMob(pay){\n  if(!pay.item_details){\n    this.loadingDetails = true\n    this.api.getPerchInvoDetail(this.store_info.id , pay.pay_ref,this.year.id).subscribe(data =>{\n      //console.log(data,'case 1')\n       let res = data \n       //console.log(data) \n       this.payArray.forEach(element => {\n        if(element.pay_ref == pay.pay_ref){\n          element.item_details = data['data'] \n        }\n       });\n       this.loadingDetails = false\n     \n     }, (err) => {\n     //console.log(err);\n     \n     this.presentToast('خطا في الإتصال حاول مرة اخري' , 'danger')\n   \n  },()=>{ this.loadingDetails = false})  \n  }\n \n  }\n\n  getOffliemode(){\n    this.storage.get('offline').then((response) => { \n        this.offline = response\n        //console.log('mooooode',this.offline)\n        if (this.offline == true) {\n          this.color= 'dark'\n        }else{\n          this.color = 'primary'\n        }\n    });\n  }\n\n  getAppInfo(){ \n     \n    this.storage.get('USER_INFO').then((response) => {\n     if (response) {\n       this.user_info = response\n       //console.log(this.user_info) \n     }\n   });\n   this.storage.get('year').then((response) => {\n    if (response) {\n      this.year = response \n    } \n  });\n   this.storage.get('STORE_INFO').then((response) => {\n     if (response) {\n       this.store_info = response\n        //console.log(response)\n        //console.log(this.store_info) \n        this.getSalesAccount()\n      // this.search() \n     }\n   });\n   this.storage.get('purchase').then((response) => {\n    if (response) {\n      this.purchase = response \n       //console.log(this.purchase)  \n    }\n  });\n }\n\n\n prepareOffline(){ \n this.storage.get('sub_accountLocalPurch').then((response) => {\n   if (response) {\n     this.sub_accountLocalPurch = response \n      //console.log(this.sub_accountLocalPurch)  \n   }\n });\n //Yaw\n this.storage.get('sub_accountPurch').then((response) => {\n  if (response) {\n    this.sub_accountPurch = response  \n     //console.log(this.sub_accountPurch)  \n  }\n});\n \n }\n\ngetSalesAccount(){\n  if (this.offline == false) {\n    this.api.getPerchAccounts(this.store_info.id ,this.year.id).subscribe(data =>{\n       let res = data\n       this.sub_account = res ['data']\n       //console.log(this.sub_account)\n        this.addSubaccountLocal()\n     }, (err) => {\n     //console.log(err);\n   }) \n  }else{\n    this.MixSubaccountSalesOffline()\n   } \n } \n\n MixSubaccountSalesOffline(){\n  this.sub_account=[] \n    if (this.sub_accountLocalPurch) {\n      for (let i = 0; i < this.sub_accountLocalPurch.length; i++) {\n        const element = this.sub_accountLocalPurch[i];\n        this.sub_account.push(element)\n      }\n    }\n    if (this.sub_accountPurch) {\n      for (let i = 0; i < this.sub_accountPurch.length; i++) {\n        const element = this.sub_accountPurch[i];\n        this.sub_account.push(element)\n      }\n    } \n  }\n\n addSubaccountLocal(){\n  if (this.sub_account) {\n    if (this.sub_accountLocalPurch) {\n      for (let i = 0; i < this.sub_accountLocalPurch.length; i++) {\n        const element = this.sub_accountLocalPurch[i];\n        this.sub_account.push(element)\n      }\n    }\n  } else{\n    if (this.sub_accountLocalPurch) {\n      this.sub_account = this.sub_accountLocalPurch \n    }\n  } \n}\n\n   printInvo(printarea , dataFrom){   \n    if (this.offline==false && dataFrom.pay_id != undefined) {\n      this.paInvo = dataFrom \n      //console.log( this.paInvo) \n      this.api.getPerchInvoDetail(this.store_info.id , dataFrom.pay_ref ,this.year.id).subscribe(data =>{\n       //console.log(data)\n       let res = data \n       this.itemList = res['data']\n       //console.log(res) \n       this.printArr = []\n       this.printArr.push({\n       'payInvo': this.paInvo,\n       'itemList':this.itemList,\n       'selectedAccount' : this.paInvo.sub_name,\n       'sub_nameNew' : \"\"\n     }) \n      //console.log(this.printArr)\n      this.presentModal(this.printArr , 'perch_record')\n       }, (err) => {\n        //console.log(err);\n        this.presentToast('خطا في الإتصال حاول مرة اخري' , 'danger')\n       },()=>{ \n       })        \n    } else if (this.offline==false && dataFrom.pay_id == undefined) {\n     console .log(dataFrom,dataFrom)\n      \n     //console.log(this.purchLocal ,'case2')\n     let flt:Array<any> =[]\n     flt = this.purchLocal.filter(x=>x.payInvo.pay_ref==dataFrom.pay_ref )\n     //console.log(flt,'here')\n\n     this.printArr = []\n     this.printArr.push({\n     'payInvo': flt[0].payInvo,\n     'itemList':flt[0].itemList,\n     'selectedAccount' : flt[0].payInvo.sub_name,\n     'sub_nameNew' : \"\"\n   }) \n    //console.log(this.printArr)\n    this.presentModal(this.printArr , 'perch_record') \n    }else if (this.offline==true && dataFrom.pay_id != undefined) {\n      \n     \n     //console.log(this.purchase ,'case3')\n     let flt:Array<any> =[]\n     flt = this.purchase.filter(x=>x.payInvo.pay_ref==dataFrom.pay_ref )\n     //console.log(flt,'here')\n\n     this.printArr = []\n     this.printArr.push({\n     'payInvo': flt[0].payInvo,\n     'itemList':flt[0].itemList,\n     'selectedAccount' : flt[0].payInvo.sub_name,\n     'sub_nameNew' : \"\"\n   }) \n    //console.log(this.printArr)\n    this.presentModal(this.printArr , 'perch_record') \n    }else if (this.offline==true && dataFrom.pay_id == undefined) {\n     \n     \n     //console.log(this.purchLocal)\n     let flt:Array<any> =[]\n     flt = this.purchLocal.filter(x=>x.payInvo.pay_ref==dataFrom.pay_ref )\n     //console.log(flt,'here')\n     this.printArr = []\n     this.printArr.push({\n     'payInvo': flt[0].payInvo,\n     'itemList':flt[0].itemList,\n     'selectedAccount' : flt[0].payInvo.sub_name,\n     'sub_nameNew' : \"\"\n   }) \n    //console.log(this.printArr)\n    this.presentModal(this.printArr , 'perch_record')  \n    } \n    \n   }\n\n   async presentModal(printArr , page) { \n    const modal = await this.modalController.create({\n      component: PrintModalPage ,\n      componentProps: {\n        \"printArr\": this.printArr,\n        \"page\": page\n      }\n    });\n    \n    modal.onDidDismiss().then((dataReturned) => {\n      if (dataReturned !== null) {\n        //console.log(dataReturned )\n       \n      }\n    });\n  \n    return await modal.present(); \n  }\n\n   preparedPrin(printarea ,paInvo, itemList){\n     if (printarea && paInvo && itemList) {\n        this.printMode = true\n        this.Print(printarea ,this.paInvo , this.itemList)\n     }\n    \n   }\n\n\n\n   pickAccount(ev){\n    let fl= this.sub_account.filter(x=>x.sub_name == ev.target.value)\n    //console.log(fl);\n    if (fl.length > 0) {\n    this.selectedAccount = {\n      id:fl[0]['id'],\n      ac_id:fl[0]['ac_id'],\n      sub_name:fl[0]['sub_name'],\n      sub_type:fl[0]['sub_type'],\n      sub_code:fl[0]['sub_code'], \n      store_id:fl[0]['store_id'],\n      sub_balance:fl[0]['sub_balance'] ,\n      cat_id:fl[0]['cat_id'],\n      cat_name:fl[0]['cat_name'],\n      currentCustumerStatus:0\n    }\n    //console.log( this.selectedAccount);\n    this.payArray = []\n    this.sortedPayArray = []\n    this.purchLocal = []\n    this.showEmpty = false\n    this.loading = false\n  //  this.setFocusOnInput()\n  }else{\n    this.presentToast('خطأ في اسم الحساب ', 'danger') \n    this.selectedAccount.sub_name =\"\"\n  }\n}\n\n   Print(elem ,paInvo, itemList  ){ \n    if (elem && paInvo && itemList){ \n       var mywindow = window.open('', 'PRINT', 'height=400,width=600'); \n      mywindow.document.write('<html><head>'); \n      mywindow.document.write('<style type=\"text/css\">')\n      mywindow.document.write('.flr{ display: block; float: right; } .show{ } .hide{width:0px;height:0px} .w45 {width:45%} .w50 {width:50%} .w100 {width:100%} td, th {border: 1px solid #dddddd;text-align: center;padding: 8px;} tr:nth-child(even) {background-color: #dddddd;} .table{text-align: center;width: 100%; margin: 12px;}.ion-margin{ margin: 10px; } .ion-margin-top{ margin-top: 10px; } .rtl {  direction: rtl; } .ion-text-center{ text-align: center; } .ion-text-end{ text-align: left; } .ion-text-start{ text-align: right; }')\n      mywindow.document.write('</style></head><body>');\n     \n      mywindow.document.write(document.getElementById(elem).innerHTML);\n      mywindow.document.write('</body></html>');\n  \n      mywindow.document.close(); // necessary for IE >= 10\n      mywindow.focus(); // necessary for IE >= 10*/ \n      mywindow.print();\n      mywindow.close();\n      this.printMode = false \n      return true;\n    }\n     \n  }\n\n\n  getSalesfromLocal(){\n    this.purchLocal =[]\n    this.storage.get('purchLocal').then((response) => {\n      if (response) {\n        this.purchLocal = response\n        //console.log(this.purchLocal)  \n      } \n    });\n  }\n\n  getSalesOffline(){\n    this.purchOffline =[]\n    this.storage.get('sales').then((response) => {\n      if (response) {\n        this.purchOffline = response\n        //console.log(this.purchOffline)  \n      } \n    });\n  }\n  \n  getTotal(){\n    this.sums.tot = this.payArray.reduce( (acc, obj)=> { return acc + +obj.tot_pr; }, 0);\n    this.sums.change = this.payArray.reduce( (acc, obj)=> { return acc + +obj.changee; }, 0);\n    this.sums.pay = this.payArray.reduce( (acc, obj)=> { return acc + +obj.pay; }, 0);\n    this.sums.discount = this.payArray.reduce( (acc, obj)=> { return acc + +obj.discount; }, 0);\n    this.sums.totAfterDiscout =   + this.sums.tot - this.sums.discount \n    } \n\n  search(){\n    this.showEmpty=false\n    if (this.radioVal == 0) { \n     if (this.offline == true) {\n      this.getTopSalesOffline()\n    } else {\n      this.getTopSales()\n    }\n    } else if (this.radioVal == 1) {\n      \n       if (this.offline == true) {\n        this.getSalesByDateOffline()\n      } else {\n        this.getSalesByDate()\n      }\n    } else if (this.radioVal == 2) {\n      if (this.offline == true) {\n        this.getSales2DateOffline()\n      } else {\n        this.getSales2Date() \n      }\n    }\n   }\n   \n   getTopSales(){ \n    this.getSalesfromLocal()\n    this.loading = true\n    this.api.getTopPerch(this.store_info.id,this.year.id).subscribe(data =>{\n       //console.log('hhhhhh',data)\n       let res = data\n       if(res['message'] != 'No record Found'){\n         this.payArray = res['data'] \n       }\n       if(this.purchLocal.length >0){\n        //console.log('locLaly',this.purchLocal)\n        for (let i = 0; i < this.purchLocal.length; i++) {\n          const element = this.purchLocal[i];\n          this.payArray.push(element.payInvo)\n        }\n       }\n\n        //custName - apply account filter if selected\n        if( this.selectedAccount.sub_name != \"\"){\n          if(this.payArray.length>0){\n            this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n          }\n        }\n\n        this.getTotal()\n        // Apply category filtering after loading all purchase data in getTopSales  \n        this.applySorting();\n        \n        if(this.payArray.length==0){\n          this.showEmpty = true\n        }else{\n          this.showEmpty = false\n        }\n        this.loading=false\n        //console.log(this.payArray)\n        \n       // this.store_tot = this.items.reduce( (acc, obj)=> { return acc + +(obj.perch_price * obj.quantity ); }, 0);\n     }, (err) => {\n     //console.log(err);\n   },\n   ()=>{\n    this.loading = false\n   })  \n   }\n\n \n\n   getTopSalesOffline(){\n    //console.log('getTopSalesOffline')\n    this.payArray=[]\n    this.purchLocal =[]\n    this.purchOffline=[]\n    this.purchase =[]\n    this.storage.get('purchLocal').then((response) => {\n     if (response) {\n       let flt : Array<any> =[]\n       flt= response\n       this.purchLocal=flt\n       //console.log(flt)\n       if (flt.length > 0) {\n         for (let i = 0; i < flt.length; i++) {\n         const element = flt[i];\n         this.payArray.push(element.payInvo)\n       } \n\n       }\n     }\n     // \n     this.storage.get('purchase').then((response2) => {\n      if (response2) {\n        let flt : Array<any> =[]\n        flt= response2\n        this.purchOffline=flt\n        this.purchase=this.purchOffline\n        //console.log(flt)\n        if (flt.length > 0) {\n          for (let i = 0; i < flt.length; i++) {\n          const element = flt[i];\n          this.payArray.push(element.payInvo)\n        } \n        }\n      }\n      this.getTotal()\n      // Apply category filtering after loading purchase data from localStorage in getTopSalesOffline\n      this.applySorting();\n\n      if(this.payArray.length==0){\n        this.showEmpty = true\n      }else{\n        this.showEmpty = false\n      }\n      this.loading=false\n    });\n     //custName\n     if( this.selectedAccount.sub_name != \"\"){\n      if(this.payArray.length>0){\n      this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n        \n      }\n    }\n    this.getTotal()\n    // Apply category filtering after loading data in getTopSalesOffline\n    this.applySorting();\n   });\n  }\n\n  getSalesByDate(){ \n    this.payArray=[]\n    this.purchLocal =[]\n    this.purchOffline=[]\n    this.purchase =[]\n    //console.log(this.store_info.id,this.startingDate)\n    this.getSalesfromLocal()\n    this.loading = true\n    this.api.getPerchByDate(this.store_info.id , this.startingDate,this.year.id).subscribe(data =>{\n       //console.log(data)\n       let res = data\n       if(res['message'] != 'No record Found'){ \n       this.payArray = res['data'] \n     }\n     if(this.purchLocal.length >0){\n      this.purchLocal = this.purchLocal.filter(x=>x.payInvo.pay_id==undefined && x.payInvo.pay_date==this.startingDate)\n      //console.log('locLaly',this.purchLocal)\n      for (let i = 0; i < this.purchLocal.length; i++) {\n        const element = this.purchLocal[i];\n        this.payArray.push(element.payInvo)\n      }\n     } \n      //custName - apply account filter if selected\n      if( this.selectedAccount.sub_name != \"\"){\n        if(this.payArray.length>0){\n        this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n        }\n      }\n\n      this.getTotal()\n      // Apply category filtering after loading all purchase data in getSalesByDate\n      this.applySorting();\n\n      if(this.payArray.length==0){\n        this.showEmpty= true\n      }else{\n        this.showEmpty = false\n      }\n      this.loading=false\n      //console.log(this.payArray)\n\n       // this.store_tot = this.items.reduce( (acc, obj)=> { return acc + +(obj.perch_price * obj.quantity ); }, 0);\n     }, (err) => {\n     //console.log(err);\n    \n   },()=>{\n    this.loading = false\n   }\n   )  \n   }\n\n \n   getSalesByDateOffline(){\n    this.payArray=[]\n    this.purchLocal =[]\n    this.purchOffline=[]\n    this.purchase =[]\n    this.loading = true\n    this.storage.get('purchLocal').then((response) => {\n      if (response) {\n        this.purchLocal = response\n        \n        let flt:Array<any> =[]\n        //console.log('haloo',this.purchLocal) \n        flt = this.purchLocal.filter(x=> x.payInvo.pay_date==this.startingDate)\n        if (flt.length>0) {\n          for (let i = 0; i < flt.length; i++) {\n            const element = flt[i];\n            this.payArray.push(element.payInvo)\n          } \n        }  \n      }\n      this.storage.get('purchase').then((response2) => {\n        if (response2) {\n          this.purchOffline = response2\n          this.purchase =  this.purchOffline\n          //console.log(this.purchOffline) \n          let flt:Array<any> =[]\n          flt = this.purchOffline.filter(x=> x.payInvo.pay_date==this.startingDate)\n          if (flt.length>0) {\n            for (let i = 0; i < flt.length; i++) {\n              const element = flt[i];\n              this.payArray.push(element.payInvo)\n            } \n          } \n        }\n        this.getTotal()\n        // Apply category filtering after loading purchase data from localStorage in getSalesByDateOffline\n        this.applySorting();\n       \n        if(this.payArray.length==0){\n          this.showEmpty = true\n        }else{\n          this.showEmpty = false\n        }\n        this.loading=false\n\n      });\n       //custName\n     if( this.selectedAccount.sub_name != \"\"){\n      if(this.payArray.length>0){\n      this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n        \n      }\n    }\n     //custName\n     if( this.selectedAccount.sub_name != \"\"){\n      if(this.payArray.length>0){\n      this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n        \n      }\n    }\n      this.getTotal()\n      // Apply category filtering after loading data in getSalesByDateOffline\n      this.applySorting();\n     \n    });\n\n \n   }\n\n   getSales2Date(){\n    this.payArray=[]\n    this.purchLocal =[]\n    this.purchOffline=[]\n    this.purchase =[]\n    this.getSalesfromLocal()\n    this.loading = true\n    //console.log(this.store_info.id,this.startingDate,this.endDate)\n    this.api.getPerch2Date(this.store_info.id,this.startingDate,this.endDate,this.year.id).subscribe(data =>{\n       //console.log(data)\n       let res = data\n       if(res['message'] != 'No record Found'){\n        this.payArray = res['data'] \n      } \n      \n     \n     if(this.purchLocal.length >0){\n      this.purchLocal = this.purchLocal.filter(x=>x.payInvo.pay_date>=this.startingDate && x.payInvo.pay_date<=this.endDate)\n      //console.log('locLaly',this.purchLocal)\n      for (let i = 0; i < this.purchLocal.length; i++) {\n        const element = this.purchLocal[i];\n        this.payArray.push(element.payInvo)\n      }\n      //console.log(this.payArray)\n     }\n      //custName - apply account filter if selected\n      if( this.selectedAccount.sub_name != \"\"){\n        if(this.payArray.length>0){\n        this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n        }\n      }\n    \n      this.getTotal()\n      // Apply category filtering after loading all purchase data in getSales2Date\n      this.applySorting();\n      if(this.payArray.length==0){\n        this.showEmpty = true\n      }else{\n        this.showEmpty = false\n      }\n      this.loading=false\n      \n     }, (err) => {\n     //console.log(err);\n   },()=>{\n    this.loading = false\n   }\n   )  \n   }\n  \n\n   getSales2DateOffline(){\n    this.payArray=[]\n    this.purchLocal =[]\n    this.purchase =[]\n    this.purchOffline=[]\n    this.loading = true\n    this.storage.get('purchLocal').then((response) => {\n      if (response) {\n        this.purchLocal = response\n        //console.log(this.purchLocal) \n        let flt:Array<any> =[]\n        flt =this.purchLocal.filter(x=>x.payInvo.pay_date>=this.startingDate && x.payInvo.pay_date<=this.endDate)\n        if (flt.length>0) {\n          for (let i = 0; i < flt.length; i++) {\n            const element = flt[i];\n            this.payArray.push(element.payInvo)\n          } \n        }  \n      } \n      this.storage.get('purchase').then((response2) => {\n        if (response2) {\n          this.purchOffline = response2\n          this.purchase=this.purchOffline \n          //console.log(this.purchOffline) \n          let flt:Array<any> =[]\n          flt =this.purchOffline.filter(x=>x.payInvo.pay_date>=this.startingDate && x.payInvo.pay_date<=this.endDate)\n          if (flt.length>0) {\n            for (let i = 0; i < flt.length; i++) {\n              const element = flt[i];\n              this.payArray.push(element.payInvo)\n            } \n          }  \n        } \n       \n        this.getTotal()\n        // Apply category filtering after loading purchase data from localStorage in getSales2DateOffline\n        this.applySorting();\n        if(this.payArray.length==0){\n          this.showEmpty = true\n        }else{\n          this.showEmpty = false\n        }\n        this.loading=false \n      });\n     \n     //custName\n     if( this.selectedAccount.sub_name != \"\"){\n      if(this.payArray.length>0){\n      this.payArray= this.payArray.filter(x=>+x.cust_id == +this.selectedAccount.id)\n        \n      }\n    }\n      this.getTotal()\n      // Apply category filtering after loading data in getSales2DateOffline\n      this.applySorting();\n    });  \n  }\n  \n   radioChange(ev){\n    //console.log(ev.target.value) \n    this.payArray = []\n    this.sortedPayArray = []\n    this.purchLocal = []\n    this.showEmpty = false\n    this.loading = false\n   }\n \n\n   getPayInvoDetail(pay,sub_name,status){\n     console .log(pay,sub_name,status)\n   this.presentLoadingWithOptions('جاري جلب التفاصيل ...')\n   if (this.offline==false && pay.pay_id != undefined) {\n    this.api.getPerchInvoDetail(this.store_info.id , pay.pay_ref,this.year.id).subscribe(data =>{\n      //console.log(data,'case 1')\n       let res = data \n       //console.log(pay) \n       \n       let navigationExtras: NavigationExtras = {\n        queryParams: {\n          payInvo: JSON.stringify(pay),\n          sub_name: JSON.stringify(sub_name),\n          user_info:JSON.stringify(this.user_info),\n          store_info:JSON.stringify(this.store_info),\n          itemList:JSON.stringify(res['data'])\n        }\n      };\n      if(this.device == 'desktop'){\n        this.rout.navigate(['folder/edit-perch'], navigationExtras);  \n      }else{\n        this.rout.navigate(['folder/edit-purchase-mob'], navigationExtras);  \n      }\n     }, (err) => {\n     //console.log(err);\n     this.presentToast('خطا في الإتصال حاول مرة اخري' , 'danger')\n   })  \n   } else if (this.offline==false && pay.pay_id == undefined) {\n    console .log(pay,sub_name,status)\n    this.loadingController.dismiss() \n    //console.log(this.purchLocal ,'case2')\n    let flt:Array<any> =[]\n    flt = this.purchLocal.filter(x=>x.payInvo.pay_ref==pay.pay_ref )\n    //console.log(flt,'here')\n    let navigationExtras: NavigationExtras = {\n     queryParams: {\n       payInvo: JSON.stringify(flt[0].payInvo),\n       sub_name: JSON.stringify(flt[0].payInvo.sub_name),\n       user_info:JSON.stringify(this.user_info),\n       store_info:JSON.stringify(this.store_info),\n       itemList:JSON.stringify(flt[0].itemList)\n     }\n   };\n   if(this.device == 'desktop'){\n   this.rout.navigate(['folder/edit-perch'], navigationExtras); \n  }else{\n    this.rout.navigate(['folder/edit-purchase-mob'], navigationExtras);  \n  }\n   }else if (this.offline==true && pay.pay_id != undefined) {\n    console .log('bbbbbbb',pay,sub_name,status)\n    this.loadingController.dismiss() \n    //console.log(this.purchase ,'case3')\n    let flt:Array<any> =[]\n    flt = this.purchase.filter(x=>x.payInvo.pay_ref==pay.pay_ref)\n    //console.log(flt,'here')\n    let navigationExtras: NavigationExtras = {\n     queryParams: {\n       payInvo: JSON.stringify(flt[0].payInvo),\n       sub_name: JSON.stringify(flt[0].payInvo.sub_name),\n       user_info:JSON.stringify(this.user_info),\n       store_info:JSON.stringify(this.store_info),\n       itemList:JSON.stringify(flt[0].itemList)\n     }\n   };\n   if(this.device == 'desktop'){\n    this.rout.navigate(['folder/edit-perch'], navigationExtras); \n   }else{\n     this.rout.navigate(['folder/edit-purchase-mob'], navigationExtras);  \n   }\n   }else if (this.offline==true && pay.pay_id == undefined) {\n    console .log(pay,sub_name,status)\n    this.loadingController.dismiss() \n    //console.log(this.purchLocal)\n    let flt:Array<any> =[]\n    flt = this.purchLocal.filter(x=>x.payInvo.pay_ref==pay.pay_ref )\n    //console.log(flt,'here')\n    let navigationExtras: NavigationExtras = {\n     queryParams: {\n       payInvo: JSON.stringify(flt[0].payInvo),\n       sub_name: JSON.stringify(flt[0].payInvo.sub_name),\n       user_info:JSON.stringify(this.user_info),\n       store_info:JSON.stringify(this.store_info),\n       itemList:JSON.stringify(flt[0].itemList)\n     }\n   };\n   if(this.device == 'desktop'){\n    this.rout.navigate(['folder/edit-perch'], navigationExtras); \n   }else{\n     this.rout.navigate(['folder/edit-purchase-mob'], navigationExtras);  \n   }\n   }\n   \n   }\n\n \n  async presentToast(msg,color?) {\n    const toast = await this.toast.create({\n      message: msg,\n      duration: 2000,\n      color:color,\n      cssClass:'cust_Toast',\n      mode:'ios',\n      position:'top' \n    });\n    toast.present();\n  }\n\n\n  async presentLoadingWithOptions(msg?) {\n    const loading = await this.loadingController.create({\n      spinner: 'bubbles',\n      mode:'ios',\n      duration: 3000,\n      message: msg,\n      translucent: true,\n     // cssClass: 'custom-class custom-loading',\n      backdropDismiss: false\n    });\n    await loading.present();\n  \n    const { role, data } = await loading.onDidDismiss();\n    //console.log('Loading dismissed with role:', role);\n  }\n\n// Handle account selection from AccountSelectorComponent\nonAccountSelected(account: any) {\n  if (account) {\n    this.selectedAccount = {\n      id: account.id,\n      ac_id: account.ac_id,\n      sub_name: account.sub_name,\n      sub_type: account.sub_type,\n      sub_code: account.sub_code,\n      sub_balance: account.sub_balance,\n      store_id: account.store_id,\n      cat_name: account.cat_name,\n      cat_id: account.cat_id,\n      currentCustumerStatus: account.currentCustumerStatus || 0\n    };\n    \n    // Clear existing data and reload records for selected account\n    this.payArray = [];\n    this.sortedPayArray = [];\n    this.purchLocal = [];\n    this.showEmpty = false;\n    this.loading = false;\n    \n    console.log('Account selected in purchase-record:', this.selectedAccount);\n  }\n}\n\n// Handle account balance loaded\nonAccountBalanceLoaded(balance: any) {\n  if (balance && this.selectedAccount) {\n    // Update the supplier balance\n    this.selectedAccount.sub_balance = balance.current_balance;\n    console.log('Account balance loaded in purchase-record:', balance);\n  }\n}\n\n// Format balance display with number separators\nformatBalance(balance: number): string {\n  if (!balance && balance !== 0) return '0.00';\n  return new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(Math.abs(balance));\n}\n\n// Apply sorting to data\napplySorting() {\n  if (this.currentSort) {\n    this.sortedPayArray = this.sortingService.sortData(\n      this.payArray, \n      this.currentSort.column, \n      this.currentSort.direction\n    );\n  } else {\n    this.sortedPayArray = [...this.payArray];\n  }\n}\n\n// Handle column sort\nsortBy(column: string) {\n  const direction = this.sortingService.getNextSortDirection(column, this.currentSort);\n  this.currentSort = { column, direction };\n  this.applySorting();\n}\n\n// Get sort icon for column\ngetSortIcon(column: string): string {\n  return this.sortingService.getSortIcon(column, this.currentSort);\n}\n\n// Export functionality\nasync exportToPDF(): Promise<void> {\n  if (!this.sortedPayArray || this.sortedPayArray.length === 0) {\n    await this.presentToast('لا توجد بيانات للتصدير', 'warning');\n    return;\n  }\n\n  const config: ExportConfig = {\n    title: this.exportService.generateDynamicTitle('purchase-record'),\n    subtitle: this.generateSubtitle(),\n    fileName: `purchase-record-${this.datePipe.transform(new Date(), 'yyyy-MM-dd')}`,\n    data: this.sortedPayArray,\n    columns: this.getExportColumns(),\n    userName: this.user_info?.full_name || this.user_info?.user_name || 'مستخدم غير معروف',\n    pageType: 'purchase-record',\n    currentDate: this.datePipe.transform(new Date(), 'yyyy-MM-dd') || ''\n  };\n\n  await this.exportService.exportToPDF(config);\n}\n\nasync exportToExcel(): Promise<void> {\n  if (!this.sortedPayArray || this.sortedPayArray.length === 0) {\n    await this.presentToast('لا توجد بيانات للتصدير', 'warning');\n    return;\n  }\n\n  const config: ExportConfig = {\n    title: this.exportService.generateDynamicTitle('purchase-record'),\n    subtitle: this.generateSubtitle(),\n    fileName: `purchase-record-${this.datePipe.transform(new Date(), 'yyyy-MM-dd')}`,\n    data: this.sortedPayArray,\n    columns: this.getExportColumns(),\n    userName: this.user_info?.full_name || this.user_info?.user_name || 'مستخدم غير معروف',\n    pageType: 'purchase-record',\n    currentDate: this.datePipe.transform(new Date(), 'yyyy-MM-dd') || ''\n  };\n\n  await this.exportService.exportToExcel(config);\n}\n\nprivate generateSubtitle(): string {\n  const filters = {\n    selectedAccount: this.selectedAccount.sub_name ? this.selectedAccount : null,\n    dateFilter: this.getDateFilter(),\n    searchTerm: null\n  };\n\n  return this.exportService.generateDynamicSubtitle('purchase-record', filters);\n}\n\nprivate getDateFilter(): any {\n  if (this.radioVal === 1 && this.startingDate) {\n    return {\n      type: 'single',\n      date: this.startingDate\n    };\n  } else if (this.radioVal === 2 && this.startingDate && this.endDate) {\n    return {\n      type: 'range',\n      startDate: this.startingDate,\n      endDate: this.endDate\n    };\n  }\n  return null;\n}\n\nprivate getExportColumns(): ExportColumn[] {\n  return [\n    { key: 'sub_name', title: 'المورد', width: 20, type: 'text' },\n    { key: 'pay_date', title: 'التاريخ', width: 12, type: 'date' },\n    { key: 'tot_pr', title: 'إجمالي المبلغ', width: 15, type: 'currency' },\n    { key: 'discount', title: 'الخصم', width: 12, type: 'currency' },\n    { key: 'finalAmount', title: 'الإجمالي بعد الخصم', width: 18, type: 'currency' },\n    { key: 'payComment', title: 'تعليق', width: 20, type: 'text' },\n    { key: 'user_name', title: 'المستخدم', width: 15, type: 'text' }\n  ];\n}\n\n}"],"names":[],"sourceRoot":"webpack:///"}