"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5158],{35158:(j,f,l)=>{l.r(f),l.d(f,{UserActivityPageModule:()=>I});var u=l(69808),d=l(34182),s=l(23349),c=l(94030),t=l(29863);let y=(()=>{class o{transform(i,e){let a=e.toString();if(void 0!==a&&null!==a.length)return 0===a.length||0===i.length?i:a?i.filter(r=>-1!=r.full_name.toLocaleLowerCase().indexOf(a)):i}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275pipe=t.Yjl({name:"filterByLogdetails",type:o,pure:!0}),o})();var m=l(17158),_=l(90849),h=l(91472),T=l(742);function A(o,n){if(1&o&&(t.TgZ(0,"ion-item"),t.TgZ(1,"ion-grid"),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",9),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",10),t.TgZ(6,"ion-text",11),t._uU(7),t.ALo(8,"dateAgo"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const i=n.$implicit;t.xp6(4),t.hij(" ",i.desc," "),t.xp6(3),t.Oqu(t.lcZ(8,2,i.datee))}}function Z(o,n){if(1&o&&(t.TgZ(0,"ion-list",7),t.YNc(1,A,9,4,"ion-item",8),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.logHistoryArr)}}function v(o,n){if(1&o&&(t.TgZ(0,"ion-item"),t.TgZ(1,"ion-grid"),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",12),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",13),t.TgZ(6,"ion-text",11),t._uU(7),t.ALo(8,"dateAgo"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const i=n.$implicit;t.xp6(4),t.hij(" ",i.desc," "),t.xp6(3),t.Oqu(t.lcZ(8,2,i.datee))}}function O(o,n){if(1&o&&(t.TgZ(0,"ion-list",7),t.YNc(1,v,9,4,"ion-item",8),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.searchResult)}}function N(o,n){1&o&&(t.TgZ(0,"ion-list",7),t.TgZ(1,"ion-item"),t._UZ(2,"ion-skeleton-text",14),t.qZA(),t.TgZ(3,"ion-item"),t._UZ(4,"ion-skeleton-text",14),t.qZA(),t.TgZ(5,"ion-item"),t._UZ(6,"ion-skeleton-text",14),t.qZA(),t.qZA())}const S=[{path:"",component:(()=>{class o{constructor(i,e,a,r,p,g,P,U,q,b,x){this.behavApi=i,this._location=e,this.alertController=a,this.route=r,this.rout=p,this.storage=g,this.modalController=P,this.loadingController=U,this.datePipe=q,this.api=b,this.toast=x,this.sub_accountSales=[],this.sub_accountPurch=[],this.searchResult=[],this.LogHistoryLocalArr=[],this.logHistoryArr=[],this.searchMode=!1,this.isOpenNotif=!1,this.loading=!1,this.getAppInfo()}ngOnInit(){}getAppInfo(){this.storage.get("USER_INFO").then(i=>{i&&(this.user_info=i)}),this.storage.get("year").then(i=>{i&&(this.year=i)}),this.storage.get("sub_accountPurch").then(i=>{i&&(this.sub_accountPurch=i)}),this.storage.get("sub_accountSales").then(i=>{i&&(this.sub_accountSales=i)}),this.storage.get("STORE_INFO").then(i=>{i&&(this.store_info=i,this.getAllLogHistory())}),this.storage.get("LogHistoryLocal").then(i=>{i&&(this.LogHistoryLocalArr=i)})}getAllLogHistory(){this.loading=!0,this.api.getAllLogHistory(this.store_info.id,this.year.id).subscribe(i=>{this.logHistoryArr=i.data,this.prepareStep1New()},i=>{},()=>{this.loading=!1})}prepareStep1New(){for(let i=0;i<this.logHistoryArr.length;i++){const e=this.logHistoryArr[i];if(1==e.typee.includes("customer")&&("insert customer"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"+JSON.parse(e.logToken).sub_name:"update customer"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0644\u0644\u0639\u0645\u064a\u0644  "+JSON.parse(e.logToken).sub_name:"delete customer"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644 "+JSON.parse(e.logToken).sub_name)),1==e.typee.includes("supplier")&&("insert supplier"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f \u062c\u062f\u064a\u062f"+JSON.parse(e.logToken).sub_name:"update supplier"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0644\u0644\u0645\u0648\u0631\u062f  "+JSON.parse(e.logToken).sub_name:"delete supplier"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f "+JSON.parse(e.logToken).sub_name)),1==e.typee.includes("firstq")&&("insert firstq"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u0625\u0636\u0627\u0641\u0629 \u0643\u0645\u064a\u0629 \u0627\u0641\u062a\u062a\u0627\u062d\u064a\u0629 \u0644\u0635\u0646\u0641 \u062c\u062f\u064a\u062f"+JSON.parse(e.logToken).item_name:"update firstq"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0641\u062a\u062a\u0627\u062d\u064a\u0629 \u0627\u0644\u0635\u0646\u0641  "+JSON.parse(e.logToken).item_name:"delete firstq"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062d\u0630\u0641 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0641\u062a\u062a\u0627\u062d\u064a\u0629 \u0627\u0644\u0635\u0646\u0641 "+JSON.parse(e.logToken).item_name)),1==e.typee.includes("item")&&("insert item"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u0625\u0636\u0627\u0641\u0629 \u0635\u0646\u0641 \u062c\u062f\u064a\u062f"+JSON.parse(e.logToken).item_name:"update item"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0635\u0646\u0641  "+JSON.parse(e.logToken).item_name:"delete item"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062d\u0630\u0641 \u0627\u0644\u0635\u0646\u0641 "+JSON.parse(e.logToken).item_name)),1==e.typee.includes("sales")){let r=JSON.parse(e.logToken).payInvo.cust_id,p=this.sub_accountSales.filter(g=>+g.id==+r);"insert sales"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a "+p[0].sub_name+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr:"update sales"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062a\u0639\u062f\u064a\u0644  \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a  "+p[0].sub_name+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr:"delete sales"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" -\u0628\u062d\u0630\u0641 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a  "+p[0].sub_name+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr)}if(1==e.typee.includes("purchase")){let r=JSON.parse(e.logToken).payInvo.cust_id,p=this.sub_accountSales.filter(g=>+g.id==+r);"insert purchase"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a"+p[0].sub_name+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr:"update purchase"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" - \u0628\u062a\u0639\u062f\u064a\u0644  \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a  "+p[0].sub_name+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr:"delete purchase"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" -\u0628\u062d\u0630\u0641 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a  "+p[0].sub_name+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr)}1==e.typee.includes("journal")&&("insert journal"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" \u0628\u0625\u0636\u0627\u0641\u0629  "+JSON.parse(e.logToken).j_type+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).j_date+" - \u0628\u0642\u064a\u0645\u0629: "+JSON.parse(e.logToken).j_pay+" "+JSON.parse(e.logToken).standard_details:"update journal"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" \u0628\u062a\u0639\u062f\u064a\u0644  "+JSON.parse(e.logToken).j_type+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).j_date+" - \u0628\u0642\u064a\u0645\u0629: "+JSON.parse(e.logToken).j_pay+" "+JSON.parse(e.logToken).standard_details:"delete purchase"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" \u0628\u062d\u0630\u0641  "+JSON.parse(e.logToken).j_type+" \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).j_date+" - \u0628\u0642\u064a\u0645\u0629: "+JSON.parse(e.logToken).j_pay+" "+JSON.parse(e.logToken).standard_details)),1==e.typee.includes("tswia")&&("insert tswia"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" \u0628\u0625\u0636\u0627\u0641\u0629 \u0633\u062c\u0644 \u062a\u0633\u0648\u064a\u0629 \u062c\u0631\u062f\u064a\u0629   \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0633\u0648\u064a\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr:"update tswia"==e.typee?e.desc="\u0642\u0627\u0645 "+e.full_name+" \u0628\u062a\u0639\u062f\u064a\u0644 \u0633\u062c\u0644 \u062a\u0633\u0648\u064a\u0629 \u062c\u0631\u062f\u064a\u0629   \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0633\u0648\u064a\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr:"delete tswia"==e.typee&&(e.desc="\u0642\u0627\u0645 "+e.full_name+" \u0628\u062d\u0630\u0641   \u0628\u062a\u0639\u062f\u064a\u0644 \u0633\u062c\u0644 \u062a\u0633\u0648\u064a\u0629 \u062c\u0631\u062f\u064a\u0629   \u0628\u062a\u0627\u0631\u064a\u062e : "+JSON.parse(e.logToken).payInvo.pay_date+" - \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0633\u0648\u064a\u0629 : "+JSON.parse(e.logToken).payInvo.tot_pr))}}searchItem(i){let a;this.searchMode=!0,a=(new y).transform(this.logHistoryArr,i.target.value),this.searchResult=a}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(m.h),t.Y36(u.Ye),t.Y36(s.Br),t.Y36(c.gz),t.Y36(c.F0),t.Y36(_.K),t.Y36(s.IN),t.Y36(s.HT),t.Y36(u.uU),t.Y36(h.r),t.Y36(s.yF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-user-activity"]],decls:17,vars:4,consts:[["slot","start"],["dir","rtl"],["size","6"],["lines","none",1,"custInput"],["placeholder","\u0628\u062d\u0640\u0640\u062b",3,"ngModel","ngModelChange","ionChange"],["popInput",""],["class","w100 ion-text-center",4,"ngIf"],[1,"w100","ion-text-center"],[4,"ngFor","ngForOf"],["size","10"],["size","2",1,"ion-text-end"],["color","primary"],["size","10",1,"ion-text-end"],["size","2"],["animated","",2,"width","100%"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"ion-content"),t.TgZ(7,"ion-grid",1),t.TgZ(8,"ion-row"),t.TgZ(9,"ion-col",2),t.TgZ(10,"ion-item",3),t.TgZ(11,"ion-input",4,5),t.NdJ("ngModelChange",function(r){return e.searchTerm=r})("ionChange",function(r){return e.searchItem(r)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"ion-row"),t.YNc(14,Z,2,1,"ion-list",6),t.YNc(15,O,2,1,"ion-list",6),t.YNc(16,N,7,0,"ion-list",6),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(11),t.Q6J("ngModel",e.searchTerm),t.xp6(3),t.Q6J("ngIf",e.logHistoryArr.length>0&&0==e.loading&&0==e.searchMode),t.xp6(1),t.Q6J("ngIf",1==e.searchMode),t.xp6(1),t.Q6J("ngIf",1==e.loading))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.wd,s.W2,s.jY,s.Nd,s.wI,s.Ie,s.pK,s.j9,d.JJ,d.On,u.O5,s.q_,u.sg,s.yW,s.CK],pipes:[T.R],styles:[".custInput[_ngcontent-%COMP%]{border-style:solid;border-color:var(--ion-color-light);border-radius:5px}.w100[_ngcontent-%COMP%]{width:100%}"]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(S)],c.Bz]}),o})();var k=l(78565);let I=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,d.u5,s.Pc,k.G,J]]}),o})()}}]);