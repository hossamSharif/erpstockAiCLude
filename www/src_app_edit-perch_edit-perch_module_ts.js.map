{"version":3,"file":"src_app_edit-perch_edit-perch_module_ts.js","mappings":"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","sources":["./src/app/edit-perch/edit-perch-routing.module.ts","./src/app/edit-perch/edit-perch.module.ts","./src/app/edit-perch/edit-perch.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditPerchPage } from './edit-perch.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditPerchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditPerchPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditPerchPageRoutingModule } from './edit-perch-routing.module';\n\nimport { EditPerchPage } from './edit-perch.page';\nimport { ShareModule } from '../shareModule/share-module/share-module.module';\nimport { SharedModule } from '../module/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ShareModule,\n    SharedModule,\n    IonicModule,\n    EditPerchPageRoutingModule\n  ],\n  declarations: [EditPerchPage]\n})\nexport class EditPerchPageModule {}\n","import { DatePipe, Location } from '@angular/common';\nimport { Component, OnInit , ViewChild, ElementRef} from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, LoadingController, ModalController, ToastController } from '@ionic/angular';\nimport { ServicesService } from '../stockService/services.service';\nimport { Storage } from '@ionic/storage';\nimport { ItemModalPage } from '../item-modal/item-modal.page';\nimport { FilterPipe } from '../sales/pipe';\nimport { FilterPipe2 } from '../sales/pipe2';\nimport { FilterPipe3 } from '../sales/pipe3';\nimport { StockServiceService } from '../syncService/stock-service.service';\nimport * as momentObj from 'moment';\nimport { Subscription } from 'rxjs';\nimport { PriceAdjustmentDialogComponent } from '../component/price-adjustment-dialog/price-adjustment-dialog.component';\n@Component({\n  selector: 'app-edit-perch',\n  templateUrl: './edit-perch.page.html',\n  styleUrls: ['./edit-perch.page.scss'],\n})\nexport class EditPerchPage implements OnInit { \n  @ViewChild(\"dstEp\") dstEp: ElementRef;\n  @ViewChild('qtyIdEp') qtyIdEp; \n loadingItems:boolean = false\n  @ViewChild('dstPop4') dstPop4; \n  @ViewChild('popInput4') popInput4; \n  @ViewChild('popover4') popover4;\ndiscountType: string = 'percentage'; // 'percentage' or 'amount'\ndiscountAmount: number = 0;\ncalculatedDiscountPerc: number = 0;\ncalculatedDiscountAmount: number = 0;\n\n  @ViewChild('popoverNotif4') popoverNotif4;\n  notifArr:Array<any> =[]\n  showNotif = false\n  LogHistoryLocalArr:Array<any> =[]\n  logHistoryArr:Array<any>=[];\n  isOpenNotif = false ;\n  subiscribtionNotif:Subscription;\n  newNotif = false ;\n \n  currenQty:any = 0\n  firstQty:any = 0\n  perchTotQty:any = 0\n  payTotQty:any = 0\n  perchTot :any = 0\n  qtyReal:any = 0\n  availQty :any = 0\n\n  isOpen = false; \n  payArray:any ;  \n  sub_account:Array<any> =[]\n  sub_accountLocalPurch: Array<any> = []\n  items: Array<any> = []\n  itemsLocal: Array<any> = []\n  itemList: Array<any> = []\n  sortedItemList:Array<any> =[]\n  isItemListSorted:boolean = false\n  searchTerm:string = ''\n  highlightedIndex:number = -1\n  searchMatches:number[] = []\n  \n  // Search functionality methods\n  onSearchTermChange() {\n    this.searchMatches = [];\n    this.highlightedIndex = -1;\n    \n    if (!this.searchTerm.trim()) {\n      return;\n    }\n    \n    const displayList = this.getDisplayItemList();\n    const searchLower = this.searchTerm.toLowerCase();\n    \n    displayList.forEach((item, index) => {\n      if (item.item_name && item.item_name.toString().toLowerCase().includes(searchLower)) {\n        this.searchMatches.push(index);\n      }\n    });\n    \n    if (this.searchMatches.length > 0) {\n      this.highlightedIndex = 0;\n      this.scrollToHighlightedItem();\n    }\n  }\n  \n  navigateSearch(direction: 'next' | 'prev') {\n    if (this.searchMatches.length === 0) return;\n    \n    if (direction === 'next') {\n      this.highlightedIndex = (this.highlightedIndex + 1) % this.searchMatches.length;\n    } else {\n      this.highlightedIndex = this.highlightedIndex === 0 ? this.searchMatches.length - 1 : this.highlightedIndex - 1;\n    }\n    \n    this.scrollToHighlightedItem();\n  }\n  \n  scrollToHighlightedItem() {\n    if (this.highlightedIndex >= 0 && this.highlightedIndex < this.searchMatches.length) {\n      const matchIndex = this.searchMatches[this.highlightedIndex];\n      const element = document.querySelector(`tr[data-index=\"${matchIndex}\"]`);\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }\n  }\n  \n  highlightText(text: string, searchTerm: string): string {\n    if (!searchTerm || !text) {\n      return text;\n    }\n    \n    const regex = new RegExp(`(${searchTerm})`, 'gi');\n    return text.replace(regex, '<mark>$1</mark>');\n  }\n  \n  isSearchMatch(index: number): boolean {\n    return this.searchMatches.includes(index);\n  }\n  \n  isHighlighted(index: number): boolean {\n    return this.highlightedIndex >= 0 && this.searchMatches[this.highlightedIndex] === index;\n  }\n  \n  getSearchResultText(): string {\n    if (this.searchMatches.length === 0) {\n      return 'لا توجد نتائج';\n    }\n    return `${this.highlightedIndex + 1} من ${this.searchMatches.length}`;\n  }\n  sub_accountPurch:Array<any> =[]\n  purchLocal: Array<any> = []\n  purchase:Array<any> =[]\n  purchLocalUpdate: Array<any> = []\n  purchLocalDelete: Array<any> = []\n  randomsNumber: Array<any> = []\n  store_info: { id: any , location :any ,store_name:any , store_ref:any }\n  user_info : {id:any ,user_name:any ,store_id :any,full_name:any,password:any}\n  store_id : any=1\n  sub_nameNew :any = \"\"\n  selectedItem : {id:any ,pay_ref:any,item_name:any,pay_price:any,perch_price:any,item_unit:any,item_desc:any,parcode:any,qty:any,tot:any ,dateCreated:any,aliasEn:any};\n  selectedAccount : {id:any ,ac_id:any,sub_name:any,sub_type:any,sub_code:any,sub_balance:any,store_id:any,cat_id:any,cat_name:any,currentCustumerStatus:any};\n  payInvo : {pay_id:any ,pay_ref:any ,store_id:any,tot_pr:any,pay:any,pay_date:any,pay_time:any,user_id:any,cust_id:any,pay_method:any,discount:any ,changee:any,sub_name:any,payComment:any,nextPay:any,yearId:any};\n  discountPerc :any =0\n  radioVal : any = 0\n  offline: boolean =false ;   \n  searchLang :any = 0\n  showMe:any =null\nfirstq : {id:any ,item_id:any , store_id:any , quantity :any ,\tfq_year:any ,\tpay_price:any ,\tperch_price:any , item_name:any}\n \naliasTerm :any =\"\"\nsearchResult :Array<any> =[]\naliasResult :Array<any> =[]\nyear : {id:any ,yearDesc:any ,yearStart :any,yearEnd:any} \n\n  constructor(private behavApi:StockServiceService ,private _location: Location ,private alertController: AlertController,private route: ActivatedRoute, private rout : Router,private storage: Storage,private modalController: ModalController,private loadingController:LoadingController, private datePipe:DatePipe,private api:ServicesService,private toast :ToastController) {\n  this.selectedAccount = {id:\"\" ,ac_id:\"\",sub_name:\"\",sub_type:\"\",sub_code:\"\",sub_balance:\"\",store_id:\"\",cat_name:\"\",cat_id:\"\",currentCustumerStatus:0};\n  this.route.queryParams.subscribe(params => {\n    if (params && params.payInvo) {\n      this.payInvo = JSON.parse(params.payInvo);\n      this.selectedAccount.sub_name = JSON.parse(params.sub_name);\n      this.user_info = JSON.parse(params.user_info);\n      this.store_info = JSON.parse(params.store_info);\n      this.itemList = JSON.parse(params.itemList);\n       this.initializeDiscountValues();\n      \n      this.getAppInfo()\n    }\n  });\n \n  this.selectedItem = {\n    id:undefined,\n    dateCreated:\"\",\n    pay_ref:\"\",\n    item_desc:\"\",\n    item_name:\"\",\n    item_unit:\"\",\n    parcode:0,\n    pay_price:0,\n    perch_price:0,\n    qty:0,\n    tot:0,\n    aliasEn:\"\"\n  }\n   \n   }\n\n  ngOnInit() { \n    // Check category visibility setting\n     \n   }\n\n   initializeDiscountValues() {\n  // Initialize discount type based on existing discount\n  if (this.payInvo.discount > 0) {\n    // Calculate which type was used originally\n    const percentageDiscount = (+this.payInvo.discount / +this.payInvo.tot_pr) * 100;\n    \n    // You can set a default or determine based on your business logic\n    this.discountType = 'percentage'; // or 'amount' based on your preference\n    \n    if (this.discountType === 'percentage') {\n      this.discountPerc = percentageDiscount.toFixed(2);\n      this.calculatedDiscountAmount = +this.payInvo.discount;\n    } else {\n      this.discountAmount = +this.payInvo.discount;\n      this.calculatedDiscountPerc = percentageDiscount;\n    }\n  }\n}\n   ionViewDidEnter(){\n  \n  } \n  \n\n  \n\n\n \n\n  \n\n  getStockItems(pickName?) {\n    \n      this.api.stockItems(1,this.year.id).subscribe(data => {\n        //console.log(data)\n        let res = data\n        this.items = res['data']\n        this.items.forEach(element => {\n          if(+element.tswiaQuantity > 0){\n            element.salesQuantity = +element.salesQuantity + +element.tswiaQuantity \n  \n          }else if(+element.tswiaQuantity < 0){\n            element.perchQuantity = +element.perchQuantity + Math.abs(+element.tswiaQuantity) \n          }\n  \n          element.quantity = (+element.perchQuantity + +element.firstQuantity) - +element.salesQuantity\n        });\n        this.storage.set('itemsLocal' , this.items).then((response) => {\n               \n        }); \n        this.searchResult = this.items\n        if(pickName){\n          this.pickDetail(pickName , 'afterSave') \n        }\n      }, (err) => {\n        //console.log(err);\n      },\n        () => {\n        }\n      )\n       \n  \n  }\n\n\n\n   ionViewDidLeave(){\n     \n  } \n\n  \n\n \n   getAppInfo(){ \n     \n    this.storage.get('USER_INFO').then((response) => {\n     if (response) {\n       this.user_info = response\n       //console.log(this.user_info) \n     }\n   });\n\n   this.storage.get('year').then((response) => {\n    if (response) {\n      this.year = response \n    } \n  });\n  \n  \n  this.storage.get('STORE_INFO').then((response) => {\n     if (response) {\n       this.store_info = response\n       // After store info is loaded, get account balance if supplier is selected\n       this.loadInitialAccountBalance();\n     }\n   }); \n\n   this.storage.get('itemsLocal').then((response) => {\n    if (response) {\n       this.items = response\n    }\n  });\n  \n }\n\n\n presentPopoverNotif(e?: Event) {\n  //console.log('preent me', e)\n   this.notifArr = []\n   this.showNotif = false\n   this.popoverNotif4.event = e;\n   this.isOpenNotif = true;  \n }\n\n didDissmisNotif(){\n  this.isOpenNotif = false\n  //console.log('dismissOver') \n}\nqtyClick(i){\n  //console.log(i)\n  this.showMe = i\n}\n\nhideMe(i){\n  this.showMe = null \n}\n\neditCell(i){\n  const displayList = this.getDisplayItemList();\n  const itemToEdit = displayList[i];\n  \n  // Find the corresponding item in the original itemList\n  const originalIndex = this.itemList.findIndex(item => \n    item.item_name === itemToEdit.item_name && \n    item.perch_price === itemToEdit.perch_price\n  );\n  \n  if (originalIndex !== -1 && +displayList[i].quantity > 0 && +displayList[i].perch_price > 0) {\n    // Update both the display list and original list\n    displayList[i].tot = +displayList[i].quantity * +displayList[i].perch_price;\n    this.itemList[originalIndex].quantity = displayList[i].quantity;\n    this.itemList[originalIndex].perch_price = displayList[i].perch_price;\n    this.itemList[originalIndex].tot = displayList[i].tot;\n    \n    this.discountPerc = 0\n    this.payInvo.discount = 0\n    this.hideMe(i)\n    this.getTotal() \n  } else {\n    this.presentToast(\"خطأ في الإدخال \", \"danger\")\n  }\n}\n\n  \n  \n\n  \n  getAllStockItemsWithouteCounts() {\n    this.storage.get('year').then((response) => {\n     if (response) {\n      this.year = response\n      //console.log('this.year.id',this.year.id)\n      if (this.offline == false) {\n        // this.loadingItems = true\n        this.api.getAllStockItemsWithouteCounts(1,this.year.id).subscribe(data => {\n          //console.log(data)\n          let res = data\n          this.items = res['data']\n          this.storage.set('itemsLocal' , this.items).then((response) => {\n             \n          }); \n           \n         \n        }, (err) => {\n          // this.loadingItems = false\n          //console.log(err);\n        },\n          () => {\n            // this.loadingItems = false\n          }\n        )\n      }  \n      } \n  }); \n    }\n\n \n  \n \n\n\n \n    \n \n\n prepareInvo(){ \n  this.sub_nameNew = \"\"\n  this.radioVal = 0\n  this.payInvo ={\n    pay_id:this.payArray[0].pay_id ,\n    pay_ref:this.payArray[0].pay_ref ,\n    store_id:this.payArray[0].store_id,\n    tot_pr:this.payArray[0].tot_pr,\n    pay:this.payArray[0].pay,\n    pay_date:this.payArray[0].pay_date,\n    pay_time:this.payArray[0].pay_time,\n    user_id:this.payArray[0].user_id,\n    cust_id:this.payArray[0].cust_id,\n    pay_method:this.payArray[0].pay_method,\n    discount:this.payArray[0].discount ,\n    changee:this.payArray[0].changee,\n    sub_name:this.payArray[0].sub_name,\n    payComment:this.payArray[0].payComment,\n    nextPay:this.payArray[0].nextPay,\n    yearId:this.payArray[0].yearId\n  };\nthis.selectedAccount.sub_name = this.payArray[0].sub_name\nthis.pickAccount(this.payArray[0].sub_name)\n //console.log( this.payInvo) \n this.itemList = this.payArray['details']\n this.setFocusOnInput('dstEp')\n}\n\n \n\n\nsetFocusOnInput(Input) {\n  //console.log('setFocusOnInput')\n  if (Input == 'dstEp') { \n    this.dstEp.nativeElement.focus();\n   } else if(Input == 'dstPop4') {\n    this.dstPop4.setFocus();\n    this.isOpen = true;\n    this.clear()\n    this.searchResult = this.items\n    setTimeout(() => {\n        this.popInput4.setFocus(); \n    }, 1500);\n  \n   }else if(Input == 'qtyIdEp') {\n    this.qtyIdEp.setFocus();  \n   }else if(Input == 'popInput4'){\n    this.popInput4.setFocus();  \n   }\n}\n\n\n\n\n \n\n\n   async presentToast(msg,color?) {\n     const toast = await this.toast.create({\n       message: msg,\n       duration: 2000,\n       color:color,\n       cssClass:'cust_Toast',\n       mode:'ios',\n       position:'top' \n     });\n     toast.present();\n   }\n  \n  async presentLoadingWithOptions(msg?) {\n    const loading = await this.loadingController.create({\n      spinner: 'bubbles',\n      mode:'ios',\n      duration: 5000,\n      message: msg,\n      translucent: true,\n     // cssClass: 'custom-class custom-loading',\n      backdropDismiss: false\n    });\n    await loading.present();\n  \n    const { role, data } = await loading.onDidDismiss();\n    //console.log('Loading dismissed with role:', role);\n  }\n\n  // radioChange(ev){\n  //   //console.log(ev.target.value) \n  //  }\n\n  pickAccount(ev  , firstLoad?){\n    let evVal \n    if(firstLoad){\n     evVal = ev\n    }else{\n    evVal = ev.target.value\n    }\n    //console.log('evVal',evVal);\n  \n    let fl= this.sub_account.filter(x=>x.sub_name == evVal)\n    //console.log(fl);\n    if (fl.length > 0) {\n    this.selectedAccount = {\n      id:fl[0]['id'],\n      ac_id:fl[0]['ac_id'],\n      sub_name:fl[0]['sub_name'],\n      sub_type:fl[0]['sub_type'],\n      sub_code:fl[0]['sub_code'], \n      store_id:fl[0]['store_id'],\n      sub_balance:fl[0]['sub_balance'] ,\n      cat_id:fl[0]['cat_id'], \n      cat_name:fl[0]['cat_name'],\n      currentCustumerStatus:0\n    }\n    //console.log('jjjj', this.selectedAccount);\n    this.payInvo.cust_id = this.selectedAccount.id\n  \n}else{\n  this.presentToast('خطأ في اسم الحساب ', 'danger') \n  this.selectedItem.item_name =\"\"\n}\n}\n\n\nselectFromPop(item){\n  //console.log(item)\n  this.selectedItem = {\n    id:item.id,\n    dateCreated:item.dateCreated,\n    pay_ref:this.payInvo.pay_ref,\n    item_desc:item.item_desc,\n    item_name:item.item_name,\n    item_unit:item.item_unit,\n    parcode:item.parcode,\n    pay_price:item.pay_price,\n    perch_price:item.perch_price,\n    qty:\"\",\n    tot:item.perch_price, \n    aliasEn:item.aliasEn\n  } \n    this.searchTerm = item.item_name\n    //console.log( this.selectedItem); \n    this.didDissmis()\n    \n  }\n\npickDetail(ev , notev?){\n  let evVal \n  if(notev){\n   evVal = ev\n   this.searchLang = 0\n  }else{\n  evVal = ev.target.value\n  }\n  //console.log('evVal',evVal);\n  let fl : Array<any>=[]\n  if(this.searchLang == 1){\n    fl= this.items.filter(x=>x.item_desc == evVal)\n   //console.log('hyrr',fl);\n }else {\n    fl= this.items.filter(x=>x.item_name == evVal)\n   //console.log(fl);\n }\n    //console.log(fl);\n    if (fl.length > 0) {\n    this.selectedItem = {\n      id:fl[0]['id'],\n      dateCreated:fl[0]['dateCreated'],\n      pay_ref:this.payInvo.pay_ref,\n      item_desc:fl[0]['item_desc'],\n      item_name:fl[0]['item_name'],\n      item_unit:fl[0]['item_unit'],\n      parcode:fl[0]['parcode'],\n      pay_price:fl[0]['pay_price'],\n      perch_price:fl[0]['perch_price'],\n      qty:\"\",\n      tot:fl[0]['pay_price'],\n      aliasEn:fl[0]['aliasEn']\n    }\n    //console.log( this.selectedItem);\n   this.setFocusOnInput('qtyIdEp')\n  } else{\n    this.presentToast('خطأ في اسم الصنف ', 'danger') \n    this.selectedItem.item_name =\"\"\n  }\n  }\n  \n\n  async presentModal2(id?, status?) {\n    \n   \n  \n    const modal = await this.modalController.create({\n      component: ItemModalPage ,\n      componentProps: {\n        \"item\": this.selectedItem,\n        \"status\": status\n      }\n    });\n    \n    modal.onDidDismiss().then((dataReturned) => {\n      if (dataReturned !== null) {\n        //console.log(dataReturned )\n        this.doAfterDissmiss(dataReturned)\n      }\n    });\n  \n    return await modal.present(); \n  }\n  \n\n\n  qtyhange(ev){\n    //console.log(ev);\n    this.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2)\n  }\n\n  pricehange(ev){\n    //console.log(ev);\n    this.selectedItem.tot = (this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2)\n  }\n\n  payChange(ev){\n    //console.log(ev); \n    this.payInvo.changee = +( this.payInvo.tot_pr - +this.payInvo.discount) - ev.target.value \n  }\n  \n\n  onDiscountTypeChange(event: any) {\n    this.discountType = event.detail.value;\n    // Reset discount values when switching types\n    this.discountPerc = 0;\n    this.discountAmount = 0;\n    this.payInvo.discount = 0;\n    this.calculatedDiscountPerc = 0;\n    this.calculatedDiscountAmount = 0;\n    this.calculateChange();\n  }\n\n  onPercentageDiscountChange(event: any) {\n    this.discountPerc = event.target.value || 0;\n    if (this.payInvo.tot_pr > 0) {\n      // Calculate discount amount based on percentage\n      this.calculatedDiscountAmount = (+this.payInvo.tot_pr * +this.discountPerc / 100);\n      this.payInvo.discount = this.calculatedDiscountAmount.toFixed(2);\n      this.calculateChange();\n    }\n  }\n\n   onAmountDiscountChange(event: any) {\n    this.discountAmount = event.target.value || 0;\n    if (this.payInvo.tot_pr > 0 && this.discountAmount > 0) {\n      // Calculate discount percentage based on amount\n      this.calculatedDiscountPerc = ((+this.discountAmount / +this.payInvo.tot_pr) * 100);\n      this.payInvo.discount = this.discountAmount;\n      this.calculateChange();\n    } else {\n      this.calculatedDiscountPerc = 0;\n      this.payInvo.discount = 0;\n      this.calculateChange();\n    }\n  }\n\n  calculateChange() {\n    this.payInvo.changee = +(this.payInvo.tot_pr - +this.payInvo.discount) - this.payInvo.pay;\n  }\n\n  discountChange(ev){\n    //console.log('discountChange' ,ev); \n    this.discountPerc = ((+this.payInvo.discount /+this.payInvo.tot_pr) * 100 ).toFixed(2)\n    this.payInvo.changee = +( this.payInvo.tot_pr - ev.target.value) - this.payInvo.pay\n  }\n  \n  discountPerChange(ev){\n    //console.log('discountPerChange',ev);\n    this.payInvo.discount = (+this.payInvo.tot_pr * +this.discountPerc/100).toFixed(2)\n    this.payInvo.changee = +( this.payInvo.tot_pr -  this.payInvo.discount ) - this.payInvo.pay\n  }\n\n  // Update your existing getTotal method\ngetTotal() {\n  let sum = this.itemList.reduce((acc, obj) => { return acc + +obj.tot; }, 0);\n  this.payInvo.tot_pr = sum;\n  this.payInvo.changee = +(sum - +this.payInvo.discount) - this.payInvo.pay;\n  this.payInvo.tot_pr = this.payInvo.tot_pr.toFixed(2);\n  this.payInvo.changee = this.payInvo.changee.toFixed(2);\n  \n  // Recalculate discount labels when total changes\n  if (this.discountType === 'percentage' && this.discountPerc > 0) {\n    this.calculatedDiscountAmount = (sum * +this.discountPerc / 100);\n    this.payInvo.discount = this.calculatedDiscountAmount.toFixed(2);\n  } else if (this.discountType === 'amount' && this.discountAmount > 0) {\n    this.calculatedDiscountPerc = ((+this.discountAmount / sum) * 100);\n    this.payInvo.discount = this.discountAmount;\n  }\n  \n  // Recalculate change after discount update\n  this.payInvo.changee = +(sum - +this.payInvo.discount) - this.payInvo.pay;\n  this.payInvo.changee = this.payInvo.changee.toFixed(2);\n}\n\n \n\n \n  back(){\n    this._location.back()\n  }\n\n  deleteItem(index){\n  //console.log( index); \n  const displayList = this.getDisplayItemList();\n  const itemToDelete = displayList[index];\n  \n  // Find the item in the original itemList and remove it\n  const originalIndex = this.itemList.findIndex(item => \n    item.item_name === itemToDelete.item_name && \n    item.perch_price === itemToDelete.perch_price &&\n    item.quantity === itemToDelete.quantity\n  );\n  \n  if (originalIndex !== -1) {\n    this.itemList.splice(originalIndex, 1);\n  }\n  \n  this.payInvo.pay = 0\n  this.payInvo.discount = 0\n  this.getTotal()\n  this.updateSortedList()\n  }\n\n \n\n  refresh(para?){\n    \n      \n      this.getAllStockItemsWithouteCounts()\n     \n    \n  }\n\n  async openPriceAdjustmentDialog() {\n    if (!this.itemList || this.itemList.length === 0) {\n      this.presentToast('لا توجد أصناف في القائمة لتعديل أسعارها', 'warning');\n      return;\n    }\n\n    // Transform itemList to the format expected by the dialog\n    const itemsToPass = this.itemList.map(item => ({\n      qty: item.quantity,\n      id: item.item_id,\n      item_name: item.item_name,\n      perch_price: item.perch_price,\n      pay_price: item.pay_price,\n      item_unit: item.item_unit || '',\n      parcode: item.parcode || 0\n    }));\n\n    const modal = await this.modalController.create({\n      component: PriceAdjustmentDialogComponent,\n      cssClass: 'price-adjustment-modal',\n      componentProps: {\n        itemsList: itemsToPass,\n        mode: 'purchase'\n      }\n    });\n\n    modal.onDidDismiss().then((result) => {\n      if (result.data) {\n        this.handleEditModeResult(result.data);\n      }\n    });\n\n    return await modal.present();\n  }\n\n  private handleEditModeResult(updatedItems: any[]) {\n    if (!updatedItems || updatedItems.length === 0) return;\n\n    // Update the itemList with new prices\n    updatedItems.forEach(updatedItem => {\n      const itemIndex = this.itemList.findIndex(item => \n        item.item_id === updatedItem.id && item.item_name === updatedItem.item_name\n      );\n      \n      if (itemIndex !== -1) {\n        // Update the perch_price and recalculate total\n        this.itemList[itemIndex].perch_price = parseFloat(updatedItem.perch_price) || 0;\n        this.itemList[itemIndex].tot = (this.itemList[itemIndex].quantity * this.itemList[itemIndex].perch_price).toFixed(2);\n      }\n    });\n\n    // Recalculate totals\n    this.getTotal();\n    \n    this.presentToast('تم تعديل الأسعار بنجاح', 'success');\n  }\n\n\n\n   onItemSelected(selectedItem: any) {\n    console.log('Item selected:', selectedItem);\n    // You can perform any additional logic when an item is selected\n    // For example, update availability or perform validations\n  }\n\n  onItemAdded(selectedItem: any) {\n    console.log('Item to be added:', selectedItem);\n    // Check if item already exists in the list\n    let existingItem = this.itemList.find(item => \n      item.item_name === selectedItem.item_name && \n      item.perch_price === selectedItem.perch_price\n    );\n\n    if (existingItem) {\n      // Update existing item quantity\n      let newQty = +existingItem.quantity + +selectedItem.qty;\n      \n    \n      \n      existingItem.quantity = newQty;\n      existingItem.tot = (newQty * +existingItem.perch_price).toFixed(2);\n    } else {\n      // Add new item to list\n      let d = new Date();\n      let r = this.datePipe.transform(d, 'dd-MM-YYYY');\n\n      this.itemList.push({\n        \"id\": 'NULL',\n        \"pay_ref\": this.payInvo.pay_ref,\n        \"item_name\": selectedItem.item_name,\n        \"pay_price\": selectedItem.pay_price,\n        \"quantity\": +selectedItem.qty,\n        \"tot\": (selectedItem.qty * +selectedItem.perch_price).toFixed(2),\n        \"store_id\": +this.store_info.id,\n        \"yearId\": +this.year.id,\n        \"item_id\": +selectedItem.id,\n        \"dateCreated\": r,\n        \"perch_price\": selectedItem.perch_price\n      });\n    }\n\n    \n    this.getTotal();\n    this.updateSortedList();\n    \n    // this.presentToast('تم إضافة الصنف بنجاح', 'success');\n  }\n\n\n\n\n\n  addTolist() {\n    if (this.selectedItem.item_name == \"\" || this.selectedItem.id == \"\" || +this.selectedItem.qty == 0) {\n      this.presentToast('الرجاء ادختيار الصنف وتحديد الكمية', 'danger')\n    } else {\n      let fl: any = []\n      if (this.itemList.length > 0) {\n        fl = this.itemList.filter(x => x.item_name == this.selectedItem.item_name &&  x.perch_price == this.selectedItem.perch_price)\n      }\n\n      if (fl.length == 0) {\n        let d =   new Date\n        let r= this.datePipe.transform(d, 'dd-MM-YYYY')\n  \n        this.itemList.push({\n          \"id\" : 'NULL',\n        \"pay_ref\" :this.selectedItem.pay_ref,\n        \"item_name\" :this.selectedItem.item_name,\n        \"pay_price\" :this.selectedItem.pay_price,\n        \"quantity\" : +this.selectedItem.qty,\n        \"tot\" :this.selectedItem.tot, \n        \"store_id\" :+this.store_info.id, \n        \"yearId\" :+this.year.id, \n        \"item_id\" : +this.selectedItem.id,\n        \"dateCreated\" : r,\n        \"perch_price\":this.selectedItem.perch_price\n        })\n      } else {\n         \n        this.selectedItem.qty = +fl[0].quantity + +this.selectedItem.qty\n        let index = this.itemList.map(e => e.item_name).indexOf(this.selectedItem.item_name);\n        this.itemList[index].quantity = +this.selectedItem.qty\n        this.itemList[index].tot =  (+this.selectedItem.qty * +this.selectedItem.perch_price).toFixed(2) \n       \n       \n      }\n\n      this.selectedItem = {\n        id: undefined,\n        dateCreated: \"\", \n        pay_ref:this.payInvo.pay_ref,\n        item_desc: \"\",\n        item_name: \"\",\n        item_unit: \"\",\n        parcode: 0,\n        pay_price: 0,\n        perch_price: 0,\n        qty: 0,\n        tot: 0,\n        aliasEn:\"\"\n      }\n      this.getTotal()\n      this.setFocusOnInput('dstPop4')\n    }\n\n  }\n\n  presentPopover(e?: Event) {\n    //console.log('preent me', e)\n     this.popover4.event = e;\n     this.isOpen = true;\n     this.clear()\n     this.searchResult = this.items\n     setTimeout(() => {\n     this.setFocusOnInput('popInput4')\n     }, 2000);\n   }\n   \n   \n   didDissmis(){\n    this.isOpen = false\n    //console.log('dismissOver')\n    this.setFocusOnInput('qtyIdEP')\n  }\n  \n  \n  searchItem(ev){\n      this.searchResult = []\n      this.aliasTerm = ev.target.value \n      const filterPipe = new FilterPipe;   \n      let  fiteredArr :any = filterPipe.transform(this.items,ev.target.value); \n      if(fiteredArr.length>0){\n        fiteredArr.forEach(element => {\n          this.searchResult.push( element)\n        });\n      }    //console.log('search',this.searchResult)\n    }\n  \n  clear(item_name?){\n   if(item_name){\n    this.selectedItem = {\n      id: undefined,\n      dateCreated: \"\", \n      pay_ref:this.payInvo.pay_ref,\n      item_desc: \"\",\n      item_name: \"\",\n      item_unit: \"\",\n      parcode: 0,\n      pay_price: 0,\n      perch_price: 0,\n      qty: 0,\n      tot: 0, \n      aliasEn:\"\"\n    }\n   }else{\n    this.searchTerm = \"\" \n   }\n  }\n  \n\n\n\n validate():boolean{ \n  if (this.itemList.length == 0  || this.payInvo.pay_ref == \"\" ) {\n    this.presentToast('الرجاء ادخال اصناف الي القائمة','danger')\n    return false\n  } \n  else if(+this.payInvo.cust_id == 0  ) {\n    this.presentToast('الرجاء إختيار حساب العميل','danger')\n    return false\n  }else if(this.payInvo.pay_date == \"\" || this.payInvo.pay_date == undefined) {\n    this.presentToast('الرجاء تحديد التاريخ ','danger')\n    return false\n  }else if(this.payInvo.changee < 0 ) {\n    this.presentToast('الرجاء مراجعة المبلغ المستلم والخصم  ','danger')\n    return false\n  } \n   else {\n    return true\n  }\n }\n\n\ndoAfterDissmiss(data){\n  if (data.role == 'save' ) {\n    //console.log('edit' ,data.data)\n    this.saveItem(data.data )  \n  } \n}\n\nsaveItem(mdata){ \n  this.presentLoadingWithOptions('جاري حفظ البيانات ...')\n\n  this.logHistoryArr.push(\n    {\n      \"id\":null,\n      \"logRef\":this.generateRandom2('insert item'),\n      \"userId\":this.user_info.id,\n      \"typee\":'insert item',\n      \"datee\": momentObj(new Date()).locale('en').format('YYYY-MM-DD HH:mm:ss'),\n      \"logStatus\":0,\n      \"logToken\":JSON.stringify(mdata[0]),\n      \"yearId\":this.year.id,\n      \"store_id\":this.store_info.id\n    }\n    )\n\n this.api.saveitemMulti(mdata[0]).subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Created') { \n     this.firstq = {id:null ,item_id:data['message'] , store_id:this.store_info.id , quantity :mdata[1].quantity ,pay_price:mdata[0].pay_price,perch_price:mdata[0].perch_price ,fq_year:'2022',item_name:mdata[0].item_name }\n     this.saveFierstQty(mdata[0].item_name) \n   }else{\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n   }\n  \n }, (err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n }) \n}\n\nasync saveFierstQty(item_name){  \nthis.api.saveFirstQty(this.firstq).subscribe(data=>{ \n //console.log(data)  \n //this.getItems(item_name) \n\n\n  this.performSyncItem(item_name)\n this.presentToast('تم الحفظ بنجاح' , 'success')\n}, (err) => {\n //console.log(err);\n this.presentToast('1لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n\n this.loadingController.dismiss()\n\n}, () => {\n this.loadingController.dismiss()\n}\n)      \n}\n\npreparenewaccount(){ \n  if (this.selectedAccount.sub_name.length>0 && this.selectedAccount.id == null) {\n    \n  } else {\n    //console.log('slwcted from drop' ) \n    this.selectedAccount.sub_name = this.sub_nameNew\n    this.payInvo.sub_name  =this.selectedAccount.sub_name\n  }\n  this.selectedAccount.id=null  \n  this.selectedAccount.ac_id = 2 \n  this.selectedAccount.sub_type=\"credit\"\n  this.selectedAccount.sub_code=null\n  this.selectedAccount.sub_balance=\"0\"\n  this.selectedAccount.cat_id = 2\n  this.selectedAccount.cat_name = 'الموردين'\n  this.selectedAccount.store_id=this.store_info.id  \n}\n\n\nsaveLogHistoryForInsertItem(){  \n  //let mdata =  this.prepareLogHistory(itemData , firstq , role) \n  //console.log('this.logHistoryArr[0]',this.logHistoryArr[0])\n  \n   let firstq\n   let item \n   if (this.logHistoryArr.length > 1) {\n    item = this.logHistoryArr[1]\n    firstq = this.logHistoryArr[0] \n   }  \n  this.api.saveLogHistoryMulti(item ,firstq,'insert').subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Created') { \n   this.logHistoryArr = []\n   \n   }else{\n     this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger') \n   }\n }, (err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n }) \n}\n\nupdate() {\n  //console.log('papa',this.payInvo)\n  let d : Date = this.payInvo.pay_date  \n  this.payInvo.sub_name = this.selectedAccount.sub_name  \n  this.payInvo.pay_date = this.datePipe.transform(d, 'yyyy-MM-dd')\n  if(this.payInvo.nextPay != null){\n    this.payInvo.nextPay = this.datePipe.transform(d, 'yyyy-MM-dd')\n  }\n \n  if (this.validate() == true) {\n     this.presentLoadingWithOptions('جاري حفظ البيانات ...')\n     this.updateInvo() \n  } \n}\n\nasync  performSyncItem(item_name?){\n  if(item_name){\n    await this.getStockItems(item_name)\n  }else{\n   await this.getAllStockItemsWithouteCounts()\n    await this.getStockItems() \n  }  \n}\n\ngenerateRandom2(role):any{\n  let da = new Date \n  //console.log(da)\n  let randomsNumber = da.getMonth().toString() + da.getDay().toString() + da.getHours().toString()+ da.getMinutes().toString()+da.getSeconds().toString()+da.getMilliseconds().toString() + role\n  return this.store_info.store_ref + randomsNumber \n}\n\n\nupdateInvo(){\n  // Optimized: Update invoice and items together in single API call\n  const invoiceWithItems = {\n    invoice: this.payInvo,\n    items: this.itemList\n  };\n  \n  this.api.updatePerchInvoWithItems(invoiceWithItems).subscribe(\n    (response: any) => {\n      this.handleUpdateSuccess();\n    }, \n    (err) => {\n      this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger').then(()=>{\n        this.loadingController.dismiss()\n      })\n    }\n  );\n}\n\nprivate handleUpdateSuccess() {\n  // Show success message\n  this.presentToast('تم الحفظ بنجاح', 'success');\n  \n  // Update local purchase storage\n  this.purchase = this.purchase.filter(item => item.payInvo.pay_ref != this.payInvo.pay_ref);\n  this.purchase.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  });\n  \n  this.storage.set('purchase', this.purchase).then((response) => {\n    // Purchase saved to local storage\n  });\n\n  let arr: Array<any> = [];\n  arr.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  });\n  \n  // Perform sync\n  this.performSync();\n  \n  // Dismiss loading\n  this.loadingController.dismiss();\n}\n\n \n\n\n  \n deleteSalesitemList4update(){  \n  this.api.deletePerchitemList(this.payInvo.pay_ref).subscribe(data => {\n  //console.log(data)\n  if (data['message'] != 'Post Not Deleted') {\n    this.saveitemList()    \n  }else{\n   this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger').then(()=>{\n    this.loadingController.dismiss()\n  })\n\n  } \n},(err) => {\n  //console.log(err);\n  this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger').then(()=>{\n    this.loadingController.dismiss()\n  })\n  \n }) \n}\n\n\n \n\n\nsaveitemList(){  \nthis.api.savePerchitemList(this.itemList).subscribe(data=>{ \n  //console.log(data)  \n  this.presentToast('تم الحفظ بنجاح' , 'success')\n  this.purchase = this.purchase.filter(item => item.payInvo.pay_ref != this.payInvo.pay_ref);\n  this.purchase.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  })\n  this.storage.set('purchase', this.purchase).then((response) => {\n  //console.log('purchase', response) \n  \n  });\n  let arr:Array<any> = []\n  arr.push({\n    \"payInvo\": this.payInvo,\n    \"itemList\": this.itemList \n  })\n  \n\n  // \n  this.performSync()\n\n\n}, (err) => {\n  //console.log(err);\n  this.presentToast('لم يتم حفظ البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n}, () => {\n  this.loadingController.dismiss()\n}\n)      \n}\n\n \n\n\n    async  performSync(){  \n      this.back()\n    }\n\n\n   async  performSyncDel(){ \n    this.back()\n    }\n\n  async presentAlertConfirm() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'تأكيد!',\n      mode:'ios' ,\n      message: 'هل تريد حذف السجل ؟ ',\n      buttons: [\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          cssClass: 'secondary',\n          id: 'cancel-button',\n          handler: (blah) => {\n            //console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'موافق',\n          id: 'confirm-button',\n          handler: () => {\n            this.deleteSalesInvo()\n          \n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n\ndelete() {\n  this.presentAlertConfirm()\n}\n\n\ndeleteSalesInvo(){ \n  this.presentLoadingWithOptions('جاري حذف البيانات ...')\n  \n  const deletionData = {\n    pay_id: this.payInvo.pay_id,\n    pay_ref: this.payInvo.pay_ref\n  };\n\n  this.api.deletePerchInvoWithItems(deletionData).subscribe(data => {\n    //console.log(data)\n    if (data['success']) {\n      this.purchase = this.purchase.filter(item => item.payInvo.pay_ref != this.payInvo.pay_ref);\n      //console.log(' case ffff ' ,this.purchase)\n      this.storage.set('purchase', this.purchase).then((response) => {\n        //console.log('purchase', response) \n        this.performSyncDel()\n      });\n    }else{\n      this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n    }\n  },(err) => {\n    //console.log(err);\n    this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n  },() => {\n    this.loadingController.dismiss()\n  }) \n}\n\n \n\n\ndeleteSalesitemList(){  \n   this.api.deletePerchitemList(this.payInvo.pay_ref).subscribe(data => {\n   //console.log(data)\n   if (data['message'] != 'Post Not Deleted') {\n   \n      this.purchase = this.purchase.filter(item => item.payInvo.pay_ref != this.payInvo.pay_ref);\n       //console.log(' case ffff ' ,this.purchase)\n      this.storage.set('purchase', this.purchase).then((response) => {\n      //console.log('purchase', response) \n      this.performSyncDel()\n     \n      });\n   }else{\n    this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   }\n },(err) => {\n   //console.log(err);\n   this.presentToast('لم يتم حذف البيانات , خطا في الإتصال حاول مرة اخري' , 'danger')\n   \n  },() => {\n    this.loadingController.dismiss()\n  }) \n}\n\n// Handle account selection from AccountSelectorComponent\nonAccountSelected(account: any) {\n  if (account) {\n    this.selectedAccount = {\n      id: account.id,\n      ac_id: account.ac_id,\n      sub_name: account.sub_name,\n      sub_type: account.sub_type,\n      sub_code: account.sub_code,\n      sub_balance: account.sub_balance,\n      store_id: account.store_id,\n      cat_name: account.cat_name,\n      cat_id: account.cat_id,\n      currentCustumerStatus: account.currentCustumerStatus || 0\n    };\n    \n    // Update invoice with selected account\n    this.payInvo.cust_id = account.id;\n    this.payInvo.sub_name = account.sub_name;\n    \n    console.log('Account selected in edit-perch:', this.selectedAccount);\n  }\n}\n\n// Handle account balance loaded\nonAccountBalanceLoaded(balance: any) {\n  if (balance && this.selectedAccount) {\n    // Update the current supplier status based on balance\n    this.selectedAccount.sub_balance = balance.current_balance;\n    this.selectedAccount.currentCustumerStatus = balance.status === 'debit' ? 0 : 1;\n    console.log('Account balance loaded in edit-perch:', balance);\n  }\n}\n\n// Load account balance when page initializes with existing invoice data\nloadInitialAccountBalance() {\n  if (this.payInvo && this.payInvo.cust_id && this.store_info && this.year) {\n    // Get account balance for the supplier in the invoice\n    this.api.getAccountBalance(this.payInvo.cust_id, this.store_info.id, this.year.id).subscribe(\n      (response: any) => {\n        if (response.success && response.data) {\n          // Update selected account balance\n          this.selectedAccount.sub_balance = response.data.current_balance;\n          this.selectedAccount.currentCustumerStatus = response.data.status === 'debit' ? 0 : 1;\n          \n          // Populate selectedAccount with supplier data\n          this.selectedAccount.id = this.payInvo.cust_id;\n          this.selectedAccount.sub_name = this.payInvo.sub_name;\n          \n          console.log('Initial account balance loaded in edit-perch:', response.data);\n        }\n      },\n      (error) => {\n        console.error('Error loading initial account balance in edit-perch:', error);\n      }\n    );\n  }\n}\n\nsortItemListAlphabetically() {\n  if (!this.itemList || this.itemList.length === 0) {\n    return;\n  }\n  \n  if (this.isItemListSorted) {\n    // If already sorted, restore original order\n    this.sortedItemList = [...this.itemList];\n    this.isItemListSorted = false;\n  } else {\n    // Sort alphabetically by item_name\n    this.sortedItemList = [...this.itemList].sort((a, b) => {\n      const nameA = a.item_name ? a.item_name.toString().toLowerCase() : '';\n      const nameB = b.item_name ? b.item_name.toString().toLowerCase() : '';\n      return nameA.localeCompare(nameB, 'ar', { numeric: true });\n    });\n    this.isItemListSorted = true;\n  }\n}\n\ngetDisplayItemList() {\n  return this.sortedItemList.length > 0 ? this.sortedItemList : this.itemList;\n}\n\nupdateSortedList() {\n  if (this.isItemListSorted) {\n    this.sortItemListAlphabetically();\n  } else {\n    this.sortedItemList = [...this.itemList];\n  }\n}\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}